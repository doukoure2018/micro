{
  "version": 3,
  "sources": ["src/app/interface/categorie-decaissement.ts", "src/app/service/tresorerie-state.service.ts", "src/app/service/TresoreriePrintService.ts", "src/app/pages/dashboard/credit/individuel/attente/detail/analyse-flux-tresorerie/analyse-flux-tresorerie.component.ts", "src/app/pages/dashboard/credit/individuel/attente/detail/analyse-flux-tresorerie/analyse-flux-tresorerie.component.html"],
  "sourcesContent": ["export interface CategorieDecaissement {\r\n    code: string;\r\n    libelle: string;\r\n    ordre: number;\r\n}\r\n\r\n// Cat√©gories pr√©d√©finies\r\nexport const CATEGORIES_DECAISSEMENT: CategorieDecaissement[] = [\r\n    { code: 'ACHAT_MARCHANDISES', libelle: 'Achat marchandises', ordre: 1 },\r\n    { code: 'MAIN_OEUVRE', libelle: \"Co√ªt de main d'≈ìuvre\", ordre: 2 },\r\n    { code: 'INVESTISSEMENT', libelle: 'Investissement', ordre: 3 },\r\n    { code: 'IMPOTS_TAXES', libelle: 'Imp√¥ts et taxes', ordre: 4 },\r\n    { code: 'LOYER', libelle: 'Loyers', ordre: 5 },\r\n    { code: 'UTILITIES', libelle: 'Eau, √âlectricit√©, t√©l√©phone', ordre: 6 },\r\n    { code: 'TRANSPORT', libelle: 'Transport', ordre: 7 },\r\n    { code: 'SALAIRES', libelle: 'Salaire personnel', ordre: 8 },\r\n    { code: 'FRAIS_TELEPHONE', libelle: 'Frais de t√©l√©phone', ordre: 9 },\r\n    { code: 'CHARGES_FINANCIERES', libelle: 'Charges Financi√®res', ordre: 10 },\r\n    { code: 'ENTRETIEN', libelle: 'Entretien et r√©paration', ordre: 11 },\r\n    { code: 'AUTRES_DEPENSES', libelle: 'Autres d√©penses', ordre: 12 }\r\n];\r\n", "// tresorerie-state.service.ts\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { map, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nexport interface PrevisionState {\r\n    numeroMois: number;\r\n    data: any;\r\n    saved: boolean;\r\n    dirty: boolean;\r\n    lastUpdated: Date;\r\n    hasData: boolean;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class TresorerieStateService {\r\n    private previsions = new Map<number, PrevisionState>();\r\n    private currentMonthSubject = new BehaviorSubject<number>(0);\r\n    private previsionsChangedSubject = new BehaviorSubject<void>(undefined);\r\n    private savedMonthsSubject = new BehaviorSubject<Set<number>>(new Set());\r\n\r\n    // Observables publics\r\n    currentMonth$ = this.currentMonthSubject.asObservable().pipe(distinctUntilChanged());\r\n    previsions$ = this.previsionsChangedSubject.asObservable().pipe(map(() => this.previsions));\r\n    savedMonths$ = this.savedMonthsSubject.asObservable();\r\n\r\n    // Getters\r\n    get currentMonth(): number {\r\n        return this.currentMonthSubject.value;\r\n    }\r\n\r\n    get savedMonths(): Set<number> {\r\n        return this.savedMonthsSubject.value;\r\n    }\r\n\r\n    // Navigation\r\n    setCurrentMonth(month: number): void {\r\n        if (month >= 0 && month <= 12) {\r\n            this.currentMonthSubject.next(month);\r\n        }\r\n    }\r\n\r\n    // Gestion des pr√©visions\r\n    getPrevision(month: number): PrevisionState | undefined {\r\n        return this.previsions.get(month);\r\n    }\r\n\r\n    updatePrevision(month: number, data: any, saved: boolean = false, hasData: boolean = true): void {\r\n        const existingPrevision = this.previsions.get(month);\r\n\r\n        this.previsions.set(month, {\r\n            numeroMois: month,\r\n            data: { ...data }, // Clone pour √©viter les mutations\r\n            saved,\r\n            dirty: !saved,\r\n            hasData,\r\n            lastUpdated: new Date()\r\n        });\r\n\r\n        // Mettre √† jour les mois sauvegard√©s\r\n        const savedMonths = new Set(this.savedMonthsSubject.value);\r\n        if (saved) {\r\n            savedMonths.add(month);\r\n        } else if (!hasData) {\r\n            savedMonths.delete(month);\r\n        }\r\n        this.savedMonthsSubject.next(savedMonths);\r\n\r\n        this.previsionsChangedSubject.next(undefined);\r\n    }\r\n\r\n    markAsSaved(month: number): void {\r\n        const prevision = this.previsions.get(month);\r\n        if (prevision) {\r\n            this.previsions.set(month, {\r\n                ...prevision,\r\n                saved: true,\r\n                dirty: false\r\n            });\r\n\r\n            const savedMonths = new Set(this.savedMonthsSubject.value);\r\n            savedMonths.add(month);\r\n            this.savedMonthsSubject.next(savedMonths);\r\n\r\n            this.previsionsChangedSubject.next(undefined);\r\n        }\r\n    }\r\n\r\n    markAsDirty(month: number): void {\r\n        const prevision = this.previsions.get(month);\r\n        if (prevision) {\r\n            this.previsions.set(month, {\r\n                ...prevision,\r\n                dirty: true\r\n            });\r\n            this.previsionsChangedSubject.next(undefined);\r\n        }\r\n    }\r\n\r\n    // Utilitaires\r\n    hasUnsavedChanges(): boolean {\r\n        return Array.from(this.previsions.values()).some((p) => p.dirty);\r\n    }\r\n\r\n    getMonthsWithData(): number[] {\r\n        return Array.from(this.previsions.entries())\r\n            .filter(([_, prevision]) => prevision.hasData)\r\n            .map(([month, _]) => month);\r\n    }\r\n\r\n    getSavedMonths(): number[] {\r\n        return Array.from(this.previsions.entries())\r\n            .filter(([_, prevision]) => prevision.saved)\r\n            .map(([month, _]) => month);\r\n    }\r\n\r\n    getUnsavedMonths(): number[] {\r\n        return Array.from(this.previsions.entries())\r\n            .filter(([_, prevision]) => prevision.hasData && !prevision.saved)\r\n            .map(([month, _]) => month);\r\n    }\r\n\r\n    clearMonth(month: number): void {\r\n        this.previsions.delete(month);\r\n\r\n        const savedMonths = new Set(this.savedMonthsSubject.value);\r\n        savedMonths.delete(month);\r\n        this.savedMonthsSubject.next(savedMonths);\r\n\r\n        this.previsionsChangedSubject.next(undefined);\r\n    }\r\n\r\n    clearAll(): void {\r\n        this.previsions.clear();\r\n        this.savedMonthsSubject.next(new Set());\r\n        this.previsionsChangedSubject.next(undefined);\r\n    }\r\n\r\n    // M√©thode pour charger toutes les pr√©visions d'un coup (apr√®s chargement depuis le backend)\r\n    loadAllPrevisions(previsions: Array<{ numeroMois: number; data: any }>): void {\r\n        this.previsions.clear();\r\n        const savedMonths = new Set<number>();\r\n\r\n        previsions.forEach((prevision) => {\r\n            this.previsions.set(prevision.numeroMois, {\r\n                numeroMois: prevision.numeroMois,\r\n                data: prevision.data,\r\n                saved: true,\r\n                dirty: false,\r\n                hasData: true,\r\n                lastUpdated: new Date()\r\n            });\r\n            savedMonths.add(prevision.numeroMois);\r\n        });\r\n\r\n        this.savedMonthsSubject.next(savedMonths);\r\n        this.previsionsChangedSubject.next(undefined);\r\n    }\r\n\r\n    // M√©thode pour obtenir toutes les pr√©visions pour sauvegarde\r\n    getAllPrevisionsForSave(): Array<{ numeroMois: number; data: any }> {\r\n        return Array.from(this.previsions.entries())\r\n            .filter(([_, prevision]) => prevision.hasData)\r\n            .map(([month, prevision]) => ({\r\n                numeroMois: month,\r\n                data: prevision.data\r\n            }));\r\n    }\r\n\r\n    // M√©thode pour v√©rifier si un mois a des donn√©es\r\n    monthHasData(month: number): boolean {\r\n        const prevision = this.previsions.get(month);\r\n        return prevision?.hasData || false;\r\n    }\r\n\r\n    // M√©thode pour obtenir le statut d'un mois\r\n    getMonthStatus(month: number): 'empty' | 'filled' | 'saved' {\r\n        const prevision = this.previsions.get(month);\r\n\r\n        if (!prevision || !prevision.hasData) {\r\n            return 'empty';\r\n        }\r\n\r\n        if (prevision.saved) {\r\n            return 'saved';\r\n        }\r\n\r\n        return 'filled';\r\n    }\r\n}\r\n", "import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class TresoreriePrintService {\r\n    /**\r\n     * Imprime le tableau de pr√©vision de tr√©sorerie\r\n     * @param tresorerieForm - Le formulaire de tr√©sorerie\r\n     * @param creditParams - Les param√®tres du cr√©dit (inclut la dur√©e)\r\n     * @param demandeIndividuel - Les informations du demandeur (optionnel)\r\n     */\r\n    imprimerTableauTresorerie(tresorerieForm: any, creditParams: any, demandeIndividuel?: any): void {\r\n        const printWindow = window.open('', '_blank', 'width=1400,height=900');\r\n        if (!printWindow) {\r\n            console.error(\"Impossible d'ouvrir la fen√™tre d'impression\");\r\n            return;\r\n        }\r\n\r\n        // R√©cup√©rer la dur√©e depuis creditParams ou demandeIndividuel\r\n        const nombreMois = demandeIndividuel?.dureeDemande || creditParams?.duree || 12;\r\n\r\n        const htmlContent = this.genererHTMLTableau(tresorerieForm, creditParams, demandeIndividuel, nombreMois);\r\n\r\n        printWindow.document.write(htmlContent);\r\n        printWindow.document.close();\r\n\r\n        // Attendre que le contenu soit charg√© avant d'imprimer\r\n        printWindow.onload = () => {\r\n            setTimeout(() => {\r\n                printWindow.print();\r\n                printWindow.close();\r\n            }, 500);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re le HTML complet pour l'impression\r\n     */\r\n    private genererHTMLTableau(tresorerieForm: any, creditParams: any, demandeIndividuel: any, nombreMois: number): string {\r\n        const styles = this.getTableauStyles(nombreMois);\r\n        const content = this.genererContenuTableau(tresorerieForm, creditParams, demandeIndividuel, nombreMois);\r\n\r\n        return `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <meta charset=\"utf-8\">\r\n        <title>Pr√©vision de Tr√©sorerie</title>\r\n        <style>${styles}</style>\r\n      </head>\r\n      <body>\r\n        ${content}\r\n      </body>\r\n      </html>\r\n    `;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re le contenu du tableau de tr√©sorerie\r\n     */\r\n    private genererContenuTableau(tresorerieForm: any, creditParams: any, demandeIndividuel: any, nombreMois: number): string {\r\n        const dateImpression = new Date().toLocaleDateString('fr-FR', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        });\r\n\r\n        const donneesMois = this.extraireDonneesMois(tresorerieForm, nombreMois);\r\n        const totauxAnnuels = this.calculerTotauxAnnuels(donneesMois);\r\n\r\n        return `\r\n      <div class=\"print-container\">\r\n        <!-- En-t√™te -->\r\n        <div class=\"header\">\r\n          <h1>PR√âVISION DE TR√âSORERIE</h1>\r\n          <div class=\"header-info\">\r\n            <div class=\"header-left\">\r\n              ${\r\n                  demandeIndividuel\r\n                      ? `\r\n                <p><strong>Demandeur:</strong> ${demandeIndividuel.prenom} ${demandeIndividuel.nom}</p>\r\n                <p><strong>Demande N¬∞:</strong> ${demandeIndividuel.id || 'N/A'}</p>\r\n              `\r\n                      : `\r\n                <p><strong>Client:</strong> ${creditParams.clientNom || 'N/A'}</p>\r\n              `\r\n              }\r\n              <p><strong>Montant du cr√©dit:</strong> ${this.formatCurrency(creditParams.montantCredit)}</p>\r\n            </div>\r\n            <div class=\"header-right\">\r\n              <p><strong>Dur√©e:</strong> ${nombreMois} mois</p>\r\n              <p><strong>Taux:</strong> ${creditParams.tauxInteret}% annuel</p>\r\n              <p><strong>Date d'impression:</strong> ${dateImpression}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Tableau principal -->\r\n        <div class=\"table-container\">\r\n          ${this.genererTableauPrincipal(donneesMois, totauxAnnuels, nombreMois)}\r\n        </div>\r\n\r\n        <!-- Analyses et indicateurs -->\r\n        <div class=\"analysis-section\">\r\n          ${this.genererAnalyseFinanciere(donneesMois, totauxAnnuels, creditParams, nombreMois)}\r\n        </div>\r\n\r\n        <!-- Pied de page -->\r\n        <div class=\"footer\">\r\n          <div class=\"footer-left\">\r\n            <p>Document g√©n√©r√© automatiquement le ${dateImpression}</p>\r\n          </div>\r\n          <div class=\"footer-right\">\r\n            <p>Page 1/1</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re le tableau principal avec tous les mois (dynamique)\r\n     */\r\n    private genererTableauPrincipal(donneesMois: any[], totauxAnnuels: any, nombreMois: number): string {\r\n        // G√©n√©rer les labels des mois dynamiquement (M0 √† M{nombreMois})\r\n        const moisLabels = Array.from({ length: nombreMois + 1 }, (_, i) => (i === 0 ? 'M0' : `M${i}`));\r\n        const nombreColonnes = nombreMois + 3; // Libell√© + mois + Total\r\n\r\n        return `\r\n      <table class=\"main-table\">\r\n        <thead>\r\n          <tr>\r\n            <th class=\"category-header\">√âL√âMENTS</th>\r\n            ${moisLabels.map((label, index) => `<th class=\"month-header ${index === 0 ? 'month-start' : ''}\">${label}</th>`).join('')}\r\n            <th class=\"total-header\">TOTAL</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <!-- SOLDE D√âBUT -->\r\n          <tr class=\"solde-row\">\r\n            <td class=\"category-cell\"><strong>SOLDE D√âBUT</strong></td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.soldeDebut)}</td>`).join('')}\r\n            <td class=\"total-cell\">-</td>\r\n          </tr>\r\n\r\n          <!-- ENCAISSEMENTS -->\r\n          <tr class=\"section-header\">\r\n            <td class=\"section-title\" colspan=\"${nombreColonnes}\"><strong>ENCAISSEMENTS</strong></td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Ventes</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.ventes)}</td>`).join('')}\r\n            <td class=\"total-cell total-revenue\">${this.formatNumber(totauxAnnuels.ventes)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Autres revenus</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.autresRevenus)}</td>`).join('')}\r\n            <td class=\"total-cell total-revenue\">${this.formatNumber(totauxAnnuels.autresRevenus)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Pr√™t re√ßu</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.pret)}</td>`).join('')}\r\n            <td class=\"total-cell total-revenue\">${this.formatNumber(totauxAnnuels.pret)}</td>\r\n          </tr>\r\n          \r\n          <tr class=\"subtotal-row\">\r\n            <td class=\"category-cell\"><strong>TOTAL ENCAISSEMENTS</strong></td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell total-revenue\"><strong>${this.formatNumber(mois.totalEncaissements)}</strong></td>`).join('')}\r\n            <td class=\"total-cell total-revenue\"><strong>${this.formatNumber(totauxAnnuels.totalEncaissements)}</strong></td>\r\n          </tr>\r\n\r\n          <!-- D√âCAISSEMENTS -->\r\n          <tr class=\"section-header\">\r\n            <td class=\"section-title\" colspan=\"${nombreColonnes}\"><strong>D√âCAISSEMENTS</strong></td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Achat marchandises</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.achatmarchandises)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.achatmarchandises)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Main d'≈ìuvre</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.mainoeuvre)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.mainoeuvre)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Investissement</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.investissement)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.investissement)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Imp√¥ts et taxes</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.impotstaxes)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.impotstaxes)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Loyers</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.loyer)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.loyer)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Eau, √âlectricit√©</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.utilities)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.utilities)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Transport</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.transport)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.transport)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Salaires</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.salaires)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.salaires)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Frais t√©l√©phone</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.fraistelephone)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.fraistelephone)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Charges financi√®res</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.chargesfinancieres)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.chargesfinancieres)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Entretien</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.entretien)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.entretien)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Autres d√©penses</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.autresdepenses)}</td>`).join('')}\r\n            <td class=\"total-cell total-expense\">${this.formatNumber(totauxAnnuels.autresdepenses)}</td>\r\n          </tr>\r\n\r\n          <!-- REMBOURSEMENTS -->\r\n          <tr class=\"section-header\">\r\n            <td class=\"section-title\" colspan=\"${nombreColonnes}\"><strong>REMBOURSEMENTS CR√âDIT</strong></td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Int√©r√™ts √† verser</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell remboursement\">${this.formatNumber(mois.interetsAVerser)}</td>`).join('')}\r\n            <td class=\"total-cell total-remboursement\">${this.formatNumber(totauxAnnuels.interetsAVerser)}</td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Remboursement capital</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell remboursement\">${this.formatNumber(mois.remboursementCapital)}</td>`).join('')}\r\n            <td class=\"total-cell total-remboursement\">${this.formatNumber(totauxAnnuels.remboursementCapital)}</td>\r\n          </tr>\r\n          \r\n          <tr class=\"subtotal-row\">\r\n            <td class=\"category-cell\"><strong>TOTAL D√âCAISSEMENTS</strong></td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell total-expense\"><strong>${this.formatNumber(mois.totalDecaissements)}</strong></td>`).join('')}\r\n            <td class=\"total-cell total-expense\"><strong>${this.formatNumber(totauxAnnuels.totalDecaissements)}</strong></td>\r\n          </tr>\r\n\r\n          <!-- R√âSULTATS -->\r\n          <tr class=\"section-header\">\r\n            <td class=\"section-title\" colspan=\"${nombreColonnes}\"><strong>R√âSULTATS</strong></td>\r\n          </tr>\r\n          \r\n          <tr>\r\n            <td class=\"category-cell\">Disponible en caisse</td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell\">${this.formatNumber(mois.disponibleEnCaisse)}</td>`).join('')}\r\n            <td class=\"total-cell\">-</td>\r\n          </tr>\r\n          \r\n          <tr class=\"result-row\">\r\n            <td class=\"category-cell\"><strong>EXC√âDENT (D√âFICIT)</strong></td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell ${mois.excedentDeficit >= 0 ? 'positive' : 'negative'}\"><strong>${this.formatNumber(mois.excedentDeficit)}</strong></td>`).join('')}\r\n            <td class=\"total-cell ${totauxAnnuels.excedentDeficit >= 0 ? 'positive' : 'negative'}\"><strong>${this.formatNumber(totauxAnnuels.excedentDeficit)}</strong></td>\r\n          </tr>\r\n          \r\n          <tr class=\"solde-row final-row\">\r\n            <td class=\"category-cell\"><strong>SOLDE FIN</strong></td>\r\n            ${donneesMois.map((mois) => `<td class=\"amount-cell ${mois.soldeFin >= 0 ? 'positive' : 'negative'}\"><strong>${this.formatNumber(mois.soldeFin)}</strong></td>`).join('')}\r\n            <td class=\"total-cell\">-</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    `;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re la section d'analyse financi√®re (avec dur√©e dynamique)\r\n     */\r\n    private genererAnalyseFinanciere(donneesMois: any[], totauxAnnuels: any, creditParams: any, nombreMois: number): string {\r\n        // Calculs bas√©s sur le nombre de mois r√©el\r\n        const cashFlowMoyen = totauxAnnuels.excedentDeficit / nombreMois;\r\n        const remboursementMensuelMoyen = (totauxAnnuels.interetsAVerser + totauxAnnuels.remboursementCapital) / nombreMois;\r\n        const ratioRemboursement = totauxAnnuels.totalEncaissements > 0 ? ((totauxAnnuels.interetsAVerser + totauxAnnuels.remboursementCapital) / totauxAnnuels.totalEncaissements) * 100 : 0;\r\n\r\n        // Identifier les mois d√©ficitaires\r\n        const moisDeficitaires = donneesMois.map((mois, index) => ({ mois: index, deficit: mois.excedentDeficit })).filter((item) => item.deficit < 0);\r\n\r\n        // Solde final (dernier mois)\r\n        const soldeFinal = donneesMois[donneesMois.length - 1]?.soldeFin || 0;\r\n\r\n        return `\r\n      <div class=\"analysis-grid\">\r\n        <div class=\"analysis-block\">\r\n          <h3>üìä INDICATEURS CL√âS (${nombreMois} mois)</h3>\r\n          <div class=\"indicators\">\r\n            <div class=\"indicator\">\r\n              <span class=\"indicator-label\">Cash Flow moyen mensuel:</span>\r\n              <span class=\"indicator-value ${cashFlowMoyen >= 0 ? 'positive' : 'negative'}\">${this.formatCurrency(cashFlowMoyen)}</span>\r\n            </div>\r\n            <div class=\"indicator\">\r\n              <span class=\"indicator-label\">Remboursement mensuel moyen:</span>\r\n              <span class=\"indicator-value\">${this.formatCurrency(remboursementMensuelMoyen)}</span>\r\n            </div>\r\n            <div class=\"indicator\">\r\n              <span class=\"indicator-label\">Ratio remboursement/revenus:</span>\r\n              <span class=\"indicator-value ${ratioRemboursement <= 30 ? 'positive' : ratioRemboursement <= 50 ? 'warning' : 'negative'}\">${ratioRemboursement.toFixed(1)}%</span>\r\n            </div>\r\n            <div class=\"indicator\">\r\n              <span class=\"indicator-label\">Solde final (Mois ${nombreMois}):</span>\r\n              <span class=\"indicator-value ${soldeFinal >= 0 ? 'positive' : 'negative'}\">${this.formatCurrency(soldeFinal)}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"analysis-block\">\r\n          <h3>‚ö†Ô∏è POINTS D'ATTENTION</h3>\r\n          <div class=\"alerts\">\r\n            ${\r\n                moisDeficitaires.length > 0\r\n                    ? `\r\n              <div class=\"alert alert-danger\">\r\n                <strong>Mois d√©ficitaires identifi√©s (${moisDeficitaires.length}/${nombreMois}):</strong>\r\n                ${moisDeficitaires.map((item) => `M${item.mois} (${this.formatCurrency(item.deficit)})`).join(', ')}\r\n              </div>\r\n            `\r\n                    : `\r\n              <div class=\"alert alert-success\">\r\n                <strong>‚úì Aucun d√©ficit mensuel identifi√© sur les ${nombreMois} mois</strong>\r\n              </div>\r\n            `\r\n            }\r\n            \r\n            ${\r\n                ratioRemboursement > 50\r\n                    ? `\r\n              <div class=\"alert alert-warning\">\r\n                <strong>Ratio de remboursement √©lev√© (${ratioRemboursement.toFixed(1)}%)</strong> - Risque de tension de tr√©sorerie\r\n              </div>\r\n            `\r\n                    : ''\r\n            }\r\n            \r\n            ${\r\n                cashFlowMoyen < 0\r\n                    ? `\r\n              <div class=\"alert alert-danger\">\r\n                <strong>Cash Flow moyen n√©gatif</strong> - Viabilit√© √† long terme questionn√©e\r\n              </div>\r\n            `\r\n                    : ''\r\n            }\r\n\r\n            ${\r\n                soldeFinal < 0\r\n                    ? `\r\n              <div class=\"alert alert-danger\">\r\n                <strong>Solde final n√©gatif</strong> - Insuffisance de tr√©sorerie en fin de p√©riode\r\n              </div>\r\n            `\r\n                    : ''\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"analysis-block\">\r\n          <h3>üí∞ SYNTH√àSE FINANCI√àRE (${nombreMois} mois)</h3>\r\n          <div class=\"synthesis\">\r\n            <p><strong>Total revenus sur la p√©riode:</strong> ${this.formatCurrency(totauxAnnuels.totalEncaissements)}</p>\r\n            <p><strong>Total charges sur la p√©riode:</strong> ${this.formatCurrency(totauxAnnuels.totalDecaissements)}</p>\r\n            <p><strong>R√©sultat net sur la p√©riode:</strong> \r\n              <span class=\"${totauxAnnuels.excedentDeficit >= 0 ? 'positive' : 'negative'}\">\r\n                ${this.formatCurrency(totauxAnnuels.excedentDeficit)}\r\n              </span>\r\n            </p>\r\n            <p><strong>Total remboursements:</strong> ${this.formatCurrency(totauxAnnuels.interetsAVerser + totauxAnnuels.remboursementCapital)}</p>\r\n            <p><strong>Capacit√© de remboursement:</strong> \r\n              <span class=\"${cashFlowMoyen >= remboursementMensuelMoyen ? 'positive' : 'negative'}\">\r\n                ${cashFlowMoyen >= remboursementMensuelMoyen ? 'Suffisante' : 'Insuffisante'}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n    }\r\n\r\n    /**\r\n     * Extrait les donn√©es de tous les mois du formulaire (dynamique)\r\n     */\r\n    private extraireDonneesMois(tresorerieForm: any, nombreMois: number): any[] {\r\n        const donneesMois = [];\r\n\r\n        // Boucle de 0 √† nombreMois (inclus)\r\n        for (let mois = 0; mois <= nombreMois; mois++) {\r\n            const moisData = tresorerieForm.get(`mois${mois}`)?.getRawValue() || {};\r\n\r\n            donneesMois.push({\r\n                numeroMois: mois,\r\n                soldeDebut: moisData.soldeDebut || 0,\r\n                ventes: moisData.ventes || 0,\r\n                autresRevenus: moisData.autresRevenus || 0,\r\n                pret: moisData.pret || 0,\r\n                achatmarchandises: moisData.achatmarchandises || 0,\r\n                mainoeuvre: moisData.mainoeuvre || 0,\r\n                investissement: moisData.investissement || 0,\r\n                impotstaxes: moisData.impotstaxes || 0,\r\n                loyer: moisData.loyer || 0,\r\n                utilities: moisData.utilities || 0,\r\n                transport: moisData.transport || 0,\r\n                salaires: moisData.salaires || 0,\r\n                fraistelephone: moisData.fraistelephone || 0,\r\n                chargesfinancieres: moisData.chargesfinancieres || 0,\r\n                entretien: moisData.entretien || 0,\r\n                autresdepenses: moisData.autresdepenses || 0,\r\n                interetsAVerser: moisData.interetsAVerser || 0,\r\n                remboursementCapital: moisData.remboursementCapital || 0,\r\n                totalEncaissements: moisData.totalEncaissements || 0,\r\n                totalDecaissements: moisData.totalDecaissements || 0,\r\n                disponibleEnCaisse: moisData.disponibleEnCaisse || 0,\r\n                excedentDeficit: moisData.excedentDeficit || 0,\r\n                soldeFin: moisData.soldeFin || 0\r\n            });\r\n        }\r\n\r\n        return donneesMois;\r\n    }\r\n\r\n    /**\r\n     * Calcule les totaux sur tous les mois\r\n     */\r\n    private calculerTotauxAnnuels(donneesMois: any[]): any {\r\n        const totaux: any = {};\r\n        const champs = [\r\n            'ventes',\r\n            'autresRevenus',\r\n            'pret',\r\n            'achatmarchandises',\r\n            'mainoeuvre',\r\n            'investissement',\r\n            'impotstaxes',\r\n            'loyer',\r\n            'utilities',\r\n            'transport',\r\n            'salaires',\r\n            'fraistelephone',\r\n            'chargesfinancieres',\r\n            'entretien',\r\n            'autresdepenses',\r\n            'interetsAVerser',\r\n            'remboursementCapital',\r\n            'totalEncaissements',\r\n            'totalDecaissements',\r\n            'excedentDeficit'\r\n        ];\r\n\r\n        champs.forEach((champ) => {\r\n            totaux[champ] = donneesMois.reduce((sum, mois) => sum + (mois[champ] || 0), 0);\r\n        });\r\n\r\n        return totaux;\r\n    }\r\n\r\n    /**\r\n     * Formate un montant en devises\r\n     */\r\n    private formatCurrency(amount: number): string {\r\n        if (amount === null || amount === undefined) return '0 GNF';\r\n        return new Intl.NumberFormat('fr-FR', {\r\n            style: 'currency',\r\n            currency: 'GNF',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0\r\n        }).format(amount);\r\n    }\r\n\r\n    /**\r\n     * Formate un nombre\r\n     */\r\n    private formatNumber(value: number): string {\r\n        if (value === null || value === undefined || value === 0) return '-';\r\n        return new Intl.NumberFormat('fr-FR', {\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0\r\n        }).format(value);\r\n    }\r\n\r\n    /**\r\n     * Retourne les styles CSS pour l'impression (adapt√©s au nombre de mois)\r\n     */\r\n    private getTableauStyles(nombreMois: number): string {\r\n        // Ajuster la largeur des colonnes selon le nombre de mois\r\n        const isLongDuration = nombreMois > 12;\r\n        const columnWidth = isLongDuration ? '40px' : '55px';\r\n        const fontSize = isLongDuration ? '6px' : '7px';\r\n        const headerFontSize = isLongDuration ? '6px' : '8px';\r\n        const pageOrientation = nombreMois > 18 ? 'A3 landscape' : 'A4 landscape';\r\n\r\n        return `\r\n      * {\r\n        margin: 0;\r\n        padding: 0;\r\n        box-sizing: border-box;\r\n      }\r\n\r\n      body {\r\n        font-family: 'Arial', sans-serif;\r\n        font-size: 10px;\r\n        line-height: 1.3;\r\n        color: #333;\r\n        background: white;\r\n      }\r\n\r\n      .print-container {\r\n        max-width: ${nombreMois > 18 ? '420mm' : '297mm'};\r\n        margin: 0 auto;\r\n        padding: 10mm;\r\n      }\r\n\r\n      .header {\r\n        text-align: center;\r\n        margin-bottom: 20px;\r\n        border-bottom: 2px solid #333;\r\n        padding-bottom: 15px;\r\n      }\r\n\r\n      .header h1 {\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n        color: #2c3e50;\r\n        margin-bottom: 10px;\r\n      }\r\n\r\n      .header-info {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 9px;\r\n      }\r\n\r\n      .header-left, .header-right {\r\n        text-align: left;\r\n      }\r\n\r\n      .table-container {\r\n        margin-bottom: 20px;\r\n        overflow-x: auto;\r\n      }\r\n\r\n      .main-table {\r\n        width: 100%;\r\n        border-collapse: collapse;\r\n        font-size: ${fontSize};\r\n        table-layout: fixed;\r\n      }\r\n\r\n      .main-table th,\r\n      .main-table td {\r\n        border: 1px solid #333;\r\n        padding: 2px 1px;\r\n        text-align: center;\r\n        vertical-align: middle;\r\n      }\r\n\r\n      .category-header {\r\n        background: #2c3e50;\r\n        color: white;\r\n        font-weight: bold;\r\n        width: ${isLongDuration ? '100px' : '120px'};\r\n        font-size: 9px;\r\n      }\r\n\r\n      .month-header {\r\n        background: #34495e;\r\n        color: white;\r\n        font-weight: bold;\r\n        width: ${columnWidth};\r\n        font-size: ${headerFontSize};\r\n        ${isLongDuration ? 'writing-mode: vertical-rl; text-orientation: mixed;' : ''}\r\n      }\r\n\r\n      .month-start {\r\n        background: #1a5276;\r\n      }\r\n\r\n      .total-header {\r\n        background: #2c3e50;\r\n        color: white;\r\n        font-weight: bold;\r\n        width: ${isLongDuration ? '60px' : '80px'};\r\n        font-size: 9px;\r\n      }\r\n\r\n      .section-header td {\r\n        background: #ecf0f1;\r\n        font-weight: bold;\r\n        color: #2c3e50;\r\n        text-align: center;\r\n        font-size: 9px;\r\n      }\r\n\r\n      .category-cell {\r\n        background: #f8f9fa;\r\n        text-align: left;\r\n        padding-left: 5px;\r\n        font-weight: 500;\r\n        font-size: ${isLongDuration ? '7px' : '8px'};\r\n      }\r\n\r\n      .amount-cell {\r\n        text-align: right;\r\n        padding-right: 2px;\r\n        font-size: ${fontSize};\r\n      }\r\n\r\n      .total-cell {\r\n        background: #ecf0f1;\r\n        text-align: right;\r\n        padding-right: 2px;\r\n        font-weight: bold;\r\n        font-size: ${isLongDuration ? '7px' : '8px'};\r\n      }\r\n\r\n      .total-revenue {\r\n        background: #d5edda;\r\n        color: #155724;\r\n      }\r\n\r\n      .total-expense {\r\n        background: #f8d7da;\r\n        color: #721c24;\r\n      }\r\n\r\n      .total-remboursement {\r\n        background: #fff3cd;\r\n        color: #856404;\r\n      }\r\n\r\n      .subtotal-row td {\r\n        background: #e2e6ea;\r\n        font-weight: bold;\r\n        border-top: 2px solid #333;\r\n      }\r\n\r\n      .result-row td {\r\n        background: #e7f3ff;\r\n        font-weight: bold;\r\n        border-top: 2px solid #333;\r\n        font-size: 9px;\r\n      }\r\n\r\n      .solde-row td {\r\n        background: #f0f8ff;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .final-row td {\r\n        border-bottom: 3px solid #333;\r\n        background: #e6f3ff;\r\n      }\r\n\r\n      .positive {\r\n        color: #28a745;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .negative {\r\n        color: #dc3545;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .warning {\r\n        color: #ffc107;\r\n        font-weight: bold;\r\n      }\r\n\r\n      .remboursement {\r\n        background: #fff8e1;\r\n      }\r\n\r\n      .analysis-section {\r\n        margin-top: 20px;\r\n        page-break-inside: avoid;\r\n      }\r\n\r\n      .analysis-grid {\r\n        display: grid;\r\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n        gap: 15px;\r\n      }\r\n\r\n      .analysis-block {\r\n        border: 1px solid #dee2e6;\r\n        border-radius: 6px;\r\n        padding: 10px;\r\n        background: #f8f9fa;\r\n      }\r\n\r\n      .analysis-block h3 {\r\n        color: #2c3e50;\r\n        font-size: 11px;\r\n        margin-bottom: 8px;\r\n        border-bottom: 1px solid #dee2e6;\r\n        padding-bottom: 3px;\r\n      }\r\n\r\n      .indicators,\r\n      .alerts,\r\n      .synthesis {\r\n        font-size: 9px;\r\n      }\r\n\r\n      .indicator {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        margin-bottom: 5px;\r\n        padding: 3px 0;\r\n      }\r\n\r\n      .indicator-label {\r\n        font-weight: 500;\r\n      }\r\n\r\n      .indicator-value {\r\n        font-weight: bold;\r\n      }\r\n\r\n      .alert {\r\n        padding: 6px;\r\n        margin-bottom: 6px;\r\n        border-radius: 3px;\r\n        font-size: 8px;\r\n      }\r\n\r\n      .alert-success {\r\n        background: #d4edda;\r\n        color: #155724;\r\n        border: 1px solid #c3e6cb;\r\n      }\r\n\r\n      .alert-warning {\r\n        background: #fff3cd;\r\n        color: #856404;\r\n        border: 1px solid #ffeaa7;\r\n      }\r\n\r\n      .alert-danger {\r\n        background: #f8d7da;\r\n        color: #721c24;\r\n        border: 1px solid #f5c6cb;\r\n      }\r\n\r\n      .synthesis p {\r\n        margin-bottom: 4px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      .footer {\r\n        margin-top: 30px;\r\n        padding-top: 10px;\r\n        border-top: 1px solid #dee2e6;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        font-size: 8px;\r\n        color: #6c757d;\r\n      }\r\n\r\n      @media print {\r\n        body { margin: 0; }\r\n        .print-container { padding: 5mm; }\r\n        .analysis-section { page-break-inside: avoid; }\r\n        .footer { page-break-inside: avoid; }\r\n      }\r\n\r\n      @page {\r\n        margin: 8mm;\r\n        size: ${pageOrientation};\r\n      }\r\n    `;\r\n    }\r\n}\r\n", "import { Component, signal, computed, OnInit, inject, effect, ChangeDetectorRef, NgZone, DestroyRef, HostBinding } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { ButtonModule } from 'primeng/button';\r\nimport { TableModule } from 'primeng/table';\r\nimport { InputNumberModule } from 'primeng/inputnumber';\r\nimport { CardModule } from 'primeng/card';\r\nimport { ToastModule } from 'primeng/toast';\r\nimport { ConfirmationService, MessageService } from 'primeng/api';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\nimport { UserService } from '@/service/user.service';\r\nimport { CATEGORIES_DECAISSEMENT } from '@/interface/categorie-decaissement';\r\nimport { FieldsetModule } from 'primeng/fieldset';\r\nimport { DividerModule } from 'primeng/divider';\r\nimport { TextareaModule } from 'primeng/textarea';\r\nimport { InputTextModule } from 'primeng/inputtext';\r\nimport { TagModule } from 'primeng/tag';\r\nimport { MessageModule } from 'primeng/message';\r\nimport { ConfirmDialog } from 'primeng/confirmdialog';\r\nimport { ProgressBarModule } from 'primeng/progressbar';\r\nimport { TooltipModule } from 'primeng/tooltip';\r\nimport { BadgeModule } from 'primeng/badge';\r\n\r\nimport { debounceTime, distinctUntilChanged } from 'rxjs';\r\nimport { ModeVueTresorerieComponent } from './mode-vue-tresorerie/mode-vue-tresorerie.component';\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport { TresorerieStateService } from '@/service/tresorerie-state.service';\r\nimport { TresoreriePrintService } from '@/service/TresoreriePrintService';\r\nimport { SplitButtonModule } from 'primeng/splitbutton';\r\n\r\ninterface LigneTresorerie {\r\n    id: string;\r\n    categorie: string;\r\n    libelle: string;\r\n    type: 'encaissement' | 'decaissement' | 'remboursement' | 'calcul';\r\n    editable: boolean;\r\n    cssClass?: string;\r\n}\r\n@Component({\r\n    selector: 'app-analyse-flux-tresorerie',\r\n    imports: [\r\n        CommonModule,\r\n        RouterLink,\r\n        ButtonModule,\r\n        TableModule,\r\n        InputNumberModule,\r\n        CardModule,\r\n        ToastModule,\r\n        DialogModule,\r\n        DropdownModule,\r\n        ReactiveFormsModule,\r\n        FieldsetModule,\r\n        DialogModule,\r\n        DividerModule,\r\n        InputTextModule,\r\n        TextareaModule,\r\n        TagModule,\r\n        MessageModule,\r\n        ConfirmDialog,\r\n        ProgressBarModule,\r\n        TooltipModule,\r\n        BadgeModule,\r\n        SplitButtonModule,\r\n        FormsModule\r\n    ],\r\n    templateUrl: './analyse-flux-tresorerie.component.html',\r\n    styleUrl: './analyse-flux-tresorerie.component.scss',\r\n    providers: [MessageService, ConfirmationService]\r\n})\r\nexport class AnalyseFluxTresorerieComponent {\r\n    private fb = inject(FormBuilder);\r\n    private userService = inject(UserService);\r\n    private messageService = inject(MessageService);\r\n    private confirmationService = inject(ConfirmationService);\r\n    private route = inject(ActivatedRoute);\r\n    private router = inject(Router);\r\n    private cdr = inject(ChangeDetectorRef);\r\n    private destroyRef = inject(DestroyRef);\r\n    public tresorerieState = inject(TresorerieStateService);\r\n\r\n    private tresoreriePrintService = inject(TresoreriePrintService);\r\n\r\n    // Donn√©es de la demande individuelle\r\n    demandeIndividuelId: number | null = null;\r\n    demandeIndividuel = signal<any>(null);\r\n    garanties = signal<any[]>([]);\r\n\r\n    // √âtat de chargement pour la demande\r\n    loadingDemande = signal(false);\r\n\r\n    // Formulaire principal\r\n    tresorerieForm!: FormGroup;\r\n    creditParamsForm!: FormGroup;\r\n    newClientForm!: FormGroup;\r\n\r\n    // Dialog\r\n    showNewClientDialog = false;\r\n    savingClient = false;\r\n    showHistoryDialog = false;\r\n\r\n    private ngZone = inject(NgZone);\r\n\r\n    // √âtat global\r\n    state = signal({\r\n        hasDossierCredit: false,\r\n        loading: false,\r\n        saving: false,\r\n        viewMode: 'saisie' as 'saisie' | 'vue-ensemble',\r\n        error: null as string | null\r\n    });\r\n\r\n    // Structure du tableau\r\n    lignesTableau: LigneTresorerie[] = [\r\n        // Solde d√©but\r\n        { id: 'soldeDebut', categorie: 'SOLDE_DEBUT', libelle: 'Solde D√©but de p√©riode', type: 'calcul', editable: false, cssClass: 'row-solde-debut' },\r\n\r\n        // Encaissements\r\n        { id: 'ventes', categorie: 'VENTES', libelle: 'Ventes', type: 'encaissement', editable: true, cssClass: 'row-encaissement' },\r\n        { id: 'autresRevenus', categorie: 'AUTRES_REVENUS', libelle: 'Autres revenus', type: 'encaissement', editable: true, cssClass: 'row-encaissement' },\r\n        { id: 'pret', categorie: 'PRET', libelle: 'Pr√™t re√ßu', type: 'encaissement', editable: true, cssClass: 'row-encaissement row-pret' },\r\n\r\n        // Total Encaissements\r\n        { id: 'totalEncaissements', categorie: 'TOTAL_ENC', libelle: 'Total Encaissements', type: 'calcul', editable: false, cssClass: 'row-total row-total-enc' },\r\n\r\n        // D√©caissements\r\n        { id: 'achatmarchandises', categorie: 'ACHAT_MARCHANDISES', libelle: 'Achat marchandises', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'mainoeuvre', categorie: 'MAIN_OEUVRE', libelle: \"Main d'≈ìuvre\", type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'investissement', categorie: 'INVESTISSEMENT', libelle: 'Investissement', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'impotstaxes', categorie: 'IMPOTS_TAXES', libelle: 'Imp√¥ts et taxes', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'loyer', categorie: 'LOYER', libelle: 'Loyer', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'utilities', categorie: 'UTILITIES', libelle: 'Eau, √âlectricit√©', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'transport', categorie: 'TRANSPORT', libelle: 'Transport', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'salaires', categorie: 'SALAIRES', libelle: 'Salaires', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'fraistelephone', categorie: 'FRAIS_TELEPHONE', libelle: 'Frais t√©l√©phone', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'chargesfinancieres', categorie: 'CHARGES_FINANCIERES', libelle: 'Charges financi√®res', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'entretien', categorie: 'ENTRETIEN', libelle: 'Entretien', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n        { id: 'autresdepenses', categorie: 'AUTRES_DEPENSES', libelle: 'Autres d√©penses', type: 'decaissement', editable: true, cssClass: 'row-decaissement' },\r\n\r\n        // Total D√©caissements\r\n        { id: 'totalDecaissements', categorie: 'TOTAL_DEC', libelle: 'Total D√©caissements', type: 'calcul', editable: false, cssClass: 'row-total row-total-dec' },\r\n\r\n        // Disponible et Exc√©dent\r\n        { id: 'disponibleEnCaisse', categorie: 'DISPONIBLE', libelle: 'Disponible en caisse', type: 'calcul', editable: false, cssClass: 'row-calcul' },\r\n        { id: 'excedentDeficit', categorie: 'EXCEDENT', libelle: 'Exc√©dent (D√©ficit)', type: 'calcul', editable: false, cssClass: 'row-calcul row-excedent' },\r\n\r\n        // Remboursements\r\n        { id: 'interetsAVerser', categorie: 'INTERETS', libelle: 'Int√©r√™ts √† verser', type: 'remboursement', editable: true, cssClass: 'row-remboursement' },\r\n        { id: 'remboursementCapital', categorie: 'CAPITAL', libelle: 'Remboursement capital', type: 'remboursement', editable: true, cssClass: 'row-remboursement' },\r\n\r\n        // Solde fin\r\n        { id: 'soldeFin', categorie: 'SOLDE_FIN', libelle: 'Solde Fin de p√©riode', type: 'calcul', editable: false, cssClass: 'row-solde-fin' }\r\n    ];\r\n\r\n    // Colonnes des mois (0 √† 12)\r\n    nombreMois = computed(() => {\r\n        const demande = this.demandeIndividuel();\r\n        return demande?.dureeDemande || 12; // Par d√©faut 12 si pas de demande\r\n    });\r\n\r\n    // Colonnes dynamiques (M0 √† M_duree)\r\n    moisColumns = computed(() => {\r\n        const duree = this.nombreMois();\r\n        return Array.from({ length: duree + 1 }, (_, i) => i); // +1 pour inclure M0\r\n    });\r\n\r\n    // Dernier mois (pour remplacer les r√©f√©rences √† \"12\")\r\n    dernierMois = computed(() => this.nombreMois());\r\n\r\n    // ========================================\r\n    // M√âTHODES POUR LE MODE TABLEAU\r\n    // ========================================\r\n\r\n    /**\r\n     * Obtenir la valeur d'une cellule depuis le formulaire\r\n     */\r\n    getCellValue(ligneId: string, mois: number): number | null {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return null;\r\n        return moisForm.get(ligneId)?.value;\r\n    }\r\n\r\n    /**\r\n     * D√©finir la valeur d'une cellule dans le formulaire\r\n     */\r\n    setCellValue(ligneId: string, mois: number, value: number | null): void {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n        moisForm.patchValue({ [ligneId]: value }, { emitEvent: false });\r\n    }\r\n\r\n    /**\r\n     * G√©rer le changement de valeur dans une cellule du tableau\r\n     */\r\n    onTableCellChange(ligneId: string, mois: number, value: number | null): void {\r\n        // value est directement la valeur, pas event.value\r\n        this.setCellValue(ligneId, mois, value);\r\n\r\n        // Recalculer ce mois et propager aux mois suivants\r\n        this.calculateMonth(mois);\r\n        this.propagateSoldesToFollowingMonths(mois);\r\n\r\n        // Marquer comme modifi√© dans tresorerieState\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (moisForm) {\r\n            this.tresorerieState.updatePrevision(mois, moisForm.getRawValue(), false, true);\r\n        }\r\n\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Propager les soldes de fin vers les mois suivants\r\n     */\r\n    private propagateSoldesToFollowingMonths(fromMois: number): void {\r\n        const duree = this.nombreMois();\r\n        for (let m = fromMois; m < duree; m++) {\r\n            // ‚Üê Remplacer \"12\" par \"duree\"\r\n            const currentMoisForm = this.getMoisFormGroup(m);\r\n            const nextMoisForm = this.getMoisFormGroup(m + 1);\r\n\r\n            if (currentMoisForm && nextMoisForm) {\r\n                const soldeFin = currentMoisForm.get('soldeFin')?.value || 0;\r\n                nextMoisForm.patchValue({ soldeDebut: soldeFin }, { emitEvent: false });\r\n                this.calculateMonth(m + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * V√©rifier si une cellule est √©ditable\r\n     */\r\n    isCellEditable(ligne: LigneTresorerie, mois: number): boolean {\r\n        // Solde d√©but: seulement mois 0\r\n        if (ligne.id === 'soldeDebut') {\r\n            return mois === 0;\r\n        }\r\n\r\n        // Ventes: pas au mois 0\r\n        if (ligne.id === 'ventes' && mois === 0) {\r\n            return false;\r\n        }\r\n\r\n        // Remboursements: pas au mois 0\r\n        if (ligne.type === 'remboursement' && mois === 0) {\r\n            return false;\r\n        }\r\n\r\n        return ligne.editable;\r\n    }\r\n\r\n    /**\r\n     * Obtenir le label du mois pour le tableau\r\n     */\r\n    getTableMoisLabel(mois: number): string {\r\n        return mois === 0 ? 'M0' : `M${mois}`;\r\n    }\r\n\r\n    /**\r\n     * Calculer le cumul pour une ligne\r\n     */\r\n    getCumulForLigne(ligneId: string): number {\r\n        const duree = this.nombreMois();\r\n\r\n        // Pour les lignes de solde, retourner la valeur du dernier mois\r\n        if (ligneId === 'soldeDebut' || ligneId === 'soldeFin' || ligneId === 'disponibleEnCaisse' || ligneId === 'excedentDeficit') {\r\n            return this.getCellValue(ligneId, duree) || 0; // ‚Üê Remplacer \"12\" par \"duree\"\r\n        }\r\n\r\n        // Pour les autres, faire la somme de tous les mois\r\n        let total = 0;\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Remplacer \"12\" par \"duree\"\r\n            total += this.getCellValue(ligneId, mois) || 0;\r\n        }\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * Copier la valeur d'une cellule vers tous les mois suivants\r\n     */\r\n    /**\r\n     * Copier la valeur d'une cellule vers tous les mois suivants\r\n     */\r\n    copyToFollowingMonths(ligneId: string, fromMois: number): void {\r\n        const value = this.getCellValue(ligneId, fromMois);\r\n        const ligne = this.lignesTableau.find((l) => l.id === ligneId);\r\n        const duree = this.nombreMois();\r\n\r\n        if (!ligne) return;\r\n\r\n        // V√©rifier qu'il y a des mois suivants\r\n        if (fromMois >= duree) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: 'Aucun mois suivant disponible pour la copie'\r\n            });\r\n            return;\r\n        }\r\n\r\n        let copiedCount = 0;\r\n        for (let mois = fromMois + 1; mois <= duree; mois++) {\r\n            if (this.isCellEditable(ligne, mois)) {\r\n                this.setCellValue(ligneId, mois, value);\r\n                copiedCount++;\r\n            }\r\n        }\r\n\r\n        // Recalculer tous les mois\r\n        this.calculateAllMonths();\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Copi√©',\r\n            detail: `Valeur \"${this.formatMontant(value || 0)}\" copi√©e de M${fromMois} vers M${fromMois + 1} √† M${duree} (${copiedCount} mois)`\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Copier la valeur vers une plage de mois sp√©cifique\r\n     */\r\n    copyToMonthRange(ligneId: string, fromMois: number, toMois: number): void {\r\n        const value = this.getCellValue(ligneId, fromMois);\r\n        const ligne = this.lignesTableau.find((l) => l.id === ligneId);\r\n        const duree = this.nombreMois();\r\n\r\n        if (!ligne) return;\r\n\r\n        // Limiter toMois √† la dur√©e max\r\n        const maxMois = Math.min(toMois, duree);\r\n\r\n        let copiedCount = 0;\r\n        for (let mois = fromMois + 1; mois <= maxMois; mois++) {\r\n            if (this.isCellEditable(ligne, mois)) {\r\n                this.setCellValue(ligneId, mois, value);\r\n                copiedCount++;\r\n            }\r\n        }\r\n\r\n        this.calculateAllMonths();\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Copi√©',\r\n            detail: `Valeur copi√©e vers ${copiedCount} mois (M${fromMois + 1} √† M${maxMois})`\r\n        });\r\n    }\r\n\r\n    /**\r\n     * R√©initialiser tout le tableau\r\n     */\r\n    resetTableau(): void {\r\n        this.confirmationService.confirm({\r\n            message: 'R√©initialiser toutes les donn√©es du tableau ?',\r\n            header: 'Confirmation',\r\n            icon: 'pi pi-exclamation-triangle',\r\n            accept: () => {\r\n                const duree = this.nombreMois();\r\n                for (let mois = 0; mois <= duree; mois++) {\r\n                    // ‚Üê Dynamique\r\n                    this.resetMonthToDefaults(mois);\r\n                }\r\n\r\n                // Remettre le pr√™t au mois 0\r\n                if (this.creditParams().montantCredit > 0) {\r\n                    this.setCellValue('pret', 0, this.creditParams().montantCredit);\r\n                }\r\n\r\n                this.calculateAllMonths();\r\n                this.tresorerieState.clearAll();\r\n\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'R√©initialis√©',\r\n                    detail: 'Toutes les donn√©es ont √©t√© effac√©es'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Compter les mois avec donn√©es dans le tableau\r\n     */\r\n    getTableMonthsWithData(): number {\r\n        const duree = this.nombreMois();\r\n        let count = 0;\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Dynamique\r\n            if (this.checkIfMoisHasData(this.getMoisFormGroup(mois)?.getRawValue())) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    /**\r\n     * V√©rifier si on peut sauvegarder le tableau (version corrig√©e)\r\n     */\r\n    canSaveTableau(): boolean {\r\n        // V√©rifier via le formulaire directement, pas seulement tresorerieState\r\n        const hasData = this.getTableMonthsWithData() > 0;\r\n        const hasDossier = this.creditParams().dossierId > 0;\r\n        const notSaving = !this.state().saving;\r\n\r\n        return hasData && hasDossier && notSaving;\r\n    }\r\n\r\n    // Observable du mois courant\r\n    currentMonth = signal(0);\r\n\r\n    // Tracking des mois\r\n    moisRenseignes = signal<Set<number>>(new Set());\r\n    moisSauvegardes = signal<Set<number>>(new Set());\r\n\r\n    // Listes et donn√©es\r\n    clients = signal<any[]>([]);\r\n    dossiers = signal<any[]>([]);\r\n    selectedDossier = signal<any>(null);\r\n    hasExistingAnalysis = signal<boolean>(false);\r\n    // Mois de 0 √† 12\r\n    mois = Array.from({ length: 13 }, (_, i) => i);\r\n    categoriesDecaissement = CATEGORIES_DECAISSEMENT;\r\n\r\n    // √âtat actuel du mois en √©dition\r\n    // currentMonthData = signal<any>(null);\r\n    // isEditMode = signal<boolean>(false);\r\n\r\n    showDossiersHistory() {\r\n        this.showHistoryDialog = true;\r\n    }\r\n\r\n    getStatutSeverity(statut: string): 'success' | 'info' | 'warn' | 'secondary' | 'contrast' | 'danger' | undefined {\r\n        if (statut === 'Valid√©') return 'success';\r\n        if (statut === 'En attente') return 'info';\r\n        if (statut === 'Rejet√©') return 'danger';\r\n        return 'secondary';\r\n    }\r\n\r\n    moisEnCoursModification = signal<number | null>(null);\r\n\r\n    // Types d'activit√©\r\n    typesActivite = [\r\n        { label: 'Commerce', value: 'COMMERCE' },\r\n        { label: 'Service', value: 'SERVICE' },\r\n        { label: 'Production', value: 'PRODUCTION' },\r\n        { label: 'Agriculture', value: 'AGRICULTURE' },\r\n        { label: 'Artisanat', value: 'ARTISANAT' },\r\n        { label: 'Autre', value: 'AUTRE' }\r\n    ];\r\n    // Param√®tres du cr√©dit\r\n    creditParams = signal({\r\n        montantCredit: 0,\r\n        tauxInteret: 0,\r\n        duree: 12,\r\n        clientId: 0,\r\n        clientNom: '',\r\n        dossierId: 0\r\n    });\r\n\r\n    // Computed pour v√©rifier si le dossier existe (permet de bloquer le tableau)\r\n    hasDossierCredit = computed(() => this.creditParams().dossierId > 0);\r\n\r\n    // SOLUTION 1: Ajouter un signal pour forcer le refresh du formulaire\r\n    formRefreshTrigger = signal(0);\r\n\r\n    // Calcul de la mensualit√©\r\n    mensualite = computed(() => {\r\n        const params = this.creditParams();\r\n        if (!params.montantCredit || !params.duree || !params.tauxInteret) {\r\n            return { capital: 0, interet: 0, total: 0 };\r\n        }\r\n\r\n        const tauxMensuel = params.tauxInteret / 100 / 12;\r\n        const nombreMensualites = params.duree;\r\n        const montant = params.montantCredit;\r\n\r\n        if (tauxMensuel === 0) {\r\n            const mensualite = montant / nombreMensualites;\r\n            return { capital: mensualite, interet: 0, total: mensualite };\r\n        }\r\n\r\n        const mensualite = (montant * (tauxMensuel * Math.pow(1 + tauxMensuel, nombreMensualites))) / (Math.pow(1 + tauxMensuel, nombreMensualites) - 1);\r\n\r\n        const interetMoyen = mensualite - montant / nombreMensualites;\r\n        const capitalMoyen = montant / nombreMensualites;\r\n\r\n        return {\r\n            capital: capitalMoyen,\r\n            interet: interetMoyen,\r\n            total: mensualite\r\n        };\r\n    });\r\n\r\n    constructor() {\r\n        // S'abonner aux changements de mois\r\n        this.tresorerieState.currentMonth$.pipe(takeUntilDestroyed(this.destroyRef)).subscribe((month) => {\r\n            this.currentMonth.set(month);\r\n            this.loadMonthData(month);\r\n        });\r\n\r\n        // S'abonner aux changements de pr√©visions\r\n        this.tresorerieState.previsions$.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(() => {\r\n            this.updateTrackingSets();\r\n        });\r\n    }\r\n\r\n    // Mise √† jour des sets de tracking\r\n    private updateTrackingSets(): void {\r\n        const monthsWithData = this.tresorerieState.getMonthsWithData();\r\n        const savedMonths = this.tresorerieState.getSavedMonths();\r\n\r\n        this.moisRenseignes.set(new Set(monthsWithData));\r\n        this.moisSauvegardes.set(new Set(savedMonths));\r\n    }\r\n\r\n    ngOnInit() {\r\n        // D'ABORD initialiser les formulaires de base\r\n        this.initializeCreditParamsForm();\r\n        this.initializeNewClientForm();\r\n\r\n        // ENSUITE charger les donn√©es\r\n        this.route.params.pipe(takeUntilDestroyed(this.destroyRef)).subscribe((params) => {\r\n            this.demandeIndividuelId = params['demandeindividuelId'] ? parseInt(params['demandeindividuelId'], 10) : null;\r\n\r\n            if (this.demandeIndividuelId) {\r\n                this.loadDemandeIndividuel();\r\n            }\r\n        });\r\n\r\n        this.loadInitialParams();\r\n    }\r\n\r\n    loadDemandeIndividuel() {\r\n        if (!this.demandeIndividuelId) return;\r\n\r\n        this.loadingDemande.set(true);\r\n        this.userService.getDemandeWithGaranties$(this.demandeIndividuelId).subscribe({\r\n            next: (response) => {\r\n                console.log('Response demandeIndividuel:', response);\r\n\r\n                if (response.data?.demandeIndividuel) {\r\n                    const demande = response.data.demandeIndividuel;\r\n                    this.demandeIndividuel.set(demande);\r\n                    this.garanties.set(demande.garanties || []);\r\n                    // ‚≠ê IMPORTANT: Initialiser le formulaire APR√àS avoir la dur√©e\r\n                    this.initializeForm();\r\n                    this.setupCalculations();\r\n                    // Pr√©-remplir le formulaire des param√®tres du cr√©dit\r\n                    this.preFillCreditParams(demande);\r\n\r\n                    // V√©rifier si un dossier de cr√©dit existe\r\n                    if (response.data.hasDossierCredit && response.data.dossierCredit) {\r\n                        console.log('Dossier de cr√©dit existant trouv√©:', response.data.dossierCredit);\r\n                        this.handleExistingDossierWithPrevisions(response.data.dossierCredit);\r\n                    } else if (response.data.hasDemandeCredit && response.data.demande_credit) {\r\n                        // Si pas de dossier mais une demande de cr√©dit existe\r\n                        this.handleExistingDemandeCredit(response.data.demande_credit);\r\n                    }\r\n                }\r\n                this.loadingDemande.set(false);\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement demande:', error);\r\n                this.loadingDemande.set(false);\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de charger la demande individuelle'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    handleExistingDemandeCredit(demandeCredit: any) {\r\n        console.log('Handling existing demande credit:', demandeCredit);\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Demande de cr√©dit existante',\r\n            detail: \"Une demande de cr√©dit existe mais aucun dossier d'analyse n'a √©t√© cr√©√©\"\r\n        });\r\n    }\r\n\r\n    handleExistingDossierWithPrevisions(dossierCredit: any) {\r\n        console.log('Handling existing dossier with previsions:', dossierCredit);\r\n\r\n        // Mettre √† jour les param√®tres du cr√©dit avec les infos du dossier\r\n        this.creditParams.update((params) => ({\r\n            ...params,\r\n            dossierId: dossierCredit.id,\r\n            montantCredit: dossierCredit.montantDemande || params.montantCredit,\r\n            duree: dossierCredit.dureeMois || params.duree,\r\n            tauxInteret: dossierCredit.tauxInteret || params.tauxInteret\r\n        }));\r\n\r\n        // Mettre √† jour le formulaire aussi\r\n        this.creditParamsForm.patchValue(\r\n            {\r\n                montantCredit: dossierCredit.montantDemande,\r\n                duree: dossierCredit.dureeMois,\r\n                tauxInteret: dossierCredit.tauxInteret\r\n            },\r\n            { emitEvent: false }\r\n        );\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Dossier existant',\r\n            detail: `Dossier de cr√©dit N¬∞${dossierCredit.id} trouv√© - Chargement des pr√©visions...`\r\n        });\r\n\r\n        // Charger les pr√©visions pour ce dossier\r\n        this.loadPrevisionsForDossier(dossierCredit.id);\r\n    }\r\n\r\n    private loadPrevisionsForDossier(dossierId: number) {\r\n        console.log('Loading previsions for dossier:', dossierId);\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getPrevisionsTresorerie$(dossierId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.previsions?.length! > 0) {\r\n                    // R√©initialiser le service d'√©tat\r\n                    this.tresorerieState.clearAll();\r\n\r\n                    const previsions = response.data.previsions!;\r\n\r\n                    // Charger chaque pr√©vision dans le formulaire\r\n                    previsions.forEach((prevision: any) => {\r\n                        this.loadPrevisionIntoForm(prevision);\r\n                    });\r\n\r\n                    // Recalculer tous les mois APR√àS avoir charg√© toutes les donn√©es\r\n                    setTimeout(() => {\r\n                        this.calculateAllMonths();\r\n                        this.cdr.detectChanges();\r\n                    }, 100);\r\n\r\n                    this.messageService.add({\r\n                        severity: 'success',\r\n                        summary: 'Pr√©visions charg√©es',\r\n                        detail: `${previsions.length} mois charg√©s`\r\n                    });\r\n                }\r\n\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement pr√©visions:', error);\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Charger une pr√©vision dans le formulaire (pour le mode tableau)\r\n     */\r\n    private loadPrevisionIntoForm(prevision: any): void {\r\n        const moisNum = prevision.numeroMois;\r\n        const moisForm = this.getMoisFormGroup(moisNum);\r\n\r\n        if (!moisForm) {\r\n            console.warn(`FormGroup pour mois ${moisNum} non trouv√©`);\r\n            return;\r\n        }\r\n\r\n        // Extraire les donn√©es\r\n        const formData = this.extractPrevisionFormData(prevision);\r\n\r\n        // Mettre √† jour le formulaire\r\n        moisForm.patchValue(formData, { emitEvent: false });\r\n\r\n        // Mettre √† jour le service d'√©tat\r\n        this.tresorerieState.updatePrevision(\r\n            moisNum,\r\n            formData,\r\n            true, // saved\r\n            true // hasData\r\n        );\r\n\r\n        // Mettre √† jour les tracking sets\r\n        this.moisSauvegardes.update((set) => {\r\n            set.add(moisNum);\r\n            return new Set(set);\r\n        });\r\n\r\n        this.moisRenseignes.update((set) => {\r\n            set.add(moisNum);\r\n            return new Set(set);\r\n        });\r\n\r\n        console.log(`Mois ${moisNum} charg√©:`, formData);\r\n    }\r\n\r\n    // M√©thode pour charger les pr√©visions avec meilleure gestion d'√©tat\r\n    private loadPrevisionData(prevision: any) {\r\n        const moisNum = prevision.numeroMois;\r\n        const moisForm = this.getMoisFormGroup(moisNum);\r\n\r\n        if (!moisForm) {\r\n            console.warn(`FormGroup pour mois ${moisNum} non trouv√©`);\r\n            return;\r\n        }\r\n\r\n        // Pr√©parer toutes les donn√©es\r\n        const formData = this.extractPrevisionFormData(prevision);\r\n\r\n        // Mettre √† jour le formulaire\r\n        moisForm.patchValue(formData, { emitEvent: false });\r\n\r\n        // Mettre √† jour le service d'√©tat\r\n        this.tresorerieState.updatePrevision(\r\n            moisNum,\r\n            formData,\r\n            true, // saved\r\n            true // hasData\r\n        );\r\n\r\n        // Forcer la d√©tection de changements\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    // Nouvelle m√©thode pour extraire les donn√©es\r\n    private extractPrevisionFormData(prevision: any): any {\r\n        const formData: any = {\r\n            soldeDebut: prevision.soldeDebut || 0,\r\n            totalEncaissements: prevision.totalEncaissements || 0,\r\n            totalDecaissements: prevision.totalDecaissements || 0,\r\n            disponibleEnCaisse: (prevision.soldeDebut || 0) + (prevision.totalEncaissements || 0),\r\n            excedentDeficit: prevision.excedentDeficit || 0,\r\n            soldeFin: prevision.soldeFin || 0,\r\n            // Valeurs par d√©faut pour tous les champs\r\n            ventes: 0,\r\n            autresRevenus: 0,\r\n            pret: 0,\r\n            achatmarchandises: 0,\r\n            mainoeuvre: 0,\r\n            investissement: 0,\r\n            impotstaxes: 0,\r\n            loyer: 0,\r\n            utilities: 0,\r\n            transport: 0,\r\n            salaires: 0,\r\n            fraistelephone: 0,\r\n            chargesfinancieres: 0,\r\n            entretien: 0,\r\n            autresdepenses: 0,\r\n            interetsAVerser: 0,\r\n            remboursementCapital: 0\r\n        };\r\n\r\n        // Traiter les encaissements\r\n        if (prevision.lignesEncaissement?.length) {\r\n            prevision.lignesEncaissement.forEach((ligne: any) => {\r\n                const montant = ligne.montant || 0;\r\n                switch (ligne.categorie) {\r\n                    case 'VENTES':\r\n                        formData.ventes = montant;\r\n                        break;\r\n                    case 'AUTRES_REVENUS':\r\n                        formData.autresRevenus = montant;\r\n                        break;\r\n                    case 'PRET':\r\n                        formData.pret = montant;\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n\r\n        // Traiter les d√©caissements\r\n        if (prevision.lignesDecaissement?.length) {\r\n            prevision.lignesDecaissement.forEach((ligne: any) => {\r\n                const montant = ligne.montant || 0;\r\n                switch (ligne.categorie) {\r\n                    case 'ACHAT_MARCHANDISES':\r\n                        formData.achatmarchandises = montant;\r\n                        break;\r\n                    case 'MAIN_OEUVRE':\r\n                        formData.mainoeuvre = montant;\r\n                        break;\r\n                    case 'INVESTISSEMENT':\r\n                        formData.investissement = montant;\r\n                        break;\r\n                    case 'IMPOTS_TAXES':\r\n                        formData.impotstaxes = montant;\r\n                        break;\r\n                    case 'LOYER':\r\n                        formData.loyer = montant;\r\n                        break;\r\n                    case 'UTILITIES':\r\n                        formData.utilities = montant;\r\n                        break;\r\n                    case 'TRANSPORT':\r\n                        formData.transport = montant;\r\n                        break;\r\n                    case 'SALAIRES':\r\n                        formData.salaires = montant;\r\n                        break;\r\n                    case 'FRAIS_TELEPHONE':\r\n                        formData.fraistelephone = montant;\r\n                        break;\r\n                    case 'CHARGES_FINANCIERES':\r\n                        formData.chargesfinancieres = montant;\r\n                        break;\r\n                    case 'ENTRETIEN':\r\n                        formData.entretien = montant;\r\n                        break;\r\n                    case 'AUTRES_DEPENSES':\r\n                        formData.autresdepenses = montant;\r\n                        break;\r\n                    case 'INTERETS':\r\n                        formData.interetsAVerser = montant;\r\n                        break;\r\n                    case 'CAPITAL':\r\n                        formData.remboursementCapital = montant;\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n\r\n        return formData;\r\n    }\r\n    // G√©rer un dossier existant\r\n    handleExistingDossier(dossierCredit: any) {\r\n        console.log('Handling existing dossier:', dossierCredit);\r\n\r\n        this.creditParams.update((params) => ({\r\n            ...params,\r\n            dossierId: dossierCredit.id\r\n        }));\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Dossier existant',\r\n            detail: `Dossier de cr√©dit N¬∞${dossierCredit.id} trouv√© - Chargement des pr√©visions...`\r\n        });\r\n\r\n        // IMPORTANT : Charger automatiquement les pr√©visions existantes\r\n        this.loadExistingPrevisionsForDossier(dossierCredit.id);\r\n    }\r\n\r\n    // Nouvelle m√©thode pour charger les pr√©visions d'un dossier existant\r\n    private loadExistingPrevisionsForDossier(dossierId: number) {\r\n        console.log('Loading previsions for dossier:', dossierId);\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getPrevisionsTresorerie$(dossierId).subscribe({\r\n            next: (response) => {\r\n                console.log('Previsions loaded:', response);\r\n\r\n                if (response.data?.previsions && response.data.previsions.length > 0) {\r\n                    const previsions = response.data.previsions;\r\n\r\n                    // Remplir les formulaires avec les donn√©es\r\n                    previsions.forEach((prevision: any) => {\r\n                        const moisNum = prevision.numeroMois;\r\n                        const moisForm = this.getMoisFormGroup(moisNum);\r\n\r\n                        if (moisForm) {\r\n                            // Remplir les totaux\r\n                            moisForm.patchValue({\r\n                                soldeDebut: prevision.soldeDebut || 0,\r\n                                totalEncaissements: prevision.totalEncaissements || 0,\r\n                                totalDecaissements: prevision.totalDecaissements || 0,\r\n                                excedentDeficit: prevision.excedentDeficit || 0,\r\n                                soldeFin: prevision.soldeFin || 0\r\n                            });\r\n\r\n                            // Remplir les lignes d'encaissement\r\n                            if (prevision.lignesEncaissement) {\r\n                                prevision.lignesEncaissement.forEach((ligne: any) => {\r\n                                    switch (ligne.categorie) {\r\n                                        case 'VENTES':\r\n                                            moisForm.patchValue({ ventes: ligne.montant });\r\n                                            break;\r\n                                        case 'AUTRES_REVENUS':\r\n                                            moisForm.patchValue({ autresRevenus: ligne.montant });\r\n                                            break;\r\n                                        case 'PRET':\r\n                                            moisForm.patchValue({ pret: ligne.montant });\r\n                                            break;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            // Remplir les lignes de d√©caissement\r\n                            if (prevision.lignesDecaissement) {\r\n                                prevision.lignesDecaissement.forEach((ligne: any) => {\r\n                                    switch (ligne.categorie) {\r\n                                        case 'ACHAT_MARCHANDISES':\r\n                                            moisForm.patchValue({ achatmarchandises: ligne.montant });\r\n                                            break;\r\n                                        case 'MAIN_OEUVRE':\r\n                                            moisForm.patchValue({ mainoeuvre: ligne.montant });\r\n                                            break;\r\n                                        case 'INVESTISSEMENT':\r\n                                            moisForm.patchValue({ investissement: ligne.montant });\r\n                                            break;\r\n                                        case 'IMPOTS_TAXES':\r\n                                            moisForm.patchValue({ impotstaxes: ligne.montant });\r\n                                            break;\r\n                                        case 'LOYER':\r\n                                            moisForm.patchValue({ loyer: ligne.montant });\r\n                                            break;\r\n                                        case 'UTILITIES':\r\n                                            moisForm.patchValue({ utilities: ligne.montant });\r\n                                            break;\r\n                                        case 'TRANSPORT':\r\n                                            moisForm.patchValue({ transport: ligne.montant });\r\n                                            break;\r\n                                        case 'SALAIRES':\r\n                                            moisForm.patchValue({ salaires: ligne.montant });\r\n                                            break;\r\n                                        case 'FRAIS_TELEPHONE':\r\n                                            moisForm.patchValue({ fraistelephone: ligne.montant });\r\n                                            break;\r\n                                        case 'CHARGES_FINANCIERES':\r\n                                            moisForm.patchValue({ chargesfinancieres: ligne.montant });\r\n                                            break;\r\n                                        case 'ENTRETIEN':\r\n                                            moisForm.patchValue({ entretien: ligne.montant });\r\n                                            break;\r\n                                        case 'AUTRES_DEPENSES':\r\n                                            moisForm.patchValue({ autresdepenses: ligne.montant });\r\n                                            break;\r\n                                        case 'INTERETS':\r\n                                            moisForm.patchValue({ interetsAVerser: ligne.montant });\r\n                                            break;\r\n                                        case 'CAPITAL':\r\n                                            moisForm.patchValue({ remboursementCapital: ligne.montant });\r\n                                            break;\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                            // Marquer ce mois comme sauvegard√© et renseign√©\r\n                            this.moisSauvegardes.update((set) => {\r\n                                set.add(moisNum);\r\n                                return new Set(set);\r\n                            });\r\n\r\n                            this.moisRenseignes.update((set) => {\r\n                                set.add(moisNum);\r\n                                return new Set(set);\r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    // Recalculer tous les mois pour s'assurer de la coh√©rence\r\n                    this.calculateAllMonths();\r\n\r\n                    this.messageService.add({\r\n                        severity: 'success',\r\n                        summary: 'Pr√©visions charg√©es',\r\n                        detail: `${previsions.length} mois de pr√©visions charg√©s avec succ√®s`\r\n                    });\r\n                } else {\r\n                    this.messageService.add({\r\n                        severity: 'info',\r\n                        summary: 'Aucune pr√©vision',\r\n                        detail: 'Aucune pr√©vision trouv√©e pour ce dossier. Vous pouvez commencer la saisie.'\r\n                    });\r\n                }\r\n\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement pr√©visions:', error);\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n\r\n                // Ne pas afficher d'erreur si c'est juste qu'il n'y a pas de pr√©visions\r\n                if (error.status !== 404) {\r\n                    this.messageService.add({\r\n                        severity: 'warn',\r\n                        summary: 'Attention',\r\n                        detail: 'Impossible de charger les pr√©visions existantes'\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // Pr√©-remplir les param√®tres du cr√©dit avec les donn√©es de la demande\r\n    preFillCreditParams(demande: any) {\r\n        // Mettre √† jour le formulaire\r\n        this.creditParamsForm.patchValue({\r\n            montantCredit: demande.montantDemande || 0,\r\n            duree: demande.dureeDemande || 12,\r\n            tauxInteret: demande.tauxInteret || 3\r\n        });\r\n\r\n        // Mettre √† jour les param√®tres\r\n        this.creditParams.update((params) => ({\r\n            ...params,\r\n            montantCredit: demande.montantDemande || 0,\r\n            duree: demande.dureeDemande || 12,\r\n            tauxInteret: demande.tauxInteret || 3,\r\n            clientNom: `${demande.prenom} ${demande.nom}`\r\n        }));\r\n\r\n        // Appliquer les calculs\r\n        setTimeout(() => {\r\n            this.applyCalculations();\r\n        }, 100);\r\n    }\r\n\r\n    // Initialiser le formulaire des param√®tres du cr√©dit\r\n    initializeCreditParamsForm() {\r\n        this.creditParamsForm = this.fb.group({\r\n            clientId: [null, Validators.required],\r\n            montantCredit: [null, [Validators.required, Validators.min(100000)]],\r\n            duree: [12, [Validators.required, Validators.min(1), Validators.max(60)]],\r\n            tauxInteret: [3, [Validators.required, Validators.min(0), Validators.max(100)]]\r\n        });\r\n\r\n        // √âcouter les changements du formulaire\r\n        this.creditParamsForm.valueChanges.subscribe((values) => {\r\n            if (this.creditParamsForm.valid) {\r\n                const client = this.clients().find((c) => c.id === values.clientId);\r\n                this.creditParams.update((params) => ({\r\n                    ...params,\r\n                    ...values,\r\n                    clientNom: client ? `${client.prenom} ${client.nom}` : ''\r\n                }));\r\n            }\r\n        });\r\n    }\r\n\r\n    // Initialiser le formulaire nouveau client\r\n    initializeNewClientForm() {\r\n        this.newClientForm = this.fb.group({\r\n            nom: ['', Validators.required],\r\n            prenom: ['', Validators.required],\r\n            telephone: [\r\n                '',\r\n                [\r\n                    Validators.required,\r\n                    Validators.pattern(/^[0-9]{9}$/) // 9 chiffres exactement\r\n                ]\r\n            ],\r\n            email: ['', Validators.email],\r\n            adresse: [''],\r\n            typeActivite: [''],\r\n            numeroIdentite: ['']\r\n        });\r\n    }\r\n\r\n    trackByIndex(index: number): number {\r\n        return index;\r\n    }\r\n\r\n    // Charger les param√®tres initiaux depuis la route\r\n    loadInitialParams() {\r\n        const queryParams = this.route.snapshot.queryParams;\r\n\r\n        if (queryParams['clientId']) {\r\n            this.creditParamsForm.patchValue({\r\n                clientId: +queryParams['clientId'],\r\n                montantCredit: queryParams['montant'] ? +queryParams['montant'] : null,\r\n                duree: queryParams['duree'] ? +queryParams['duree'] : 12,\r\n                tauxInteret: queryParams['taux'] ? +queryParams['taux'] : 3\r\n            });\r\n        }\r\n    }\r\n\r\n    // M√©thode loadClientDossiers avec debug\r\n    loadClientDossiers(clientId: number) {\r\n        console.log('Loading dossiers for client:', clientId);\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getDossiersByClient$(clientId).subscribe({\r\n            next: (response) => {\r\n                console.log('Response getDossiersByClient:', response);\r\n\r\n                if (response?.data?.dossiers && response.data.dossiers.length > 0) {\r\n                    const dossiers = response.data.dossiers;\r\n                    this.dossiers.set(dossiers);\r\n\r\n                    // Prendre le dossier le plus r√©cent\r\n                    const latestDossier = dossiers[0];\r\n                    console.log('Latest dossier:', latestDossier);\r\n\r\n                    this.selectedDossier.set(latestDossier);\r\n                    this.hasExistingAnalysis.set(true);\r\n\r\n                    // Afficher le dialog de choix\r\n                    this.showAnalysisChoiceDialog(latestDossier);\r\n                } else {\r\n                    console.log('Pas de dossier trouv√©');\r\n                    this.hasExistingAnalysis.set(false);\r\n                    this.dossiers.set([]);\r\n                    this.selectedDossier.set(null);\r\n\r\n                    this.messageService.add({\r\n                        severity: 'info',\r\n                        summary: 'Nouveau client',\r\n                        detail: 'Aucune analyse existante pour ce client'\r\n                    });\r\n                }\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement dossiers:', error);\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n                this.hasExistingAnalysis.set(false);\r\n                this.dossiers.set([]);\r\n\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de charger les dossiers'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // M√©thode showAnalysisChoiceDialog corrig√©e\r\n    showAnalysisChoiceDialog(dossier: any) {\r\n        console.log('Showing dialog for dossier:', dossier);\r\n\r\n        // Formater les dates correctement\r\n        const dateFormatted = this.formatDateFromArray(dossier.dateDemande);\r\n\r\n        this.confirmationService.confirm({\r\n            message: `Ce client a d√©j√† un dossier (N¬∞${dossier.id}) du ${dateFormatted}. \r\n                      Montant: ${this.formatMontant(dossier.montantDemande)} | \r\n                      Dur√©e: ${dossier.dureeMois} mois | \r\n                      Taux: ${dossier.tauxInteret}% |\r\n                      Statut: ${dossier.statut}`,\r\n            header: 'Analyse existante trouv√©e',\r\n            icon: 'pi pi-info-circle',\r\n            acceptLabel: \"Charger l'analyse\",\r\n            rejectLabel: 'Nouvelle analyse',\r\n            accept: () => {\r\n                console.log(\"Chargement de l'analyse existante\");\r\n                this.loadExistingAnalysis(dossier);\r\n            },\r\n            reject: () => {\r\n                console.log(\"Cr√©ation d'une nouvelle analyse\");\r\n                this.startNewAnalysis();\r\n            }\r\n        });\r\n    }\r\n\r\n    // M√©thode pour formater les dates depuis les arrays Java\r\n    formatDateFromArray(dateArray: any): string {\r\n        if (!dateArray) return '';\r\n        if (typeof dateArray === 'string') {\r\n            return new Date(dateArray).toLocaleDateString('fr-FR');\r\n        }\r\n        if (Array.isArray(dateArray) && dateArray.length >= 3) {\r\n            const [year, month, day] = dateArray;\r\n            return new Date(year, month - 1, day).toLocaleDateString('fr-FR');\r\n        }\r\n        return '';\r\n    }\r\n\r\n    calculateAge(dateArray: any): number {\r\n        if (!dateArray || !Array.isArray(dateArray) || dateArray.length < 3) return 0;\r\n        const [year, month, day] = dateArray;\r\n        const birthDate = new Date(year, month - 1, day);\r\n        const today = new Date();\r\n        let age = today.getFullYear() - birthDate.getFullYear();\r\n        const monthDiff = today.getMonth() - birthDate.getMonth();\r\n        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\r\n            age--;\r\n        }\r\n        return age;\r\n    }\r\n\r\n    getTotalGaranties(): number {\r\n        return this.garanties().reduce((sum, g) => sum + (g.valeurGarantie || 0), 0);\r\n    }\r\n\r\n    getCouvertureGaranties(): number {\r\n        const total = this.getTotalGaranties();\r\n        const montant = this.creditParams().montantCredit;\r\n        if (!montant || montant === 0) return 0;\r\n        return (total / montant) * 100;\r\n    }\r\n\r\n    // M√©thodes utilitaires\r\n    formatDate(date: string): string {\r\n        if (!date) return '';\r\n        return new Date(date).toLocaleDateString('fr-FR');\r\n    }\r\n\r\n    formatMontant(montant: number): string {\r\n        if (!montant) return '0 GNF';\r\n        return new Intl.NumberFormat('fr-FR', {\r\n            style: 'currency',\r\n            currency: 'GNF',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0\r\n        }).format(montant);\r\n    }\r\n    // D√©marrer une nouvelle analyse\r\n    startNewAnalysis() {\r\n        console.log('Starting new analysis');\r\n\r\n        // R√©initialiser le dossier ID mais garder le client\r\n        const currentClientId = this.creditParams().clientId;\r\n        const currentClientNom = this.creditParams().clientNom;\r\n\r\n        this.creditParams.update((params) => ({\r\n            ...params,\r\n            dossierId: 0,\r\n            montantCredit: 0,\r\n            duree: 12,\r\n            tauxInteret: 0\r\n        }));\r\n\r\n        // R√©initialiser le formulaire mais garder le client\r\n        this.creditParamsForm.patchValue({\r\n            montantCredit: 0,\r\n            duree: 12,\r\n            tauxInteret: 0\r\n        });\r\n\r\n        // R√©initialiser le formulaire de tr√©sorerie\r\n        this.resetTresorerieForm();\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Nouvelle analyse',\r\n            detail: 'Vous pouvez cr√©er une nouvelle analyse pour ce client'\r\n        });\r\n    }\r\n\r\n    // R√©initialiser le formulaire de tr√©sorerie\r\n    resetTresorerieForm() {\r\n        const duree = this.nombreMois();\r\n        for (let mois = 1; mois <= duree; mois++) {\r\n            // ‚Üê Dynamique\r\n            const moisForm = this.getMoisFormGroup(mois);\r\n            if (moisForm) {\r\n                moisForm.reset({\r\n                    soldeDebut: mois === 1 ? 0 : null,\r\n                    ventes: 0,\r\n                    autresRevenus: 0,\r\n                    pret: 0,\r\n                    achatmarchandises: 0,\r\n                    mainoeuvre: 0,\r\n                    investissement: 0,\r\n                    impotstaxes: 0,\r\n                    loyer: 0,\r\n                    utilities: 0,\r\n                    transport: 0,\r\n                    salaires: 0,\r\n                    fraistelephone: 0,\r\n                    chargesfinancieres: 0,\r\n                    entretien: 0,\r\n                    autresdepenses: 0,\r\n                    interetsAVerser: 0,\r\n                    remboursementCapital: 0,\r\n                    totalEncaissements: 0,\r\n                    totalDecaissements: 0,\r\n                    disponibleEnCaisse: 0,\r\n                    excedentDeficit: 0,\r\n                    soldeFin: 0\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // R√©initialiser compl√®tement le formulaire\r\n    resetAll() {\r\n        this.confirmationService.confirm({\r\n            message: '√ätes-vous s√ªr de vouloir r√©initialiser toutes les donn√©es ?',\r\n            header: 'Confirmation',\r\n            icon: 'pi pi-exclamation-triangle',\r\n            accept: () => {\r\n                // R√©initialiser les param√®tres\r\n                this.creditParams.set({\r\n                    clientId: 0,\r\n                    clientNom: '',\r\n                    montantCredit: 0,\r\n                    duree: 12,\r\n                    tauxInteret: 0,\r\n                    dossierId: 0\r\n                });\r\n\r\n                // R√©initialiser les formulaires\r\n                this.creditParamsForm.reset({\r\n                    clientId: 0,\r\n                    montantCredit: 0,\r\n                    duree: 12,\r\n                    tauxInteret: 0\r\n                });\r\n\r\n                this.resetTresorerieForm();\r\n\r\n                this.hasExistingAnalysis.set(false);\r\n                this.selectedDossier.set(null);\r\n\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'R√©initialisation',\r\n                    detail: 'Toutes les donn√©es ont √©t√© r√©initialis√©es'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Charger une analyse existante\r\n    loadExistingAnalysis(dossier: any) {\r\n        console.log('Loading existing analysis:', dossier);\r\n\r\n        // Mettre √† jour les param√®tres du cr√©dit\r\n        this.creditParams.update((params) => ({\r\n            ...params,\r\n            dossierId: dossier.id,\r\n            montantCredit: dossier.montantDemande,\r\n            duree: dossier.dureeMois,\r\n            tauxInteret: dossier.tauxInteret,\r\n            clientNom: dossier.clientNomComplet\r\n        }));\r\n\r\n        // Mettre √† jour le formulaire\r\n        this.creditParamsForm.patchValue({\r\n            clientId: dossier.clientId,\r\n            montantCredit: dossier.montantDemande,\r\n            duree: dossier.dureeMois,\r\n            tauxInteret: dossier.tauxInteret\r\n        });\r\n\r\n        // Appliquer les calculs\r\n        this.applyCalculations();\r\n\r\n        // Charger les pr√©visions si elles existent\r\n        this.loadPrevisions(dossier.id);\r\n\r\n        this.messageService.add({\r\n            severity: 'success',\r\n            summary: 'Analyse charg√©e',\r\n            detail: `Dossier N¬∞${dossier.id} charg√© avec succ√®s`\r\n        });\r\n    }\r\n\r\n    // Charger les pr√©visions d'un dossier\r\n    loadPrevisions(dossierId: number) {\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getPrevisionsTresorerie$(dossierId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.previsions) {\r\n                    // Remplir le formulaire\r\n                    this.populatePrevisionsForm(response.data.previsions);\r\n\r\n                    // Marquer les mois comme sauvegard√©s\r\n                    response.data.previsions.forEach((prevision: any) => {\r\n                        this.moisSauvegardes.update((set) => {\r\n                            set.add(prevision.numeroMois);\r\n                            return new Set(set);\r\n                        });\r\n\r\n                        // Marquer aussi comme renseign√©\r\n                        this.moisRenseignes.update((set) => {\r\n                            set.add(prevision.numeroMois);\r\n                            return new Set(set);\r\n                        });\r\n                    });\r\n\r\n                    // Charger les lignes d'encaissement et d√©caissement\r\n                    response.data.previsions.forEach((prevision: any) => {\r\n                        this.loadLignesPrevision(prevision);\r\n                    });\r\n                }\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement pr√©visions:', error);\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            }\r\n        });\r\n    }\r\n\r\n    // Remplir le formulaire avec les pr√©visions\r\n    populatePrevisionsForm(previsions: any[]) {\r\n        previsions.forEach((prevision) => {\r\n            const moisForm = this.getMoisFormGroup(prevision.numeroMois);\r\n            if (moisForm) {\r\n                moisForm.patchValue({\r\n                    soldeDebut: prevision.soldeDebut,\r\n                    totalEncaissements: prevision.totalEncaissements,\r\n                    totalDecaissements: prevision.totalDecaissements,\r\n                    excedentDeficit: prevision.excedentDeficit,\r\n                    soldeFin: prevision.soldeFin\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Charger les lignes d'une pr√©vision\r\n    loadLignesPrevision(prevision: any) {\r\n        const moisNum = prevision.numeroMois;\r\n\r\n        // Charger les encaissements\r\n        if (prevision.id) {\r\n            this.userService.getLignesEncaissement$(prevision.id).subscribe({\r\n                next: (response) => {\r\n                    if (response.data?.encaissements) {\r\n                        this.populateLignesEncaissement(moisNum, response.data.encaissements);\r\n                    }\r\n                },\r\n                error: (error) => console.error('Erreur chargement encaissements:', error)\r\n            });\r\n\r\n            // Charger les d√©caissements\r\n            this.userService.getLignesDecaissement$(prevision.id).subscribe({\r\n                next: (response) => {\r\n                    if (response.data?.decaissements) {\r\n                        this.populateLignesDecaissement(moisNum, response.data.decaissements);\r\n                    }\r\n                },\r\n                error: (error) => console.error('Erreur chargement d√©caissements:', error)\r\n            });\r\n        }\r\n    }\r\n\r\n    // Remplir les lignes de d√©caissement\r\n    populateLignesDecaissement(moisNum: number, lignes: any[]) {\r\n        const moisForm = this.getMoisFormGroup(moisNum);\r\n        if (!moisForm) return;\r\n\r\n        lignes.forEach((ligne) => {\r\n            switch (ligne.categorie) {\r\n                case 'ACHAT_MARCHANDISES':\r\n                    moisForm.patchValue({ achatmarchandises: ligne.montant });\r\n                    break;\r\n                case 'MAIN_OEUVRE':\r\n                    moisForm.patchValue({ mainoeuvre: ligne.montant });\r\n                    break;\r\n                case 'INVESTISSEMENT':\r\n                    moisForm.patchValue({ investissement: ligne.montant });\r\n                    break;\r\n                case 'IMPOTS_TAXES':\r\n                    moisForm.patchValue({ impotstaxes: ligne.montant });\r\n                    break;\r\n                case 'LOYER':\r\n                    moisForm.patchValue({ loyer: ligne.montant });\r\n                    break;\r\n                case 'UTILITIES':\r\n                    moisForm.patchValue({ utilities: ligne.montant });\r\n                    break;\r\n                case 'TRANSPORT':\r\n                    moisForm.patchValue({ transport: ligne.montant });\r\n                    break;\r\n                case 'SALAIRES':\r\n                    moisForm.patchValue({ salaires: ligne.montant });\r\n                    break;\r\n                case 'FRAIS_TELEPHONE':\r\n                    moisForm.patchValue({ fraistelephone: ligne.montant });\r\n                    break;\r\n                case 'CHARGES_FINANCIERES':\r\n                    moisForm.patchValue({ chargesfinancieres: ligne.montant });\r\n                    break;\r\n                case 'ENTRETIEN':\r\n                    moisForm.patchValue({ entretien: ligne.montant });\r\n                    break;\r\n                case 'AUTRES_DEPENSES':\r\n                    moisForm.patchValue({ autresdepenses: ligne.montant });\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    // Remplir les lignes d'encaissement\r\n    populateLignesEncaissement(moisNum: number, lignes: any[]) {\r\n        const moisForm = this.getMoisFormGroup(moisNum);\r\n        if (!moisForm) return;\r\n\r\n        lignes.forEach((ligne) => {\r\n            switch (ligne.categorie) {\r\n                case 'VENTES':\r\n                    moisForm.patchValue({ ventes: ligne.montant });\r\n                    break;\r\n                case 'AUTRES_REVENUS':\r\n                    moisForm.patchValue({ autresRevenus: ligne.montant });\r\n                    break;\r\n                case 'PRET':\r\n                    moisForm.patchValue({ pret: ligne.montant });\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    // M√©thode pour appliquer les calculs apr√®s mise √† jour des param√®tres\r\n    private applyCalculations() {\r\n        // Juste recalculer tous les mois SANS toucher aux remboursements\r\n        this.calculateAllMonths();\r\n\r\n        this.messageService.add({\r\n            severity: 'success',\r\n            summary: 'Param√®tres appliqu√©s',\r\n            detail: 'Les param√®tres du cr√©dit ont √©t√© mis √† jour'\r\n        });\r\n    }\r\n\r\n    // Mettre √† jour les remboursements dans le formulaire\r\n    private updateRemboursementsInForm(capital: number, interet: number) {\r\n        for (let mois = 1; mois <= 12; mois++) {\r\n            const moisForm = this.getMoisFormGroup(mois);\r\n            if (moisForm) {\r\n                moisForm.patchValue(\r\n                    {\r\n                        interetsAVerser: interet,\r\n                        remboursementCapital: capital\r\n                    },\r\n                    { emitEvent: false }\r\n                ); // √âviter les boucles infinies\r\n            }\r\n        }\r\n    }\r\n    // Sauvegarder nouveau client\r\n    saveNewClient() {\r\n        if (this.newClientForm.invalid) return;\r\n\r\n        this.savingClient = true;\r\n        const clientData = this.newClientForm.value;\r\n\r\n        this.userService.createClient$(clientData).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.client) {\r\n                    const newClient = {\r\n                        ...response.data.client,\r\n                        nomComplet: `${response.data.client.prenom} ${response.data.client.nom}`\r\n                    };\r\n\r\n                    // Ajouter √† la liste\r\n                    this.clients.update((clients) => [...clients, newClient]);\r\n\r\n                    // S√©lectionner automatiquement\r\n                    this.creditParamsForm.patchValue({\r\n                        clientId: newClient.id\r\n                    });\r\n\r\n                    this.showNewClientDialog = false;\r\n                    this.messageService.add({\r\n                        severity: 'success',\r\n                        summary: 'Succ√®s',\r\n                        detail: 'Client cr√©√© avec succ√®s'\r\n                    });\r\n                }\r\n                this.savingClient = false;\r\n            },\r\n            error: (error) => {\r\n                this.savingClient = false;\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de cr√©er le client'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // R√©initialiser les param√®tres\r\n    resetCreditParams() {\r\n        this.creditParamsForm.reset({\r\n            clientId: null,\r\n            montantCredit: null,\r\n            duree: 12,\r\n            tauxInteret: 3\r\n        });\r\n\r\n        this.creditParams.set({\r\n            montantCredit: 0,\r\n            tauxInteret: 0,\r\n            duree: 12,\r\n            clientId: 0,\r\n            clientNom: '',\r\n            dossierId: 0\r\n        });\r\n\r\n        // R√©initialiser aussi le formulaire de tr√©sorerie\r\n        this.initializeForm();\r\n    }\r\n\r\n    // Appliquer les param√®tres\r\n    applyCreditParams() {\r\n        if (this.creditParamsForm.invalid) {\r\n            Object.keys(this.creditParamsForm.controls).forEach((key) => {\r\n                const control = this.creditParamsForm.get(key);\r\n                control?.markAsTouched();\r\n            });\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Formulaire invalide',\r\n                detail: 'Veuillez remplir tous les champs obligatoires'\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Si pas de dossier existant, en cr√©er un\r\n        if (!this.creditParams().dossierId || this.creditParams().dossierId === 0) {\r\n            this.createDossierCredit();\r\n        } else {\r\n            // Sinon, juste mettre √† jour les calculs\r\n            this.applyCalculations();\r\n        }\r\n    }\r\n\r\n    // Cr√©er uniquement le dossier\r\n    public createDossierCredit() {\r\n        const params = this.creditParams();\r\n        const demande = this.demandeIndividuel();\r\n\r\n        const dossierData = {\r\n            demandeindividuelId: this.demandeIndividuelId,\r\n            clientId: params.clientId || null,\r\n            montantDemande: params.montantCredit,\r\n            dureeMois: params.duree,\r\n            tauxInteret: params.tauxInteret,\r\n            statut: 'EN_COURS'\r\n        };\r\n\r\n        this.state.update((s) => ({ ...s, saving: true }));\r\n\r\n        this.userService.createDossierCredit$(dossierData).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.dossier) {\r\n                    this.creditParams.update((params) => ({\r\n                        ...params,\r\n                        dossierId: response.data.dossier!.id!\r\n                    }));\r\n\r\n                    this.messageService.add({\r\n                        severity: 'success',\r\n                        summary: 'Dossier cr√©√©',\r\n                        detail: `Dossier N¬∞${response.data.dossier.id} cr√©√© avec succ√®s`\r\n                    });\r\n\r\n                    this.applyCalculations();\r\n                }\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n            },\r\n            error: (error) => {\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de cr√©er le dossier de cr√©dit'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Charger les param√®tres depuis la route ou l'API\r\n    loadCreditParams() {\r\n        // R√©cup√©rer les param√®tres depuis la route\r\n        const queryParams = this.route.snapshot.queryParams;\r\n        const routeParams = this.route.snapshot.params;\r\n\r\n        // Option 1: Depuis les query params\r\n        const clientId = queryParams['clientId'] || routeParams['clientId'];\r\n        const dossierId = queryParams['dossierId'] || routeParams['dossierId'];\r\n        const montant = queryParams['montant'] || routeParams['montant'];\r\n        const duree = queryParams['duree'] || routeParams['duree'];\r\n        const taux = queryParams['taux'] || routeParams['taux'];\r\n        const clientNom = queryParams['clientNom'] || routeParams['clientNom'];\r\n\r\n        // Si on a un dossier ID, charger depuis l'API\r\n        if (dossierId) {\r\n            this.loadDossierFromAPI(+dossierId);\r\n        }\r\n        // Sinon, utiliser les param√®tres de la route\r\n        else if (clientId) {\r\n            this.creditParams.set({\r\n                clientId: +clientId,\r\n                dossierId: dossierId ? +dossierId : 0,\r\n                montantCredit: montant ? +montant : 0,\r\n                duree: duree ? +duree : 12,\r\n                tauxInteret: taux ? +taux : 0,\r\n                clientNom: clientNom || ''\r\n            });\r\n\r\n            // Si on a un client ID mais pas de nom, charger les infos client\r\n            if (!clientNom && clientId) {\r\n                this.loadClientInfo(+clientId);\r\n            }\r\n        }\r\n        // Si aucun param√®tre, rediriger vers la page de s√©lection\r\n        else {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Param√®tres manquants',\r\n                detail: 'Veuillez s√©lectionner un client et d√©finir les param√®tres du cr√©dit'\r\n            });\r\n            this.router.navigate(['/credit/nouveau']);\r\n        }\r\n    }\r\n\r\n    // Charger les informations du dossier depuis l'API\r\n    loadDossierFromAPI(dossierId: number) {\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getDossierCredit$(dossierId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.dossier) {\r\n                    const dossier = response.data.dossier;\r\n                    this.creditParams.set({\r\n                        clientId: dossier.clientId,\r\n                        clientNom: dossier.clientNomComplet || '',\r\n                        dossierId: dossier.id!,\r\n                        montantCredit: dossier.montantDemande,\r\n                        duree: dossier.dureeMois,\r\n                        tauxInteret: dossier.tauxInteret\r\n                    });\r\n\r\n                    // Charger aussi les pr√©visions existantes si elles existent\r\n                    this.loadExistingPrevisions(dossierId);\r\n                }\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de charger les informations du dossier'\r\n                });\r\n                console.error('Erreur chargement dossier:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    loadExistingPrevisions(dossierId: number) {\r\n        this.userService.getPrevisionsTresorerie$(dossierId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.previsions || response.data?.previsionsTresorerie) {\r\n                    const previsions = response.data.previsions || response.data.previsionsTresorerie;\r\n                    this.populateForm(previsions);\r\n                }\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement pr√©visions:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Charger les informations du client\r\n    loadClientInfo(clientId: number) {\r\n        this.userService.getClient$(clientId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.client) {\r\n                    this.creditParams.update((params) => ({\r\n                        ...params,\r\n                        clientNom: `${response.data.client?.prenom} ${response.data.client?.nom}`\r\n                    }));\r\n                }\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur chargement client:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Am√©liorer initializeForm pour initialiser correctement chaque mois\r\n    initializeForm() {\r\n        const moisGroups: { [key: string]: FormGroup } = {};\r\n        const duree = this.nombreMois();\r\n\r\n        // Cr√©er les formulaires pour les mois 0 √† duree (dynamique)\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            moisGroups[`mois${mois}`] = this.fb.group({\r\n                numeroMois: [mois],\r\n                soldeDebut: [{ value: null, disabled: mois > 0 }],\r\n\r\n                // Encaissements\r\n                ventes: [{ value: null, disabled: mois === 0 }],\r\n                autresRevenus: [null],\r\n                pret: [null],\r\n\r\n                // D√©caissements\r\n                achatmarchandises: [null],\r\n                mainoeuvre: [null],\r\n                investissement: [null],\r\n                impotstaxes: [null],\r\n                loyer: [null],\r\n                utilities: [null],\r\n                transport: [null],\r\n                salaires: [null],\r\n                fraistelephone: [null],\r\n                chargesfinancieres: [null],\r\n                entretien: [null],\r\n                autresdepenses: [null],\r\n\r\n                // Remboursements\r\n                interetsAVerser: [null],\r\n                remboursementCapital: [null],\r\n\r\n                // Calculs (toujours disabled)\r\n                totalEncaissements: [{ value: 0, disabled: true }],\r\n                totalDecaissements: [{ value: 0, disabled: true }],\r\n                disponibleEnCaisse: [{ value: 0, disabled: true }],\r\n                excedentDeficit: [{ value: 0, disabled: true }],\r\n                soldeFin: [{ value: 0, disabled: true }]\r\n            });\r\n        }\r\n\r\n        this.tresorerieForm = this.fb.group(moisGroups);\r\n\r\n        // Initialiser le mois 0 avec un solde d√©but de 0\r\n        const mois0Form = this.getMoisFormGroup(0);\r\n        if (mois0Form) {\r\n            mois0Form.patchValue({ soldeDebut: 0 }, { emitEvent: false });\r\n        }\r\n\r\n        this.setupFormChangeListeners();\r\n    }\r\n    // Am√©liorer checkIfMoisHasData pour consid√©rer null comme vide\r\n    checkIfMoisHasData(values: any): boolean {\r\n        if (!values) return false;\r\n\r\n        const fieldsToCheck = [\r\n            'ventes',\r\n            'autresRevenus',\r\n            'pret',\r\n            'achatmarchandises',\r\n            'mainoeuvre',\r\n            'investissement',\r\n            'impotstaxes',\r\n            'loyer',\r\n            'utilities',\r\n            'transport',\r\n            'salaires',\r\n            'fraistelephone',\r\n            'chargesfinancieres',\r\n            'entretien',\r\n            'autresdepenses',\r\n            'interetsAVerser',\r\n            'remboursementCapital'\r\n        ];\r\n\r\n        return fieldsToCheck.some((field) => {\r\n            const value = values[field];\r\n            return value !== null && value !== undefined && value !== '' && value !== 0;\r\n        });\r\n    }\r\n\r\n    // Obtenir le FormGroup d'un mois\r\n    getMoisFormGroup(mois: number): FormGroup {\r\n        return this.tresorerieForm?.get(`mois${mois}`) as FormGroup;\r\n    }\r\n\r\n    // Mise √† jour de la m√©thode calculateMonth pour g√©rer les valeurs null\r\n    calculateMonth(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        const values = moisForm.getRawValue();\r\n        const safeValue = (val: any) => {\r\n            if (val === null || val === undefined || val === '') return 0;\r\n            const num = Number(val);\r\n            return isNaN(num) ? 0 : num;\r\n        };\r\n        // Total Encaissements\r\n        const totalEnc = safeValue(values.ventes) + safeValue(values.autresRevenus) + safeValue(values.pret);\r\n\r\n        // Total D√©caissements (sans les remboursements)\r\n        const totalDec =\r\n            safeValue(values.achatmarchandises) +\r\n            safeValue(values.mainoeuvre) +\r\n            safeValue(values.investissement) +\r\n            safeValue(values.impotstaxes) +\r\n            safeValue(values.loyer) +\r\n            safeValue(values.utilities) +\r\n            safeValue(values.transport) +\r\n            safeValue(values.salaires) +\r\n            safeValue(values.fraistelephone) +\r\n            safeValue(values.chargesfinancieres) +\r\n            safeValue(values.entretien) +\r\n            safeValue(values.autresdepenses);\r\n\r\n        // Disponible en caisse\r\n        const disponible = safeValue(values.soldeDebut) + totalEnc;\r\n\r\n        // Exc√©dent/D√©ficit (avant remboursements)\r\n        const excedent = disponible - totalDec;\r\n\r\n        // Solde fin (apr√®s remboursements)\r\n        const soldeFin = excedent - safeValue(values.interetsAVerser) - safeValue(values.remboursementCapital);\r\n\r\n        // Mettre √† jour les valeurs calcul√©es\r\n        moisForm.patchValue(\r\n            {\r\n                totalEncaissements: totalEnc,\r\n                totalDecaissements: totalDec,\r\n                disponibleEnCaisse: disponible,\r\n                excedentDeficit: excedent,\r\n                soldeFin: soldeFin\r\n            },\r\n            { emitEvent: false, onlySelf: true }\r\n        );\r\n\r\n        // Mettre √† jour le solde d√©but du mois suivant\r\n        const duree = this.nombreMois();\r\n        if (mois < duree) {\r\n            // ‚Üê Remplacer \"12\" par \"duree\"\r\n            const nextMoisForm = this.getMoisFormGroup(mois + 1);\r\n            if (nextMoisForm) {\r\n                nextMoisForm.patchValue({ soldeDebut: soldeFin }, { emitEvent: false });\r\n            }\r\n        }\r\n\r\n        this.cdr.markForCheck();\r\n    }\r\n\r\n    // M√©thode pour r√©initialiser un mois manuellement (bouton R√©initialiser)\r\n    resetMonth(mois: number) {\r\n        this.confirmationService.confirm({\r\n            message: `√ätes-vous s√ªr de vouloir r√©initialiser les donn√©es du ${this.getMoisLabel(mois)} ?`,\r\n            header: 'Confirmation',\r\n            icon: 'pi pi-exclamation-triangle',\r\n            accept: () => {\r\n                this.resetMonthToDefaults(mois);\r\n                this.tresorerieState.clearMonth(mois);\r\n\r\n                // Recalculer les mois suivants\r\n                for (let m = mois + 1; m <= 12; m++) {\r\n                    this.calculateMonth(m);\r\n                }\r\n\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'R√©initialisation',\r\n                    detail: `${this.getMoisLabel(mois)} r√©initialis√© avec succ√®s`\r\n                });\r\n\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n\r\n    // Obtenir un r√©sum√©\r\n    getFormSummary() {\r\n        const monthsWithData = this.tresorerieState.getMonthsWithData();\r\n        const savedMonths = this.tresorerieState.getSavedMonths();\r\n        const totalMois = this.nombreMois() + 1;\r\n        return {\r\n            totalMois: totalMois,\r\n            moisRenseignes: monthsWithData.length,\r\n            moisSauvegardes: savedMonths.length,\r\n            pourcentageComplete: Math.round((monthsWithData.length / totalMois) * 100),\r\n            pourcentageSauvegarde: Math.round((savedMonths.length / totalMois) * 100),\r\n            peutSauvegarder: this.canSave()\r\n        };\r\n    }\r\n    // Calculer tous les mois\r\n    calculateAllMonths() {\r\n        const duree = this.nombreMois();\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Remplacer \"12\" par \"duree\"\r\n            this.calculateMonth(mois);\r\n        }\r\n    }\r\n\r\n    // √âcouter les changements\r\n    setupCalculations() {\r\n        const duree = this.nombreMois();\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Dynamique\r\n            const moisForm = this.getMoisFormGroup(mois);\r\n            if (!moisForm) continue;\r\n\r\n            const fieldsToWatch = [\r\n                'ventes',\r\n                'autresRevenus',\r\n                'pret',\r\n                'achatmarchandises',\r\n                'mainoeuvre',\r\n                'investissement',\r\n                'impotstaxes',\r\n                'loyer',\r\n                'utilities',\r\n                'transport',\r\n                'salaires',\r\n                'fraistelephone',\r\n                'chargesfinancieres',\r\n                'entretien',\r\n                'autresdepenses',\r\n                'interetsAVerser',\r\n                'remboursementCapital'\r\n            ];\r\n\r\n            fieldsToWatch.forEach((field) => {\r\n                const control = moisForm.get(field);\r\n                if (control) {\r\n                    control.valueChanges.pipe(debounceTime(300), distinctUntilChanged(), takeUntilDestroyed(this.destroyRef)).subscribe(() => {\r\n                        if (mois === this.currentMonth()) {\r\n                            this.calculateMonth(mois);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // Nouvelle m√©thode pour mettre √† jour le statut d'un mois\r\n    private updateMoisStatus(mois: number, hasData: boolean) {\r\n        if (hasData) {\r\n            this.moisRenseignes.update((set) => {\r\n                set.add(mois);\r\n                return new Set(set);\r\n            });\r\n        } else {\r\n            this.moisRenseignes.update((set) => {\r\n                set.delete(mois);\r\n                return new Set(set);\r\n            });\r\n            // Si pas de donn√©es, retirer aussi de sauvegard√©s\r\n            this.moisSauvegardes.update((set) => {\r\n                set.delete(mois);\r\n                return new Set(set);\r\n            });\r\n        }\r\n    }\r\n\r\n    // Appliquer les remboursements sugg√©r√©s\r\n    applySuggestedRepayments() {\r\n        const mensualite = this.mensualite();\r\n        const duree = this.nombreMois();\r\n\r\n        if (mensualite.total === 0) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: \"Veuillez d'abord d√©finir les param√®tres du cr√©dit\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.confirmationService.confirm({\r\n            message: `Voulez-vous appliquer les remboursements sugg√©r√©s aux mois 1 √† ${duree} ?`,\r\n            header: 'Appliquer les remboursements',\r\n            icon: 'pi pi-question-circle',\r\n            accept: () => {\r\n                for (let mois = 1; mois <= duree; mois++) {\r\n                    // ‚Üê Dynamique\r\n                    const moisForm = this.getMoisFormGroup(mois);\r\n                    if (moisForm) {\r\n                        moisForm.patchValue({\r\n                            interetsAVerser: mensualite.interet,\r\n                            remboursementCapital: mensualite.capital\r\n                        });\r\n                    }\r\n                }\r\n                this.calculateAllMonths();\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'Succ√®s',\r\n                    detail: `Remboursements appliqu√©s aux mois 1 √† ${duree}`\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Charger les donn√©es du client\r\n    loadClientData() {\r\n        // R√©cup√©rer les param√®tres de la route\r\n        const clientId = this.route.snapshot.queryParams['clientId'];\r\n        const dossierId = this.route.snapshot.queryParams['dossierId'];\r\n\r\n        if (clientId) {\r\n            this.creditParams.update((params) => ({\r\n                ...params,\r\n                clientId: +clientId,\r\n                dossierId: dossierId ? +dossierId : 0\r\n            }));\r\n\r\n            // Charger les donn√©es existantes si disponibles\r\n            this.loadExistingData(dossierId);\r\n        }\r\n    }\r\n\r\n    // Charger les donn√©es existantes\r\n    loadExistingData(dossierId: number) {\r\n        if (!dossierId) return;\r\n\r\n        this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n        this.userService.getPrevisionsTresorerie$(dossierId).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.previsionsTresorerie) {\r\n                    this.populateForm(response.data.previsionsTresorerie);\r\n                }\r\n                this.state.update((s) => ({ ...s, loading: false }));\r\n            },\r\n            error: (error) => {\r\n                this.state.update((s) => ({\r\n                    ...s,\r\n                    loading: false,\r\n                    error: error\r\n                }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de charger les donn√©es'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Remplir le formulaire avec les donn√©es existantes\r\n    populateForm(data: any) {\r\n        // Impl√©menter selon la structure de vos donn√©es\r\n        console.log('Populating form with:', data);\r\n    }\r\n\r\n    // Sauvegarder les pr√©visions\r\n    savePrevisions() {\r\n        if (!this.creditParams().dossierId || this.creditParams().dossierId === 0) {\r\n            this.createDossierAndSavePrevisions();\r\n            return;\r\n        }\r\n\r\n        this.saveAllPrevisions();\r\n    }\r\n\r\n    // Sauvegarder toutes les pr√©visions\r\n    private saveAllPrevisions() {\r\n        const dossierId = this.creditParams().dossierId;\r\n        if (!dossierId || dossierId === 0) {\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Erreur',\r\n                detail: 'ID du dossier invalide'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const allPrevisionsData = this.prepareAllPrevisionsData();\r\n        this.state.update((s) => ({ ...s, saving: true }));\r\n\r\n        this.userService.savePrevisionsTresorerie$(dossierId, allPrevisionsData).subscribe({\r\n            next: (response) => {\r\n                // Marquer tous les mois comme sauvegard√©s\r\n                allPrevisionsData.forEach((prevision) => {\r\n                    this.tresorerieState.markAsSaved(prevision.numeroMois);\r\n                });\r\n\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'Succ√®s',\r\n                    detail: 'Toutes les pr√©visions ont √©t√© sauvegard√©es'\r\n                });\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur sauvegarde globale:', error);\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: error.error?.message || 'Impossible de sauvegarder les pr√©visions'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    private validateDataBeforeSave(data: any[]): boolean {\r\n        let isValid = true;\r\n\r\n        data.forEach((prevision, index) => {\r\n            console.log(`Validation Mois ${prevision.numeroMois}:`);\r\n\r\n            // V√©rifier les remboursements\r\n            const interets = prevision.lignesDecaissement.find((l: any) => l.categorie === 'INTERETS');\r\n            const capital = prevision.lignesDecaissement.find((l: any) => l.categorie === 'CAPITAL');\r\n\r\n            if (interets) {\r\n                console.log(`  - Int√©r√™ts: ${interets.montant} GNF`);\r\n            } else {\r\n                console.log(`  - Int√©r√™ts: non d√©finis`);\r\n            }\r\n\r\n            if (capital) {\r\n                console.log(`  - Capital: ${capital.montant} GNF`);\r\n            } else {\r\n                console.log(`  - Capital: non d√©fini`);\r\n            }\r\n\r\n            // V√©rifier la coh√©rence des totaux\r\n            const totalEnc = prevision.lignesEncaissement.reduce((sum: number, l: any) => sum + l.montant, 0);\r\n            const totalDec = prevision.lignesDecaissement.reduce((sum: number, l: any) => sum + l.montant, 0);\r\n\r\n            console.log(`  - Total encaissements calcul√©: ${totalEnc}`);\r\n            console.log(`  - Total d√©caissements calcul√©: ${totalDec}`);\r\n        });\r\n\r\n        return isValid;\r\n    }\r\n\r\n    /**\r\n     * Pr√©parer toutes les donn√©es pour la sauvegarde (version corrig√©e)\r\n     */\r\n    prepareAllPrevisionsData(): any[] {\r\n        const previsions = [];\r\n        const duree = this.nombreMois();\r\n\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Dynamique\r\n            const moisForm = this.getMoisFormGroup(mois);\r\n            if (moisForm && this.checkIfMoisHasData(moisForm.getRawValue())) {\r\n                const monthData = this.prepareMonthData(mois);\r\n                previsions.push(monthData);\r\n            }\r\n        }\r\n\r\n        return previsions;\r\n    }\r\n\r\n    // Sauvegarder uniquement les pr√©visions\r\n    private savePrevisionsOnly() {\r\n        const dossierId = this.creditParams().dossierId;\r\n\r\n        // Double v√©rification\r\n        if (!dossierId || dossierId === 0) {\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Erreur',\r\n                detail: 'ID du dossier invalide'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const previsionData = this.preparePrevisionData();\r\n\r\n        this.state.update((s) => ({ ...s, saving: true }));\r\n\r\n        this.userService.savePrevisionsTresorerie$(dossierId, previsionData).subscribe({\r\n            next: (response) => {\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'Succ√®s',\r\n                    detail: 'Pr√©visions de tr√©sorerie sauvegard√©es'\r\n                });\r\n\r\n                // Optionnel : naviguer vers la page d'analyse\r\n                // this.router.navigate(['/credit/analyse', dossierId]);\r\n            },\r\n            error: (error) => {\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: error.error?.message || 'Impossible de sauvegarder les pr√©visions'\r\n                });\r\n                console.error('Erreur sauvegarde pr√©visions:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Cr√©er le dossier puis sauvegarder\r\n    private createDossierAndSavePrevisions() {\r\n        const params = this.creditParams();\r\n\r\n        // V√©rifier qu'on a les param√®tres minimums\r\n        if (!params.clientId || !params.montantCredit || !params.duree) {\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Param√®tres manquants',\r\n                detail: 'Veuillez remplir tous les param√®tres du cr√©dit'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const dossierData = {\r\n            clientId: params.clientId,\r\n            montantDemande: params.montantCredit,\r\n            dureeMois: params.duree,\r\n            tauxInteret: params.tauxInteret || 0,\r\n            statut: 'EN_COURS'\r\n        };\r\n\r\n        this.state.update((s) => ({ ...s, saving: true }));\r\n\r\n        // 1. Cr√©er le dossier\r\n        this.userService.createDossierCredit$(dossierData).subscribe({\r\n            next: (response) => {\r\n                if (response.data?.dossier) {\r\n                    const dossierId = response.data.dossier.id;\r\n\r\n                    // Mettre √† jour le dossierId\r\n                    this.creditParams.update((p) => ({ ...p, dossierId: dossierId! }));\r\n\r\n                    this.messageService.add({\r\n                        severity: 'success',\r\n                        summary: 'Dossier cr√©√©',\r\n                        detail: `Dossier N¬∞${dossierId} cr√©√© avec succ√®s`\r\n                    });\r\n\r\n                    // 2. Maintenant sauvegarder les pr√©visions\r\n                    this.savePrevisionsOnly();\r\n                } else {\r\n                    throw new Error('R√©ponse invalide lors de la cr√©ation du dossier');\r\n                }\r\n            },\r\n            error: (error) => {\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: 'Impossible de cr√©er le dossier de cr√©dit'\r\n                });\r\n                console.error('Erreur cr√©ation dossier:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Pr√©parer les donn√©es de pr√©vision\r\n    private preparePrevisionData(): any[] {\r\n        const formData = this.tresorerieForm.getRawValue();\r\n        const previsions = [];\r\n\r\n        for (let mois = 1; mois <= 12; mois++) {\r\n            const moisData = formData[`mois${mois}`];\r\n\r\n            const prevision = {\r\n                numeroMois: mois,\r\n                soldeDebut: moisData.soldeDebut || 0,\r\n                lignesEncaissement: [\r\n                    { categorie: 'VENTES', libelle: 'Ventes', montant: moisData.ventes || 0 },\r\n                    { categorie: 'AUTRES_REVENUS', libelle: 'Autres revenus', montant: moisData.autresRevenus || 0 },\r\n                    { categorie: 'PRET', libelle: 'Pr√™t', montant: moisData.pret || 0 }\r\n                ].filter((l) => l.montant > 0),\r\n                lignesDecaissement: [\r\n                    { categorie: 'ACHAT_MARCHANDISES', libelle: 'Achat marchandises', montant: moisData.achatmarchandises || 0 },\r\n                    { categorie: 'MAIN_OEUVRE', libelle: \"Main d'≈ìuvre\", montant: moisData.mainoeuvre || 0 },\r\n                    { categorie: 'INVESTISSEMENT', libelle: 'Investissement', montant: moisData.investissement || 0 },\r\n                    { categorie: 'IMPOTS_TAXES', libelle: 'Imp√¥ts et taxes', montant: moisData.impotstaxes || 0 },\r\n                    { categorie: 'LOYER', libelle: 'Loyer', montant: moisData.loyer || 0 },\r\n                    { categorie: 'UTILITIES', libelle: 'Utilities', montant: moisData.utilities || 0 },\r\n                    { categorie: 'TRANSPORT', libelle: 'Transport', montant: moisData.transport || 0 },\r\n                    { categorie: 'SALAIRES', libelle: 'Salaires', montant: moisData.salaires || 0 },\r\n                    { categorie: 'FRAIS_TELEPHONE', libelle: 'Frais t√©l√©phone', montant: moisData.fraistelephone || 0 },\r\n                    { categorie: 'CHARGES_FINANCIERES', libelle: 'Charges financi√®res', montant: moisData.chargesfinancieres || 0 },\r\n                    { categorie: 'ENTRETIEN', libelle: 'Entretien', montant: moisData.entretien || 0 },\r\n                    { categorie: 'AUTRES_DEPENSES', libelle: 'Autres d√©penses', montant: moisData.autresdepenses || 0 }\r\n                ].filter((l) => l.montant > 0),\r\n                totalEncaissements: moisData.totalEncaissements || 0,\r\n                totalDecaissements: moisData.totalDecaissements || 0,\r\n                excedentDeficit: moisData.excedentDeficit || 0,\r\n                soldeFin: moisData.soldeFin || 0\r\n            };\r\n\r\n            previsions.push(prevision);\r\n        }\r\n\r\n        return previsions;\r\n    }\r\n\r\n    // Nouvelle m√©thode pour g√©rer la transition\r\n    private performMonthTransition(targetMonth: number) {\r\n        // 1. Mettre √† jour l'√©tat imm√©diatement\r\n        this.state.update((s) => ({ ...s, currentMonth: targetMonth }));\r\n\r\n        // 2. Forcer Angular √† d√©tecter les changements\r\n        this.ngZone.run(() => {\r\n            // 3. Rafra√Æchir le formulaire du nouveau mois\r\n            this.refreshMonthData(targetMonth);\r\n\r\n            // 4. Mettre √† jour l'√©tat des champs\r\n            this.updateFieldsStateForMonth(targetMonth);\r\n\r\n            // 5. Recalculer les totaux\r\n            setTimeout(() => {\r\n                this.calculateMonth(targetMonth);\r\n                this.cdr.detectChanges();\r\n            }, 0);\r\n        });\r\n    }\r\n\r\n    // M√©thode am√©lior√©e pour rafra√Æchir les donn√©es d'un mois\r\n    private refreshMonthData(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // Si le mois a des donn√©es sauvegard√©es, les recharger\r\n        if (this.moisSauvegardes().has(mois)) {\r\n            // Les donn√©es sont d√©j√† dans le formulaire, juste forcer la mise √† jour\r\n            const currentValues = moisForm.getRawValue();\r\n            moisForm.patchValue(currentValues, { emitEvent: false });\r\n        }\r\n        // Si le mois a √©t√© renseign√© mais pas sauvegard√©\r\n        else if (this.moisRenseignes().has(mois)) {\r\n            // Garder les donn√©es actuelles\r\n            const currentValues = moisForm.getRawValue();\r\n            moisForm.patchValue(currentValues, { emitEvent: false });\r\n        }\r\n        // Si c'est un nouveau mois vide\r\n        else {\r\n            this.initializeEmptyMonth(mois);\r\n        }\r\n\r\n        // Forcer la mise √† jour de validit√©\r\n        moisForm.updateValueAndValidity({ emitEvent: false });\r\n    }\r\n\r\n    // NOUVELLE m√©thode pour g√©rer l'√©tat des champs selon le mois\r\n    updateFieldsStateForMonth(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // G√©rer le solde d√©but\r\n        const soldeDebutControl = moisForm.get('soldeDebut');\r\n        if (soldeDebutControl) {\r\n            if (mois === 0) {\r\n                soldeDebutControl.enable({ emitEvent: false });\r\n            } else {\r\n                soldeDebutControl.disable({ emitEvent: false });\r\n            }\r\n        }\r\n\r\n        // G√©rer les ventes et autres revenus (disabled pour mois 0)\r\n        const ventesControl = moisForm.get('ventes');\r\n        const autresRevenusControl = moisForm.get('autresRevenus');\r\n\r\n        if (mois === 0) {\r\n            ventesControl?.disable({ emitEvent: false });\r\n            ventesControl?.setValue(null, { emitEvent: false });\r\n        } else {\r\n            ventesControl?.enable({ emitEvent: false });\r\n        }\r\n\r\n        // Les champs de calcul restent toujours disabled\r\n        ['totalEncaissements', 'totalDecaissements', 'disponibleEnCaisse', 'excedentDeficit', 'soldeFin'].forEach((field) => {\r\n            moisForm.get(field)?.disable({ emitEvent: false });\r\n        });\r\n    }\r\n\r\n    // NOUVELLE m√©thode pour r√©initialiser un mois avec les bonnes valeurs par d√©faut\r\n    private resetMonthToDefaults(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // Calculer le solde de d√©but\r\n        let soldeDebut = 0;\r\n        if (mois === 0) {\r\n            soldeDebut = 0;\r\n        } else if (mois > 0) {\r\n            const prevMoisForm = this.getMoisFormGroup(mois - 1);\r\n            if (prevMoisForm) {\r\n                const prevSoldeFin = prevMoisForm.get('soldeFin')?.value;\r\n                soldeDebut = prevSoldeFin || 0;\r\n            }\r\n        }\r\n\r\n        const defaultValues: any = {\r\n            numeroMois: mois,\r\n            soldeDebut: soldeDebut,\r\n            ventes: null,\r\n            autresRevenus: null,\r\n            pret: mois === 0 && this.creditParams().montantCredit > 0 ? this.creditParams().montantCredit : null,\r\n            achatmarchandises: null,\r\n            mainoeuvre: null,\r\n            investissement: null,\r\n            impotstaxes: null,\r\n            loyer: null,\r\n            utilities: null,\r\n            transport: null,\r\n            salaires: null,\r\n            fraistelephone: null,\r\n            chargesfinancieres: null,\r\n            entretien: null,\r\n            autresdepenses: null,\r\n            // NE PAS pr√©-remplir les remboursements - laisser NULL\r\n            interetsAVerser: null,\r\n            remboursementCapital: null,\r\n            totalEncaissements: 0,\r\n            totalDecaissements: 0,\r\n            disponibleEnCaisse: 0,\r\n            excedentDeficit: 0,\r\n            soldeFin: 0\r\n        };\r\n\r\n        moisForm.reset(defaultValues, { emitEvent: false });\r\n        moisForm.markAsPristine();\r\n        moisForm.markAsUntouched();\r\n\r\n        this.calculateMonth(mois);\r\n        moisForm.updateValueAndValidity();\r\n        this.cdr.detectChanges();\r\n    }\r\n    // Nouvelle m√©thode pour initialiser un mois vide\r\n    private initializeEmptyMonth(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // Calculer le solde de d√©but\r\n        let soldeDebut = 0;\r\n        if (mois === 0) {\r\n            soldeDebut = 0;\r\n        } else if (mois > 0) {\r\n            const prevMoisForm = this.getMoisFormGroup(mois - 1);\r\n            if (prevMoisForm) {\r\n                soldeDebut = prevMoisForm.get('soldeFin')?.value || 0;\r\n            }\r\n        }\r\n\r\n        // Valeurs par d√©faut avec null au lieu de 0 pour les champs vides\r\n        const defaultValues = {\r\n            numeroMois: mois,\r\n            soldeDebut: soldeDebut,\r\n            ventes: mois === 0 ? null : null,\r\n            autresRevenus: mois === 0 ? null : null,\r\n            pret: mois === 0 && this.creditParams().montantCredit > 0 ? this.creditParams().montantCredit : null,\r\n            achatmarchandises: null,\r\n            mainoeuvre: null,\r\n            investissement: null,\r\n            impotstaxes: null,\r\n            loyer: null,\r\n            utilities: null,\r\n            transport: null,\r\n            salaires: null,\r\n            fraistelephone: null,\r\n            chargesfinancieres: null,\r\n            entretien: null,\r\n            autresdepenses: null,\r\n            interetsAVerser: mois > 0 && this.mensualite().interet > 0 ? this.mensualite().interet : null,\r\n            remboursementCapital: mois > 0 && this.mensualite().capital > 0 ? this.mensualite().capital : null,\r\n            totalEncaissements: 0,\r\n            totalDecaissements: 0,\r\n            disponibleEnCaisse: 0,\r\n            excedentDeficit: 0,\r\n            soldeFin: 0\r\n        };\r\n\r\n        // Utiliser patchValue sans √©v√©nements\r\n        moisForm.patchValue(defaultValues, { emitEvent: false });\r\n\r\n        // Marquer comme pristine\r\n        moisForm.markAsPristine();\r\n        moisForm.markAsUntouched();\r\n    }\r\n\r\n    // SOLUTION 6: Nouvelle m√©thode pour rafra√Æchir le formulaire d'un mois\r\n    private refreshMonthForm(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // Obtenir les valeurs actuelles\r\n        const currentValues = moisForm.getRawValue();\r\n\r\n        // Si le mois n'a pas de donn√©es et n'est pas sauvegard√©\r\n        if (!this.moisRenseignes().has(mois) && !this.moisSauvegardes().has(mois)) {\r\n            // R√©initialiser avec les valeurs par d√©faut\r\n            this.resetMonthFormValues(mois);\r\n        } else {\r\n            // Forcer la mise √† jour avec les valeurs existantes\r\n            moisForm.patchValue(currentValues, { emitEvent: true });\r\n        }\r\n\r\n        // Mettre √† jour la validit√©\r\n        moisForm.updateValueAndValidity();\r\n\r\n        // Recalculer les totaux\r\n        this.calculateMonth(mois);\r\n    }\r\n\r\n    // SOLUTION 7: M√©thode pour r√©initialiser les valeurs du formulaire\r\n    private resetMonthFormValues(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        let soldeDebut = 0;\r\n\r\n        // Calculer le solde de d√©but\r\n        if (mois === 0) {\r\n            soldeDebut = 0;\r\n        } else if (mois > 0) {\r\n            const prevMoisForm = this.getMoisFormGroup(mois - 1);\r\n            if (prevMoisForm) {\r\n                soldeDebut = prevMoisForm.get('soldeFin')?.value || 0;\r\n            }\r\n        }\r\n\r\n        // Valeurs par d√©faut\r\n        const defaultValues = {\r\n            numeroMois: mois,\r\n            soldeDebut: soldeDebut,\r\n            ventes: 0,\r\n            autresRevenus: 0,\r\n            pret: mois === 0 ? this.creditParams().montantCredit : 0,\r\n            achatmarchandises: 0,\r\n            mainoeuvre: 0,\r\n            investissement: 0,\r\n            impotstaxes: 0,\r\n            loyer: 0,\r\n            utilities: 0,\r\n            transport: 0,\r\n            salaires: 0,\r\n            fraistelephone: 0,\r\n            chargesfinancieres: 0,\r\n            entretien: 0,\r\n            autresdepenses: 0,\r\n            interetsAVerser: 0,\r\n            remboursementCapital: 0,\r\n            totalEncaissements: 0,\r\n            totalDecaissements: 0,\r\n            disponibleEnCaisse: 0,\r\n            excedentDeficit: 0,\r\n            soldeFin: 0\r\n        };\r\n\r\n        // Appliquer les valeurs\r\n        moisForm.reset(defaultValues);\r\n\r\n        // Forcer la mise √† jour\r\n        moisForm.updateValueAndValidity();\r\n    }\r\n\r\n    // Nouvelle m√©thode pour v√©rifier s'il y a des changements non sauvegard√©s\r\n    hasUnsavedChanges(mois: number): boolean {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return false;\r\n\r\n        // V√©rifier si le formulaire a √©t√© modifi√©\r\n        return moisForm.dirty && !this.moisSauvegardes().has(mois);\r\n    }\r\n\r\n    // M√©thode am√©lior√©e pour proc√©der √† la navigation\r\n    private proceedToMonth(mois: number) {\r\n        // Mettre √† jour le mois actuel\r\n        this.state.update((s) => ({ ...s, currentMonth: mois }));\r\n\r\n        // Charger les donn√©es du mois si elles existent\r\n        this.loadMonthData(mois);\r\n\r\n        // Forcer la d√©tection de changements\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    // Nouvelle m√©thode pour charger les donn√©es d'un mois\r\n    private loadMonthData(mois: number): void {\r\n        const previsionState = this.tresorerieState.getPrevision(mois);\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n\r\n        if (!moisForm) return;\r\n\r\n        // AJOUT: Toujours recalculer le solde de d√©but depuis le mois pr√©c√©dent\r\n        if (mois > 0) {\r\n            const prevMoisForm = this.getMoisFormGroup(mois - 1);\r\n            if (prevMoisForm) {\r\n                const soldeFin = prevMoisForm.get('soldeFin')?.value || 0;\r\n                moisForm.patchValue({ soldeDebut: soldeFin }, { emitEvent: false });\r\n            }\r\n        }\r\n\r\n        if (previsionState && previsionState.hasData) {\r\n            // Charger les donn√©es depuis l'√©tat SAUF soldeDebut pour mois > 0\r\n            const dataToLoad = { ...previsionState.data };\r\n            if (mois > 0) {\r\n                delete dataToLoad.soldeDebut; // Ne pas √©craser le solde calcul√©\r\n            }\r\n            moisForm.patchValue(dataToLoad, { emitEvent: false });\r\n\r\n            if (previsionState.saved) {\r\n                moisForm.markAsPristine();\r\n            } else {\r\n                moisForm.markAsDirty();\r\n            }\r\n        } else {\r\n            this.resetMonthToDefaults(mois);\r\n        }\r\n\r\n        this.calculateMonth(mois);\r\n        this.updateFieldsStateForMonth(mois);\r\n        this.cdr.detectChanges();\r\n    }\r\n    // Sauvegarder le mois actuel\r\n    saveCurrentMonth() {\r\n        const currentMonth = this.currentMonth();\r\n        const moisForm = this.getMoisFormGroup(currentMonth);\r\n\r\n        if (!moisForm || !this.creditParams().dossierId) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: 'Veuillez cr√©er un dossier avant de sauvegarder'\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!this.checkIfMoisHasData(moisForm.getRawValue())) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: 'Aucune donn√©e √† sauvegarder pour ce mois'\r\n            });\r\n            return;\r\n        }\r\n\r\n        const monthData = this.prepareMonthData(currentMonth);\r\n        this.state.update((s) => ({ ...s, saving: true }));\r\n\r\n        this.userService.savePrevisionsTresorerie$(this.creditParams().dossierId, [monthData]).subscribe({\r\n            next: (response) => {\r\n                this.tresorerieState.markAsSaved(currentMonth);\r\n                moisForm.markAsPristine();\r\n\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'success',\r\n                    summary: 'Succ√®s',\r\n                    detail: `Mois ${currentMonth} sauvegard√© avec succ√®s`\r\n                });\r\n            },\r\n            error: (error) => {\r\n                console.error('Erreur sauvegarde:', error);\r\n                this.state.update((s) => ({ ...s, saving: false }));\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: error.error?.message || 'Impossible de sauvegarder le mois'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Navigation entre les mois\r\n    goToMonth(mois: number): void {\r\n        // Sauvegarder l'√©tat actuel avant de changer de mois\r\n        this.saveCurrentMonthState();\r\n\r\n        // AJOUT: Recalculer le mois actuel pour s'assurer que soldeFin est √† jour\r\n        this.calculateMonth(this.currentMonth());\r\n\r\n        // AJOUT: Propager les soldes de fin vers les mois suivants\r\n        this.propagateSoldes();\r\n\r\n        // Changer le mois via le service\r\n        this.tresorerieState.setCurrentMonth(mois);\r\n    }\r\n\r\n    // Propager les soldes de fin vers les soldes de d√©but des mois suivants\r\n    private propagateSoldes(): void {\r\n        const duree = this.nombreMois();\r\n        for (let m = 0; m < duree; m++) {\r\n            // ‚Üê Remplacer \"12\" par \"duree\"\r\n            const currentMoisForm = this.getMoisFormGroup(m);\r\n            const nextMoisForm = this.getMoisFormGroup(m + 1);\r\n\r\n            if (currentMoisForm && nextMoisForm) {\r\n                const soldeFin = currentMoisForm.get('soldeFin')?.value || 0;\r\n                nextMoisForm.patchValue({ soldeDebut: soldeFin }, { emitEvent: false });\r\n            }\r\n        }\r\n    }\r\n\r\n    private saveCurrentMonthState(): void {\r\n        const currentMonth = this.currentMonth();\r\n        const currentForm = this.getMoisFormGroup(currentMonth);\r\n\r\n        if (currentForm && this.checkIfMoisHasData(currentForm.getRawValue())) {\r\n            this.tresorerieState.updatePrevision(currentMonth, currentForm.getRawValue(), this.moisSauvegardes().has(currentMonth), true);\r\n        }\r\n    }\r\n\r\n    // Pr√©parer les donn√©es d'un mois\r\n    private prepareMonthData(mois: number): any {\r\n        const moisData = this.getMoisFormGroup(mois).getRawValue();\r\n\r\n        const safeNumber = (val: any): number => {\r\n            if (val === null || val === undefined || val === '') return 0;\r\n            const num = Number(val);\r\n            return isNaN(num) ? 0 : num;\r\n        };\r\n\r\n        const lignesEncaissement = [];\r\n        if (safeNumber(moisData.ventes) > 0) {\r\n            lignesEncaissement.push({\r\n                categorie: 'VENTES',\r\n                libelle: 'Ventes',\r\n                montant: safeNumber(moisData.ventes)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.autresRevenus) > 0) {\r\n            lignesEncaissement.push({\r\n                categorie: 'AUTRES_REVENUS',\r\n                libelle: 'Autres revenus',\r\n                montant: safeNumber(moisData.autresRevenus)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.pret) > 0) {\r\n            lignesEncaissement.push({\r\n                categorie: 'PRET',\r\n                libelle: 'Pr√™t',\r\n                montant: safeNumber(moisData.pret)\r\n            });\r\n        }\r\n\r\n        const lignesDecaissement = [];\r\n        if (safeNumber(moisData.achatmarchandises) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'ACHAT_MARCHANDISES',\r\n                libelle: 'Achat marchandises',\r\n                montant: safeNumber(moisData.achatmarchandises)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.mainoeuvre) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'MAIN_OEUVRE',\r\n                libelle: \"Main d'≈ìuvre\",\r\n                montant: safeNumber(moisData.mainoeuvre)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.investissement) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'INVESTISSEMENT',\r\n                libelle: 'Investissement',\r\n                montant: safeNumber(moisData.investissement)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.impotstaxes) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'IMPOTS_TAXES',\r\n                libelle: 'Imp√¥ts et taxes',\r\n                montant: safeNumber(moisData.impotstaxes)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.loyer) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'LOYER',\r\n                libelle: 'Loyer',\r\n                montant: safeNumber(moisData.loyer)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.utilities) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'UTILITIES',\r\n                libelle: 'Utilities',\r\n                montant: safeNumber(moisData.utilities)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.transport) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'TRANSPORT',\r\n                libelle: 'Transport',\r\n                montant: safeNumber(moisData.transport)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.salaires) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'SALAIRES',\r\n                libelle: 'Salaires',\r\n                montant: safeNumber(moisData.salaires)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.fraistelephone) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'FRAIS_TELEPHONE',\r\n                libelle: 'Frais t√©l√©phone',\r\n                montant: safeNumber(moisData.fraistelephone)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.chargesfinancieres) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'CHARGES_FINANCIERES',\r\n                libelle: 'Charges financi√®res',\r\n                montant: safeNumber(moisData.chargesfinancieres)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.entretien) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'ENTRETIEN',\r\n                libelle: 'Entretien',\r\n                montant: safeNumber(moisData.entretien)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.autresdepenses) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'AUTRES_DEPENSES',\r\n                libelle: 'Autres d√©penses',\r\n                montant: safeNumber(moisData.autresdepenses)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.interetsAVerser) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'INTERETS',\r\n                libelle: 'Int√©r√™ts √† verser',\r\n                montant: safeNumber(moisData.interetsAVerser)\r\n            });\r\n        }\r\n        if (safeNumber(moisData.remboursementCapital) > 0) {\r\n            lignesDecaissement.push({\r\n                categorie: 'CAPITAL',\r\n                libelle: 'Remboursement capital',\r\n                montant: safeNumber(moisData.remboursementCapital)\r\n            });\r\n        }\r\n\r\n        return {\r\n            numeroMois: mois,\r\n            soldeDebut: safeNumber(moisData.soldeDebut),\r\n            lignesEncaissement: lignesEncaissement,\r\n            lignesDecaissement: lignesDecaissement,\r\n            totalEncaissements: safeNumber(moisData.totalEncaissements),\r\n            totalDecaissements: safeNumber(moisData.totalDecaissements),\r\n            excedentDeficit: safeNumber(moisData.excedentDeficit),\r\n            soldeFin: safeNumber(moisData.soldeFin)\r\n        };\r\n    }\r\n\r\n    // Nouvelle m√©thode pour vider un formulaire de mois\r\n    clearMoisForm(mois: number) {\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        if (!moisForm) return;\r\n\r\n        // Conserver certaines valeurs selon le mois\r\n        let soldeDebut = null;\r\n\r\n        // Pour le mois 0, solde d√©but = 0\r\n        if (mois === 0) {\r\n            soldeDebut = 0;\r\n        }\r\n        // Pour les autres mois, prendre le solde fin du mois pr√©c√©dent\r\n        else if (mois > 0) {\r\n            const prevMoisForm = this.getMoisFormGroup(mois - 1);\r\n            if (prevMoisForm) {\r\n                soldeDebut = prevMoisForm.get('soldeFin')?.value || 0;\r\n            }\r\n        }\r\n\r\n        // R√©initialiser TOUS les champs\r\n        const emptyValues: any = {\r\n            numeroMois: mois,\r\n            soldeDebut: soldeDebut,\r\n            ventes: null,\r\n            autresRevenus: null,\r\n            pret: null,\r\n            achatmarchandises: null,\r\n            mainoeuvre: null,\r\n            investissement: null,\r\n            impotstaxes: null,\r\n            loyer: null,\r\n            utilities: null,\r\n            transport: null,\r\n            salaires: null,\r\n            fraistelephone: null,\r\n            chargesfinancieres: null,\r\n            entretien: null,\r\n            autresdepenses: null,\r\n            interetsAVerser: null,\r\n            remboursementCapital: null,\r\n            totalEncaissements: 0,\r\n            totalDecaissements: 0,\r\n            disponibleEnCaisse: 0,\r\n            excedentDeficit: 0,\r\n            soldeFin: 0\r\n        };\r\n\r\n        // Pour le mois 0, on peut pr√©-remplir le pr√™t avec le montant du cr√©dit\r\n        if (mois === 0 && this.creditParams().montantCredit > 0) {\r\n            emptyValues.pret = this.creditParams().montantCredit;\r\n        }\r\n\r\n        // Appliquer les valeurs\r\n        moisForm.reset(emptyValues, { emitEvent: false });\r\n\r\n        // Forcer la mise √† jour\r\n        moisForm.updateValueAndValidity();\r\n\r\n        // Recalculer ce mois\r\n        setTimeout(() => {\r\n            this.calculateMonth(mois);\r\n        }, 0);\r\n    }\r\n\r\n    // SOLUTION 8: Am√©liorer setupFormChangeListeners\r\n    setupFormChangeListeners() {\r\n        const duree = this.nombreMois();\r\n        for (let mois = 0; mois <= duree; mois++) {\r\n            // ‚Üê Dynamique\r\n            const moisForm = this.getMoisFormGroup(mois);\r\n            if (!moisForm) continue;\r\n\r\n            moisForm.valueChanges.pipe(debounceTime(300), distinctUntilChanged(), takeUntilDestroyed(this.destroyRef)).subscribe((values) => {\r\n                // Ne traiter que si c'est le mois actuel\r\n                if (mois === this.currentMonth()) {\r\n                    const hasData = this.checkIfMoisHasData(values);\r\n\r\n                    // Mettre √† jour l'√©tat via le service\r\n                    if (hasData) {\r\n                        this.tresorerieState.updatePrevision(\r\n                            mois,\r\n                            values,\r\n                            false, // not saved yet\r\n                            true // has data\r\n                        );\r\n                    } else if (this.tresorerieState.getPrevision(mois)) {\r\n                        // Si pas de donn√©es mais une pr√©vision existe, la supprimer\r\n                        this.tresorerieState.clearMonth(mois);\r\n                    }\r\n\r\n                    // Recalculer\r\n                    this.calculateMonth(mois);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // V√©rifier si on peut sauvegarder\r\n    canSave(): boolean {\r\n        return this.moisRenseignes().size > 0 && this.creditParams().dossierId > 0 && !this.state().saving;\r\n    }\r\n\r\n    // Obtenir le statut d'un mois\r\n    getMoisStatus(mois: number): 'empty' | 'filled' | 'saved' | 'current' {\r\n        if (this.currentMonth() === mois) {\r\n            return 'current';\r\n        }\r\n        return this.tresorerieState.getMonthStatus(mois);\r\n    }\r\n\r\n    // Obtenir le label d'un mois\r\n    getMoisLabel(mois: number): string {\r\n        return mois === 0 ? 'Mois 0 (D√©marrage)' : `Mois ${mois}`;\r\n    }\r\n\r\n    // Basculer entre les vues\r\n    toggleView() {\r\n        this.state.update((s) => ({\r\n            ...s,\r\n            viewMode: s.viewMode === 'saisie' ? 'vue-ensemble' : 'saisie'\r\n        }));\r\n    }\r\n\r\n    // Import Excel\r\n    importExcel(event: any) {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            const formData = new FormData();\r\n            formData.append('file', file);\r\n\r\n            this.state.update((s) => ({ ...s, loading: true }));\r\n\r\n            this.userService.importPrevisionsTresorerie$(this.creditParams().dossierId, formData).subscribe({\r\n                next: (response) => {\r\n                    if (response.data) {\r\n                        this.populateForm(response.data);\r\n                        this.messageService.add({\r\n                            severity: 'success',\r\n                            summary: 'Succ√®s',\r\n                            detail: 'Donn√©es import√©es avec succ√®s'\r\n                        });\r\n                    }\r\n                    this.state.update((s) => ({ ...s, loading: false }));\r\n                },\r\n                error: (error) => {\r\n                    this.state.update((s) => ({\r\n                        ...s,\r\n                        loading: false,\r\n                        error: error\r\n                    }));\r\n                    this.messageService.add({\r\n                        severity: 'error',\r\n                        summary: 'Erreur',\r\n                        detail: \"Erreur lors de l'import\"\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // Export Excel\r\n    exportExcel() {\r\n        this.userService.exportPrevisionsTresorerie$(this.creditParams().dossierId).subscribe({\r\n            next: (blob: any) => {\r\n                const url = window.URL.createObjectURL(blob);\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.download = `previsions_tresorerie_${this.creditParams().clientNom}.xlsx`;\r\n                link.click();\r\n                window.URL.revokeObjectURL(url);\r\n            },\r\n            error: (error) => {\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Erreur',\r\n                    detail: \"Impossible d'exporter les donn√©es\"\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Validation du formulaire\r\n    validateAndProceed() {\r\n        this.calculateAllMonths();\r\n        const isValid = this.validateCoherence();\r\n\r\n        if (isValid) {\r\n            this.savePrevisions();\r\n        } else {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: 'Veuillez v√©rifier la coh√©rence des donn√©es'\r\n            });\r\n        }\r\n    }\r\n    // Valider la coh√©rence des donn√©es\r\n    validateCoherence(): boolean {\r\n        for (let mois = 1; mois <= 12; mois++) {\r\n            if (this.tresorerieState.monthHasData(mois)) {\r\n                const moisData = this.getMoisFormGroup(mois).getRawValue();\r\n                const remboursementTotal = (moisData.interetsAVerser || 0) + (moisData.remboursementCapital || 0);\r\n\r\n                if (moisData.excedentDeficit < remboursementTotal) {\r\n                    this.messageService.add({\r\n                        severity: 'warn',\r\n                        summary: `Mois ${mois}`,\r\n                        detail: \"L'exc√©dent ne couvre pas les remboursements\"\r\n                    });\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Obtenir le cumul total\r\n    getCumuls() {\r\n        let cumuls = {\r\n            ventes: 0,\r\n            autresRevenus: 0,\r\n            pret: 0,\r\n            totalEncaissements: 0,\r\n            achatMarchandises: 0,\r\n            totalDecaissements: 0,\r\n            excedentDeficit: 0\r\n        };\r\n\r\n        for (let mois = 1; mois <= 12; mois++) {\r\n            const moisData = this.getMoisFormGroup(mois).getRawValue();\r\n            cumuls.ventes += moisData.ventes || 0;\r\n            cumuls.autresRevenus += moisData.autresRevenus || 0;\r\n            cumuls.pret += moisData.pret || 0;\r\n            cumuls.totalEncaissements += moisData.totalEncaissements || 0;\r\n            cumuls.achatMarchandises += moisData.achatMarchandises || 0;\r\n            cumuls.totalDecaissements += moisData.totalDecaissements || 0;\r\n            cumuls.excedentDeficit += moisData.excedentDeficit || 0;\r\n        }\r\n        return cumuls;\r\n    }\r\n\r\n    /**\r\n     * M√©thode pour imprimer le tableau de tr√©sorerie\r\n     */\r\n    imprimerTableauTresorerie(): void {\r\n        if (!this.tresorerieForm) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: \"Aucune donn√©e de tr√©sorerie disponible pour l'impression\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        // V√©rifier s'il y a des donn√©es √† imprimer\r\n        const hasSomeData = this.getFormSummary().moisRenseignes > 0;\r\n\r\n        if (!hasSomeData) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: \"Veuillez saisir au moins un mois de donn√©es avant d'imprimer\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Utiliser le service d'impression\r\n            this.tresoreriePrintService.imprimerTableauTresorerie(this.tresorerieForm, this.creditParams(), this.demandeIndividuel());\r\n\r\n            this.messageService.add({\r\n                severity: 'success',\r\n                summary: 'Impression',\r\n                detail: \"Fen√™tre d'impression ouverte\"\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Erreur lors de l'impression:\", error);\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Erreur',\r\n                detail: \"Impossible de g√©n√©rer le document d'impression\"\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * V√©rifie si l'impression est possible\r\n     */\r\n    peutImprimer(): boolean {\r\n        return !!(this.tresorerieForm && this.getFormSummary().moisRenseignes > 0);\r\n    }\r\n\r\n    /**\r\n     * Obtient un aper√ßu des donn√©es pour l'impression\r\n     */\r\n    getApercuImpression(): string {\r\n        if (!this.peutImprimer()) return 'Aucune donn√©e disponible';\r\n\r\n        const summary = this.getFormSummary();\r\n        const creditParams = this.creditParams();\r\n        const demandeur = this.demandeIndividuel();\r\n\r\n        const nomClient = demandeur ? `${demandeur.prenom} ${demandeur.nom}` : creditParams.clientNom || 'Client non d√©fini';\r\n\r\n        const montant = this.formatMontant(creditParams.montantCredit);\r\n\r\n        return `${nomClient} - ${montant} - ${summary.moisRenseignes} mois renseign√©s`;\r\n    }\r\n\r\n    /**\r\n     * Pr√©visualisation avant impression\r\n     */\r\n    previsualiserTableauTresorerie(): void {\r\n        if (!this.peutImprimer()) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: 'Aucune donn√©e disponible pour la pr√©visualisation'\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Simplement ouvrir l'impression - le navigateur proposera la pr√©visualisation\r\n        this.imprimerTableauTresorerie();\r\n    }\r\n\r\n    /**\r\n     * Export en PDF (via impression navigateur)\r\n     */\r\n    exporterTableauPDF(): void {\r\n        if (!this.peutImprimer()) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Attention',\r\n                detail: \"Aucune donn√©e disponible pour l'export\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.messageService.add({\r\n            severity: 'info',\r\n            summary: 'Export PDF',\r\n            detail: 'Dans la fen√™tre d\\'impression, choisissez \"Enregistrer au format PDF\"'\r\n        });\r\n\r\n        // D√©lai pour que l'utilisateur voie le message\r\n        setTimeout(() => {\r\n            this.imprimerTableauTresorerie();\r\n        }, 1000);\r\n    }\r\n\r\n    /**\r\n     * Validation avant impression\r\n     */\r\n    private validerDonneesAvantImpression(): boolean {\r\n        const summary = this.getFormSummary();\r\n\r\n        if (summary.moisRenseignes === 0) {\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Donn√©es insuffisantes',\r\n                detail: 'Veuillez saisir au moins un mois de donn√©es'\r\n            });\r\n            return false;\r\n        }\r\n\r\n        if (!this.creditParams().montantCredit || this.creditParams().montantCredit === 0) {\r\n            this.messageService.add({\r\n                severity: 'warn',\r\n                summary: 'Param√®tres incomplets',\r\n                detail: \"Le montant du cr√©dit n'est pas d√©fini\"\r\n            });\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Impression avec options avanc√©es\r\n     */\r\n    imprimerAvecOptions(\r\n        options: {\r\n            inclureAnalyse?: boolean;\r\n            inclureSignature?: boolean;\r\n            titre?: string;\r\n        } = {}\r\n    ): void {\r\n        if (!this.validerDonneesAvantImpression()) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            this.tresoreriePrintService.imprimerTableauTresorerie(this.tresorerieForm, this.creditParams(), this.demandeIndividuel());\r\n\r\n            this.messageService.add({\r\n                severity: 'success',\r\n                summary: 'Impression',\r\n                detail: 'Document g√©n√©r√© avec les options demand√©es'\r\n            });\r\n        } catch (error) {\r\n            console.error('Erreur impression avec options:', error);\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Erreur',\r\n                detail: 'Impossible de g√©n√©rer le document avec ces options'\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtient un r√©sum√© des donn√©es pour affichage dans l'interface\r\n     */\r\n    getResumeImpressionPourAffichage(): any {\r\n        if (!this.peutImprimer()) {\r\n            return {\r\n                status: 'unavailable',\r\n                message: 'Donn√©es insuffisantes',\r\n                details: 'Veuillez saisir au moins un mois de pr√©visions'\r\n            };\r\n        }\r\n\r\n        const summary = this.getFormSummary();\r\n        const creditParams = this.creditParams();\r\n\r\n        return {\r\n            status: 'ready',\r\n            message: 'Pr√™t pour impression',\r\n            details: {\r\n                moisRenseignes: summary.moisRenseignes,\r\n                moisSauvegardes: summary.moisSauvegardes,\r\n                client: this.demandeIndividuel() ? `${this.demandeIndividuel().prenom} ${this.demandeIndividuel().nom}` : creditParams.clientNom,\r\n                montantCredit: this.formatMontant(creditParams.montantCredit),\r\n                duree: `${creditParams.duree} mois`,\r\n                tauxInteret: `${creditParams.tauxInteret}%`\r\n            }\r\n        };\r\n    }\r\n\r\n    public splitButtonOptions = [\r\n        {\r\n            label: 'Aper√ßu avant impression',\r\n            icon: 'pi pi-eye',\r\n            command: () => this.previsualiserTableauTresorerie()\r\n        },\r\n        {\r\n            label: 'Exporter en PDF',\r\n            icon: 'pi pi-file-pdf',\r\n            command: () => this.exporterTableauPDF()\r\n        },\r\n        {\r\n            separator: true\r\n        },\r\n        {\r\n            label: 'Imprimer avec en-t√™te',\r\n            icon: 'pi pi-id-card',\r\n            command: () => this.imprimerAvecOptions({ inclureAnalyse: true })\r\n        },\r\n        {\r\n            label: 'Imprimer tableau seul',\r\n            icon: 'pi pi-table',\r\n            command: () => this.imprimerTableauTresorerie()\r\n        }\r\n    ];\r\n\r\n    // ========================================\r\n    // M√âTHODES POUR LA VISUALISATION DES MOIS\r\n    // ========================================\r\n\r\n    /**\r\n     * Obtient les statistiques d'un trimestre\r\n     */\r\n    getTrimestreStats(mois: number[]): { filled: number; saved: number; empty: number } {\r\n        let filled = 0;\r\n        let saved = 0;\r\n        let empty = 0;\r\n\r\n        mois.forEach((m) => {\r\n            const status = this.getMoisStatus(m);\r\n            if (status === 'saved') saved++;\r\n            else if (status === 'filled') filled++;\r\n            else empty++;\r\n        });\r\n\r\n        return { filled, saved, empty };\r\n    }\r\n\r\n    /**\r\n     * Obtient le tooltip pour un mois\r\n     */\r\n    getMonthTooltip(mois: number): string {\r\n        const status = this.getMoisStatus(mois);\r\n        const moisForm = this.getMoisFormGroup(mois);\r\n        const soldeFin = moisForm?.get('soldeFin')?.value || 0;\r\n\r\n        let tooltip = `Mois ${mois}`;\r\n\r\n        if (status === 'saved') {\r\n            tooltip += ' - ‚úì Sauvegard√©';\r\n        } else if (status === 'filled') {\r\n            tooltip += ' - ‚ö† Non sauvegard√©';\r\n        } else {\r\n            tooltip += ' - √Ä renseigner';\r\n        }\r\n\r\n        if (soldeFin !== 0) {\r\n            tooltip += ` | Solde: ${this.formatMontant(soldeFin)}`;\r\n        }\r\n\r\n        return tooltip;\r\n    }\r\n\r\n    /**\r\n     * Calcule le total annuel des encaissements\r\n     */\r\n    getTotalAnnuelEncaissements(): number {\r\n        let total = 0;\r\n        for (let m = 0; m <= 12; m++) {\r\n            const moisForm = this.getMoisFormGroup(m);\r\n            if (moisForm) {\r\n                total += moisForm.get('totalEncaissements')?.value || 0;\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * Calcule le total annuel des d√©caissements\r\n     */\r\n    getTotalAnnuelDecaissements(): number {\r\n        let total = 0;\r\n        for (let m = 0; m <= 12; m++) {\r\n            const moisForm = this.getMoisFormGroup(m);\r\n            if (moisForm) {\r\n                total += moisForm.get('totalDecaissements')?.value || 0;\r\n            }\r\n        }\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * Obtient le solde final du mois 12\r\n     */\r\n    getSoldeAnnuelFinal(): number {\r\n        const duree = this.nombreMois();\r\n        const dernierMoisForm = this.getMoisFormGroup(duree);\r\n        return dernierMoisForm?.get('soldeFin')?.value || 0;\r\n    }\r\n\r\n    /**\r\n     * Obtient la classe CSS pour le solde annuel\r\n     */\r\n    getSoldeAnnuelClass(): string {\r\n        const solde = this.getSoldeAnnuelFinal();\r\n        if (solde > 0) return 'bg-green-50';\r\n        if (solde < 0) return 'bg-red-50';\r\n        return 'bg-gray-50';\r\n    }\r\n\r\n    /**\r\n     * Navigue vers le premier mois vide\r\n     */\r\n    goToFirstEmptyMonth(): void {\r\n        for (let m = 0; m <= 12; m++) {\r\n            if (this.getMoisStatus(m) === 'empty') {\r\n                this.goToMonth(m);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * V√©rifie s'il reste des mois vides\r\n     */\r\n    hasEmptyMonths(): boolean {\r\n        for (let m = 0; m <= 12; m++) {\r\n            if (this.getMoisStatus(m) === 'empty') {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Obtient le r√©sum√© de tous les mois pour l'affichage\r\n     */\r\n    getMoisResume(): { mois: number; status: string; soldeFin: number }[] {\r\n        const resume = [];\r\n        const duree = this.nombreMois();\r\n        for (let m = 0; m <= duree; m++) {\r\n            const moisForm = this.getMoisFormGroup(m);\r\n            resume.push({\r\n                mois: m,\r\n                status: this.getMoisStatus(m),\r\n                soldeFin: moisForm?.get('soldeFin')?.value || 0\r\n            });\r\n        }\r\n        return resume;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re le contenu du tooltip pour une cellule\r\n     */\r\n    getCellTooltip(ligne: LigneTresorerie, mois: number): string {\r\n        const value = this.getCellValue(ligne.id, mois);\r\n\r\n        if (value === null || value === undefined) {\r\n            return `${ligne.libelle} - M${mois}\\nAucune valeur`;\r\n        }\r\n\r\n        const montantFormate = this.formatMontant(value);\r\n        const status = this.getCellStatus(ligne.id, mois);\r\n\r\n        let tooltip = `${ligne.libelle}\\n`;\r\n        tooltip += `Mois ${mois}${mois === 0 ? ' (D√©marrage)' : ''}\\n`;\r\n        tooltip += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`;\r\n        tooltip += `üí∞ ${montantFormate}`;\r\n\r\n        // Ajouter des infos suppl√©mentaires selon le type\r\n        if (ligne.type === 'calcul') {\r\n            tooltip += `\\nüìä Calcul√© automatiquement`;\r\n        } else if (ligne.editable) {\r\n            tooltip += `\\n‚úèÔ∏è Modifiable`;\r\n            if (value !== 0 && mois < this.nombreMois()) {\r\n                tooltip += `\\n‚û°Ô∏è Clic droit pour copier`;\r\n            }\r\n        }\r\n\r\n        // Indiquer si n√©gatif\r\n        if (value < 0) {\r\n            tooltip += `\\n‚ö†Ô∏è Valeur n√©gative`;\r\n        }\r\n\r\n        return tooltip;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re le tooltip pour la colonne cumul\r\n     */\r\n    getCumulTooltip(ligne: LigneTresorerie): string {\r\n        const cumul = this.getCumulForLigne(ligne.id);\r\n        const montantFormate = this.formatMontant(cumul);\r\n        const duree = this.nombreMois();\r\n\r\n        let tooltip = `${ligne.libelle}\\n`;\r\n        tooltip += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`;\r\n        tooltip += `üìä Cumul M0 √† M${duree}\\n`;\r\n        tooltip += `üí∞ ${montantFormate}`;\r\n\r\n        // Pour les lignes de solde, indiquer que c'est la valeur finale\r\n        if (ligne.id === 'soldeFin' || ligne.id === 'soldeDebut') {\r\n            tooltip = `${ligne.libelle}\\n`;\r\n            tooltip += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n`;\r\n            tooltip += `üìä Valeur au M${duree}\\n`;\r\n            tooltip += `üí∞ ${montantFormate}`;\r\n        }\r\n\r\n        // Moyenne mensuelle pour les autres lignes\r\n        if (ligne.type !== 'calcul' || ligne.id === 'totalEncaissements' || ligne.id === 'totalDecaissements') {\r\n            const moyenne = cumul / (duree + 1);\r\n            tooltip += `\\nüìà Moyenne: ${this.formatMontant(moyenne)}/mois`;\r\n        }\r\n\r\n        return tooltip;\r\n    }\r\n    /**\r\n     * Obtient le statut d'une cellule pour le tooltip\r\n     */\r\n    private getCellStatus(ligneId: string, mois: number): string {\r\n        if (this.moisSauvegardes().has(mois)) {\r\n            return 'saved';\r\n        }\r\n        if (this.moisRenseignes().has(mois)) {\r\n            return 'filled';\r\n        }\r\n        return 'empty';\r\n    }\r\n\r\n    // Dans la classe du composant\r\n    @HostBinding('class.duration-long')\r\n    get isDurationLong(): boolean {\r\n        return this.nombreMois() > 12 && this.nombreMois() <= 18;\r\n    }\r\n\r\n    @HostBinding('class.duration-extra-long')\r\n    get isDurationExtraLong(): boolean {\r\n        return this.nombreMois() > 18;\r\n    }\r\n}\r\n", "<!-- analyse-flux-tresorerie.component.html -->\r\n<div class=\"analyse-flux-container\">\r\n    <p-confirmDialog></p-confirmDialog>\r\n    <p-toast></p-toast>\r\n\r\n    <!-- Section Informations du Demandeur -->\r\n    <p-card class=\"mb-3\" *ngIf=\"demandeIndividuel()\">\r\n        <ng-template pTemplate=\"header\">\r\n            <div class=\"flex justify-content-between align-items-center p-3\">\r\n                <h2>\r\n                    <i class=\"pi pi-user mr-2\"></i>\r\n                    Informations du Demandeur\r\n                </h2>\r\n                <p-tag [value]=\"'Demande N¬∞' + demandeIndividuelId\" severity=\"info\"></p-tag>\r\n            </div>\r\n        </ng-template>\r\n\r\n        <div class=\"grid\">\r\n            <!-- Informations personnelles -->\r\n            <div class=\"col-12 md:col-6 lg:col-4\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Nom complet</label>\r\n                    <div class=\"font-semibold text-lg\">\r\n                        {{ demandeIndividuel().prenom }} {{ demandeIndividuel().nom }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-4\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Date de naissance</label>\r\n                    <div class=\"font-semibold\">\r\n                        {{ formatDateFromArray(demandeIndividuel().dateNaissance) }}\r\n                        <span class=\"text-sm text-gray-500 ml-2\">\r\n                            ({{ calculateAge(demandeIndividuel().dateNaissance) }} ans)\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-4\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">T√©l√©phone</label>\r\n                    <div class=\"font-semibold\">\r\n                        <i class=\"pi pi-phone mr-1\"></i>\r\n                        {{ demandeIndividuel().telephone }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Informations du cr√©dit -->\r\n            <div class=\"col-12\">\r\n                <p-divider></p-divider>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-3\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Montant demand√©</label>\r\n                    <div class=\"font-semibold text-primary text-xl\">\r\n                        {{ formatMontant(demandeIndividuel().montantDemande) }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-3\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Dur√©e du pr√™t</label>\r\n                    <div class=\"font-semibold\">\r\n                        {{ demandeIndividuel().dureeDemande }} mois\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-3\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Taux d'int√©r√™t</label>\r\n                    <div class=\"font-semibold\">\r\n                        {{ demandeIndividuel().tauxInteret }}% annuel\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"col-12 md:col-6 lg:col-3\">\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">√âch√©ance mensuelle</label>\r\n                    <div class=\"font-semibold\">\r\n                        {{ formatMontant(mensualite().total) }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Activit√© -->\r\n            <div class=\"col-12\">\r\n                <p-divider></p-divider>\r\n                <div class=\"info-group\">\r\n                    <label class=\"text-sm text-gray-600\">Description de l'activit√©</label>\r\n                    <div class=\"font-semibold\">\r\n                        {{ demandeIndividuel().descriptionActivite }}\r\n                    </div>\r\n                    <small class=\"text-gray-500\">\r\n                        Anciennet√©: {{ demandeIndividuel().nombreAnneeActivite }} ans |\r\n                        Lieu: {{ demandeIndividuel().adresseLieuActivite }}\r\n                    </small>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Garanties -->\r\n            <div class=\"col-12\" *ngIf=\"garanties().length > 0\">\r\n                <p-divider></p-divider>\r\n                <h4 class=\"mb-3\">\r\n                    <i class=\"pi pi-shield mr-2\"></i>\r\n                    Garanties propos√©es ({{ garanties().length }})\r\n                </h4>\r\n                <p-table [value]=\"garanties()\" styleClass=\"p-datatable-sm\" [scrollable]=\"true\">\r\n                    <ng-template pTemplate=\"header\">\r\n                        <tr>\r\n                            <th>Type</th>\r\n                            <th>Description</th>\r\n                            <th class=\"text-right\">Valeur garantie</th>\r\n                            <th class=\"text-center\">Couverture</th>\r\n                        </tr>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"body\" let-garantie>\r\n                        <tr>\r\n                            <td>{{ garantie.typeGarantie }}</td>\r\n                            <td>{{ garantie.descriptionGarantie }}</td>\r\n                            <td class=\"text-right\">{{ formatMontant(garantie.valeurGarantie) }}</td>\r\n                            <td class=\"text-center\">\r\n                                <p-tag\r\n                                    [value]=\"((garantie.valeurGarantie / demandeIndividuel().montantDemande) * 100).toFixed(0) + '%'\"\r\n                                    [severity]=\"garantie.valeurGarantie >= demandeIndividuel().montantDemande ? 'success' : 'warn'\">\r\n                                </p-tag>\r\n                            </td>\r\n                        </tr>\r\n                    </ng-template>\r\n                </p-table>\r\n            </div>\r\n        </div>\r\n    </p-card>\r\n\r\n    <p-divider></p-divider>\r\n\r\n    <!-- Section Statut du Dossier de Cr√©dit -->\r\n    <div class=\"credit-status-section mb-4\" *ngIf=\"demandeIndividuel()\">\r\n        <!-- Si dossier existe -->\r\n        <div *ngIf=\"creditParams().dossierId > 0\" class=\"dossier-existant\">\r\n            <div class=\"status-card bg-green-50 border-round-lg border-1 border-green-300 p-3\">\r\n                <div class=\"flex align-items-center justify-content-between flex-wrap gap-3\">\r\n                    <div class=\"flex align-items-center gap-3\">\r\n                        <div class=\"status-icon bg-green-500 border-circle p-3\">\r\n                            <i class=\"pi pi-check-circle text-white text-2xl\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <div class=\"text-green-800 font-bold text-lg\">\r\n                                Dossier N¬∞{{ creditParams().dossierId }} cr√©√©\r\n                            </div>\r\n                            <div class=\"text-green-600 text-sm\">\r\n                                {{ demandeIndividuel().prenom }} {{ demandeIndividuel().nom }} ‚Ä¢\r\n                                {{ formatMontant(creditParams().montantCredit) }} ‚Ä¢\r\n                                {{ creditParams().duree }} mois √† {{ creditParams().tauxInteret }}%\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex gap-2 align-items-center\">\r\n                        <p-tag severity=\"success\" value=\"Pr√™t pour saisie\" icon=\"pi pi-check\"></p-tag>\r\n                        <span class=\"text-sm text-gray-600\">\r\n                            Mensualit√©: <strong class=\"text-primary\">{{ formatMontant(mensualite().total) }}</strong>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Si dossier n'existe pas encore -->\r\n        <div *ngIf=\"!creditParams().dossierId || creditParams().dossierId === 0\" class=\"dossier-a-creer\">\r\n            <div class=\"status-card bg-orange-50 border-round-lg border-1 border-orange-300 p-3\">\r\n                <div class=\"flex align-items-center justify-content-between flex-wrap gap-3\">\r\n                    <div class=\"flex align-items-center gap-3\">\r\n                        <div class=\"status-icon bg-orange-500 border-circle p-3\">\r\n                            <i class=\"pi pi-exclamation-circle text-white text-2xl\"></i>\r\n                        </div>\r\n                        <div>\r\n                            <div class=\"text-orange-800 font-bold text-lg\">\r\n                                Dossier de cr√©dit √† cr√©er\r\n                            </div>\r\n                            <div class=\"text-orange-600 text-sm\">\r\n                                {{ demandeIndividuel().prenom }} {{ demandeIndividuel().nom }} ‚Ä¢\r\n                                {{ formatMontant(creditParams().montantCredit) }} ‚Ä¢\r\n                                {{ creditParams().duree }} mois √† {{ creditParams().tauxInteret }}%\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex gap-2 align-items-center flex-wrap\">\r\n                        <div\r\n                            class=\"mensualite-preview text-center px-3 py-2 bg-white border-round border-1 border-orange-200\">\r\n                            <div class=\"text-xs text-gray-500\">Mensualit√© calcul√©e</div>\r\n                            <div class=\"font-bold text-primary text-lg\">{{ formatMontant(mensualite().total) }}</div>\r\n                            <div class=\"text-xs text-gray-500\">\r\n                                ({{ formatMontant(mensualite().capital) }} + {{ formatMontant(mensualite().interet) }})\r\n                            </div>\r\n                        </div>\r\n                        <p-button label=\"Cr√©er le dossier\" icon=\"pi pi-plus-circle\" severity=\"warn\"\r\n                            (onClick)=\"createDossierCredit()\" [loading]=\"state().saving\"\r\n                            pTooltip=\"Cr√©er le dossier pour pouvoir sauvegarder les pr√©visions\">\r\n                        </p-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- SECTION PRINCIPALE : TABLEAU DE TR√âSORERIE -->\r\n    <p-card>\r\n        <ng-template pTemplate=\"header\">\r\n            <div class=\"card-header-tresorerie p-3\">\r\n                <div class=\"flex justify-content-between align-items-center flex-wrap gap-2\">\r\n                    <!-- Titre et badges -->\r\n                    <div class=\"flex align-items-center gap-3\">\r\n                        <h2 class=\"m-0 flex align-items-center gap-2\">\r\n                            <i class=\"pi pi-table text-primary\"></i>\r\n                            Pr√©vision de Tr√©sorerie\r\n                        </h2>\r\n                        <div class=\"flex gap-2\">\r\n                            @if (!hasDossierCredit()) {\r\n                            <p-tag severity=\"danger\" value=\"Dossier requis\" icon=\"pi pi-lock\"></p-tag>\r\n                            }\r\n                            <p-tag *ngIf=\"getTableMonthsWithData() > 0 && hasDossierCredit()\" severity=\"info\"\r\n                                [value]=\"getTableMonthsWithData() + '/' + (nombreMois() + 1) + ' mois'\"\r\n                                icon=\"pi pi-calendar\">\r\n                            </p-tag>\r\n                            <p-tag *ngIf=\"tresorerieState.hasUnsavedChanges() && hasDossierCredit()\" severity=\"warn\" value=\"Modifications\"\r\n                                icon=\"pi pi-exclamation-triangle\">\r\n                            </p-tag>\r\n                            <p-tag *ngIf=\"!tresorerieState.hasUnsavedChanges() && getTableMonthsWithData() > 0 && hasDossierCredit()\"\r\n                                severity=\"success\" value=\"Sauvegard√©\" icon=\"pi pi-check\">\r\n                            </p-tag>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Boutons d'action -->\r\n                    <div class=\"flex gap-2 align-items-center flex-wrap\">\r\n                        @if (peutImprimer() && hasDossierCredit()) {\r\n                        <div class=\"btn-group-print flex gap-1\">\r\n                            <p-button icon=\"pi pi-print\" label=\"Imprimer\" severity=\"success\" size=\"small\"\r\n                                (onClick)=\"imprimerTableauTresorerie()\" pTooltip=\"Imprimer le tableau\">\r\n                            </p-button>\r\n                            <p-splitButton icon=\"pi pi-ellipsis-v\" size=\"small\" severity=\"success\"\r\n                                [model]=\"splitButtonOptions\" styleClass=\"split-btn-only-icon\">\r\n                            </p-splitButton>\r\n                        </div>\r\n                        } @else {\r\n                        <p-button icon=\"pi pi-print\" label=\"Imprimer\" severity=\"secondary\" size=\"small\"\r\n                            [disabled]=\"true\" pTooltip=\"Cr√©ez d'abord le dossier pour imprimer\">\r\n                        </p-button>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ng-template>\r\n\r\n        <!-- BLOQUER SI PAS DE DOSSIER -->\r\n        @if (!hasDossierCredit()) {\r\n        <div class=\"dossier-required-overlay\">\r\n            <div class=\"overlay-content text-center p-5\">\r\n                <div class=\"overlay-icon mb-4\">\r\n                    <i class=\"pi pi-lock text-6xl text-orange-500\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-bold text-gray-800 mb-2\">\r\n                    Dossier de cr√©dit requis\r\n                </h3>\r\n                <p class=\"text-gray-600 mb-4 max-w-30rem mx-auto\">\r\n                    Avant de pouvoir saisir les pr√©visions de tr√©sorerie, vous devez d'abord cr√©er le dossier de cr√©dit.\r\n                    Cette √©tape est obligatoire pour enregistrer vos donn√©es.\r\n                </p>\r\n                <div class=\"flex justify-content-center gap-3 flex-wrap\">\r\n                    <p-button label=\"Cr√©er le dossier maintenant\" icon=\"pi pi-plus-circle\" severity=\"warn\" size=\"large\"\r\n                        (onClick)=\"createDossierCredit()\" [loading]=\"state().saving\">\r\n                    </p-button>\r\n                </div>\r\n                <div class=\"mt-4 text-sm text-gray-500\">\r\n                    <i class=\"pi pi-info-circle mr-1\"></i>\r\n                    Montant: <strong>{{ formatMontant(creditParams().montantCredit) }}</strong> |\r\n                    Dur√©e: <strong>{{ creditParams().duree }} mois</strong> |\r\n                    Taux: <strong>{{ creditParams().tauxInteret }}%</strong>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        } @else {\r\n\r\n        <!-- Banni√®re de progression -->\r\n        @if (peutImprimer()) {\r\n        <div class=\"progress-banner mb-3\">\r\n            <div class=\"p-3 surface-100 border-round-lg border-1 surface-border\">\r\n                <div class=\"flex align-items-center justify-content-between mb-2\">\r\n                    <span class=\"font-semibold text-gray-700\">\r\n                        <i class=\"pi pi-chart-line mr-2\"></i>\r\n                        Progression: {{ getTableMonthsWithData() }}/{{ nombreMois() + 1 }} mois\r\n                    </span>\r\n                    <span [ngClass]=\"{\r\n                            'text-red-500': (getCellValue('soldeFin', dernierMois()) ?? 0) < 0,\r\n                            'text-green-600': (getCellValue('soldeFin', dernierMois()) ?? 0) >= 0\r\n                        }\">\r\n                        Solde final: <strong>{{ formatMontant(getCellValue('soldeFin', dernierMois()) ?? 0) }}</strong>\r\n                    </span>\r\n                </div>\r\n\r\n                <!-- Segments pour chaque mois -->\r\n                <div class=\"month-segments flex gap-1\">\r\n                    @for (mois of moisColumns(); track mois) {\r\n                    <div class=\"month-segment flex-1\"\r\n                        [class.segment-empty]=\"!checkIfMoisHasData(getMoisFormGroup(mois).getRawValue())\"\r\n                        [class.segment-filled]=\"checkIfMoisHasData(getMoisFormGroup(mois).getRawValue()) && !moisSauvegardes().has(mois)\"\r\n                        [class.segment-saved]=\"moisSauvegardes().has(mois)\"\r\n                        [pTooltip]=\"'M' + mois + (moisSauvegardes().has(mois) ? ' ‚úì' : '')\" tooltipPosition=\"top\">\r\n                        <span class=\"segment-label\">{{ mois }}</span>\r\n                    </div>\r\n                    }\r\n                </div>\r\n\r\n                <!-- L√©gende -->\r\n                <div class=\"flex justify-content-between align-items-center mt-2\">\r\n                    <div class=\"flex gap-3 text-xs\">\r\n                        <span class=\"flex align-items-center gap-1\">\r\n                            <span class=\"legend-dot bg-gray-300\"></span> Vide\r\n                        </span>\r\n                        <span class=\"flex align-items-center gap-1\">\r\n                            <span class=\"legend-dot bg-orange-400\"></span> Renseign√©\r\n                        </span>\r\n                        <span class=\"flex align-items-center gap-1\">\r\n                            <span class=\"legend-dot bg-green-500\"></span> Sauvegard√©\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n\r\n        <!-- Info sur le solde final -->\r\n        <div class=\"solde-final-info mb-3 p-3 border-round flex justify-content-between align-items-center\" [ngClass]=\"{\r\n                'bg-green-50 border-green-200': (getCellValue('soldeFin', dernierMois()) ?? 0) >= 0, \r\n                'bg-red-50 border-red-200': (getCellValue('soldeFin', dernierMois()) ?? 0) < 0\r\n            }\">\r\n            <div>\r\n                <span class=\"text-sm\">Solde final pr√©vu (Mois {{ dernierMois() }}):</span>\r\n            </div>\r\n            <div>\r\n                <span class=\"font-bold text-2xl\" [ngClass]=\"{\r\n                        'text-green-600': (getCellValue('soldeFin', dernierMois()) ?? 0) >= 0, \r\n                        'text-red-600': (getCellValue('soldeFin', dernierMois()) ?? 0) < 0\r\n                    }\">\r\n                    {{ formatMontant(getCellValue('soldeFin', dernierMois()) ?? 0) }}\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- TABLEAU PRINCIPAL -->\r\n        <div class=\"tresorerie-table-wrapper\">\r\n            <table class=\"tresorerie-table\">\r\n                <thead>\r\n                    <tr class=\"header-row\">\r\n                        <th class=\"col-libelle sticky-col\">Libell√©</th>\r\n                        @for (mois of moisColumns(); track mois) {\r\n                        <th class=\"col-mois\" [class.col-mois-0]=\"mois === 0\">\r\n                            {{ getTableMoisLabel(mois) }}\r\n                            <small *ngIf=\"mois === 0\" class=\"block text-xs opacity-70\">D√©marrage</small>\r\n                        </th>\r\n                        }\r\n                        <th class=\"col-cumul\">Cumul</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    @for (ligne of lignesTableau; track ligne.id; let i = $index) {\r\n                    <!-- S√©parateurs de section -->\r\n                    @if (ligne.id === 'ventes') {\r\n                    <tr class=\"section-header-row\">\r\n                        <td [attr.colspan]=\"moisColumns().length + 2\" class=\"section-title section-encaissement\">\r\n                            <i class=\"pi pi-download mr-2\"></i> ENCAISSEMENTS\r\n                        </td>\r\n                    </tr>\r\n                    }\r\n                    @if (ligne.id === 'achatmarchandises') {\r\n                    <tr class=\"section-header-row\">\r\n                        <td [attr.colspan]=\"moisColumns().length + 2\" class=\"section-title section-decaissement\">\r\n                            <i class=\"pi pi-upload mr-2\"></i> D√âCAISSEMENTS\r\n                        </td>\r\n                    </tr>\r\n                    }\r\n                    @if (ligne.id === 'disponibleEnCaisse') {\r\n                    <tr class=\"section-header-row\">\r\n                        <td [attr.colspan]=\"moisColumns().length + 2\" class=\"section-title section-calcul\">\r\n                            <i class=\"pi pi-calculator mr-2\"></i> R√âSULTATS\r\n                        </td>\r\n                    </tr>\r\n                    }\r\n                    @if (ligne.id === 'interetsAVerser') {\r\n                    <tr class=\"section-header-row\">\r\n                        <td [attr.colspan]=\"moisColumns().length + 2\" class=\"section-title section-remboursement\">\r\n                            <i class=\"pi pi-money-bill mr-2\"></i> REMBOURSEMENTS CR√âDIT\r\n                        </td>\r\n                    </tr>\r\n                    }\r\n\r\n                    <!-- Ligne de donn√©es -->\r\n                    <tr [class]=\"ligne.cssClass\">\r\n                        <!-- Colonne libell√© -->\r\n                        <td class=\"col-libelle sticky-col\">\r\n                            <div class=\"flex align-items-center justify-content-between\">\r\n                                <span class=\"libelle-text\">{{ ligne.libelle }}</span>\r\n                                <!-- @if (ligne.editable) {\r\n                                <button pButton type=\"button\" icon=\"pi pi-copy\"\r\n                                    class=\"p-button-text p-button-sm p-button-rounded copy-btn\"\r\n                                    [pTooltip]=\"'Copier M0 vers M1-M' + nombreMois()\" tooltipPosition=\"right\"\r\n                                    (click)=\"copyToFollowingMonths(ligne.id, 0)\">\r\n                                </button>\r\n                                } -->\r\n                            </div>\r\n                        </td>\r\n\r\n                        <!-- Cellules pour chaque mois -->\r\n                        @for (mois of moisColumns(); track mois) {\r\n                        <td class=\"col-mois\" [class.col-mois-0]=\"mois === 0\"\r\n                            [class.cell-editable]=\"isCellEditable(ligne, mois)\"\r\n                            [class.cell-readonly]=\"!isCellEditable(ligne, mois)\"\r\n                            [class.cell-negative]=\"(getCellValue(ligne.id, mois) ?? 0) < 0\"\r\n                            [class.cell-positive]=\"(getCellValue(ligne.id, mois) ?? 0) > 0 && ligne.type === 'calcul'\"\r\n                            [pTooltip]=\"getCellTooltip(ligne, mois)\" tooltipPosition=\"top\"\r\n                            [tooltipOptions]=\"{ showDelay: 300, hideDelay: 0 }\">\r\n\r\n                            <!-- Cellule √©ditable -->\r\n                            @if (isCellEditable(ligne, mois)) {\r\n                            <div class=\"cell-container\">\r\n                                <p-inputNumber [ngModel]=\"getCellValue(ligne.id, mois)\"\r\n                                    (ngModelChange)=\"onTableCellChange(ligne.id, mois, $event)\" mode=\"decimal\"\r\n                                    [minFractionDigits]=\"0\" [maxFractionDigits]=\"0\" [useGrouping]=\"true\" locale=\"fr-FR\"\r\n                                    inputStyleClass=\"table-cell-input\" [placeholder]=\"'-'\">\r\n                                </p-inputNumber>\r\n\r\n                                <!-- Bouton copie vers mois suivants (visible au survol) -->\r\n                                @if (mois < nombreMois() && getCellValue(ligne.id, mois) !==null &&\r\n                                    getCellValue(ligne.id, mois) !==0) { <button pButton type=\"button\"\r\n                                    icon=\"pi pi-arrow-right\"\r\n                                    class=\"copy-cell-btn p-button-text p-button-sm p-button-rounded\"\r\n                                    [pTooltip]=\"'Copier vers M' + (mois + 1) + ' √† M' + nombreMois()\"\r\n                                    tooltipPosition=\"top\"\r\n                                    (click)=\"copyToFollowingMonths(ligne.id, mois); $event.stopPropagation()\">\r\n                                    </button>\r\n                                    }\r\n                            </div>\r\n                            } @else {\r\n                            <!-- Cellule en lecture seule -->\r\n                            <span class=\"cell-value-display\">\r\n                                {{ getCellValue(ligne.id, mois) | number:'1.0-0' }}\r\n                            </span>\r\n                            }\r\n                        </td>\r\n                        }\r\n\r\n                        <!-- Colonne Cumul avec tooltip -->\r\n                        <td class=\"col-cumul\" [pTooltip]=\"getCumulTooltip(ligne)\" tooltipPosition=\"top\"\r\n                            [tooltipOptions]=\"{ showDelay: 300 }\">\r\n                            <span class=\"cumul-value\">\r\n                                {{ getCumulForLigne(ligne.id) | number:'1.0-0' }}\r\n                            </span>\r\n                        </td>\r\n                    </tr>\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <!-- Pied de page avec actions -->\r\n        <div class=\"actions-footer mt-4 pt-4 border-top-1 surface-border\">\r\n            <div class=\"flex justify-content-between align-items-center flex-wrap gap-3\">\r\n                <div class=\"status-info flex align-items-center gap-2\">\r\n                    <i class=\"pi pi-info-circle text-primary\"></i>\r\n                    <span class=\"text-sm\">\r\n                        @if (getTableMonthsWithData() === 0) {\r\n                        <span class=\"text-orange-500\">\r\n                            Commencez par saisir les donn√©es dans le tableau\r\n                        </span>\r\n                        } @else if (tresorerieState.hasUnsavedChanges()) {\r\n                        <span class=\"text-orange-500\">\r\n                            {{ getTableMonthsWithData() }} mois renseign√©s - Modifications non sauvegard√©es\r\n                        </span>\r\n                        } @else {\r\n                        <span class=\"text-green-600\">\r\n                            <i class=\"pi pi-check-circle mr-1\"></i>\r\n                            Tous les changements sont sauvegard√©s\r\n                        </span>\r\n                        }\r\n                    </span>\r\n                </div>\r\n\r\n                <div class=\"flex gap-2 flex-wrap\">\r\n                    <p-button label=\"Retour\" icon=\"pi pi-arrow-left\" outlined\r\n                        [routerLink]=\"['/dashboards/credit/individuel/attente/detail', demandeIndividuelId]\">\r\n                    </p-button>\r\n\r\n                    @if (peutImprimer()) {\r\n                    <p-button label=\"Imprimer\" icon=\"pi pi-print\" severity=\"secondary\"\r\n                        (onClick)=\"imprimerTableauTresorerie()\">\r\n                    </p-button>\r\n                    }\r\n\r\n                    <p-button label=\"Sauvegarder\" icon=\"pi pi-save\" severity=\"success\" [loading]=\"state().saving\"\r\n                        [disabled]=\"!canSaveTableau()\" (onClick)=\"savePrevisions()\">\r\n                    </p-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        }\r\n    </p-card>\r\n</div>"],
  "mappings": "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",
  "names": ["mensualite", "params"]
}
