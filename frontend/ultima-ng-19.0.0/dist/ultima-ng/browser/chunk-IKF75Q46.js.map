{
  "version": 3,
  "sources": ["src/app/pages/auth/verifyaccount/verifyaccount.component.ts", "src/app/pages/auth/verifyaccount/verifyaccount.component.html"],
  "sourcesContent": ["import { IResponse } from '@/interface/response';\r\nimport { AppConfigurator } from '@/layout/components/app.configurator';\r\nimport { UserService } from '@/service/user.service';\r\nimport { Component, DestroyRef, inject, signal } from '@angular/core';\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, ParamMap, Router, RouterLink, RouterModule } from '@angular/router';\r\nimport { MessageService } from 'primeng/api';\r\nimport { ButtonModule } from 'primeng/button';\r\nimport { InputGroupModule } from 'primeng/inputgroup';\r\nimport { InputGroupAddonModule } from 'primeng/inputgroupaddon';\r\nimport { InputNumberModule } from 'primeng/inputnumber';\r\nimport { MessageModule } from 'primeng/message';\r\nimport { ToastModule } from 'primeng/toast';\r\nimport { EMPTY, Observer, switchMap } from 'rxjs';\r\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\r\nimport { environment } from 'src/environments/environment'; // Add this import\r\n\r\n@Component({\r\n    selector: 'app-verifyaccount',\r\n    imports: [ButtonModule, RouterModule, FormsModule, AppConfigurator, InputGroupModule, InputGroupAddonModule, InputNumberModule, MessageModule, ToastModule, ProgressSpinnerModule, RouterLink],\r\n    templateUrl: './verifyaccount.component.html',\r\n    providers: [MessageService]\r\n})\r\nexport class VerifyaccountComponent {\r\n    state = signal<{ loading: boolean; message: string | undefined; error: string | any }>({\r\n        loading: false,\r\n        message: undefined,\r\n        error: undefined\r\n    });\r\n\r\n    // Add these properties (same as TopBar)\r\n    private authServer = environment.authServer;\r\n    private redirectUri = environment.redirectUri;\r\n    private codeChallenge = 'HK02sitqCRpUlfLEX2xl4JGqaVQhNDsfTWH-oQzJHGw';\r\n\r\n    private destroyRef = inject(DestroyRef);\r\n    private userService = inject(UserService);\r\n    private messageService = inject(MessageService);\r\n    private activatedRouter = inject(ActivatedRoute);\r\n\r\n    ngOnInit(): void {\r\n        console.log('Verification in action');\r\n        this.activatedRouter.queryParamMap\r\n            .pipe(\r\n                switchMap((params: ParamMap) => {\r\n                    const token = params.get('token');\r\n                    if (token) {\r\n                        this.state.set({ loading: true, message: undefined, error: undefined });\r\n                        return this.userService.verifyAccountToken$(token);\r\n                    } else {\r\n                        this.state.set({ loading: false, message: undefined, error: 'Invalide Link. Please try again' });\r\n                        return EMPTY;\r\n                    }\r\n                }),\r\n                takeUntilDestroyed(this.destroyRef)\r\n            )\r\n            .subscribe(this.verifyAccount);\r\n    }\r\n\r\n    closeMessage = () => this.state.set({ loading: false, message: undefined, error: undefined });\r\n\r\n    // Add this method (same as TopBar)\r\n    getLoginUrl(): string {\r\n        return `${this.authServer}/oauth2/authorize?response_type=code&client_id=client&scope=openid&redirect_uri=${this.redirectUri}&code_challenge_method=S256&code_challenge=${this.codeChallenge}`;\r\n    }\r\n\r\n    /**\r\n     *  this will execute when the method verifyAccountToken$(token) has been executed\r\n     */\r\n    private verifyAccount: Observer<any> = {\r\n        next: (response: IResponse) => {\r\n            this.state.set({ loading: false, message: response.message, error: undefined });\r\n            this.messageService.add({\r\n                severity: 'success',\r\n                summary: 'Verification Account',\r\n                detail: 'Account has been verified'\r\n            });\r\n        },\r\n        error: (error: string) => {\r\n            this.state.set({ loading: false, message: undefined, error });\r\n            this.messageService.add({\r\n                severity: 'error',\r\n                summary: 'Verification Account',\r\n                detail: error\r\n            });\r\n        },\r\n        complete: () => {}\r\n    };\r\n}\r\n", "<div class=\"flex flex-col items-center justify-center gap-6 py-8\">\r\n    @if (state().loading) {\r\n    <div class=\"relative\">\r\n        <p-progress-spinner ariaLabel=\"Verifying account\" [style]=\"{'width': '5rem', 'height': '5rem'}\" strokeWidth=\"4\"\r\n            animationDuration=\".5s\" class=\"text-primary\" />\r\n        <div class=\"absolute inset-0 flex items-center justify-center\">\r\n            <i class=\"pi pi-lock text-lg text-primary\"></i>\r\n        </div>\r\n    </div>\r\n    <div class=\"text-center\">\r\n        <h2 class=\"text-2xl font-semibold mb-2\">Verifying account...</h2>\r\n        <p class=\"text-surface-600 dark:text-surface-300\">Please wait while we validate your credentials</p>\r\n    </div>\r\n    } @else {\r\n    <div class=\"bg-surface-0 dark:bg-surface-900 p-6 shadow rounded w-full lg:w-6/12\">\r\n        <div>\r\n            <div class=\"flex flex-col gap-4 mb-4\">\r\n                @if(state().message) {\r\n                <p-message severity=\"success\" :closable=\"true\" [@close]=\"closeMessage\">{{ state().message }}</p-message>\r\n                }\r\n\r\n                @if(state().error) {\r\n                <p-message severity=\"error\" :closable=\"true\" [@close]=\"closeMessage\">{{ state().error }}</p-message>\r\n                }\r\n            </div>\r\n            <div class=\"flex items-center justify-between mb-12\">\r\n                <a class=\"font-medium no-underline ml-2 text-primary text-right cursor-pointer\">Forgot password?</a>\r\n            </div>\r\n            <div class=\"mt-4\">\r\n                <a [href]=\"getLoginUrl()\" pButton pRipple class=\"w-full\" label=\"Log in\"></a>\r\n            </div>\r\n            <div class=\"mt-4\">\r\n                <a [routerLink]=\"['/']\" pButton pRipple class=\"w-full text-primary-500\" text label=\"Page d'accueil\"></a>\r\n            </div>\r\n        </div>\r\n        <p-toast />\r\n        <app-configurator simple />\r\n    </div>\r\n    }\r\n    <p-toast />\r\n</div>"],
  "mappings": "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",
  "names": []
}
