import{a as V,b as Y}from"./chunk-GBSAZIIF.js";import{a as z,d as H,e as J,k as Q}from"./chunk-SRGIHKGJ.js";import"./chunk-KLDL5O4H.js";import"./chunk-PXEEYFPS.js";import"./chunk-4MNJFNZT.js";import"./chunk-7A4CRAMP.js";import"./chunk-3WTE2CKQ.js";import"./chunk-LA2FUI34.js";import"./chunk-ZNTL7BEM.js";import{a as W,b as X}from"./chunk-QZOXHZZK.js";import"./chunk-MPVO6A2U.js";import"./chunk-D6YNXGTA.js";import"./chunk-ED7TFTUL.js";import"./chunk-MZ7FZGG3.js";import{b as Z}from"./chunk-C4WQ325L.js";import"./chunk-HNZBC55R.js";import"./chunk-J62YMCRW.js";import"./chunk-J6B6CWYC.js";import"./chunk-IEQZB3PI.js";import"./chunk-ATSSA22C.js";import"./chunk-XYTTGGFW.js";import"./chunk-ZNT52ZF3.js";import"./chunk-Z7KSDRLV.js";import"./chunk-N4Q6Z3MW.js";import{a as $,b as q}from"./chunk-3BEM77IG.js";import{b as B,d as F}from"./chunk-UCSGE5ZL.js";import"./chunk-2O7XYKW4.js";import{a as K}from"./chunk-YTFCGSG6.js";import"./chunk-R2ZYXRFE.js";import"./chunk-NRZ4QNP7.js";import"./chunk-GFZUU5ZD.js";import"./chunk-BODZH67C.js";import"./chunk-KR7F45VC.js";import{f as G,g as j}from"./chunk-XKXBFP6V.js";import"./chunk-ULM4QL4Q.js";import{oa as L,sa as U}from"./chunk-3YZBLOIS.js";import"./chunk-2I6ZAGC7.js";import{b as k}from"./chunk-FVCMZ6IK.js";import"./chunk-VDYO34A5.js";import"./chunk-Y2QT2WK5.js";import"./chunk-S35HUXPS.js";import{i as w,u as R,w as N,y as O}from"./chunk-GZWLZB4Q.js";import{Ac as p,Bb as C,Gb as t,Hb as i,Ib as s,O as I,Rb as D,Sb as v,Va as r,Vb as A,_ as c,cc as n,dc as d,ec as x,gb as T,i as h,lc as M,ma as E,mb as P,mc as y,va as f,vb as _,wc as m,yc as S}from"./chunk-MKA3N2SS.js";import{a as u,b as g}from"./chunk-GAL4ENT6.js";var te=()=>[10,25,50],ie=()=>({"min-width":"50rem"});function ne(o,a){o&1&&s(0,"p-progressSpinner")}function ae(o,a){if(o&1&&s(0,"p-message",1),o&2){let e=v();A("text",e.error())}}function oe(o,a){if(o&1&&(t(0,"div",8)(1,"div",15)(2,"div",16)(3,"span",17),n(4,"Credit #:"),i(),t(5,"span"),n(6),i()(),n(7," \xA0 "),t(8,"div",16)(9,"span",17),n(10,"Code Agence:"),i(),t(11,"span"),n(12),i()(),n(13," \xA0 "),t(14,"div",16)(15,"span",17),n(16,"Date:"),i(),t(17,"span"),n(18),m(19,"date"),i()(),n(20," \xA0 "),t(21,"div",16)(22,"span",17),n(23,"Montant Credit:"),i(),t(24,"span"),n(25),m(26,"currency"),i()(),n(27," \xA0 "),t(28,"div",18)(29,"span",17),n(30,"Status:"),i(),t(31,"p-tag",19),n(32),i()()()()),o&2){let e=a;r(6),d(e.planPagosPKId.numCredito),r(6),d(e.planPagosPKId.codAgencia),r(6),d(S(19,6,e.fecCuota,"yyyy-MM-dd")),r(7),d(p(26,9,e.sal_CREDITO,"GNF","symbol","1.0-0")),r(6),_("severity",e.indEstado==="A"?"success":"warn"),r(),x(" ",e.indEstado==="A"?"Active":e.indEstado," ")}}function re(o,a){o&1&&(t(0,"div",20)(1,"div")(2,"span",21),n(3,"Payment Plan"),i()()())}function le(o,a){o&1&&(t(0,"tr")(1,"th",22),n(2," Payment # "),s(3,"p-sortIcon",23),i(),t(4,"th",24),n(5," Payment Date "),s(6,"p-sortIcon",25),i(),t(7,"th",26),n(8," Principal "),s(9,"p-sortIcon",27),i(),t(10,"th",28),n(11," Interest "),s(12,"p-sortIcon",29),i(),t(13,"th",30),n(14," Commission "),s(15,"p-sortIcon",31),i(),t(16,"th",32),n(17," Total Payment "),s(18,"p-sortIcon",33),i(),t(19,"th",34),n(20," Balance "),s(21,"p-sortIcon",35),i(),t(22,"th",36),n(23," Status "),s(24,"p-sortIcon",37),i()())}function se(o,a){if(o&1&&(t(0,"tr")(1,"td"),n(2),i(),t(3,"td"),n(4),m(5,"date"),i(),t(6,"td"),n(7),m(8,"currency"),i(),t(9,"td"),n(10),m(11,"currency"),i(),t(12,"td"),n(13),m(14,"currency"),i(),t(15,"td"),n(16),m(17,"currency"),i(),t(18,"td"),n(19),m(20,"currency"),i(),t(21,"td"),s(22,"p-tag",38),i()()),o&2){let e=a.$implicit;r(2),d(e.planPagosPKId.numCuota),r(2),d(S(5,9,e.fecCuota,"yyyy-MM-dd")),r(3),d(p(8,12,e.mon_PRINCIPAL,"GNF","symbol","1.0-0")),r(3),d(p(11,17,e.mon_INT,"GNF","symbol","1.0-0")),r(3),d(p(14,22,e.mon_COMISION,"GNF","symbol","1.0-0")),r(3),d(p(17,27,e.mon_CUOTA,"GNF","symbol","1.0-0")),r(3),d(p(20,32,e.sal_CREDITO,"GNF","symbol","1.0-0")),r(3),_("severity",e.indEstado==="A"?"success":e.indEstado==="P"?"info":"warn")("value",e.indEstado==="A"?"Active":e.indEstado==="P"?"Paid":e.indEstado)}}function de(o,a){if(o&1&&(t(0,"div",39)(1,"span"),n(2),i()()),o&2){let e=v(2);r(2),x("Total Payments: ",e.getPlanPagosLength(),"")}}function me(o,a){o&1&&(t(0,"tr")(1,"td",40),n(2,"No payment plan records found."),i()())}function pe(o,a){if(o&1&&(t(0,"div",2)(1,"h2"),n(2,"Credit Payment Plan Details"),i(),P(3,oe,33,14,"div",8),t(4,"p-table",9),P(5,re,4,0,"ng-template",10)(6,le,25,0,"ng-template",11)(7,se,23,37,"ng-template",12)(8,de,3,1,"ng-template",13)(9,me,3,0,"ng-template",14),i()()),o&2){let e,l=v();r(3),C((e=l.getFirstPlanPago())?3:-1,e),r(),_("value",l.planpagos())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",y(8,te))("scrollable",!0)("tableStyle",y(9,ie))}}function ce(o,a){o&1&&s(0,"p-message",3)}var ee=class o{state=f({planpagos:[],loading:!1,message:void 0,error:void 0});loading=f(!1);planpagos=f([]);error=f(void 0);destroyRef=c(E);userService=c(k);activatedRoute=c(B);router=c(F);location=c(w);ngOnInit(){this.activatedRoute.paramMap.pipe(I(a=>{let e=a.get("numberCredit");if(e)return this.state.update(l=>g(u({},l),{numberCredit:e,loading:!0,message:void 0,error:void 0})),this.loading.set(!0),this.error.set(void 0),this.userService.getAllPlanPagosByCreditos$(e);{let l="Credit number not provided in URL";return this.state.update(b=>g(u({},b),{loading:!1,message:void 0,error:l})),this.loading.set(!1),this.error.set(l),h}}),K(this.destroyRef)).subscribe(this.loadPlanPagosSubscriber)}loadPlanPagosSubscriber={next:a=>{console.log("Response from getAllPlanPagosByCreditos$",a);let e=a?.data?.planpagos||[];this.state.update(l=>g(u({},l),{loading:!1,planpagos:e,error:void 0})),this.loading.set(!1),this.planpagos.set(Array.isArray(e)?e:[]),this.error.set(void 0)},error:a=>{this.state.update(e=>g(u({},e),{loading:!1,message:void 0,error:a})),this.loading.set(!1),this.planpagos.set([]),this.error.set(a)},complete:()=>{}};getPlanPagosLength(){let a=this.planpagos();return console.log("PlanPagos length:",a.length),Array.isArray(a)?a.length:0}getFirstPlanPago(){let a=this.planpagos();return Array.isArray(a)&&a.length>0?a[0]:null}retourListe(){this.location.back()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=T({type:o,selectors:[["app-detail-credit"]],features:[M([L])],decls:9,vars:3,consts:[[1,"credit-details-container"],["severity","error",3,"text"],[1,"card"],["severity","info","text","No payment plan information available for this credit."],[1,"grid"],[1,"col-12"],[1,"flex","justify-center","gap-3","p-4","bg-gray-50","border-round"],["label","Voir son historisque de cr\xE9dit","icon","pi pi-list","outlined","",3,"onClick"],[1,"p-card","p-3","mb-4"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-gridlines",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","scrollable","tableStyle"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],[1,"flex","align-items-center","mr-3","mb-2"],[1,"font-bold","mr-2"],[1,"flex","align-items-center","mb-2"],[3,"severity"],[1,"flex","justify-content-between","flex-wrap"],[1,"text-xl","font-bold"],["pSortableColumn","planPagosPKId.numCuota",2,"min-width","8rem"],["field","planPagosPKId.numCuota"],["pSortableColumn","fecCuota",2,"min-width","10rem"],["field","fecCuota"],["pSortableColumn","sal_PRINCIPAL",2,"min-width","10rem"],["field","sal_PRINCIPAL"],["pSortableColumn","mon_INT",2,"min-width","10rem"],["field","mon_INT"],["pSortableColumn","mon_COMISION",2,"min-width","10rem"],["field","mon_COMISION"],["pSortableColumn","mon_CUOTA",2,"min-width","10rem"],["field","mon_CUOTA"],["pSortableColumn","sal_CREDITO",2,"min-width","10rem"],["field","sal_CREDITO"],["pSortableColumn","indEstado",2,"min-width","8rem"],["field","indEstado"],[3,"severity","value"],[1,"flex","justify-content-end"],["colspan","8",1,"text-center","p-4"]],template:function(e,l){e&1&&(t(0,"div",0),P(1,ne,1,0,"p-progressSpinner")(2,ae,1,1,"p-message",1)(3,pe,10,10,"div",2)(4,ce,1,0,"p-message",3),i(),t(5,"div",4)(6,"div",5)(7,"div",6)(8,"p-button",7),D("onClick",function(){return l.retourListe()}),i()()()()),e&2&&(r(),C(l.loading()?1:-1),r(),C(l.error()?2:-1),r(),C(!l.loading()&&!l.error()&&l.getPlanPagosLength()>0?3:!l.loading()&&!l.error()?4:-1))},dependencies:[O,N,R,Z,U,j,G,X,W,Y,V,q,$,Q,z,H,J],encapsulation:2})};export{ee as DetailCreditComponent};
