{
  "version": 3,
  "sources": ["src/app/apps/mail/service/mail.service.ts"],
  "sourcesContent": ["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Mail } from '@/types/mail';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable()\nexport class MailService {\n    private _mails: Mail[] = [];\n\n    private mails = new BehaviorSubject<Mail[]>(this._mails);\n\n    mails$ = this.mails.asObservable();\n\n    constructor(private http: HttpClient) {\n        this.http\n            .get<any>('/demo/data/mail.json')\n            .toPromise()\n            .then((res) => res.data as Mail[])\n            .then((data) => {\n                this.updateMails(data);\n            });\n    }\n\n    updateMails(data: Mail[]) {\n        this._mails = data;\n        this.mails.next(data);\n    }\n\n    onStar(id: number) {\n        this._mails = this._mails.map((m) => (m.id === id ? { ...m, starred: !m.starred } : m));\n        this.mails.next(this._mails);\n    }\n\n    onArchive(id: number) {\n        this._mails = this._mails.map((m) => (m.id === id ? { ...m, archived: !m.archived } : m));\n        this.mails.next(this._mails);\n    }\n\n    onBookmark(id: number) {\n        this._mails = this._mails.map((m) => (m.id === id ? { ...m, important: !m.important } : m));\n        this.mails.next(this._mails);\n    }\n\n    onDelete(id: number) {\n        this._mails = this._mails.filter((m) => m.id !== id);\n        this.mails.next(this._mails);\n    }\n\n    onDeleteMultiple(mails: Mail[]) {\n        let idArray = mails.map((m) => Number(m.id));\n        this._mails = this._mails.filter((m) => idArray.indexOf(m.id) == -1);\n        this.mails.next(this._mails);\n    }\n\n    onArchiveMultiple(mails: Mail[]) {\n        let idArray = mails.map((m) => m.id);\n\n        for (let i = 0; i < this._mails.length; i++) {\n            let mail = this._mails[i];\n\n            if (idArray.indexOf(mail.id) !== -1) {\n                mail.archived = true;\n                this._mails[i] = mail;\n            }\n        }\n\n        this.mails.next(this._mails);\n    }\n\n    onSpamMultiple(mails: Mail[]) {\n        let idArray = mails.map((m) => m.id);\n\n        for (let i = 0; i < this._mails.length; i++) {\n            let mail = this._mails[i];\n\n            if (idArray.indexOf(mail.id) !== -1) {\n                mail = {\n                    ...mail,\n                    spam: true,\n                    important: false,\n                    starred: false,\n                    archived: false\n                };\n                this._mails[i] = mail;\n            }\n        }\n\n        this.mails.next(this._mails);\n    }\n\n    onTrash(id: number) {\n        this._mails = this._mails.map((m) => (m.id === id ? { ...m, trash: true } : m));\n        this.mails.next(this._mails);\n    }\n\n    onSend(mail: Mail) {\n        if (!mail.id) {\n            mail.id = this.generateId();\n        }\n        if (!mail.title) {\n            mail.title = 'Untitled';\n        }\n\n        mail.date = this.generateDate();\n        this._mails.push(mail);\n        this.mails.next(this._mails);\n    }\n\n    generateId() {\n        let text = '';\n        let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n        for (var i = 0; i < 5; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n\n        return text;\n    }\n\n    generateDate() {\n        return new Date().toDateString().split(' ').slice(1, 4).join(' ');\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
