import {
  Rating,
  RatingModule
} from "./chunk-A4PDURMQ.js";
import {
  TypeCreditService
} from "./chunk-YHWPLZ6H.js";
import {
  TabPanel,
  TabView,
  TabViewModule
} from "./chunk-I3MJ27E7.js";
import {
  ConfirmDialog,
  ConfirmDialogModule
} from "./chunk-JQ4E7TJM.js";
import {
  Textarea,
  TextareaModule
} from "./chunk-RW4OSSQT.js";
import {
  Message,
  MessageModule
} from "./chunk-CSEZIGTY.js";
import "./chunk-LPU4RT7P.js";
import "./chunk-WWXP2HWK.js";
import "./chunk-CXW3XKZ2.js";
import {
  Toast,
  ToastModule
} from "./chunk-6SRYYUT2.js";
import {
  Chip,
  ChipModule
} from "./chunk-SN3HAAMO.js";
import {
  Table,
  TableModule
} from "./chunk-REDVHUQC.js";
import "./chunk-YZRRSC3U.js";
import "./chunk-6K6X5UBT.js";
import "./chunk-7HJ4XJ7U.js";
import "./chunk-UQSIOFSP.js";
import "./chunk-OCW7T434.js";
import "./chunk-4JIPYACT.js";
import "./chunk-6GA37Q7Z.js";
import {
  Tag,
  TagModule
} from "./chunk-MYUKI7DG.js";
import "./chunk-544F7IXR.js";
import "./chunk-YBM6FZLP.js";
import "./chunk-U4P2VV4G.js";
import "./chunk-CPYA4VSS.js";
import {
  Card,
  CardModule
} from "./chunk-H46GQ57A.js";
import {
  InputNumber,
  InputNumberModule
} from "./chunk-JGOABXTK.js";
import "./chunk-HY2A3TN6.js";
import "./chunk-YEN5RMZS.js";
import "./chunk-XS7IVZ5T.js";
import "./chunk-CUABQE42.js";
import "./chunk-V6CKOH3G.js";
import "./chunk-DBPX6ILC.js";
import "./chunk-WIQZFAVH.js";
import "./chunk-CCBQFN2J.js";
import {
  ProgressSpinner,
  ProgressSpinnerModule
} from "./chunk-Y2J5OGKB.js";
import {
  ActivatedRoute,
  Router
} from "./chunk-BTKK64MU.js";
import "./chunk-36C7KO53.js";
import {
  takeUntilDestroyed
} from "./chunk-WRLBQDQK.js";
import "./chunk-KHEKFKWA.js";
import {
  InputTextModule
} from "./chunk-FZELBHWZ.js";
import "./chunk-4IUQ6KTI.js";
import "./chunk-IVSL2HKS.js";
import "./chunk-E352KRZV.js";
import "./chunk-HHD4PK4J.js";
import {
  Button,
  ButtonDirective,
  ButtonModule
} from "./chunk-PJSNAOPI.js";
import "./chunk-AP3OAIHW.js";
import {
  ConfirmationService,
  MessageService,
  PrimeTemplate
} from "./chunk-NQNBRQ7H.js";
import {
  DefaultValueAccessor,
  FormBuilder,
  FormControlName,
  FormGroupDirective,
  FormsModule,
  NgControlStatus,
  NgControlStatusGroup,
  ReactiveFormsModule,
  Validators,
  ɵNgNoValidate
} from "./chunk-3HTR5OU7.js";
import {
  UserService
} from "./chunk-SQ5BRWVW.js";
import "./chunk-ZRELZ6R7.js";
import "./chunk-BMYIFZHZ.js";
import "./chunk-W3K3GK4Z.js";
import {
  CommonModule,
  CurrencyPipe,
  DatePipe,
  NgClass,
  NgIf
} from "./chunk-SQQPVFHK.js";
import {
  DestroyRef,
  EMPTY,
  EventEmitter,
  inject,
  signal,
  switchMap,
  ɵsetClassDebugInfo,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵdefineComponent,
  ɵɵdirectiveInject,
  ɵɵelement,
  ɵɵelementContainerEnd,
  ɵɵelementContainerStart,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵlistener,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind2,
  ɵɵpipeBind3,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction2,
  ɵɵreference,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵsanitizeUrl,
  ɵɵstyleMap,
  ɵɵstyleProp,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2
} from "./chunk-ZKKMBKIA.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-4MWRP73S.js";

// src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-profile/note-profile.component.ts
function NoteProfileComponent_form_2_small_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Note requise entre 0 et 5 ");
    \u0275\u0275elementEnd();
  }
}
function NoteProfileComponent_form_2_small_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Motif requis ");
    \u0275\u0275elementEnd();
  }
}
function NoteProfileComponent_form_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "form", 4);
    \u0275\u0275listener("ngSubmit", function NoteProfileComponent_form_2_Template_form_ngSubmit_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.submit());
    });
    \u0275\u0275elementStart(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "label", 8);
    \u0275\u0275text(5, "Note (0-5)");
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "p-rating", 9);
    \u0275\u0275template(7, NoteProfileComponent_form_2_small_7_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 11)(9, "div", 7)(10, "label", 8);
    \u0275\u0275text(11, "Motif");
    \u0275\u0275elementEnd();
    \u0275\u0275element(12, "textarea", 12);
    \u0275\u0275template(13, NoteProfileComponent_form_2_small_13_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 11);
    \u0275\u0275element(15, "button", 13);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("formGroup", ctx_r1.noteForm);
    \u0275\u0275advance(6);
    \u0275\u0275property("stars", 5);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.touched));
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.touched));
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r1.submitting)("disabled", ctx_r1.noteForm.invalid);
  }
}
function NoteProfileComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15)(1, "div", 16)(2, "h3");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 17);
    \u0275\u0275listener("click", function NoteProfileComponent_div_3_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.editNote());
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "p")(6, "strong");
    \u0275\u0275text(7, "Motif:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "p")(10, "small");
    \u0275\u0275text(11);
    \u0275\u0275pipe(12, "date");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Note actuelle: ", ctx_r1.noteProfile == null ? null : ctx_r1.noteProfile.note, "/5");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r1.noteProfile == null ? null : ctx_r1.noteProfile.motif, "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Date: ", \u0275\u0275pipeBind2(12, 3, ctx_r1.noteProfile == null ? null : ctx_r1.noteProfile.createdAt, "dd/MM/yyyy HH:mm"), "");
  }
}
var NoteProfileComponent = class _NoteProfileComponent {
  fb;
  noteProfile;
  referenceCredit;
  userId;
  submitting = false;
  submitNote = new EventEmitter();
  noteForm;
  constructor(fb) {
    this.fb = fb;
  }
  ngOnInit() {
    this.initForm();
  }
  initForm() {
    this.noteForm = this.fb.group({
      note: [null, [Validators.required, Validators.min(0), Validators.max(5)]],
      motif: ["", Validators.required]
    });
  }
  submit() {
    if (this.noteForm.invalid) {
      return;
    }
    const note = __spreadProps(__spreadValues({}, this.noteForm.value), {
      referenceCredit: this.referenceCredit,
      createdAt: /* @__PURE__ */ new Date(),
      statusNote: "ACTIVE",
      userId: this.userId
    });
    this.submitNote.emit(note);
  }
  editNote() {
    if (this.noteProfile) {
      this.noteForm.patchValue({
        note: this.noteProfile.note,
        motif: this.noteProfile.motif
      });
      this.submitNote.emit(void 0);
    }
  }
  static \u0275fac = function NoteProfileComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NoteProfileComponent)(\u0275\u0275directiveInject(FormBuilder));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NoteProfileComponent, selectors: [["app-note-profile"]], inputs: { noteProfile: "noteProfile", referenceCredit: "referenceCredit", userId: "userId", submitting: "submitting" }, outputs: { submitNote: "submitNote" }, decls: 4, vars: 2, consts: [[1, "col-12", "mt-4"], ["header", "Notation du Profil"], [3, "formGroup", "ngSubmit", 4, "ngIf"], ["class", "p-3 border-round bg-blue-50", 4, "ngIf"], [3, "ngSubmit", "formGroup"], [1, "grid"], [1, "col-12", "md:col-6"], [1, "field"], [1, "font-bold"], ["formControlName", "note", 3, "stars"], ["class", "p-error", 4, "ngIf"], [1, "col-12"], ["pTextarea", "", "formControlName", "motif", "rows", "3", 1, "w-full"], ["pButton", "", "type", "submit", "label", "Soumettre la notation", "icon", "pi pi-check", 3, "loading", "disabled"], [1, "p-error"], [1, "p-3", "border-round", "bg-blue-50"], [1, "flex", "justify-content-between"], ["pButton", "", "icon", "pi pi-pencil", 1, "p-button-text", "p-button-sm", 3, "click"]], template: function NoteProfileComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "p-card", 1);
      \u0275\u0275template(2, NoteProfileComponent_form_2_Template, 16, 6, "form", 2)(3, NoteProfileComponent_div_3_Template, 13, 6, "div", 3);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", !(ctx.noteProfile == null ? null : ctx.noteProfile.noteProfileId));
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.noteProfile == null ? null : ctx.noteProfile.noteProfileId);
    }
  }, dependencies: [CommonModule, NgIf, DatePipe, FormsModule, \u0275NgNoValidate, DefaultValueAccessor, NgControlStatus, NgControlStatusGroup, ReactiveFormsModule, FormGroupDirective, FormControlName, CardModule, Card, ButtonModule, ButtonDirective, RatingModule, Rating, TextareaModule, Textarea], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NoteProfileComponent, { className: "NoteProfileComponent", filePath: "src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-profile/note-profile.component.ts", lineNumber: 15 });
})();

// src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-analyse/note-analyse.component.ts
function NoteAnalyseComponent_form_2_small_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Note requise entre 0 et 5 ");
    \u0275\u0275elementEnd();
  }
}
function NoteAnalyseComponent_form_2_small_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Motif requis ");
    \u0275\u0275elementEnd();
  }
}
function NoteAnalyseComponent_form_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "form", 4);
    \u0275\u0275listener("ngSubmit", function NoteAnalyseComponent_form_2_Template_form_ngSubmit_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.submit());
    });
    \u0275\u0275elementStart(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "label", 8);
    \u0275\u0275text(5, "Note (0-5)");
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "p-rating", 9);
    \u0275\u0275template(7, NoteAnalyseComponent_form_2_small_7_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 11)(9, "div", 7)(10, "label", 8);
    \u0275\u0275text(11, "Motif");
    \u0275\u0275elementEnd();
    \u0275\u0275element(12, "textarea", 12);
    \u0275\u0275template(13, NoteAnalyseComponent_form_2_small_13_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 11);
    \u0275\u0275element(15, "button", 13);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("formGroup", ctx_r1.noteForm);
    \u0275\u0275advance(6);
    \u0275\u0275property("stars", 5);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.touched));
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.touched));
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r1.submitting)("disabled", ctx_r1.noteForm.invalid);
  }
}
function NoteAnalyseComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15)(1, "div", 16)(2, "h3");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 17);
    \u0275\u0275listener("click", function NoteAnalyseComponent_div_3_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.editNote());
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "p")(6, "strong");
    \u0275\u0275text(7, "Motif:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "p")(10, "small");
    \u0275\u0275text(11);
    \u0275\u0275pipe(12, "date");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Note actuelle: ", ctx_r1.noteAnalyse == null ? null : ctx_r1.noteAnalyse.note, "/5");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r1.noteAnalyse == null ? null : ctx_r1.noteAnalyse.motif, "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Date: ", \u0275\u0275pipeBind2(12, 3, ctx_r1.noteAnalyse == null ? null : ctx_r1.noteAnalyse.createdAt, "dd/MM/yyyy HH:mm"), "");
  }
}
var NoteAnalyseComponent = class _NoteAnalyseComponent {
  fb;
  noteAnalyse;
  referenceCredit;
  userId;
  submitting = false;
  submitNote = new EventEmitter();
  noteForm;
  constructor(fb) {
    this.fb = fb;
  }
  ngOnInit() {
    this.initForm();
  }
  initForm() {
    this.noteForm = this.fb.group({
      note: [null, [Validators.required, Validators.min(0), Validators.max(5)]],
      motif: ["", Validators.required]
    });
  }
  submit() {
    if (this.noteForm.invalid) {
      return;
    }
    const note = __spreadProps(__spreadValues({}, this.noteForm.value), {
      referenceCredit: this.referenceCredit,
      createdAt: /* @__PURE__ */ new Date(),
      statusNote: "ACTIVE",
      userId: this.userId
    });
    this.submitNote.emit(note);
  }
  editNote() {
    if (this.noteAnalyse) {
      this.noteForm.patchValue({
        note: this.noteAnalyse.note,
        motif: this.noteAnalyse.motif
      });
      this.submitNote.emit(void 0);
    }
  }
  static \u0275fac = function NoteAnalyseComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NoteAnalyseComponent)(\u0275\u0275directiveInject(FormBuilder));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NoteAnalyseComponent, selectors: [["app-note-analyse"]], inputs: { noteAnalyse: "noteAnalyse", referenceCredit: "referenceCredit", userId: "userId", submitting: "submitting" }, outputs: { submitNote: "submitNote" }, decls: 4, vars: 2, consts: [[1, "col-12", "mt-4"], ["header", "Notation de l'Analyse"], [3, "formGroup", "ngSubmit", 4, "ngIf"], ["class", "p-3 border-round bg-orange-50", 4, "ngIf"], [3, "ngSubmit", "formGroup"], [1, "grid"], [1, "col-12", "md:col-6"], [1, "field"], [1, "font-bold"], ["formControlName", "note", 3, "stars"], ["class", "p-error", 4, "ngIf"], [1, "col-12"], ["pTextarea", "", "formControlName", "motif", "rows", "3", 1, "w-full"], ["pButton", "", "type", "submit", "label", "Soumettre la notation", "icon", "pi pi-check", 3, "loading", "disabled"], [1, "p-error"], [1, "p-3", "border-round", "bg-orange-50"], [1, "flex", "justify-content-between"], ["pButton", "", "icon", "pi pi-pencil", 1, "p-button-text", "p-button-sm", 3, "click"]], template: function NoteAnalyseComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "p-card", 1);
      \u0275\u0275template(2, NoteAnalyseComponent_form_2_Template, 16, 6, "form", 2)(3, NoteAnalyseComponent_div_3_Template, 13, 6, "div", 3);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", !(ctx.noteAnalyse == null ? null : ctx.noteAnalyse.noteAnalyseId));
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.noteAnalyse == null ? null : ctx.noteAnalyse.noteAnalyseId);
    }
  }, dependencies: [CommonModule, NgIf, DatePipe, FormsModule, \u0275NgNoValidate, DefaultValueAccessor, NgControlStatus, NgControlStatusGroup, ReactiveFormsModule, FormGroupDirective, FormControlName, CardModule, Card, ButtonModule, ButtonDirective, RatingModule, Rating, TextareaModule, Textarea], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NoteAnalyseComponent, { className: "NoteAnalyseComponent", filePath: "src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-analyse/note-analyse.component.ts", lineNumber: 15 });
})();

// src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-garantie/note-garantie.component.ts
function NoteGarantieComponent_form_2_small_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Note requise entre 0 et 5 ");
    \u0275\u0275elementEnd();
  }
}
function NoteGarantieComponent_form_2_small_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 14);
    \u0275\u0275text(1, " Motif requis ");
    \u0275\u0275elementEnd();
  }
}
function NoteGarantieComponent_form_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "form", 4);
    \u0275\u0275listener("ngSubmit", function NoteGarantieComponent_form_2_Template_form_ngSubmit_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.submit());
    });
    \u0275\u0275elementStart(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "label", 8);
    \u0275\u0275text(5, "Note (0-5)");
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "p-rating", 9);
    \u0275\u0275template(7, NoteGarantieComponent_form_2_small_7_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 11)(9, "div", 7)(10, "label", 8);
    \u0275\u0275text(11, "Motif");
    \u0275\u0275elementEnd();
    \u0275\u0275element(12, "textarea", 12);
    \u0275\u0275template(13, NoteGarantieComponent_form_2_small_13_Template, 2, 0, "small", 10);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 11);
    \u0275\u0275element(15, "button", 13);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("formGroup", ctx_r1.noteForm);
    \u0275\u0275advance(6);
    \u0275\u0275property("stars", 5);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r1.noteForm.get("note")) == null ? null : tmp_3_0.touched));
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r1.noteForm.get("motif")) == null ? null : tmp_4_0.touched));
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r1.submitting)("disabled", ctx_r1.noteForm.invalid);
  }
}
function NoteGarantieComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15)(1, "div", 16)(2, "h3");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 17);
    \u0275\u0275listener("click", function NoteGarantieComponent_div_3_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.editNote());
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "p")(6, "strong");
    \u0275\u0275text(7, "Motif:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "p")(10, "small");
    \u0275\u0275text(11);
    \u0275\u0275pipe(12, "date");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Note actuelle: ", ctx_r1.noteGarantie == null ? null : ctx_r1.noteGarantie.note, "/5");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r1.noteGarantie == null ? null : ctx_r1.noteGarantie.motif, "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Date: ", \u0275\u0275pipeBind2(12, 3, ctx_r1.noteGarantie == null ? null : ctx_r1.noteGarantie.createdAt, "dd/MM/yyyy HH:mm"), "");
  }
}
var NoteGarantieComponent = class _NoteGarantieComponent {
  fb;
  noteGarantie;
  referenceCredit;
  userId;
  submitting = false;
  submitNote = new EventEmitter();
  noteForm;
  constructor(fb) {
    this.fb = fb;
  }
  ngOnInit() {
    this.initForm();
  }
  initForm() {
    this.noteForm = this.fb.group({
      note: [null, [Validators.required, Validators.min(0), Validators.max(5)]],
      motif: ["", Validators.required]
    });
  }
  submit() {
    if (this.noteForm.invalid) {
      return;
    }
    const note = __spreadProps(__spreadValues({}, this.noteForm.value), {
      referenceCredit: this.referenceCredit,
      createdAt: /* @__PURE__ */ new Date(),
      statusNote: "ACTIVE",
      userId: this.userId
    });
    this.submitNote.emit(note);
  }
  editNote() {
    if (this.noteGarantie) {
      this.noteForm.patchValue({
        note: this.noteGarantie.note,
        motif: this.noteGarantie.motif
      });
      this.submitNote.emit(void 0);
    }
  }
  static \u0275fac = function NoteGarantieComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NoteGarantieComponent)(\u0275\u0275directiveInject(FormBuilder));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _NoteGarantieComponent, selectors: [["app-note-garantie"]], inputs: { noteGarantie: "noteGarantie", referenceCredit: "referenceCredit", userId: "userId", submitting: "submitting" }, outputs: { submitNote: "submitNote" }, decls: 4, vars: 2, consts: [[1, "col-12", "mt-4"], ["header", "Notation de la Garantie"], [3, "formGroup", "ngSubmit", 4, "ngIf"], ["class", "p-3 border-round bg-green-50", 4, "ngIf"], [3, "ngSubmit", "formGroup"], [1, "grid"], [1, "col-12", "md:col-6"], [1, "field"], [1, "font-bold"], ["formControlName", "note", 3, "stars"], ["class", "p-error", 4, "ngIf"], [1, "col-12"], ["pTextarea", "", "formControlName", "motif", "rows", "3", 1, "w-full"], ["pButton", "", "type", "submit", "label", "Soumettre la notation", "icon", "pi pi-check", 3, "loading", "disabled"], [1, "p-error"], [1, "p-3", "border-round", "bg-green-50"], [1, "flex", "justify-content-between"], ["pButton", "", "icon", "pi pi-pencil", 1, "p-button-text", "p-button-sm", 3, "click"]], template: function NoteGarantieComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "p-card", 1);
      \u0275\u0275template(2, NoteGarantieComponent_form_2_Template, 16, 6, "form", 2)(3, NoteGarantieComponent_div_3_Template, 13, 6, "div", 3);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", !(ctx.noteGarantie == null ? null : ctx.noteGarantie.noteGarantieId));
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.noteGarantie == null ? null : ctx.noteGarantie.noteGarantieId);
    }
  }, dependencies: [CommonModule, NgIf, DatePipe, FormsModule, \u0275NgNoValidate, DefaultValueAccessor, NgControlStatus, NgControlStatusGroup, ReactiveFormsModule, FormGroupDirective, FormControlName, CardModule, Card, ButtonModule, ButtonDirective, RatingModule, Rating, TextareaModule, Textarea], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(NoteGarantieComponent, { className: "NoteGarantieComponent", filePath: "src/app/pages/dashboard/resp-agent/view-instance-credit-ind/note-garantie/note-garantie.component.ts", lineNumber: 15 });
})();

// src/app/pages/dashboard/resp-agent/view-instance-credit-ind/appreciation/appreciation.component.ts
var _c0 = () => ({ width: "450px" });
var _c1 = (a0, a1) => ({ "bg-green-50": a0, "bg-red-50": a1 });
var _c2 = (a0, a1) => ({ "text-green-700": a0, "text-red-700": a1 });
function AppreciationComponent_div_4_small_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 15);
    \u0275\u0275text(1, " Montant sugg\xE9r\xE9 requis ");
    \u0275\u0275elementEnd();
  }
}
function AppreciationComponent_div_4_small_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 15);
    \u0275\u0275text(1, " Motif requis ");
    \u0275\u0275elementEnd();
  }
}
function AppreciationComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div")(1, "form", 4);
    \u0275\u0275listener("ngSubmit", function AppreciationComponent_div_4_Template_form_ngSubmit_1_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.confirmSubmission());
    });
    \u0275\u0275elementStart(2, "div", 5)(3, "div", 6)(4, "div", 7)(5, "label", 8);
    \u0275\u0275text(6, "Montant Demand\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275element(7, "p-inputNumber", 9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "div", 6)(9, "div", 7)(10, "label", 8);
    \u0275\u0275text(11, "Montant Sugg\xE9r\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275element(12, "p-inputNumber", 10);
    \u0275\u0275template(13, AppreciationComponent_div_4_small_13_Template, 2, 0, "small", 11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 12)(15, "div", 7)(16, "label", 8);
    \u0275\u0275text(17, "Motif");
    \u0275\u0275elementEnd();
    \u0275\u0275element(18, "textarea", 13);
    \u0275\u0275template(19, AppreciationComponent_div_4_small_19_Template, 2, 0, "small", 11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(20, "div", 12);
    \u0275\u0275element(21, "button", 14);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("formGroup", ctx_r1.appreciationForm);
    \u0275\u0275advance(6);
    \u0275\u0275property("disabled", true);
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ((tmp_3_0 = ctx_r1.appreciationForm.get("montantSuggere")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r1.appreciationForm.get("montantSuggere")) == null ? null : tmp_3_0.touched));
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ((tmp_4_0 = ctx_r1.appreciationForm.get("motif")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r1.appreciationForm.get("motif")) == null ? null : tmp_4_0.touched));
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r1.calculating)("disabled", ctx_r1.appreciationForm.invalid);
  }
}
function AppreciationComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 16)(1, "div", 17)(2, "h3");
    \u0275\u0275text(3, "D\xE9cision finale: ");
    \u0275\u0275elementStart(4, "span", 18);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div")(7, "button", 19);
    \u0275\u0275listener("click", function AppreciationComponent_div_5_Template_button_click_7_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.resetForm());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "button", 20);
    \u0275\u0275listener("click", function AppreciationComponent_div_5_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.confirmNavigation());
    });
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "div", 5)(10, "div", 21)(11, "div", 7)(12, "label", 8);
    \u0275\u0275text(13, "Note Totale");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div", 22);
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(16, "div", 21)(17, "div", 7)(18, "label", 8);
    \u0275\u0275text(19, "Montant Demand\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "div", 22);
    \u0275\u0275text(21);
    \u0275\u0275pipe(22, "currency");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(23, "div", 21)(24, "div", 7)(25, "label", 8);
    \u0275\u0275text(26, "Montant Sugg\xE9r\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(27, "div", 22);
    \u0275\u0275text(28);
    \u0275\u0275pipe(29, "currency");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(30, "div", 12)(31, "div", 7)(32, "label", 8);
    \u0275\u0275text(33, "Motif");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "div");
    \u0275\u0275text(35);
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    let tmp_6_0;
    let tmp_7_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction2(16, _c1, ctx_r1.resultNote.newStatus === "ACCEPTED", ctx_r1.resultNote.newStatus === "REJECTED"));
    \u0275\u0275advance(4);
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction2(19, _c2, ctx_r1.resultNote.newStatus === "ACCEPTED", ctx_r1.resultNote.newStatus === "REJECTED"));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r1.resultNote.newStatus === "ACCEPTED" ? "ACCEPT\xC9" : "REJET\xC9", " ");
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate2("", ctx_r1.resultNote.totalNote, "/", ctx_r1.maxScore, "");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind3(22, 8, ctx_r1.montantDemande, "GNF", "symbol"));
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind3(29, 12, (tmp_6_0 = ctx_r1.appreciationForm.get("montantSuggere")) == null ? null : tmp_6_0.value, "GNF", "symbol"));
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate((tmp_7_0 = ctx_r1.appreciationForm.get("motif")) == null ? null : tmp_7_0.value);
  }
}
var AppreciationComponent = class _AppreciationComponent {
  // Define constants
  static DEFAULT_THRESHOLD = 7.5;
  static MAX_SCORE = 15;
  referenceCredit;
  userId;
  montantDemande;
  appreciationForm;
  calculating = false;
  resultNote;
  // Expose constants to template
  maxScore = _AppreciationComponent.MAX_SCORE;
  fb = inject(FormBuilder);
  userService = inject(UserService);
  messageService = inject(MessageService);
  confirmationService = inject(ConfirmationService);
  router = inject(Router);
  ngOnInit() {
    this.initForm();
  }
  initForm() {
    this.appreciationForm = this.fb.group({
      motif: ["", Validators.required],
      montantSuggere: [null, [Validators.required, Validators.min(0)]],
      montantDemande: [{ value: this.montantDemande, disabled: true }]
      // Prefilled and disabled
    });
  }
  confirmSubmission() {
    if (this.appreciationForm.invalid) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "Veuillez remplir correctement tous les champs requis"
      });
      return;
    }
    this.confirmationService.confirm({
      message: "\xCAtes-vous s\xFBr de vouloir finaliser cette \xE9valuation de cr\xE9dit?",
      header: "Confirmation",
      icon: "pi pi-exclamation-triangle",
      accept: () => {
        this.submitAppreciation();
      }
    });
  }
  submitAppreciation() {
    if (!this.referenceCredit || !this.userId) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "Informations de r\xE9f\xE9rence manquantes"
      });
      return;
    }
    const threshold = _AppreciationComponent.DEFAULT_THRESHOLD;
    const appreciation = {
      motif: this.appreciationForm.get("motif")?.value,
      montantSuggere: this.appreciationForm.get("montantSuggere")?.value,
      montantDemande: this.montantDemande,
      referenceCredit: this.referenceCredit,
      userId: this.userId,
      createdAt: /* @__PURE__ */ new Date()
    };
    this.calculating = true;
    this.userService.calculateNotesAndUpdateCredit(threshold, appreciation).subscribe({
      next: (response) => {
        this.calculating = false;
        this.resultNote = response.data.resultNote;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `\xC9valuation de cr\xE9dit compl\xE9t\xE9e avec succ\xE8s. Statut: ${this.resultNote?.newStatus === "ACCEPTED" ? "ACCEPT\xC9" : "REJET\xC9"}`
        });
        this.appreciationForm.disable();
        setTimeout(() => {
          this.confirmNavigation();
        }, 2e3);
      },
      error: (error) => {
        this.calculating = false;
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors du calcul"
        });
      }
    });
  }
  confirmNavigation() {
    this.confirmationService.confirm({
      message: "Souhaitez-vous retourner au tableau de bord?",
      header: "Navigation",
      icon: "pi pi-home",
      accept: () => {
        this.navigateToDashboard();
      }
    });
  }
  navigateToDashboard() {
    this.router.navigate(["/dashboards/home"]);
  }
  resetForm() {
    this.appreciationForm.reset({
      montantDemande: this.montantDemande
    });
    this.appreciationForm.enable();
    this.appreciationForm.get("montantDemande")?.disable();
    this.resultNote = void 0;
  }
  static \u0275fac = function AppreciationComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _AppreciationComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _AppreciationComponent, selectors: [["app-appreciation"]], inputs: { referenceCredit: "referenceCredit", userId: "userId", montantDemande: "montantDemande" }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 6, vars: 5, consts: [[1, "col-12", "mt-4"], ["header", "Appr\xE9ciation Finale"], [4, "ngIf"], ["class", "p-3 border-round", 3, "ngClass", 4, "ngIf"], [3, "ngSubmit", "formGroup"], [1, "grid"], [1, "col-12", "md:col-6"], [1, "field"], [1, "font-bold"], ["formControlName", "montantDemande", "mode", "currency", "currency", "GNF", "locale", "fr-FR", 1, "w-full", 3, "disabled"], ["formControlName", "montantSuggere", "mode", "currency", "currency", "GNF", "locale", "fr-FR", 1, "w-full"], ["class", "p-error", 4, "ngIf"], [1, "col-12"], ["pTextarea", "", "formControlName", "motif", "rows", "3", 1, "w-full"], ["pButton", "", "type", "submit", "label", "Calculer et Finaliser", "icon", "pi pi-calculator", 3, "loading", "disabled"], [1, "p-error"], [1, "p-3", "border-round", 3, "ngClass"], [1, "flex", "justify-content-between", "align-items-center", "mb-3"], [3, "ngClass"], ["pButton", "", "icon", "pi pi-refresh", "label", "R\xE9initialiser", 1, "p-button-text", "mr-2", 3, "click"], ["pButton", "", "icon", "pi pi-home", "label", "Tableau de bord", 1, "p-button-text", 3, "click"], [1, "col-12", "md:col-4"], [1, "text-xl"]], template: function AppreciationComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275element(1, "p-toast")(2, "p-confirmDialog");
      \u0275\u0275elementStart(3, "p-card", 1);
      \u0275\u0275template(4, AppreciationComponent_div_4_Template, 22, 6, "div", 2)(5, AppreciationComponent_div_5_Template, 36, 22, "div", 3);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance(2);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(4, _c0));
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", !ctx.resultNote);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.resultNote);
    }
  }, dependencies: [CommonModule, NgClass, NgIf, CurrencyPipe, FormsModule, \u0275NgNoValidate, DefaultValueAccessor, NgControlStatus, NgControlStatusGroup, ReactiveFormsModule, FormGroupDirective, FormControlName, CardModule, Card, ButtonModule, ButtonDirective, InputTextModule, InputNumberModule, InputNumber, TextareaModule, Textarea, TabViewModule, TableModule, ConfirmDialogModule, ConfirmDialog, ToastModule, Toast], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(AppreciationComponent, { className: "AppreciationComponent", filePath: "src/app/pages/dashboard/resp-agent/view-instance-credit-ind/appreciation/appreciation.component.ts", lineNumber: 26 });
})();

// src/app/pages/dashboard/resp-agent/view-instance-credit-ind/view-instance-credit-ind.component.ts
var _c02 = () => ({ width: "60px", height: "60px" });
var _c12 = () => [];
function ViewInstanceCreditIndComponent_i_36_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 25);
  }
}
function ViewInstanceCreditIndComponent_div_37_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 26)(1, "div", 27);
    \u0275\u0275element(2, "p-progressSpinner", 28);
    \u0275\u0275elementStart(3, "p", 29);
    \u0275\u0275text(4, "Chargement des d\xE9tails du cr\xE9dit...");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    \u0275\u0275advance(2);
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(2, _c02));
  }
}
function ViewInstanceCreditIndComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 30);
    \u0275\u0275element(1, "p-message", 31);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("text", ctx_r0.state().error);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_3_p_chip_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-chip", 105);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 103);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Profil Client");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, ViewInstanceCreditIndComponent_div_39_ng_template_3_p_chip_3_Template, 1, 0, "p-chip", 104);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r0.state().noteProfile);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 106)(1, "h3", 107);
    \u0275\u0275element(2, "i", 108);
    \u0275\u0275text(3, "Information du Client ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_35_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 109)(1, "h3", 107);
    \u0275\u0275element(2, "i", 110);
    \u0275\u0275text(3, "D\xE9tails du Cr\xE9dit ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_84_p_chip_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-chip", 105);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_84_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 111);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Analyse Financi\xE8re");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, ViewInstanceCreditIndComponent_div_39_ng_template_84_p_chip_3_Template, 1, 0, "p-chip", 104);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r0.state().noteAnalyse);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_88_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 112)(1, "h3", 107);
    \u0275\u0275element(2, "i", 113);
    \u0275\u0275text(3, "R\xE9capitulatif Financier ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_119_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 106)(1, "h3", 107);
    \u0275\u0275element(2, "i", 114);
    \u0275\u0275text(3, "D\xE9tail des Produits ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_121_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275element(2, "i", 115);
    \u0275\u0275text(3, "Libell\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th", 116);
    \u0275\u0275element(5, "i", 117);
    \u0275\u0275text(6, "Prix Unitaire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 27);
    \u0275\u0275element(8, "i", 118);
    \u0275\u0275text(9, "Quantit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 116);
    \u0275\u0275element(11, "i", 119);
    \u0275\u0275text(12, "Total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th");
    \u0275\u0275element(14, "i", 120);
    \u0275\u0275text(15, "Observation");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_122_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr", 121)(1, "td")(2, "div", 122)(3, "span", 123);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 124);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(7, "td", 125);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 27)(10, "span", 126);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td", 127);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "td")(15, "span", 99);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const product_r3 = ctx.$implicit;
    const i_r4 = ctx.rowIndex;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(i_r4 + 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(product_r3.libele);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r0.formatMontantGNF(product_r3.prix_unit || 0), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(product_r3.qte);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF((product_r3.prix_unit || 0) * (product_r3.qte || 0)), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(product_r3.observation || "Aucune observation");
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_123_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr", 128)(1, "td", 129);
    \u0275\u0275element(2, "i", 113);
    \u0275\u0275text(3, "Total G\xE9n\xE9ral: ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td", 130);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "td");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(ctx_r0.calculateProductTotal()), " ");
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_124_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 131)(2, "div", 132);
    \u0275\u0275element(3, "i", 133);
    \u0275\u0275elementStart(4, "span", 134);
    \u0275\u0275text(5, "Aucun produit disponible");
    \u0275\u0275elementEnd()()()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_127_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 135)(1, "h3", 107);
    \u0275\u0275element(2, "i", 136);
    \u0275\u0275text(3, "D\xE9tail des Charges ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_129_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275element(2, "i", 115);
    \u0275\u0275text(3, "Libell\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th", 116);
    \u0275\u0275element(5, "i", 117);
    \u0275\u0275text(6, "Prix Unitaire");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 27);
    \u0275\u0275element(8, "i", 118);
    \u0275\u0275text(9, "Quantit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 116);
    \u0275\u0275element(11, "i", 119);
    \u0275\u0275text(12, "Total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th", 27);
    \u0275\u0275element(14, "i", 137);
    \u0275\u0275text(15, "Date");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_130_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr", 138)(1, "td")(2, "div", 122)(3, "span", 139);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "span", 124);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(7, "td", 125);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 27)(10, "span", 126);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td", 140);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "td", 27)(15, "span", 99);
    \u0275\u0275text(16);
    \u0275\u0275pipe(17, "date");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const charge_r5 = ctx.$implicit;
    const i_r6 = ctx.rowIndex;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(i_r6 + 1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(charge_r5.libele);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", ctx_r0.formatMontantGNF(charge_r5.prix_unit || 0), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(charge_r5.qte);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF((charge_r5.prix_unit || 0) * (charge_r5.qte || 0)), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(17, 6, charge_r5.create_at, "dd/MM/yyyy"));
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_131_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr", 141)(1, "td", 129);
    \u0275\u0275element(2, "i", 113);
    \u0275\u0275text(3, "Total G\xE9n\xE9ral: ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td", 142);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275element(6, "td");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(ctx_r0.calculateChargeTotal()), " ");
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_132_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 131)(2, "div", 132);
    \u0275\u0275element(3, "i", 143);
    \u0275\u0275elementStart(4, "span", 134);
    \u0275\u0275text(5, "Aucune charge disponible");
    \u0275\u0275elementEnd()()()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_136_p_chip_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-chip", 105);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_136_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 144);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Garanties");
    \u0275\u0275elementEnd();
    \u0275\u0275template(3, ViewInstanceCreditIndComponent_div_39_ng_template_136_p_chip_3_Template, 1, 0, "p-chip", 104);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", ctx_r0.state().noteGarantie);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_140_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 145)(1, "h3", 107);
    \u0275\u0275element(2, "i", 146);
    \u0275\u0275text(3, "Garantie Mat\xE9rielle ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_container_159_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainerStart(0);
    \u0275\u0275text(1);
    \u0275\u0275pipe(2, "date");
    \u0275\u0275elementContainerEnd();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(2, 1, (tmp_3_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_3_0.garantieCreatedAt, "dd/MM/yyyy HH:mm"), " ");
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_160_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0, "N/A");
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_164_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 147)(1, "h3", 107);
    \u0275\u0275element(2, "i", 148);
    \u0275\u0275text(3, "Localisation ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_189_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 149)(1, "h3", 107);
    \u0275\u0275element(2, "i", 150);
    \u0275\u0275text(3, "Personnes Caution ");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_191_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275element(2, "i", 151);
    \u0275\u0275text(3, "Nom & Pr\xE9nom");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th");
    \u0275\u0275element(5, "i", 152);
    \u0275\u0275text(6, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 27);
    \u0275\u0275element(8, "i", 137);
    \u0275\u0275text(9, "\xC2ge");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th");
    \u0275\u0275element(11, "i", 153);
    \u0275\u0275text(12, "Activit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th");
    \u0275\u0275element(14, "i", 154);
    \u0275\u0275text(15, "Profession");
    \u0275\u0275elementEnd()();
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_192_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr", 155)(1, "td")(2, "div", 122)(3, "span", 156);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div")(6, "div", 98);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(8, "td")(9, "a", 157);
    \u0275\u0275element(10, "i", 152);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td", 27)(13, "span", 126);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "td")(16, "span", 99);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "td");
    \u0275\u0275element(19, "p-tag", 158);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const caution_r7 = ctx.$implicit;
    const i_r8 = ctx.rowIndex;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(i_r8 + 1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", caution_r7.nom, " ", caution_r7.prenom, "");
    \u0275\u0275advance(2);
    \u0275\u0275property("href", "tel:" + caution_r7.telephone, \u0275\u0275sanitizeUrl);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", caution_r7.telephone, " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("", caution_r7.age, " ans");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(caution_r7.activite);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", caution_r7.profession);
  }
}
function ViewInstanceCreditIndComponent_div_39_ng_template_193_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 131)(2, "div", 132);
    \u0275\u0275element(3, "i", 159);
    \u0275\u0275elementStart(4, "span", 134);
    \u0275\u0275text(5, "Aucune personne de caution disponible");
    \u0275\u0275elementEnd()()()();
  }
}
function ViewInstanceCreditIndComponent_div_39_p_tabPanel_196_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 161);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Appr\xE9ciation Finale");
    \u0275\u0275elementEnd();
    \u0275\u0275element(3, "p-chip", 105);
  }
}
function ViewInstanceCreditIndComponent_div_39_p_tabPanel_196_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-tabPanel");
    \u0275\u0275template(1, ViewInstanceCreditIndComponent_div_39_p_tabPanel_196_ng_template_1_Template, 4, 0, "ng-template", 33);
    \u0275\u0275element(2, "app-appreciation", 160);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275property("referenceCredit", (tmp_3_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_3_0.referenceCredit)("userId", ctx_r0.userId)("montantDemande", (tmp_5_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_5_0.capital);
  }
}
function ViewInstanceCreditIndComponent_div_39_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 30)(1, "p-tabView", 32)(2, "p-tabPanel");
    \u0275\u0275template(3, ViewInstanceCreditIndComponent_div_39_ng_template_3_Template, 4, 1, "ng-template", 33);
    \u0275\u0275elementStart(4, "div", 34)(5, "div", 35)(6, "p-card", 36);
    \u0275\u0275template(7, ViewInstanceCreditIndComponent_div_39_ng_template_7_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(8, "div", 37)(9, "div", 38)(10, "label", 39);
    \u0275\u0275element(11, "i", 40);
    \u0275\u0275text(12, "Num\xE9ro Membre ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "div", 41);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 38)(16, "label", 39);
    \u0275\u0275element(17, "i", 42);
    \u0275\u0275text(18, "Nom & Pr\xE9nom ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "div", 43);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(21, "div", 38)(22, "label", 39);
    \u0275\u0275element(23, "i", 44);
    \u0275\u0275text(24, "T\xE9l\xE9phone ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "div", 45);
    \u0275\u0275text(26);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(27, "div", 38)(28, "label", 39);
    \u0275\u0275element(29, "i", 46);
    \u0275\u0275text(30, "Type de Cr\xE9dit ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "div", 47);
    \u0275\u0275text(32);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(33, "div", 35)(34, "p-card", 36);
    \u0275\u0275template(35, ViewInstanceCreditIndComponent_div_39_ng_template_35_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(36, "div", 37)(37, "div", 38)(38, "label", 39);
    \u0275\u0275element(39, "i", 48);
    \u0275\u0275text(40, "Moyen de Transport ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(41, "div", 41);
    \u0275\u0275text(42);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(43, "div", 38)(44, "label", 39);
    \u0275\u0275element(45, "i", 49);
    \u0275\u0275text(46, "Capital Demand\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(47, "div", 50);
    \u0275\u0275text(48);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(49, "div", 34)(50, "div", 51)(51, "div", 38)(52, "label", 52);
    \u0275\u0275element(53, "i", 53);
    \u0275\u0275text(54, "Cr\xE9ance ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(55, "div", 54);
    \u0275\u0275text(56);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(57, "div", 51)(58, "div", 38)(59, "label", 52);
    \u0275\u0275element(60, "i", 55);
    \u0275\u0275text(61, "Dette ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(62, "div", 56);
    \u0275\u0275text(63);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(64, "div", 38)(65, "label", 39);
    \u0275\u0275element(66, "i", 57);
    \u0275\u0275text(67, "Statut Activit\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275element(68, "p-tag", 58);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(69, "div", 38)(70, "label", 39);
    \u0275\u0275element(71, "i", 59);
    \u0275\u0275text(72, "Exp\xE9rience ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(73, "div", 47);
    \u0275\u0275text(74);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(75, "div", 38)(76, "label", 39);
    \u0275\u0275element(77, "i", 60);
    \u0275\u0275text(78, "Lieu d'Activit\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(79, "div", 61);
    \u0275\u0275text(80);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(81, "div", 62)(82, "app-note-profile", 63);
    \u0275\u0275listener("submitNote", function ViewInstanceCreditIndComponent_div_39_Template_app_note_profile_submitNote_82_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.handleProfileNote($event));
    });
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(83, "p-tabPanel");
    \u0275\u0275template(84, ViewInstanceCreditIndComponent_div_39_ng_template_84_Template, 4, 1, "ng-template", 33);
    \u0275\u0275elementStart(85, "div", 34)(86, "div", 64)(87, "p-card", 65);
    \u0275\u0275template(88, ViewInstanceCreditIndComponent_div_39_ng_template_88_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(89, "div", 34)(90, "div", 66)(91, "div", 67);
    \u0275\u0275element(92, "i", 68);
    \u0275\u0275elementStart(93, "h4", 69);
    \u0275\u0275text(94, "Total Produits");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(95, "div", 70);
    \u0275\u0275text(96);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(97, "small", 71);
    \u0275\u0275text(98);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(99, "div", 66)(100, "div", 72);
    \u0275\u0275element(101, "i", 73);
    \u0275\u0275elementStart(102, "h4", 74);
    \u0275\u0275text(103, "Total Charges");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(104, "div", 75);
    \u0275\u0275text(105);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(106, "small", 76);
    \u0275\u0275text(107);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(108, "div", 66)(109, "div", 77);
    \u0275\u0275element(110, "i", 78);
    \u0275\u0275elementStart(111, "h4", 79);
    \u0275\u0275text(112, "R\xE9sultat Net");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(113, "div", 80);
    \u0275\u0275text(114);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(115, "small", 81);
    \u0275\u0275text(116, "Produits - Charges");
    \u0275\u0275elementEnd()()()()()();
    \u0275\u0275elementStart(117, "div", 82)(118, "p-card", 65);
    \u0275\u0275template(119, ViewInstanceCreditIndComponent_div_39_ng_template_119_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(120, "p-table", 83);
    \u0275\u0275template(121, ViewInstanceCreditIndComponent_div_39_ng_template_121_Template, 16, 0, "ng-template", 33)(122, ViewInstanceCreditIndComponent_div_39_ng_template_122_Template, 17, 6, "ng-template", 84)(123, ViewInstanceCreditIndComponent_div_39_ng_template_123_Template, 7, 1, "ng-template", 85)(124, ViewInstanceCreditIndComponent_div_39_ng_template_124_Template, 6, 0, "ng-template", 86);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(125, "div", 62)(126, "p-card", 65);
    \u0275\u0275template(127, ViewInstanceCreditIndComponent_div_39_ng_template_127_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(128, "p-table", 87);
    \u0275\u0275template(129, ViewInstanceCreditIndComponent_div_39_ng_template_129_Template, 16, 0, "ng-template", 33)(130, ViewInstanceCreditIndComponent_div_39_ng_template_130_Template, 18, 9, "ng-template", 84)(131, ViewInstanceCreditIndComponent_div_39_ng_template_131_Template, 7, 1, "ng-template", 85)(132, ViewInstanceCreditIndComponent_div_39_ng_template_132_Template, 6, 0, "ng-template", 86);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(133, "div", 62)(134, "app-note-analyse", 88);
    \u0275\u0275listener("submitNote", function ViewInstanceCreditIndComponent_div_39_Template_app_note_analyse_submitNote_134_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.handleAnalyseNote($event));
    });
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(135, "p-tabPanel");
    \u0275\u0275template(136, ViewInstanceCreditIndComponent_div_39_ng_template_136_Template, 4, 1, "ng-template", 33);
    \u0275\u0275elementStart(137, "div", 34)(138, "div", 89)(139, "p-card", 36);
    \u0275\u0275template(140, ViewInstanceCreditIndComponent_div_39_ng_template_140_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(141, "div", 37)(142, "div", 38)(143, "label", 39);
    \u0275\u0275element(144, "i", 90);
    \u0275\u0275text(145, "Libell\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(146, "div", 41);
    \u0275\u0275text(147);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(148, "div", 38)(149, "label", 39);
    \u0275\u0275element(150, "i", 91);
    \u0275\u0275text(151, "Montant de la Garantie ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(152, "div", 50);
    \u0275\u0275text(153);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(154, "div", 38)(155, "label", 39);
    \u0275\u0275element(156, "i", 59);
    \u0275\u0275text(157, "Date de Cr\xE9ation ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(158, "div", 47);
    \u0275\u0275template(159, ViewInstanceCreditIndComponent_div_39_ng_container_159_Template, 3, 4, "ng-container", 92)(160, ViewInstanceCreditIndComponent_div_39_ng_template_160_Template, 1, 0, "ng-template", null, 0, \u0275\u0275templateRefExtractor);
    \u0275\u0275elementEnd()()()()();
    \u0275\u0275elementStart(162, "div", 89)(163, "p-card", 36);
    \u0275\u0275template(164, ViewInstanceCreditIndComponent_div_39_ng_template_164_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(165, "div", 37)(166, "div", 38)(167, "label", 39);
    \u0275\u0275element(168, "i", 93);
    \u0275\u0275text(169, "IT ASS ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(170, "div", 45);
    \u0275\u0275text(171);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(172, "div", 38)(173, "label", 39);
    \u0275\u0275element(174, "i", 94);
    \u0275\u0275text(175, "IT PC ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(176, "div", 95);
    \u0275\u0275text(177);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(178, "div", 38)(179, "label", 39);
    \u0275\u0275element(180, "i", 96);
    \u0275\u0275text(181, "Fr\xE9quence de Remboursement ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(182, "div", 97)(183, "span", 98);
    \u0275\u0275text(184);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(185, "span", 99);
    \u0275\u0275text(186, "jours");
    \u0275\u0275elementEnd()()()()()();
    \u0275\u0275elementStart(187, "div", 62)(188, "p-card", 65);
    \u0275\u0275template(189, ViewInstanceCreditIndComponent_div_39_ng_template_189_Template, 4, 0, "ng-template", 33);
    \u0275\u0275elementStart(190, "p-table", 100);
    \u0275\u0275template(191, ViewInstanceCreditIndComponent_div_39_ng_template_191_Template, 16, 0, "ng-template", 33)(192, ViewInstanceCreditIndComponent_div_39_ng_template_192_Template, 20, 8, "ng-template", 84)(193, ViewInstanceCreditIndComponent_div_39_ng_template_193_Template, 6, 0, "ng-template", 86);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(194, "div", 62)(195, "app-note-garantie", 101);
    \u0275\u0275listener("submitNote", function ViewInstanceCreditIndComponent_div_39_Template_app_note_garantie_submitNote_195_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.handleGarantieNote($event));
    });
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(196, ViewInstanceCreditIndComponent_div_39_p_tabPanel_196_Template, 3, 3, "p-tabPanel", 102);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_2_0;
    let tmp_3_0;
    let tmp_4_0;
    let tmp_5_0;
    let tmp_6_0;
    let tmp_7_0;
    let tmp_8_0;
    let tmp_9_0;
    let tmp_10_0;
    let tmp_11_0;
    let tmp_12_0;
    let tmp_13_0;
    let tmp_15_0;
    let tmp_32_0;
    let tmp_35_0;
    let tmp_36_0;
    let tmp_37_0;
    let tmp_39_0;
    let tmp_40_0;
    let tmp_41_0;
    let tmp_47_0;
    const noGarantieDate_r9 = \u0275\u0275reference(161);
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(14);
    \u0275\u0275textInterpolate1(" ", (tmp_2_0 = ctx_r0.state().membre) == null ? null : tmp_2_0.clientesPKId == null ? null : tmp_2_0.clientesPKId.codCliente, " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ((tmp_3_0 = ctx_r0.state().membre) == null ? null : tmp_3_0.nom_CLIENTE) || "N/A", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ((tmp_4_0 = ctx_r0.state().membre) == null ? null : tmp_4_0.tel_PRINCIPAL) || "N/A", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r0.typeCreditService.getCreditTypeDescription(+((tmp_5_0 = ctx_r0.state().creditDto) == null ? null : tmp_5_0.typeCredit)), " ");
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate1(" ", ((tmp_6_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_6_0.moyenPerson) || "N/A", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(((tmp_7_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_7_0.capital) || 0), " ");
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(((tmp_8_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_8_0.creance) || 0), " ");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(((tmp_9_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_9_0.dette) || 0), " ");
    \u0275\u0275advance(5);
    \u0275\u0275property("value", ((tmp_10_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_10_0.statutActivite) || "N/A")("severity", ctx_r0.getStatusSeverity((tmp_11_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_11_0.statutActivite));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ((tmp_12_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_12_0.experience) || "N/A", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ((tmp_13_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_13_0.lieuxAct) || "N/A", " ");
    \u0275\u0275advance(2);
    \u0275\u0275property("noteProfile", ctx_r0.state().noteProfile)("referenceCredit", (tmp_15_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_15_0.referenceCredit)("userId", ctx_r0.userId)("submitting", ctx_r0.state().submittingProfile);
    \u0275\u0275advance(14);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(ctx_r0.calculateProductTotal()), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", (ctx_r0.state().products || \u0275\u0275pureFunction0(49, _c12)).length, " produit(s)");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(ctx_r0.calculateChargeTotal()), " ");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", (ctx_r0.state().charges || \u0275\u0275pureFunction0(50, _c12)).length, " charge(s)");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(ctx_r0.calculateNetTotal()), " ");
    \u0275\u0275advance(6);
    \u0275\u0275property("value", ctx_r0.state().products || \u0275\u0275pureFunction0(51, _c12))("paginator", true)("rows", 5)("showCurrentPageReport", true);
    \u0275\u0275advance(8);
    \u0275\u0275property("value", ctx_r0.state().charges || \u0275\u0275pureFunction0(52, _c12))("paginator", true)("rows", 5)("showCurrentPageReport", true);
    \u0275\u0275advance(6);
    \u0275\u0275property("noteAnalyse", ctx_r0.state().noteAnalyse)("referenceCredit", (tmp_32_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_32_0.referenceCredit)("userId", ctx_r0.userId)("submitting", ctx_r0.state().submittingAnalyse);
    \u0275\u0275advance(13);
    \u0275\u0275textInterpolate1(" ", ((tmp_35_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_35_0.garantieLibele) || "N/A", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(((tmp_36_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_36_0.garantieMontant) || 0), " ");
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", (tmp_37_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_37_0.garantieCreatedAt)("ngIfElse", noGarantieDate_r9);
    \u0275\u0275advance(12);
    \u0275\u0275textInterpolate1(" ", ((tmp_39_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_39_0.itAss) || "Non renseign\xE9", " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ((tmp_40_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_40_0.itPc) || "Non renseign\xE9", " ");
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(((tmp_41_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_41_0.frequence) || 0);
    \u0275\u0275advance(6);
    \u0275\u0275property("value", ctx_r0.state().garantieCaution || \u0275\u0275pureFunction0(53, _c12))("paginator", true)("rows", 5)("showCurrentPageReport", true);
    \u0275\u0275advance(5);
    \u0275\u0275property("noteGarantie", ctx_r0.state().noteGarantie)("referenceCredit", (tmp_47_0 = ctx_r0.state().instanceCreditInd) == null ? null : tmp_47_0.referenceCredit)("userId", ctx_r0.userId)("submitting", ctx_r0.state().submittingGarantie);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.showAppreciationTab());
  }
}
var ViewInstanceCreditIndComponent = class _ViewInstanceCreditIndComponent {
  // Add form groups
  analyseForm;
  garantieForm;
  userId = null;
  state = signal({
    loading: false,
    submittingProfile: false,
    submittingAnalyse: false,
    submittingGarantie: false,
    message: void 0,
    error: void 0
  });
  userService = inject(UserService);
  router = inject(Router);
  destroyRef = inject(DestroyRef);
  activatedRouter = inject(ActivatedRoute);
  messageService = inject(MessageService);
  typeCreditService = inject(TypeCreditService);
  ngOnInit() {
    this.loadCreditNew();
  }
  // Méthode pour formater les montants en GNF
  formatMontantGNF(montant) {
    if (!montant || montant === 0)
      return "0 GNF";
    return new Intl.NumberFormat("fr-FR", {
      style: "currency",
      currency: "GNF",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(montant);
  }
  // Méthode pour obtenir l'état de complétude des notes
  getNotesCompletionStatus() {
    const notes = [this.state().noteProfile, this.state().noteAnalyse, this.state().noteGarantie];
    const completed = notes.filter((note) => note).length;
    const total = 3;
    const percentage = Math.round(completed / total * 100);
    return { completed, total, percentage };
  }
  // Méthode pour obtenir la couleur du statut de crédit
  getCreditStatusClass(status) {
    if (!status)
      return "bg-gray-100 text-gray-800";
    switch (status.toUpperCase()) {
      case "VALIDE":
        return "bg-green-100 text-green-800";
      case "ENCOURS":
        return "bg-yellow-100 text-yellow-800";
      case "REJECTED":
        return "bg-red-100 text-red-800";
      default:
        return "bg-blue-100 text-blue-800";
    }
  }
  submitAnalyseNote() {
    if (this.analyseForm.invalid) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "Veuillez remplir correctement tous les champs requis"
      });
      return;
    }
    const referenceCredit = this.state().instanceCreditInd?.referenceCredit;
    if (!referenceCredit) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "R\xE9f\xE9rence de cr\xE9dit manquante"
      });
      return;
    }
    if (!this.userId) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "ID utilisateur manquant"
      });
      return;
    }
    const noteAnalyse = __spreadProps(__spreadValues({}, this.analyseForm.value), {
      referenceCredit,
      createdAt: /* @__PURE__ */ new Date(),
      statusNote: "ACTIVE",
      userId: this.userId
    });
    this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingAnalyse: true }));
    this.userService.addNoteAnalyse$(referenceCredit, noteAnalyse).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          submittingAnalyse: false,
          noteAnalyse
        }));
        this.analyseForm.reset();
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Note d'analyse ajout\xE9e avec succ\xE8s"
        });
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingAnalyse: false }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors de l'ajout de la note"
        });
      }
    });
  }
  submitGarantieNote() {
    if (this.garantieForm.invalid) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "Veuillez remplir correctement tous les champs requis"
      });
      return;
    }
    const referenceCredit = this.state().instanceCreditInd?.referenceCredit;
    if (!referenceCredit) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "R\xE9f\xE9rence de cr\xE9dit manquante"
      });
      return;
    }
    if (!this.userId) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "ID utilisateur manquant"
      });
      return;
    }
    const noteGarantie = __spreadProps(__spreadValues({}, this.garantieForm.value), {
      referenceCredit,
      createdAt: /* @__PURE__ */ new Date(),
      statusNote: "ACTIVE",
      userId: this.userId
    });
    this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingGarantie: true }));
    this.userService.addNoteGarantie$(referenceCredit, noteGarantie).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          submittingGarantie: false,
          noteGarantie
        }));
        this.garantieForm.reset();
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Note de garantie ajout\xE9e avec succ\xE8s"
        });
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingGarantie: false }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors de l'ajout de la note"
        });
      }
    });
  }
  loadCreditNew() {
    this.activatedRouter.paramMap.pipe(switchMap((params) => {
      const referenceCredit = params.get("referenceCredit");
      const numeroMembre = params.get("numeroMembre");
      const userId = params.get("userId");
      this.userId = userId ? +userId : null;
      if (referenceCredit) {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { loading: true, message: void 0, error: void 0 }));
        return this.userService.viewInstanceCredit$(referenceCredit, numeroMembre, +userId);
      } else {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { loading: false, message: void 0, error: "Invalide NumeroMembre" }));
        return EMPTY;
      }
    }), takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          instanceCreditInd: response.data?.instanceCreditInd,
          creditDto: response.data?.creditDto,
          referenceCredit: response.data?.creditDto?.referenceCredit,
          membre: response.data?.membre,
          charges: response.data?.charges || [],
          products: response.data?.products || [],
          garantieCaution: response.data?.garantieCaution || [],
          noteProfile: response.data?.noteProfile,
          noteAnalyse: response.data?.noteAnalyse,
          noteGarantie: response.data?.noteGarantie,
          loading: false,
          message: response.message,
          error: void 0
        }));
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { loading: false, message: void 0, error }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors du chargement des donn\xE9es"
        });
      }
    });
  }
  getStatusSeverity(status) {
    if (!status)
      return "info";
    switch (status.toUpperCase()) {
      case "ACTIVE":
      case "APPROUVE":
        return "success";
      case "EN_ATTENTE":
        return "warn";
      case "INACTIVE":
      case "REJETE":
        return "danger";
      default:
        return "info";
    }
  }
  getCreditStateSeverity(state) {
    if (!state)
      return "info";
    switch (state.toUpperCase()) {
      case "VALIDE":
        return "success";
      case "ENCOURS":
        return "warn";
      case "REJECTED":
        return "danger";
      default:
        return "info";
    }
  }
  calculateProductTotal() {
    if (!this.state().products?.length)
      return 0;
    return this.state().products.reduce((total, product) => {
      return total + (product.prix_unit || 0) * (product.qte || 0);
    }, 0);
  }
  calculateChargeTotal() {
    if (!this.state().charges?.length)
      return 0;
    return this.state().charges.reduce((total, charge) => {
      return total + (charge.prix_unit || 0) * (charge.qte || 0);
    }, 0);
  }
  calculateNetTotal() {
    return this.calculateProductTotal() - this.calculateChargeTotal();
  }
  handleProfileNote(note) {
    if (!note) {
      this.state.update((state) => __spreadProps(__spreadValues({}, state), { noteProfile: void 0 }));
      return;
    }
    const referenceCredit = this.state().instanceCreditInd?.referenceCredit;
    if (!referenceCredit) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "R\xE9f\xE9rence de cr\xE9dit manquante"
      });
      return;
    }
    this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingProfile: true }));
    this.userService.addNoteProfile$(referenceCredit, note).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          submittingProfile: false,
          noteProfile: response.data.noteProfile,
          noteAnalyse: response.data.noteAnalyse,
          noteGarantie: response.data.noteGarantie
        }));
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Note de profil ajout\xE9e avec succ\xE8s"
        });
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingProfile: false }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors de l'ajout de la note"
        });
      }
    });
  }
  handleAnalyseNote(note) {
    if (!note) {
      this.state.update((state) => __spreadProps(__spreadValues({}, state), { noteAnalyse: void 0 }));
      return;
    }
    const referenceCredit = this.state().instanceCreditInd?.referenceCredit;
    if (!referenceCredit) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "R\xE9f\xE9rence de cr\xE9dit manquante"
      });
      return;
    }
    this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingAnalyse: true }));
    this.userService.addNoteAnalyse$(referenceCredit, note).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          submittingAnalyse: false,
          noteProfile: response.data.noteProfile,
          noteAnalyse: response.data.noteAnalyse,
          noteGarantie: response.data.noteGarantie
        }));
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Note d'analyse ajout\xE9e avec succ\xE8s"
        });
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingAnalyse: false }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors de l'ajout de la note"
        });
      }
    });
  }
  handleGarantieNote(note) {
    if (!note) {
      this.state.update((state) => __spreadProps(__spreadValues({}, state), { noteGarantie: void 0 }));
      return;
    }
    const referenceCredit = this.state().instanceCreditInd?.referenceCredit;
    if (!referenceCredit) {
      this.messageService.add({
        severity: "error",
        summary: "Erreur",
        detail: "R\xE9f\xE9rence de cr\xE9dit manquante"
      });
      return;
    }
    this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingGarantie: true }));
    this.userService.addNoteGarantie$(referenceCredit, note).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), {
          submittingGarantie: false,
          noteProfile: response.data.noteProfile,
          noteAnalyse: response.data.noteAnalyse,
          noteGarantie: response.data.noteGarantie
        }));
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Note de garantie ajout\xE9e avec succ\xE8s"
        });
      },
      error: (error) => {
        this.state.update((state) => __spreadProps(__spreadValues({}, state), { submittingGarantie: false }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: typeof error === "string" ? error : "Une erreur s'est produite lors de l'ajout de la note"
        });
      }
    });
  }
  showAppreciationTab() {
    return !!(this.state().noteProfile && this.state().noteAnalyse && this.state().noteGarantie);
  }
  // Méthode pour rafraîchir les données
  refreshData() {
    this.loadCreditNew();
    this.messageService.add({
      severity: "info",
      summary: "Actualisation",
      detail: "Donn\xE9es actualis\xE9es avec succ\xE8s",
      life: 2e3
    });
  }
  static \u0275fac = function ViewInstanceCreditIndComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ViewInstanceCreditIndComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _ViewInstanceCreditIndComponent, selectors: [["app-view-instance-credit-ind"]], features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 40, vars: 14, consts: [["noGarantieDate", ""], [1, "surface-0", "min-h-screen"], [1, "p-6", "shadow-lg", 2, "background", "linear-gradient(135deg, #1976D2 0%, #2196F3 100%)", "color", "white"], [1, "flex", "flex-column", "md:flex-row", "align-items-start", "md:align-items-center", "justify-content-between", "gap-4"], [1, "flex", "align-items-center", "gap-3"], ["icon", "pi pi-arrow-left", "severity", "success", "text", "", "styleClass", "text-white border-white hover:bg-white hover:text-emerald-600", 3, "click"], [1, "text-2xl", "md:text-3xl", "font-bold", "m-0", "mb-2"], [1, "pi", "pi-file-edit", "mr-2"], [1, "text-emerald-100", "m-0", "text-lg"], [1, "flex", "gap-3", "flex-wrap"], [1, "bg-dark", "bg-opacity-20", "p-3", "border-round", "text-center"], [1, "text-2xl", "font-bold"], [1, "text-sm", "opacity-90"], [3, "label", "styleClass"], [1, "text-sm", "opacity-90", "mt-1"], ["icon", "pi pi-refresh", "severity", "secondary", "text", "", "styleClass", "text-white border-white hover:bg-white hover:text-blue-600", "pTooltip", "Actualiser les donn\xE9es", 3, "click", "loading"], [1, "mt-4"], [1, "flex", "align-items-center", "gap-2", "mb-2"], [1, "text-sm", "font-medium"], [1, "text-sm"], [1, "w-full", "bg-white", "bg-opacity-20", "border-round", "h-2rem", "overflow-hidden"], [1, "bg-emerald-400", "h-full", "transition-all", "duration-500", "ease-in-out", "flex", "align-items-center", "justify-content-end", "pr-2"], ["class", "pi pi-check text-white text-xs", 4, "ngIf"], ["class", "flex justify-content-center align-items-center py-8", 4, "ngIf"], ["class", "p-4", 4, "ngIf"], [1, "pi", "pi-check", "text-white", "text-xs"], [1, "flex", "justify-content-center", "align-items-center", "py-8"], [1, "text-center"], ["strokeWidth", "4"], [1, "text-600", "mt-3"], [1, "p-4"], ["severity", "error", "styleClass", "w-full", 3, "text"], ["styleClass", "custom-tabview"], ["pTemplate", "header"], [1, "grid"], [1, "col-12", "lg:col-4"], ["styleClass", "h-full shadow-2"], [1, "p-fluid"], [1, "field", "mb-4"], [1, "font-bold", "text-900", "mb-2", "block"], [1, "pi", "pi-id-card", "mr-2", "text-blue-500"], [1, "p-3", "bg-blue-50", "border-round"], [1, "pi", "pi-users", "mr-2", "text-green-500"], [1, "p-3", "bg-green-50", "border-round"], [1, "pi", "pi-phone", "mr-2", "text-orange-500"], [1, "p-3", "bg-orange-50", "border-round"], [1, "pi", "pi-briefcase", "mr-2", "text-purple-500"], [1, "p-3", "bg-purple-50", "border-round"], [1, "pi", "pi-car", "mr-2", "text-blue-500"], [1, "pi", "pi-wallet", "mr-2", "text-green-500"], [1, "p-3", "bg-green-50", "border-round", "font-bold", "text-green-700", "text-xl"], [1, "col-6"], [1, "font-bold", "text-900", "mb-2", "block", "text-sm"], [1, "pi", "pi-plus-circle", "mr-1", "text-cyan-500"], [1, "p-2", "bg-cyan-50", "border-round", "text-sm"], [1, "pi", "pi-minus-circle", "mr-1", "text-red-500"], [1, "p-2", "bg-red-50", "border-round", "text-sm"], [1, "pi", "pi-flag", "mr-2", "text-orange-500"], ["styleClass", "w-full justify-content-center", 3, "value", "severity"], [1, "pi", "pi-calendar", "mr-2", "text-purple-500"], [1, "pi", "pi-map-marker", "mr-2", "text-red-500"], [1, "p-3", "bg-red-50", "border-round"], [1, "col-12", "mt-4"], [3, "submitNote", "noteProfile", "referenceCredit", "userId", "submitting"], [1, "col-12", "mb-4"], ["styleClass", "shadow-2"], [1, "col-12", "md:col-4"], [1, "bg-blue-50", "p-4", "border-round", "text-center", "border-left-3", "border-blue-500"], [1, "pi", "pi-shopping-cart", "text-3xl", "text-blue-500", "mb-2"], [1, "text-blue-700", "m-0", "mb-1"], [1, "text-2xl", "font-bold", "text-blue-800"], [1, "text-blue-600"], [1, "bg-orange-50", "p-4", "border-round", "text-center", "border-left-3", "border-orange-500"], [1, "pi", "pi-minus-circle", "text-3xl", "text-orange-500", "mb-2"], [1, "text-orange-700", "m-0", "mb-1"], [1, "text-2xl", "font-bold", "text-orange-800"], [1, "text-orange-600"], [1, "bg-green-50", "p-4", "border-round", "text-center", "border-left-3", "border-green-500"], [1, "pi", "pi-chart-line", "text-3xl", "text-green-500", "mb-2"], [1, "text-green-700", "m-0", "mb-1"], [1, "text-2xl", "font-bold", "text-green-800"], [1, "text-green-600"], [1, "col-12"], ["responsiveLayout", "scroll", "styleClass", "p-datatable-striped", "currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} produits", 3, "value", "paginator", "rows", "showCurrentPageReport"], ["pTemplate", "body"], ["pTemplate", "footer"], ["pTemplate", "emptymessage"], ["responsiveLayout", "scroll", "styleClass", "p-datatable-striped", "currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} charges", 3, "value", "paginator", "rows", "showCurrentPageReport"], [3, "submitNote", "noteAnalyse", "referenceCredit", "userId", "submitting"], [1, "col-12", "md:col-6"], [1, "pi", "pi-tag", "mr-2", "text-blue-500"], [1, "pi", "pi-money-bill", "mr-2", "text-green-500"], [4, "ngIf", "ngIfElse"], [1, "pi", "pi-building", "mr-2", "text-orange-500"], [1, "pi", "pi-desktop", "mr-2", "text-cyan-500"], [1, "p-3", "bg-cyan-50", "border-round"], [1, "pi", "pi-clock", "mr-2", "text-indigo-500"], [1, "p-3", "bg-indigo-50", "border-round", "flex", "align-items-center", "gap-2"], [1, "font-bold"], [1, "text-600"], ["responsiveLayout", "scroll", "styleClass", "p-datatable-striped", "currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} cautions", 3, "value", "paginator", "rows", "showCurrentPageReport"], [3, "submitNote", "noteGarantie", "referenceCredit", "userId", "submitting"], [4, "ngIf"], [1, "pi", "pi-user", "mr-2"], ["icon", "pi pi-check", "styleClass", "ml-2 bg-green-100 text-green-800 text-xs", 4, "ngIf"], ["icon", "pi pi-check", "styleClass", "ml-2 bg-green-100 text-green-800 text-xs"], [1, "bg-gradient-to-r", "from-blue-500", "to-cyan-500", "text-white", "p-4"], [1, "m-0", "font-bold"], [1, "pi", "pi-user-plus", "mr-2"], [1, "bg-gradient-to-r", "from-green-500", "to-teal-500", "text-white", "p-4"], [1, "pi", "pi-money-bill", "mr-2"], [1, "pi", "pi-chart-line", "mr-2"], [1, "bg-gradient-to-r", "from-emerald-500", "to-teal-500", "text-white", "p-4"], [1, "pi", "pi-calculator", "mr-2"], [1, "pi", "pi-shopping-bag", "mr-2"], [1, "pi", "pi-tag", "mr-1"], [1, "text-right"], [1, "pi", "pi-money-bill", "mr-1"], [1, "pi", "pi-sort-amount-up", "mr-1"], [1, "pi", "pi-calculator", "mr-1"], [1, "pi", "pi-comment", "mr-1"], [1, "hover:bg-blue-50"], [1, "flex", "align-items-center", "gap-2"], [1, "bg-blue-100", "text-blue-800", "text-xs", "font-medium", "px-2", "py-1", "border-round"], [1, "font-medium"], [1, "text-right", "font-medium"], [1, "bg-gray-100", "px-2", "py-1", "border-round", "font-bold"], [1, "text-right", "font-bold", "text-green-600"], [1, "bg-blue-50"], ["colspan", "3", 1, "text-right", "font-bold", "text-lg"], [1, "font-bold", "text-lg", "text-green-600", "text-right"], ["colspan", "5", 1, "text-center", "p-6"], [1, "flex", "flex-column", "align-items-center", "gap-3"], [1, "pi", "pi-shopping-bag", "text-4xl", "text-400"], [1, "text-600", "font-medium"], [1, "bg-gradient-to-r", "from-orange-500", "to-red-500", "text-white", "p-4"], [1, "pi", "pi-minus-circle", "mr-2"], [1, "pi", "pi-calendar", "mr-1"], [1, "hover:bg-orange-50"], [1, "bg-orange-100", "text-orange-800", "text-xs", "font-medium", "px-2", "py-1", "border-round"], [1, "text-right", "font-bold", "text-red-600"], [1, "bg-orange-50"], [1, "font-bold", "text-lg", "text-red-600", "text-right"], [1, "pi", "pi-minus-circle", "text-4xl", "text-400"], [1, "pi", "pi-shield", "mr-2"], [1, "bg-gradient-to-r", "from-green-500", "to-emerald-500", "text-white", "p-4"], [1, "pi", "pi-home", "mr-2"], [1, "bg-gradient-to-r", "from-blue-500", "to-indigo-500", "text-white", "p-4"], [1, "pi", "pi-map-marker", "mr-2"], [1, "bg-gradient-to-r", "from-purple-500", "to-pink-500", "text-white", "p-4"], [1, "pi", "pi-users", "mr-2"], [1, "pi", "pi-user", "mr-1"], [1, "pi", "pi-phone", "mr-1"], [1, "pi", "pi-briefcase", "mr-1"], [1, "pi", "pi-id-card", "mr-1"], [1, "hover:bg-purple-50"], [1, "bg-purple-100", "text-purple-800", "text-xs", "font-medium", "px-2", "py-1", "border-round"], [1, "text-blue-600", "hover:text-blue-800", 3, "href"], ["severity", "info", "styleClass", "text-xs", 3, "value"], [1, "pi", "pi-users", "text-4xl", "text-400"], [3, "referenceCredit", "userId", "montantDemande"], [1, "pi", "pi-star", "mr-2"]], template: function ViewInstanceCreditIndComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 1);
      \u0275\u0275element(1, "p-toast");
      \u0275\u0275elementStart(2, "div", 2)(3, "div", 3)(4, "div", 4)(5, "p-button", 5);
      \u0275\u0275listener("click", function ViewInstanceCreditIndComponent_Template_p_button_click_5_listener() {
        return ctx.router.navigate(["/d"]);
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(6, "div")(7, "h1", 6);
      \u0275\u0275element(8, "i", 7);
      \u0275\u0275text(9, "Analyse de Cr\xE9dit ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(10, "p", 8);
      \u0275\u0275text(11);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(12, "div", 9)(13, "div", 10)(14, "div", 11);
      \u0275\u0275text(15);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(16, "div", 12);
      \u0275\u0275text(17, "Montant demand\xE9");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(18, "div", 10)(19, "div", 11);
      \u0275\u0275text(20);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(21, "div", 12);
      \u0275\u0275text(22, "Notes compl\xE9t\xE9es");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(23, "div", 10);
      \u0275\u0275element(24, "p-chip", 13);
      \u0275\u0275elementStart(25, "div", 14);
      \u0275\u0275text(26, "Statut");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(27, "p-button", 15);
      \u0275\u0275listener("click", function ViewInstanceCreditIndComponent_Template_p_button_click_27_listener() {
        return ctx.refreshData();
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(28, "div", 16)(29, "div", 17)(30, "span", 18);
      \u0275\u0275text(31, "Progression des notes:");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(32, "span", 19);
      \u0275\u0275text(33);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(34, "div", 20)(35, "div", 21);
      \u0275\u0275template(36, ViewInstanceCreditIndComponent_i_36_Template, 1, 0, "i", 22);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275template(37, ViewInstanceCreditIndComponent_div_37_Template, 5, 3, "div", 23)(38, ViewInstanceCreditIndComponent_div_38_Template, 2, 1, "div", 24)(39, ViewInstanceCreditIndComponent_div_39_Template, 197, 54, "div", 24);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      let tmp_0_0;
      let tmp_1_0;
      let tmp_3_0;
      let tmp_4_0;
      \u0275\u0275advance(11);
      \u0275\u0275textInterpolate1(" ", (tmp_0_0 = ctx.state().instanceCreditInd) == null ? null : tmp_0_0.referenceCredit, " ");
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate1("", ctx.formatMontantGNF((tmp_1_0 = ctx.state().creditDto) == null ? null : tmp_1_0.montantCredit), " ");
      \u0275\u0275advance(5);
      \u0275\u0275textInterpolate2("", ctx.getNotesCompletionStatus().completed, "/", ctx.getNotesCompletionStatus().total, "");
      \u0275\u0275advance(4);
      \u0275\u0275property("label", ((tmp_3_0 = ctx.state().instanceCreditInd) == null ? null : tmp_3_0.stateCredit) || "N/A")("styleClass", "font-bold " + ctx.getCreditStatusClass((tmp_4_0 = ctx.state().instanceCreditInd) == null ? null : tmp_4_0.stateCredit));
      \u0275\u0275advance(3);
      \u0275\u0275property("loading", ctx.state().loading);
      \u0275\u0275advance(6);
      \u0275\u0275textInterpolate1("", ctx.getNotesCompletionStatus().percentage, "%");
      \u0275\u0275advance(2);
      \u0275\u0275styleProp("width", ctx.getNotesCompletionStatus().percentage, "%");
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.getNotesCompletionStatus().percentage === 100);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.state().error && !ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.state().loading && !ctx.state().error);
    }
  }, dependencies: [
    CommonModule,
    NgIf,
    DatePipe,
    TabViewModule,
    TabView,
    TabPanel,
    PrimeTemplate,
    CardModule,
    Card,
    TableModule,
    Table,
    ProgressSpinnerModule,
    ProgressSpinner,
    MessageModule,
    Message,
    TagModule,
    Tag,
    ButtonModule,
    Button,
    TextareaModule,
    ChipModule,
    Chip,
    ToastModule,
    Toast,
    NoteProfileComponent,
    NoteAnalyseComponent,
    NoteGarantieComponent,
    AppreciationComponent
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(ViewInstanceCreditIndComponent, { className: "ViewInstanceCreditIndComponent", filePath: "src/app/pages/dashboard/resp-agent/view-instance-credit-ind/view-instance-credit-ind.component.ts", lineNumber: 58 });
})();
export {
  ViewInstanceCreditIndComponent
};
//# sourceMappingURL=chunk-4BNZU5ZL.js.map
