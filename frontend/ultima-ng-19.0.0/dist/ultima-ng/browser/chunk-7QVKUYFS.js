import{b as Ae}from"./chunk-7S2LPA2W.js";import{b as De}from"./chunk-CNUKDHWL.js";import"./chunk-BYNX6VSG.js";import{b as Re}from"./chunk-4JPZ5GKU.js";import{a as Se,b as Fe}from"./chunk-GBSAZIIF.js";import"./chunk-TOQUJNDH.js";import{c as ve,d as be}from"./chunk-JK4JG2UW.js";import{b as ye}from"./chunk-ML3LU6MO.js";import{a as Me,b as Pe}from"./chunk-WMO3Y22R.js";import{k as Te}from"./chunk-SRGIHKGJ.js";import"./chunk-KLDL5O4H.js";import"./chunk-PXEEYFPS.js";import"./chunk-4MNJFNZT.js";import{b as Ie}from"./chunk-7A4CRAMP.js";import"./chunk-3WTE2CKQ.js";import"./chunk-LA2FUI34.js";import"./chunk-ZNTL7BEM.js";import"./chunk-MPVO6A2U.js";import"./chunk-D6YNXGTA.js";import"./chunk-ED7TFTUL.js";import"./chunk-MZ7FZGG3.js";import{b as we}from"./chunk-C4WQ325L.js";import{b as Ne,c as qe}from"./chunk-HNZBC55R.js";import"./chunk-J62YMCRW.js";import"./chunk-J6B6CWYC.js";import"./chunk-IEQZB3PI.js";import"./chunk-ATSSA22C.js";import{a as he,b as ge}from"./chunk-BGHZ5NVU.js";import"./chunk-XYTTGGFW.js";import"./chunk-ZNT52ZF3.js";import{b as xe,d as _e}from"./chunk-Z7KSDRLV.js";import"./chunk-N4Q6Z3MW.js";import{a as Ce,b as Ee}from"./chunk-3BEM77IG.js";import{b as Q,d as W}from"./chunk-UCSGE5ZL.js";import"./chunk-2O7XYKW4.js";import{a as L}from"./chunk-YTFCGSG6.js";import"./chunk-RHLJ6NE2.js";import{a as ue,b as pe}from"./chunk-R2ZYXRFE.js";import"./chunk-NRZ4QNP7.js";import"./chunk-GFZUU5ZD.js";import"./chunk-BODZH67C.js";import"./chunk-KR7F45VC.js";import{f as se,g as ce}from"./chunk-XKXBFP6V.js";import"./chunk-ULM4QL4Q.js";import{ka as X,oa as D}from"./chunk-3YZBLOIS.js";import{b as Z,c as a,e as ee,f as te,g as ie,j as ne,m as oe,p as re,r as le,w as ae,x as me,y as de}from"./chunk-2I6ZAGC7.js";import{b as fe}from"./chunk-FVCMZ6IK.js";import"./chunk-VDYO34A5.js";import"./chunk-Y2QT2WK5.js";import"./chunk-S35HUXPS.js";import{y as K}from"./chunk-GZWLZB4Q.js";import{Bb as c,Gb as t,Hb as e,Ib as o,Mb as $,O as H,Q as U,Rb as w,Sb as C,Va as r,Vb as Y,_ as h,cc as i,fa as M,ga as P,gb as O,i as B,lc as z,ma as k,mb as v,mc as f,o as G,oc as R,pc as A,qc as J,va as j,vb as p}from"./chunk-MKA3N2SS.js";import{a as b,b as x}from"./chunk-GAL4ENT6.js";var Be=()=>({label:"Regular",value:"REGULAR"}),Ge=()=>({label:"Premium",value:"PREMIUM"}),He=()=>({label:"VIP",value:"VIP"}),Le=(n,l,m)=>[n,l,m],Ue=()=>({label:"Male",value:"M"}),ke=()=>({label:"Female",value:"F"}),V=(n,l)=>[n,l],je=()=>({label:"National ID",value:"NATIONAL_ID"}),Oe=()=>({label:"Passport",value:"PASSPORT"}),$e=()=>({label:"Driver License",value:"DRIVER_LICENSE"}),Ye=()=>({label:"Birth Certificate",value:"BIRTH_CERTIFICATE"}),ze=(n,l,m,u)=>[n,l,m,u],Je=()=>({label:"Individual",value:"I"}),Ke=()=>({label:"Company",value:"C"}),Qe=()=>({label:"Owner",value:"P"}),We=()=>({label:"Tenant",value:"L"}),Xe=()=>({label:"Active",value:"ACTIVE"}),Ze=()=>({label:"Inactive",value:"INACTIVE"}),et=()=>({label:"Suspended",value:"SUSPENDED"});function tt(n,l){n&1&&i(0,"Edit Individuel")}function it(n,l){n&1&&i(0,"New Individuel")}function nt(n,l){n&1&&(t(0,"div",3),o(1,"p-progressSpinner"),e())}function ot(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function rt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function lt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function at(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function mt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function dt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function ut(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function pt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function st(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function ct(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function ft(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function vt(n,l){n&1&&(t(0,"small",12),i(1,"Invalid"),e())}function bt(n,l){n&1&&(t(0,"small",12),i(1,"Required"),e())}function xt(n,l){if(n&1){let m=$();t(0,"form",6),w("ngSubmit",function(){M(m);let s=C();return P(s.onSubmit())}),t(1,"div",7)(2,"div",8)(3,"div",0)(4,"h3"),i(5,"Personal Information"),e(),t(6,"div",7)(7,"div",9)(8,"label",10),i(9,"Member Category*"),e(),o(10,"p-dropdown",11),v(11,ot,2,0,"small",12),e(),t(12,"div",9)(13,"label",13),i(14,"Member Number*"),e(),o(15,"input",14),v(16,rt,2,0,"small",12),e(),t(17,"div",9)(18,"label",15),i(19,"Gender*"),e(),o(20,"p-dropdown",16),v(21,lt,2,0,"small",12),e(),t(22,"div",9)(23,"label",17),i(24,"Last Name*"),e(),o(25,"input",18),v(26,at,2,0,"small",12),e(),t(27,"div",9)(28,"label",19),i(29,"First Name*"),e(),o(30,"input",20),v(31,mt,2,0,"small",12),e(),t(32,"div",9)(33,"label",21),i(34,"Date of Birth*"),e(),o(35,"p-calendar",22),v(36,dt,2,0,"small",12),e(),t(37,"div",23)(38,"label",24),i(39,"Place of Birth*"),e(),o(40,"input",25),v(41,ut,2,0,"small",12),e(),t(42,"div",23)(43,"label",26),i(44,"Nationality*"),e(),o(45,"input",27),v(46,pt,2,0,"small",12),e(),t(47,"div",9)(48,"label",28),i(49,"ID Type*"),e(),o(50,"p-dropdown",29),v(51,st,2,0,"small",12),e(),t(52,"div",9)(53,"label",30),i(54,"ID Number*"),e(),o(55,"input",31),v(56,ct,2,0,"small",12),e()()()(),t(57,"div",8)(58,"div",32)(59,"h3"),i(60,"Contact Information"),e(),t(61,"div",7)(62,"div",9)(63,"label",33),i(64,"Phone Number*"),e(),o(65,"input",34),v(66,ft,2,0,"small",12),e(),t(67,"div",9)(68,"label",35),i(69,"Alternative Phone"),e(),o(70,"input",36),v(71,vt,2,0,"small",12),e(),t(72,"div",9)(73,"label",37),i(74,"City"),e(),o(75,"input",38),e(),t(76,"div",9)(77,"label",39),i(78,"Neighborhood"),e(),o(79,"input",40),e(),t(80,"div",9)(81,"label",41),i(82,"District"),e(),o(83,"input",42),e(),t(84,"div",9)(85,"label",43),i(86,"Sector"),e(),o(87,"input",44),e(),t(88,"div",45)(89,"label",46),i(90,"Address"),e(),o(91,"textarea",47),e(),t(92,"div",9)(93,"label",48),i(94,"Canton Code"),e(),o(95,"input",49),e()()()(),t(96,"div",8)(97,"div",32)(98,"h3"),i(99,"Professional & Family Information"),e(),t(100,"div",7)(101,"div",9)(102,"label",50),i(103,"Profession*"),e(),o(104,"input",51),v(105,bt,2,0,"small",12),e(),t(106,"div",9)(107,"label",52),i(108,"Activity"),e(),o(109,"input",53),e(),t(110,"div",9)(111,"label",54),i(112,"Business Type"),e(),o(113,"p-dropdown",55),e(),t(114,"div",9)(115,"label",56),i(116,"Service Provider"),e(),o(117,"input",57),e(),t(118,"div",9)(119,"label",58),i(120,"Father's Name"),e(),o(121,"input",59),e(),t(122,"div",9)(123,"label",60),i(124,"Mother's Name"),e(),o(125,"input",61),e(),t(126,"div",9)(127,"label",62),i(128,"Spouse's Name"),e(),o(129,"input",63),e(),t(130,"div",9)(131,"label",64),i(132,"Relationship"),e(),o(133,"input",65),e(),t(134,"div",9)(135,"label",66),i(136,"Parent's Name"),e(),o(137,"input",67),e(),t(138,"div",9)(139,"label",68),i(140,"Number of Children"),e(),o(141,"p-inputNumber",69),e(),t(142,"div",9)(143,"label",70),i(144,"Number of Parents"),e(),o(145,"p-inputNumber",71),e(),t(146,"div",9)(147,"label",72),i(148,"Number of Others"),e(),o(149,"p-inputNumber",73),e()()()(),t(150,"div",8)(151,"div",32)(152,"h3"),i(153,"Housing Information"),e(),t(154,"div",7)(155,"div",23)(156,"label",74),i(157,"Housing Type"),e(),o(158,"p-dropdown",75),e(),t(159,"div",23)(160,"label",76),i(161,"Number of Years"),e(),o(162,"p-inputNumber",77),e(),t(163,"div",23)(164,"label",78),i(165,"Years in Housing"),e(),o(166,"p-inputNumber",79),e()()()(),t(167,"div",8)(168,"div",32)(169,"h3"),i(170,"Membership Details"),e(),t(171,"div",7)(172,"div",23)(173,"label",80),i(174,"Member Status"),e(),o(175,"p-dropdown",81),e(),t(176,"div",23)(177,"label",82),i(178,"Contribution Amount"),e(),o(179,"p-inputNumber",83),e(),t(180,"div",23)(181,"label",84),i(182,"Entrance Fee"),e(),o(183,"p-inputNumber",85),e()()()(),t(184,"div",86)(185,"p-button",87),w("click",function(){M(m);let s=C();return P(s.cancelEdit())}),e(),t(186,"p-button",88),w("click",function(){M(m);let s=C();return P(s.resetForm())}),e(),o(187,"p-button",89),e()()()}if(n&2){let m,u,s,_,g,E,S,F,y,N,q,I,T,d=C();p("formGroup",d.updateForm),r(10),p("options",A(47,Le,f(44,Be),f(45,Ge),f(46,He)))("required",!0),r(),c((m=d.updateForm.get("catMembre"))!=null&&m.invalid&&((m=d.updateForm.get("catMembre"))!=null&&m.touched)?11:-1),r(4),p("required",!0),r(),c((u=d.updateForm.get("numeroMembre"))!=null&&u.invalid&&((u=d.updateForm.get("numeroMembre"))!=null&&u.touched)?16:-1),r(4),p("options",R(53,V,f(51,Ue),f(52,ke)))("required",!0),r(),c((s=d.updateForm.get("sexe"))!=null&&s.invalid&&((s=d.updateForm.get("sexe"))!=null&&s.touched)?21:-1),r(4),p("required",!0),r(),c((_=d.updateForm.get("nom"))!=null&&_.invalid&&((_=d.updateForm.get("nom"))!=null&&_.touched)?26:-1),r(4),p("required",!0),r(),c((g=d.updateForm.get("prenom"))!=null&&g.invalid&&((g=d.updateForm.get("prenom"))!=null&&g.touched)?31:-1),r(4),p("showIcon",!0)("required",!0),r(),c((E=d.updateForm.get("dateNaissance"))!=null&&E.invalid&&((E=d.updateForm.get("dateNaissance"))!=null&&E.touched)?36:-1),r(4),p("required",!0),r(),c((S=d.updateForm.get("lieuxNaissance"))!=null&&S.invalid&&((S=d.updateForm.get("lieuxNaissance"))!=null&&S.touched)?41:-1),r(4),p("required",!0),r(),c((F=d.updateForm.get("nationalite"))!=null&&F.invalid&&((F=d.updateForm.get("nationalite"))!=null&&F.touched)?46:-1),r(4),p("options",J(60,ze,f(56,je),f(57,Oe),f(58,$e),f(59,Ye)))("required",!0),r(),c((y=d.updateForm.get("typePiece"))!=null&&y.invalid&&((y=d.updateForm.get("typePiece"))!=null&&y.touched)?51:-1),r(4),p("required",!0),r(),c((N=d.updateForm.get("numeroPiece"))!=null&&N.invalid&&((N=d.updateForm.get("numeroPiece"))!=null&&N.touched)?56:-1),r(9),p("required",!0),r(),c((q=d.updateForm.get("telephone"))!=null&&q.invalid&&((q=d.updateForm.get("telephone"))!=null&&q.touched)?66:-1),r(5),c((I=d.updateForm.get("telephone2"))!=null&&I.invalid&&((I=d.updateForm.get("telephone2"))!=null&&I.touched)?71:-1),r(33),p("required",!0),r(),c((T=d.updateForm.get("profession"))!=null&&T.invalid&&((T=d.updateForm.get("profession"))!=null&&T.touched)?105:-1),r(8),p("options",R(67,V,f(65,Je),f(66,Ke))),r(28),p("min",0)("showButtons",!0),r(4),p("min",0)("showButtons",!0),r(4),p("min",0)("showButtons",!0),r(9),p("options",R(72,V,f(70,Qe),f(71,We))),r(4),p("min",0)("showButtons",!0),r(4),p("min",0)("showButtons",!0),r(9),p("options",A(78,Le,f(75,Xe),f(76,Ze),f(77,et))),r(12),p("loading",d.state().loading)}}function _t(n,l){if(n&1&&o(0,"p-message",5),n&2){let m=C();Y("text",m.state().error)}}var Ve=class n{state=j({loading:!1,message:void 0,error:void 0});updateForm;userService=h(fe);router=h(W);destroyRef=h(k);activatedRouter=h(Q);fb=h(ae);messageService=h(D);constructor(){this.updateForm=this.fb.group({catMembre:["",a.required],numeroMembre:["",a.required],nom:["",[a.required,a.maxLength(25)]],prenom:["",[a.required,a.maxLength(25)]],dateNaissance:[null,a.required],lieuxNaissance:["",[a.required,a.maxLength(25)]],nationalite:["",[a.required,a.maxLength(25)]],telephone:["",[a.required,a.pattern(/^\+?[0-9]{8,15}$/)]],telephone2:["",a.pattern(/^\+?[0-9]{8,15}$/)],typePiece:["",a.required],numeroPiece:["",a.required],sexe:["",a.required],profession:["",[a.required,a.maxLength(255)]],nomPere:["",a.maxLength(25)],nomMere:["",a.maxLength(25)],activite:["",a.maxLength(255)],nbreEnfant:[0,a.min(0)],nbreParent:[0,a.min(0)],nbreAutre:[0,a.min(0)],quartier:["",a.maxLength(255)],district:["",a.maxLength(255)],secteur:["",a.maxLength(255)],cotisation:[0,a.min(0)],droitEntree:[0,a.min(0)],typeHabitation:[""],nbreAnnee:[0,a.min(0)],statutIndividuel:[""],prestataire:[""],codCanton:[""],ville:["",a.maxLength(255)],typeEntreprise:[""],lienParente:[""],nomParent:[""],conjoint:[""],nbreAnneeH:[0,a.min(0)],adresse:["",a.maxLength(255)]})}ngOnInit(){this.activatedRouter.paramMap.pipe(H(l=>{let m=l.get("numeroMembre");return m?(this.state.update(u=>x(b({},u),{loading:!0,message:void 0,error:void 0})),this.userService.getInstanceUser$().pipe(G(u=>u.data?.user),U(u=>{if(u)this.state.update(s=>x(b({},s),{user:u})),this.updateForm.get("numeroMembre")?.setValue(m);else throw new Error("User data not found in response")}))):(this.state.update(u=>x(b({},u),{loading:!1,message:void 0,error:"Invalid numeroMembre"})),this.messageService.add({severity:"error",summary:"Error",detail:"Invalid member number"}),B)}),L(this.destroyRef)).subscribe({next:()=>{this.state.update(l=>x(b({},l),{loading:!1}))},error:l=>{this.state.update(m=>x(b({},m),{loading:!1,error:l.message||"Failed to load user data"})),this.messageService.add({severity:"error",summary:"Error",detail:l.message||"Failed to load user data"})}})}onSubmit(){if(this.updateForm.invalid){this.markFormGroupTouched(this.updateForm),this.messageService.add({severity:"error",summary:"Validation Error",detail:"Please fill all required fields correctly"});return}this.state.update(s=>x(b({},s),{loading:!0,message:void 0,error:void 0}));let l=this.updateForm.value,m=x(b({},l),{userId:this.state().user?.userId||0,createdAt:new Date}),u=this.updateForm.get("numeroMembre")?.value;this.userService.addFicherSignaletique$(m,u).pipe(L(this.destroyRef)).subscribe({next:s=>{let _=s.data?.individuel;this.state.update(g=>x(b({},g),{loading:!1,message:"Member created successfully",individuel:_})),this.messageService.add({severity:"success",summary:"Success",detail:"Member created successfully"}),setTimeout(()=>{this.router.navigate(["/individuels"])},1500)},error:s=>{this.state.update(_=>x(b({},_),{loading:!1,error:s.message||"Failed to create member"})),this.messageService.add({severity:"error",summary:"Error",detail:s.message||"Failed to create member"})}})}markFormGroupTouched(l){Object.values(l.controls).forEach(m=>{m.markAsTouched(),m instanceof ie&&this.markFormGroupTouched(m)})}resetForm(){this.updateForm.reset(),this.updateForm.patchValue({nbreEnfant:0,nbreParent:0,nbreAutre:0,cotisation:0,droitEntree:0,nbreAnnee:0,nbreAnneeH:0})}cancelEdit(){this.router.navigate(["/individuels"])}static \u0275fac=function(m){return new(m||n)};static \u0275cmp=O({type:n,selectors:[["app-fiche-signaletique"]],features:[z([D,X])],decls:10,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"flex","justify-content-center"],[3,"formGroup"],["severity","error","styleClass","w-full mt-3",3,"text"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12"],[1,"col-12","md:col-2","mb-3"],["for","catMembre"],["id","catMembre","formControlName","catMembre","optionLabel","label","optionValue","value","placeholder","Select Category",3,"options","required"],[1,"text-red-500"],["for","numeroMembre"],["id","numeroMembre","type","text","pInputText","","formControlName","numeroMembre",3,"required"],["for","sexe"],["id","sexe","formControlName","sexe","optionLabel","label","optionValue","value","placeholder","Select Gender",3,"options","required"],["for","nom"],["id","nom","type","text","pInputText","","formControlName","nom",3,"required"],["for","prenom"],["id","prenom","type","text","pInputText","","formControlName","prenom",3,"required"],["for","dateNaissance"],["id","dateNaissance","formControlName","dateNaissance","dateFormat","dd/mm/yy",3,"showIcon","required"],[1,"col-12","md:col-4","mb-3"],["for","lieuxNaissance"],["id","lieuxNaissance","type","text","pInputText","","formControlName","lieuxNaissance",3,"required"],["for","nationalite"],["id","nationalite","type","text","pInputText","","formControlName","nationalite",3,"required"],["for","typePiece"],["id","typePiece","formControlName","typePiece","optionLabel","label","optionValue","value","placeholder","Select ID Type",3,"options","required"],["for","numeroPiece"],["id","numeroPiece","type","text","pInputText","","formControlName","numeroPiece",3,"required"],[1,"card","mt-3"],["for","telephone"],["id","telephone","type","tel","pInputText","","formControlName","telephone",3,"required"],["for","telephone2"],["id","telephone2","type","tel","pInputText","","formControlName","telephone2"],["for","ville"],["id","ville","type","text","pInputText","","formControlName","ville"],["for","quartier"],["id","quartier","type","text","pInputText","","formControlName","quartier"],["for","district"],["id","district","type","text","pInputText","","formControlName","district"],["for","secteur"],["id","secteur","type","text","pInputText","","formControlName","secteur"],[1,"col-12","md:col-10","mb-3"],["for","adresse"],["id","adresse","pInputTextarea","","formControlName","adresse","rows","2"],["for","codCanton"],["id","codCanton","type","text","pInputText","","formControlName","codCanton"],["for","profession"],["id","profession","type","text","pInputText","","formControlName","profession",3,"required"],["for","activite"],["id","activite","type","text","pInputText","","formControlName","activite"],["for","typeEntreprise"],["id","typeEntreprise","formControlName","typeEntreprise","optionLabel","label","optionValue","value","placeholder","Select Type",3,"options"],["for","prestataire"],["id","prestataire","type","text","pInputText","","formControlName","prestataire"],["for","nomPere"],["id","nomPere","type","text","pInputText","","formControlName","nomPere"],["for","nomMere"],["id","nomMere","type","text","pInputText","","formControlName","nomMere"],["for","conjoint"],["id","conjoint","type","text","pInputText","","formControlName","conjoint"],["for","lienParente"],["id","lienParente","type","text","pInputText","","formControlName","lienParente"],["for","nomParent"],["id","nomParent","type","text","pInputText","","formControlName","nomParent"],["for","nbreEnfant"],["id","nbreEnfant","formControlName","nbreEnfant",3,"min","showButtons"],["for","nbreParent"],["id","nbreParent","formControlName","nbreParent",3,"min","showButtons"],["for","nbreAutre"],["id","nbreAutre","formControlName","nbreAutre",3,"min","showButtons"],["for","typeHabitation"],["id","typeHabitation","formControlName","typeHabitation","optionLabel","label","optionValue","value","placeholder","Select Housing Type",3,"options"],["for","nbreAnnee"],["id","nbreAnnee","formControlName","nbreAnnee",3,"min","showButtons"],["for","nbreAnneeH"],["id","nbreAnneeH","formControlName","nbreAnneeH",3,"min","showButtons"],["for","statutIndividuel"],["id","statutIndividuel","formControlName","statutIndividuel","optionLabel","label","optionValue","value","placeholder","Select Status",3,"options"],["for","cotisation"],["id","cotisation","formControlName","cotisation","mode","currency","currency","GNF","locale","fr-GN"],["for","droitEntree"],["id","droitEntree","formControlName","droitEntree","mode","currency","currency","GNF","locale","fr-GN"],[1,"col-12","flex","justify-content-end","mt-4","gap-2"],["type","button","label","Cancel","severity","secondary",3,"click"],["type","button","label","Reset","severity","warn",3,"click"],["type","submit","label","Save",3,"loading"]],template:function(m,u){if(m&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),v(3,tt,1,0)(4,it,1,0),e()(),t(5,"div",2),v(6,nt,2,0,"div",3)(7,xt,188,82,"form",4)(8,_t,1,1,"p-message",5),e()(),o(9,"p-toast")),m&2){let s;r(3),c((s=u.state().individuel)!=null&&s.individuelId?3:4),r(3),c(u.state().loading?6:7),r(2),c(u.state().error?8:-1)}},dependencies:[K,pe,ue,Ae,ce,se,Ie,me,ne,Z,ee,te,le,Re,Te,ye,xe,_e,Ee,Ce,Fe,Se,ge,he,de,oe,re,be,ve,De,we,qe,Ne,Pe,Me],encapsulation:2})};export{Ve as FicheSignaletiqueComponent};
