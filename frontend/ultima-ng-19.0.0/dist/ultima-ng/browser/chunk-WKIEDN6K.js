import{b as Je}from"./chunk-S7SZESPW.js";import"./chunk-YISA6LMV.js";import{f as Oe}from"./chunk-MVMJFDGQ.js";import{a as je,b as Le}from"./chunk-K2RLQDMJ.js";import{a as ze,b as He}from"./chunk-JA4WM3ZQ.js";import{a as qe,b as $e}from"./chunk-4JPZ5GKU.js";import{b as Ae}from"./chunk-IDKLANHK.js";import{c as ye,d as Se}from"./chunk-JK4JG2UW.js";import{a as Be,b as ke}from"./chunk-WMO3Y22R.js";import{a as Ne,k as Re}from"./chunk-SRGIHKGJ.js";import"./chunk-KLDL5O4H.js";import"./chunk-PXEEYFPS.js";import"./chunk-4MNJFNZT.js";import"./chunk-7A4CRAMP.js";import"./chunk-3WTE2CKQ.js";import"./chunk-LA2FUI34.js";import"./chunk-ZNTL7BEM.js";import{a as we,b as Me}from"./chunk-QZOXHZZK.js";import"./chunk-MPVO6A2U.js";import"./chunk-D6YNXGTA.js";import"./chunk-ED7TFTUL.js";import"./chunk-MZ7FZGG3.js";import{a as Ve,b as Ge}from"./chunk-C4WQ325L.js";import{b as Ie,c as Te}from"./chunk-HNZBC55R.js";import"./chunk-J62YMCRW.js";import"./chunk-J6B6CWYC.js";import"./chunk-IEQZB3PI.js";import"./chunk-ATSSA22C.js";import{a as Pe,b as De}from"./chunk-BGHZ5NVU.js";import"./chunk-XYTTGGFW.js";import"./chunk-ZNT52ZF3.js";import"./chunk-Z7KSDRLV.js";import"./chunk-N4Q6Z3MW.js";import{b as le,d as oe}from"./chunk-UCSGE5ZL.js";import"./chunk-2O7XYKW4.js";import{a as q}from"./chunk-YTFCGSG6.js";import"./chunk-RHLJ6NE2.js";import{a as he,b as _e}from"./chunk-R2ZYXRFE.js";import"./chunk-NRZ4QNP7.js";import"./chunk-GFZUU5ZD.js";import"./chunk-BODZH67C.js";import"./chunk-KR7F45VC.js";import{b as Fe,e as xe,g as Ee}from"./chunk-XKXBFP6V.js";import"./chunk-ULM4QL4Q.js";import{oa as z,sa as se}from"./chunk-3YZBLOIS.js";import{b as ue,c as v,e as me,f as de,j as ce,m as pe,p as ve,w as fe,x as ge,y as be}from"./chunk-2I6ZAGC7.js";import{b as Ce}from"./chunk-FVCMZ6IK.js";import"./chunk-VDYO34A5.js";import"./chunk-Y2QT2WK5.js";import"./chunk-S35HUXPS.js";import{l as te,m as ne,n as ie,w as re,y as ae}from"./chunk-GZWLZB4Q.js";import{Bc as g,Db as $,Eb as j,Fb as L,Gb as r,Hb as t,Ib as d,Mb as w,Rb as D,Sb as _,Va as l,Wb as W,_ as R,cc as a,dc as x,ec as y,fa as T,fc as X,ga as N,gb as K,lc as Z,ma as U,mb as h,mc as C,nc as s,oc as B,qc as V,rc as ee,sc as G,uc as O,va as k,vb as m,wc as f,yb as Q}from"./chunk-MKA3N2SS.js";import{a as A,b as I}from"./chunk-GAL4ENT6.js";var ft=()=>[6,12,18,24],gt=()=>[36,48,60,72],bt=()=>({width:"180px"}),Ye=n=>[n,"GNF","symbol","1.0-0","fr-FR"],dt=(n,i)=>({"bg-primary text-white shadow-3":n,"surface-card border-1 surface-border hover:border-primary hover:shadow-2":i}),ct=(n,i)=>({"text-white opacity-70":n,"text-color-secondary":i}),Ue=n=>({label:"Nom",value:n}),ht=n=>({label:"Pr\xE9nom",value:n}),Ke=n=>({label:"Email",value:n}),J=n=>({label:"T\xE9l\xE9phone",value:n}),_t=n=>({label:"Num\xE9ro d'identit\xE9",value:n}),Ft=n=>({label:"Date de naissance",value:n}),H=(n,i,e,o,u,p)=>[n,i,e,o,u,p],Qe=()=>({"min-width":"50rem"}),xt=n=>({label:"Forme juridique",value:n}),Et=n=>({label:"Secteur d'activit\xE9",value:n}),Ct=n=>({label:"Num\xE9ro de registre",value:n}),b=n=>[n,"GNF","symbol","1.0-0","en-US"],yt=n=>({label:"Total actifs",value:n}),St=n=>({label:"Total passifs",value:n}),Pt=(n,i)=>[n,i],M=()=>({"min-width":"30rem"}),Dt=n=>({label:"\xC9pargnes",value:n}),At=n=>({label:"Biens durables",value:n}),It=n=>({label:"Total patrimoine",value:n}),Tt=n=>({label:"Garantie propos\xE9e",value:n}),Nt=n=>({label:"Montant garantie",value:n}),Rt=(n,i,e,o,u)=>[n,i,e,o,u],We=n=>({label:"Chiffre d'affaires",value:n}),Xe=n=>({label:"Autres revenus",value:n}),Ze=n=>({label:"Revenus totaux",value:n}),et=n=>({label:"Co\xFBt des marchandises",value:n}),Y=(n,i,e,o)=>[n,i,e,o],tt=n=>({label:"Transport production",value:n}),nt=n=>({label:"Transport personnel",value:n}),it=n=>({label:"Manutention",value:n}),rt=n=>({label:"Aide externe",value:n}),at=n=>({label:"H\xE9bergement/Restauration",value:n}),lt=n=>({label:"Imp\xF4ts",value:n}),ot=n=>({label:"Loyers",value:n}),st=n=>({label:"Total charges",value:n,isTotal:!0}),ut=(n,i,e,o,u,p,F,c)=>[n,i,e,o,u,p,F,c],wt=n=>({label:"Montant demand\xE9",value:n}),Mt=n=>({label:"Dur\xE9e",value:n}),Bt=n=>({label:"Mensualit\xE9 estim\xE9e",value:n}),kt=n=>({label:"D\xE9l\xE9gation",value:n}),Vt=n=>({label:"Agence",value:n}),Gt=n=>({label:"Point de vente",value:n}),pt=n=>({"bg-gray-100 dark:bg-gray-800 font-bold":n}),qt=n=>({label:"\xC2ge",value:n}),$t=n=>({label:"Activit\xE9",value:n}),jt=n=>({label:"Profession",value:n}),Lt=()=>({"min-width":"25rem"});function Ot(n,i){n&1&&(r(0,"small",49),a(1," Le nom est requis "),t())}function zt(n,i){n&1&&(r(0,"small",49),a(1," Le pr\xE9nom est requis "),t())}function Ht(n,i){n&1&&(r(0,"small",49),a(1," L'email n'est pas valide "),t())}function Jt(n,i){n&1&&(r(0,"small",49),a(1," Le nom est requis "),t())}function Yt(n,i){n&1&&(r(0,"small",49),a(1," L'email n'est pas valide "),t())}function Ut(n,i){if(n&1&&(r(0,"div")(1,"p-card",8)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h2",12),a(6,"Informations du promoteur"),t()(),r(7,"div",13)(8,"div",14)(9,"label",15),a(10,"Nom *"),t(),d(11,"input",16),h(12,Ot,2,0,"small",17),t()(),r(13,"div",13)(14,"div",14)(15,"label",18),a(16,"Pr\xE9nom *"),t(),d(17,"input",19),h(18,zt,2,0,"small",17),t()(),r(19,"div",13)(20,"div",14)(21,"label",20),a(22,"Date de naissance"),t(),d(23,"p-calendar",21),t()(),r(24,"div",13)(25,"div",14)(26,"label",22),a(27,"Num\xE9ro d'identit\xE9"),t(),d(28,"input",23),t()(),r(29,"div",13)(30,"div",14)(31,"label",24),a(32,"T\xE9l\xE9phone"),t(),d(33,"input",25),t()(),r(34,"div",13)(35,"div",14)(36,"label",26),a(37,"Email"),t(),d(38,"input",27),h(39,Ht,2,0,"small",17),t()(),r(40,"div",11)(41,"div",14)(42,"label",28),a(43,"Adresse"),t(),d(44,"input",29),t()(),r(45,"div",30)(46,"h2",12),a(47,"Informations de l'entreprise"),t()(),r(48,"div",31)(49,"div",14)(50,"label",32),a(51,"Nom de l'entreprise *"),t(),d(52,"input",33),h(53,Jt,2,0,"small",17),t()(),r(54,"div",13)(55,"div",14)(56,"label",34),a(57,"Date de cr\xE9ation"),t(),d(58,"p-calendar",35),t()(),r(59,"div",13)(60,"div",14)(61,"label",36),a(62,"Forme juridique"),t(),d(63,"p-dropdown",37),t()(),r(64,"div",13)(65,"div",14)(66,"label",38),a(67,"Secteur d'activit\xE9"),t(),d(68,"p-dropdown",39),t()(),r(69,"div",13)(70,"div",14)(71,"label",40),a(72,"Num\xE9ro de registre"),t(),d(73,"input",41),t()(),r(74,"div",42)(75,"div",14)(76,"label",43),a(77,"T\xE9l\xE9phone"),t(),d(78,"input",44),t()(),r(79,"div",42)(80,"div",14)(81,"label",45),a(82,"Email"),t(),d(83,"input",46),h(84,Yt,2,0,"small",17),t()(),r(85,"div",11)(86,"div",14)(87,"label",47),a(88,"Adresse"),t(),d(89,"input",48),t()()()()()()),n&2){let e,o,u,p,F,c=_();l(2),m("formGroup",c.infoBaseForm),l(10),m("ngIf",((e=c.infoBaseForm.get("nomPromoteur"))==null?null:e.invalid)&&((e=c.infoBaseForm.get("nomPromoteur"))==null?null:e.touched)),l(6),m("ngIf",((o=c.infoBaseForm.get("prenomPromoteur"))==null?null:o.invalid)&&((o=c.infoBaseForm.get("prenomPromoteur"))==null?null:o.touched)),l(5),m("showIcon",!0),l(16),m("ngIf",((u=c.infoBaseForm.get("emailPromoteur"))==null?null:u.invalid)&&((u=c.infoBaseForm.get("emailPromoteur"))==null?null:u.touched)),l(5),m("autoResize",!0),l(9),m("ngIf",((p=c.infoBaseForm.get("nomEntreprise"))==null?null:p.invalid)&&((p=c.infoBaseForm.get("nomEntreprise"))==null?null:p.touched)),l(5),m("showIcon",!0),l(5),m("options",c.formeJuridiques),l(5),m("options",c.secteursActivite),l(16),m("ngIf",((F=c.infoBaseForm.get("emailEntreprise"))==null?null:F.invalid)&&((F=c.infoBaseForm.get("emailEntreprise"))==null?null:F.touched)),l(5),m("autoResize",!0)}}function Kt(n,i){if(n&1&&(r(0,"div")(1,"p-card",50)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h2",51),a(6,"Actifs"),t()(),r(7,"div",52)(8,"div",14)(9,"label",53),a(10," Liquidit\xE9s "),r(11,"small",54),a(12,"Argent en caisse et en banque"),t()(),d(13,"p-inputNumber",55),t()(),r(14,"div",52)(15,"div",14)(16,"label",56),a(17," Cr\xE9ances clients "),r(18,"small",54),a(19,"Montant d\xFB par vos clients"),t()(),d(20,"p-inputNumber",57),t()(),r(21,"div",52)(22,"div",14)(23,"label",58),a(24,"Valeur des stocks"),t(),d(25,"p-inputNumber",59),t()(),r(26,"div",52)(27,"div",14)(28,"label",60),a(29,"Valeur des \xE9quipements"),t(),d(30,"p-inputNumber",61),t()(),r(31,"div",30)(32,"h2",51),a(33,"Passifs"),t()(),r(34,"div",13)(35,"div",14)(36,"label",62),a(37,"Dettes fournisseurs"),t(),d(38,"p-inputNumber",63),t()(),r(39,"div",13)(40,"div",14)(41,"label",64),a(42,"Emprunts actuels"),t(),d(43,"p-inputNumber",65),t()(),r(44,"div",13)(45,"div",14)(46,"label",66),a(47,"Capital propre"),t(),d(48,"p-inputNumber",67),t()()()()()()),n&2){let e=_();l(2),m("formGroup",e.bilanEntrepriseForm)}}function Qt(n,i){if(n&1&&(r(0,"div")(1,"p-card",68)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",69),a(6,"Patrimoine Personnel "),t()(),r(7,"div",13)(8,"div",14)(9,"label",70),a(10,"\xC9pargnes personnelles"),t(),d(11,"p-inputNumber",71),t()(),r(12,"div",13)(13,"div",14)(14,"label",72),a(15,"Valeur des biens durables"),t(),d(16,"p-inputNumber",73),t()(),r(17,"div",30)(18,"h3",69),a(19,"Garanties Propos\xE9es "),t()(),r(20,"div",42)(21,"div",14)(22,"label",74),a(23,"Libell\xE9 de la garantie"),t(),d(24,"input",75),t()(),r(25,"div",42)(26,"div",14)(27,"label",76),a(28,"Montant de la garantie"),t(),d(29,"p-inputNumber",77),t()()()()()()),n&2){let e=_();l(2),m("formGroup",e.bilanPersonnelForm)}}function Wt(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Ce champ est obligatoire "),t())}function Xt(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Ce champ est obligatoire "),t())}function Zt(n,i){if(n&1&&(r(0,"div")(1,"p-card",78)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",79),a(6,"R\xE9sultat Actuel"),t()(),r(7,"div",42)(8,"div",14)(9,"label",80),a(10,"Chiffre d'affaires *"),t(),d(11,"p-inputNumber",81),h(12,Wt,3,0,"small",17),t()(),r(13,"div",42)(14,"div",14)(15,"label",82),a(16," Autres revenus "),r(17,"small",54),a(18,"Subventions, commissions, revenus annexes..."),t()(),d(19,"p-inputNumber",83),t()(),r(20,"div",42)(21,"div",14)(22,"label",84),a(23,"Co\xFBt des marchandises *"),t(),d(24,"p-inputNumber",85),h(25,Xt,3,0,"small",17),t()()()()()()),n&2){let e,o,u=_();l(2),m("formGroup",u.resultatActuelForm),l(10),m("ngIf",((e=u.resultatActuelForm.get("chiffreAffaires"))==null?null:e.invalid)&&((e=u.resultatActuelForm.get("chiffreAffaires"))==null?null:e.touched)),l(13),m("ngIf",((o=u.resultatActuelForm.get("coutMarchandises"))==null?null:o.invalid)&&((o=u.resultatActuelForm.get("coutMarchandises"))==null?null:o.touched))}}function en(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Ce champ est obligatoire "),t())}function tn(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Ce champ est obligatoire "),t())}function nn(n,i){if(n&1&&(r(0,"div")(1,"p-card",87)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",79),a(6,"Pr\xE9visions Financi\xE8res"),t()(),r(7,"div",42)(8,"div",14)(9,"label",88),a(10,"Chiffre d'affaires pr\xE9visionnel *"),t(),d(11,"p-inputNumber",89),h(12,en,3,0,"small",17),t()(),r(13,"div",42)(14,"div",14)(15,"label",90),a(16," Autres revenus pr\xE9visionnels "),r(17,"small",54),a(18,"Subventions, commissions, revenus annexes..."),t()(),d(19,"p-inputNumber",91),t()(),r(20,"div",42)(21,"div",14)(22,"label",92),a(23,"Co\xFBt marchandises pr\xE9visionnel *"),t(),d(24,"p-inputNumber",93),h(25,tn,3,0,"small",17),t()()()()()()),n&2){let e,o,u=_();l(2),m("formGroup",u.resultatPrevisionnelForm),l(10),m("ngIf",((e=u.resultatPrevisionnelForm.get("chiffreAffaires"))==null?null:e.invalid)&&((e=u.resultatPrevisionnelForm.get("chiffreAffaires"))==null?null:e.touched)),l(13),m("ngIf",((o=u.resultatPrevisionnelForm.get("coutMarchandises"))==null?null:o.invalid)&&((o=u.resultatPrevisionnelForm.get("coutMarchandises"))==null?null:o.touched))}}function rn(n,i){if(n&1&&(r(0,"div")(1,"p-card",94)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",79),a(6,"Charges Actuelles "),t()(),r(7,"div",13)(8,"div",14)(9,"label",95),a(10,"Transport production"),t(),d(11,"p-inputNumber",96),t()(),r(12,"div",13)(13,"div",14)(14,"label",97),a(15,"Transport personnel"),t(),d(16,"p-inputNumber",98),t()(),r(17,"div",13)(18,"div",14)(19,"label",99),a(20,"Frais manutention"),t(),d(21,"p-inputNumber",100),t()(),r(22,"div",13)(23,"div",14)(24,"label",101),a(25,"Aide externe"),t(),d(26,"p-inputNumber",102),t()(),r(27,"div",13)(28,"div",14)(29,"label",103),a(30,"H\xE9bergement/Restauration"),t(),d(31,"p-inputNumber",104),t()(),r(32,"div",13)(33,"div",14)(34,"label",105),a(35,"Imp\xF4ts et taxes"),t(),d(36,"p-inputNumber",106),t()(),r(37,"div",13)(38,"div",14)(39,"label",107),a(40,"Loyers"),t(),d(41,"p-inputNumber",108),t()()()()()()),n&2){let e=_();l(2),m("formGroup",e.chargesActuellesForm)}}function an(n,i){if(n&1&&(r(0,"div")(1,"p-card",109)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",79),a(6,"Charges Pr\xE9visionnelles"),t()(),r(7,"div",13)(8,"div",14)(9,"label",110),a(10,"Transport production"),t(),d(11,"p-inputNumber",111),t()(),r(12,"div",13)(13,"div",14)(14,"label",112),a(15,"Transport personnel"),t(),d(16,"p-inputNumber",113),t()(),r(17,"div",13)(18,"div",14)(19,"label",114),a(20,"Manutention"),t(),d(21,"p-inputNumber",115),t()(),r(22,"div",13)(23,"div",14)(24,"label",116),a(25,"Aide externe"),t(),d(26,"p-inputNumber",117),t()(),r(27,"div",13)(28,"div",14)(29,"label",118),a(30,"H\xE9bergement/Restauration"),t(),d(31,"p-inputNumber",119),t()(),r(32,"div",13)(33,"div",14)(34,"label",120),a(35,"Imp\xF4ts et taxes"),t(),d(36,"p-inputNumber",121),t()(),r(37,"div",13)(38,"div",14)(39,"label",122),a(40,"Loyers"),t(),d(41,"p-inputNumber",123),t()()()()()()),n&2){let e=_();l(2),m("formGroup",e.chargesPrevisionellesForm)}}function ln(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Montant requis (min 1 GNF) "),t())}function on(n,i){if(n&1){let e=w();r(0,"div",162),D("click",function(){let u=T(e).$implicit,p=_(2);return N(p.selectionnerDureeMois(u))}),r(1,"div",163),a(2),t(),r(3,"div",164),a(4,"mois"),t(),r(5,"div",165),a(6),t()()}if(n&2){let e,o,u=i.$implicit,p=_(2);m("ngClass",B(4,dt,((e=p.demandeCreditForm.get("dureeMois"))==null?null:e.value)===u,((e=p.demandeCreditForm.get("dureeMois"))==null?null:e.value)!==u)),l(2),x(u),l(3),m("ngClass",B(7,ct,((o=p.demandeCreditForm.get("dureeMois"))==null?null:o.value)===u,((o=p.demandeCreditForm.get("dureeMois"))==null?null:o.value)!==u)),l(),y(" ",u<12?u+" mois":u/12+(u===12?" an":" ans")," ")}}function sn(n,i){if(n&1){let e=w();r(0,"div",162),D("click",function(){let u=T(e).$implicit,p=_(2);return N(p.selectionnerDureeMois(u))}),r(1,"div",163),a(2),t(),r(3,"div",164),a(4,"mois"),t(),r(5,"div",165),a(6),t()()}if(n&2){let e,o,u=i.$implicit,p=_(2);m("ngClass",B(4,dt,((e=p.demandeCreditForm.get("dureeMois"))==null?null:e.value)===u,((e=p.demandeCreditForm.get("dureeMois"))==null?null:e.value)!==u)),l(2),x(u),l(3),m("ngClass",B(7,ct,((o=p.demandeCreditForm.get("dureeMois"))==null?null:o.value)===u,((o=p.demandeCreditForm.get("dureeMois"))==null?null:o.value)!==u)),l(),y(" ",u/12," ans ")}}function un(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Dur\xE9e entre 1 et 120 mois "),t())}function mn(n,i){n&1&&(r(0,"small",49),d(1,"i",86),a(2,"Veuillez d\xE9crire l'objet du financement "),t())}function dn(n,i){if(n&1){let e=w();r(0,"div")(1,"p-card",124)(2,"form",9)(3,"div",10)(4,"div",11)(5,"h3",79),a(6,"Demande de Cr\xE9dit "),t()(),r(7,"div",13)(8,"div",14)(9,"label",125),a(10,"Montant demand\xE9 *"),t(),d(11,"p-inputNumber",126),h(12,ln,3,0,"small",17),t()(),r(13,"div",11)(14,"div",14)(15,"label",127),d(16,"i",128),a(17," Dur\xE9e du cr\xE9dit (mois) * "),t(),r(18,"div",129)(19,"div",130)(20,"div",131)(21,"span",132),d(22,"i",133),a(23," Cliquez sur une dur\xE9e pour la s\xE9lectionner "),t()(),r(24,"div",11)(25,"div",134),j(26,on,7,10,"div",135,$),t()(),r(28,"div",136)(29,"div",134),j(30,sn,7,10,"div",135,$),t()(),r(32,"div",137)(33,"div",138)(34,"span",139),d(35,"i",140),a(36," Autre dur\xE9e: "),t(),d(37,"p-inputNumber",141)(38,"p-tag",142),t()()()(),h(39,un,3,0,"small",17),t()(),r(40,"div",11)(41,"div",143)(42,"div",130)(43,"div",144)(44,"div",145)(45,"div",146),d(46,"i",147),a(47,"Montant demand\xE9 "),t(),r(48,"div",148),a(49),f(50,"currency"),t()()(),r(51,"div",144)(52,"div",145)(53,"div",146),d(54,"i",149),a(55,"Dur\xE9e s\xE9lectionn\xE9e "),t(),r(56,"div",150),a(57),t()()(),r(58,"div",144)(59,"div",145)(60,"div",146),d(61,"i",151),a(62,"Mensualit\xE9 estim\xE9e "),t(),r(63,"div",152),a(64),f(65,"currency"),t()()()()()(),r(66,"div",153)(67,"h3",79),a(68,"Localisation du cr\xE9dit "),t()(),r(69,"div",144)(70,"div",14)(71,"label",154),a(72,"D\xE9l\xE9gation"),t(),r(73,"p-dropdown",155),D("onChange",function(u){T(e);let p=_();return N(p.onDelegationChange(u))}),t()()(),r(74,"div",144)(75,"div",14)(76,"label",156),a(77,"Agence"),t(),r(78,"p-dropdown",157),D("onChange",function(u){T(e);let p=_();return N(p.onAgenceChange(u))}),t()()(),r(79,"div",144)(80,"div",14)(81,"label",158),a(82,"Point de vente"),t(),d(83,"p-dropdown",159),t()(),r(84,"div",11)(85,"div",14)(86,"label",160),a(87,"Objet du financement *"),t(),d(88,"input",161),h(89,mn,3,0,"small",17),t()()()()()()}if(n&2){let e,o,u,p,F,c=_();l(2),m("formGroup",c.demandeCreditForm),l(10),m("ngIf",((e=c.demandeCreditForm.get("montantDemande"))==null?null:e.invalid)&&((e=c.demandeCreditForm.get("montantDemande"))==null?null:e.touched)),l(14),L(C(32,ft)),l(4),L(C(33,gt)),l(7),Q(C(34,bt)),m("showButtons",!0)("min",1)("max",120),l(),m("value",c.getDureeEnAnnees())("severity",c.getDureeSeverity()),l(),m("ngIf",((o=c.demandeCreditForm.get("dureeMois"))==null?null:o.invalid)&&((o=c.demandeCreditForm.get("dureeMois"))==null?null:o.touched)),l(10),y(" ",g(50,20,s(35,Ye,(u=c.demandeCreditForm.get("montantDemande"))==null?null:u.value))," "),l(8),y(" ",(p=c.demandeCreditForm.get("dureeMois"))==null?null:p.value," mois "),l(7),y(" ",g(65,26,s(37,Ye,c.calculerMensualite()))," "),l(9),m("options",c.state().allDelegations),l(5),m("options",c.state().filteredAgences)("disabled",c.state().filteredAgences.length===0),l(5),m("options",c.state().filteredPointsVente)("disabled",c.state().filteredPointsVente.length===0),l(5),m("autoResize",!0),l(),m("ngIf",((F=c.demandeCreditForm.get("objetFinancement"))==null?null:F.invalid)&&((F=c.demandeCreditForm.get("objetFinancement"))==null?null:F.touched))}}function cn(n,i){if(n&1){let e=w();r(0,"div",186)(1,"span",187),a(2),t(),r(3,"button",188),D("click",function(){T(e);let u=_().index,p=_(3);return N(p.removePersonnecaution(u))}),t()()}if(n&2){let e=_().$implicit;l(2),X("",e.prenom," ",e.nom,"")}}function pn(n,i){if(n&1&&(r(0,"div",13)(1,"strong"),a(2,"T\xE9l\xE9phone:"),t(),a(3),t()),n&2){let e=_().$implicit;l(3),y(" ",e.telephone," ")}}function vn(n,i){if(n&1&&(r(0,"div",13)(1,"strong"),a(2,"\xC2ge:"),t(),a(3),t()),n&2){let e=_().$implicit;l(3),y(" ",e.age," ans ")}}function fn(n,i){if(n&1&&(r(0,"div",13)(1,"strong"),a(2,"Activit\xE9:"),t(),a(3),t()),n&2){let e=_().$implicit;l(3),y(" ",e.activite," ")}}function gn(n,i){if(n&1&&(r(0,"div",13)(1,"strong"),a(2,"Profession:"),t(),a(3),t()),n&2){let e=_().$implicit;l(3),y(" ",e.profession," ")}}function bn(n,i){if(n&1&&(r(0,"div",11)(1,"p-card",183),h(2,cn,4,2,"ng-template",184),r(3,"div",130),h(4,pn,4,1,"div",185)(5,vn,4,1,"div",185)(6,fn,4,1,"div",185)(7,gn,4,1,"div",185),t()()()),n&2){let e=i.$implicit;l(4),m("ngIf",e.telephone),l(),m("ngIf",e.age),l(),m("ngIf",e.activite),l(),m("ngIf",e.profession)}}function hn(n,i){if(n&1&&(r(0,"div",11)(1,"h3",79),a(2),t(),r(3,"div",10),h(4,bn,8,4,"div",182),t()()),n&2){let e=_(2);l(2),y("Personnes caution ajout\xE9es (",e.personnecautions.length,")"),l(2),m("ngForOf",e.personnecautions)}}function _n(n,i){n&1&&(r(0,"div",11)(1,"div",189),d(2,"i",190),r(3,"span"),a(4,"Aucune personne caution ajout\xE9e. Vous pouvez continuer sans ajouter de caution."),t()()())}function Fn(n,i){if(n&1){let e=w();r(0,"div")(1,"p-card",166)(2,"div",10)(3,"div",11)(4,"h3",79),a(5,"Ajouter une personne caution"),t(),r(6,"p",167),a(7,"Les personnes caution sont optionnelles mais peuvent renforcer votre dossier."),t()(),r(8,"div",11)(9,"form",9)(10,"div",10)(11,"div",42)(12,"div",14)(13,"label",168),a(14,"Nom"),t(),d(15,"input",169),t()(),r(16,"div",42)(17,"div",14)(18,"label",170),a(19,"Pr\xE9nom"),t(),d(20,"input",171),t()(),r(21,"div",42)(22,"div",14)(23,"label",172),a(24,"T\xE9l\xE9phone"),t(),d(25,"input",173),t()(),r(26,"div",42)(27,"div",14)(28,"label",174),a(29,"\xC2ge"),t(),d(30,"p-inputNumber",175),t()(),r(31,"div",42)(32,"div",14)(33,"label",176),a(34,"Activit\xE9"),t(),d(35,"input",177),t()(),r(36,"div",42)(37,"div",14)(38,"label",178),a(39,"Profession"),t(),d(40,"input",179),t()(),r(41,"div",11)(42,"button",180),D("click",function(){T(e);let u=_();return N(u.addPersonnecaution())}),t()()()()(),h(43,hn,5,2,"div",181)(44,_n,5,0,"div",181),t()()()}if(n&2){let e=_();l(9),m("formGroup",e.personnecautionForm),l(21),m("showButtons",!0)("min",18)("max",100),l(13),m("ngIf",e.personnecautions.length>0),l(),m("ngIf",e.personnecautions.length===0)}}function xn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function En(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Cn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function yn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Sn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Pn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Dn(n,i){if(n&1&&(r(0,"tr",210)(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;m("ngClass",s(3,pt,e.isTotal)),l(2),x(e.label),l(2),x(e.value)}}function An(n,i){if(n&1&&(r(0,"tr",210)(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;m("ngClass",s(3,pt,e.isTotal)),l(2),x(e.label),l(2),x(e.value)}}function In(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Tn(n,i){if(n&1&&(r(0,"tr")(1,"td",209),a(2),t(),r(3,"td"),a(4),t()()),n&2){let e=i.$implicit;l(2),x(e.label),l(2),x(e.value)}}function Nn(n,i){if(n&1&&(r(0,"div",42)(1,"p-card",213)(2,"p-table",194),h(3,Tn,5,2,"ng-template",195),t()()()),n&2){let e=i.$implicit;l(),m("header",e.prenom+" "+e.nom),l(),m("value",V(11,Y,s(3,J,e.telephone||"-"),s(5,qt,e.age?e.age+" ans":"-"),s(7,$t,e.activite||"-"),s(9,jt,e.profession||"-")))("tableStyle",C(16,Lt))}}function Rn(n,i){if(n&1&&(r(0,"div",197)(1,"p-panel",211)(2,"div",10),h(3,Nn,4,17,"div",212),t()()()),n&2){let e=_(2);l(),W("header","Personnes caution (",e.personnecautions.length,")"),m("toggleable",!0),l(2),m("ngForOf",e.personnecautions)}}function wn(n,i){if(n&1){let e=w();r(0,"div")(1,"p-card",191)(2,"div",130)(3,"div",192)(4,"p-panel",193)(5,"p-table",194),h(6,xn,5,2,"ng-template",195),t()()(),r(7,"div",192)(8,"p-panel",196)(9,"p-table",194),h(10,En,5,2,"ng-template",195),t()()(),r(11,"div",197)(12,"p-panel",198)(13,"div",130)(14,"div",42)(15,"h3",199),a(16,"Bilan entreprise"),t(),r(17,"p-table",194),f(18,"currency"),f(19,"currency"),h(20,Cn,5,2,"ng-template",195),t()(),r(21,"div",42)(22,"h3",199),a(23,"Bilan personnel & Garanties"),t(),r(24,"p-table",194),f(25,"currency"),f(26,"currency"),f(27,"currency"),f(28,"currency"),h(29,yn,5,2,"ng-template",195),t()()()()(),r(30,"div",197)(31,"p-panel",200)(32,"div",130)(33,"div",42)(34,"h3",199),a(35,"R\xE9sultats actuels"),t(),r(36,"p-table",194),f(37,"currency"),f(38,"currency"),f(39,"currency"),f(40,"currency"),h(41,Sn,5,2,"ng-template",195),t()(),r(42,"div",42)(43,"h3",199),a(44,"R\xE9sultats pr\xE9visionnels"),t(),r(45,"p-table",194),f(46,"currency"),f(47,"currency"),f(48,"currency"),f(49,"currency"),h(50,Pn,5,2,"ng-template",195),t()()()()(),r(51,"div",197)(52,"p-panel",201)(53,"div",130)(54,"div",42)(55,"h3",199),a(56,"Charges actuelles"),t(),r(57,"p-table",194),f(58,"currency"),f(59,"currency"),f(60,"currency"),f(61,"currency"),f(62,"currency"),f(63,"currency"),f(64,"currency"),f(65,"currency"),h(66,Dn,5,5,"ng-template",195),t()(),r(67,"div",42)(68,"h3",199),a(69,"Charges pr\xE9visionnelles"),t(),r(70,"p-table",194),f(71,"currency"),f(72,"currency"),f(73,"currency"),f(74,"currency"),f(75,"currency"),f(76,"currency"),f(77,"currency"),f(78,"currency"),h(79,An,5,5,"ng-template",195),t()()()()(),r(80,"div",197)(81,"p-panel",202)(82,"div",130)(83,"div",42)(84,"p-table",194),f(85,"currency"),f(86,"currency"),h(87,In,5,2,"ng-template",195),t()(),r(88,"div",42)(89,"h4",203),a(90,"Objet du financement:"),t(),r(91,"p-card",204)(92,"p",205),a(93),t()()()()()(),h(94,Rn,4,4,"div",206),r(95,"div",207)(96,"button",208),D("click",function(){T(e);let u=_();return N(u.finaliserDemande())}),t()()()()()}if(n&2){let e=_();l(4),m("toggleable",!0),l(),m("value",G(231,H,s(219,Ue,(e.resumeData.promoteur==null?null:e.resumeData.promoteur.nom)||"-"),s(221,ht,(e.resumeData.promoteur==null?null:e.resumeData.promoteur.prenom)||"-"),s(223,Ke,(e.resumeData.promoteur==null?null:e.resumeData.promoteur.email)||"-"),s(225,J,(e.resumeData.promoteur==null?null:e.resumeData.promoteur.telephone)||"-"),s(227,_t,(e.resumeData.promoteur==null?null:e.resumeData.promoteur.numero_identite)||"-"),s(229,Ft,e.formatDateForDisplay(e.resumeData.promoteur==null?null:e.resumeData.promoteur.date_naissance)||"-")))("tableStyle",C(238,Qe)),l(3),m("toggleable",!0),l(),m("value",G(251,H,s(239,Ue,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.nom)||"-"),s(241,xt,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.forme_juridique)||"-"),s(243,Et,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.secteur_activite)||"-"),s(245,Ct,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.numero_registre)||"-"),s(247,Ke,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.email)||"-"),s(249,J,(e.resumeData.entreprise==null?null:e.resumeData.entreprise.telephone)||"-")))("tableStyle",C(258,Qe)),l(3),m("toggleable",!0),l(5),m("value",B(267,Pt,s(261,yt,g(18,27,s(259,b,e.calculerTotalActif()))),s(265,St,g(19,33,s(263,b,e.calculerTotalPassif())))))("tableStyle",C(270,M)),l(7),m("value",ee(289,Rt,s(273,Dt,g(25,39,s(271,b,e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.epargnes))),s(277,At,g(26,45,s(275,b,e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.valeur_biens_durables))),s(281,It,g(27,51,s(279,b,((e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.epargnes)||0)+((e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.valeur_biens_durables)||0)))),s(283,Tt,(e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.libele_garantie)||"-"),s(287,Nt,g(28,57,s(285,b,e.resumeData.bilanPersonnel==null?null:e.resumeData.bilanPersonnel.montant_garantie)))))("tableStyle",C(295,M)),l(7),m("toggleable",!0),l(5),m("value",V(312,Y,s(298,We,g(37,63,s(296,b,e.resumeData.resultatActuel==null?null:e.resumeData.resultatActuel.chiffre_affaires))),s(302,Xe,g(38,69,s(300,b,e.resumeData.resultatActuel==null?null:e.resumeData.resultatActuel.autres_revenus))),s(306,Ze,g(39,75,s(304,b,((e.resumeData.resultatActuel==null?null:e.resumeData.resultatActuel.chiffre_affaires)||0)+((e.resumeData.resultatActuel==null?null:e.resumeData.resultatActuel.autres_revenus)||0)))),s(310,et,g(40,81,s(308,b,e.resumeData.resultatActuel==null?null:e.resumeData.resultatActuel.cout_marchandises)))))("tableStyle",C(317,M)),l(9),m("value",V(334,Y,s(320,We,g(46,87,s(318,b,e.resumeData.resultatPrevisionnel==null?null:e.resumeData.resultatPrevisionnel.chiffre_affaires))),s(324,Xe,g(47,93,s(322,b,e.resumeData.resultatPrevisionnel==null?null:e.resumeData.resultatPrevisionnel.autres_revenus))),s(328,Ze,g(48,99,s(326,b,((e.resumeData.resultatPrevisionnel==null?null:e.resumeData.resultatPrevisionnel.chiffre_affaires)||0)+((e.resumeData.resultatPrevisionnel==null?null:e.resumeData.resultatPrevisionnel.autres_revenus)||0)))),s(332,et,g(49,105,s(330,b,e.resumeData.resultatPrevisionnel==null?null:e.resumeData.resultatPrevisionnel.cout_marchandises)))))("tableStyle",C(339,M)),l(7),m("toggleable",!0),l(5),m("value",O(372,ut,s(342,tt,g(58,111,s(340,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.cout_transport_production))),s(346,nt,g(59,117,s(344,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.frais_transport_personnel))),s(350,it,g(60,123,s(348,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.frais_manutention))),s(354,rt,g(61,129,s(352,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.montant_aide_externe))),s(358,at,g(62,135,s(356,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.frais_hebergement_restauration))),s(362,lt,g(63,141,s(360,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.impots))),s(366,ot,g(64,147,s(364,b,e.resumeData.chargesActuelles==null?null:e.resumeData.chargesActuelles.loyers))),s(370,st,g(65,153,s(368,b,e.calculerTotalChargesActuelles())))))("tableStyle",C(381,M)),l(13),m("value",O(414,ut,s(384,tt,g(71,159,s(382,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.cout_transport_production))),s(388,nt,g(72,165,s(386,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.frais_transport_personnel))),s(392,it,g(73,171,s(390,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.frais_manutention))),s(396,rt,g(74,177,s(394,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.montant_aide_externe))),s(400,at,g(75,183,s(398,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.frais_hebergement_restauration))),s(404,lt,g(76,189,s(402,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.impots))),s(408,ot,g(77,195,s(406,b,e.resumeData.chargesPrevisionnelles==null?null:e.resumeData.chargesPrevisionnelles.loyers))),s(412,st,g(78,201,s(410,b,e.calculerTotalChargesPrevisionnelles())))))("tableStyle",C(423,M)),l(11),m("toggleable",!0),l(3),m("value",G(440,H,s(426,wt,g(85,207,s(424,b,e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.montant_demande))),s(428,Mt,((e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.duree_mois)||0)+" mois"),s(432,Bt,g(86,213,s(430,b,e.calculerMensualite()))),s(434,kt,(e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.delegation)||"-"),s(436,Vt,(e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.agence)||"-"),s(438,Gt,(e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.point_vente)||"-")))("tableStyle",C(447,M)),l(9),y("",(e.resumeData.demandeCredit==null?null:e.resumeData.demandeCredit.objet_financement)||"-"," "),l(),m("ngIf",e.personnecautions.length>0),l(2),m("loading",e.loading())}}var mt=class n{fb=R(fe);router=R(oe);messageService=R(z);destroyRef=R(U);analyseCreditService=R(Ce);route=R(le);state=k({loading:!1,allDelegations:[],allAgences:[],allPointsVente:[],filteredAgences:[],filteredPointsVente:[]});activeIndex=k(0);items=k([]);loading=k(!1);infoBaseForm;bilanEntrepriseForm;bilanPersonnelForm;resultatActuelForm;resultatPrevisionnelForm;chargesActuellesForm;chargesPrevisionellesForm;demandeCreditForm;personnecautionForm;formeJuridiques=[{label:"SARL",value:"SARL"},{label:"SA",value:"SA"},{label:"EI",value:"EI"},{label:"EIRL",value:"EIRL"},{label:"SNC",value:"SNC"}];secteursActivite=[{label:"Commerce",value:"Commerce"},{label:"Agriculture",value:"Agriculture"},{label:"Service",value:"Service"},{label:"Industrie",value:"Industrie"},{label:"Artisanat",value:"Artisanat"}];personnecautions=[];resumeData={};userId=null;ngOnInit(){this.route.params.pipe(q(this.destroyRef)).subscribe(i=>{this.userId=i.userId?parseInt(i.userId,10):null,console.log("User ID from route:",this.userId),this.userId||this.messageService.add({severity:"error",summary:"Erreur",detail:"ID utilisateur manquant dans l'URL",life:3e3})}),this.loadInitialData(),this.initStepItems(),this.initForms()}loadInitialData(){this.state.update(i=>I(A({},i),{loading:!0})),this.analyseCreditService.startNewDemandeInd$().pipe(q(this.destroyRef)).subscribe({next:i=>{console.log("Initial data loaded:",i),i.data&&this.state.update(e=>I(A({},e),{loading:!1,allDelegations:i.data.delegations||[],allAgences:i.data.agences||[],allPointsVente:i.data.pointVentes||[]}))},error:i=>{console.error("Error loading initial data:",i),this.messageService.add({severity:"error",summary:"Erreur",detail:"Impossible de charger les donn\xE9es initiales",life:3e3}),this.state.update(e=>I(A({},e),{loading:!1}))}})}initStepItems(){this.items.set([{label:"Informations de base",command:()=>this.onStepChange(0)},{label:"Bilan entreprise",command:()=>this.onStepChange(1)},{label:"Bilan personnel",command:()=>this.onStepChange(2)},{label:"R\xE9sultats actuels",command:()=>this.onStepChange(3)},{label:"R\xE9sultats pr\xE9visionnels",command:()=>this.onStepChange(4)},{label:"Charges actuelles",command:()=>this.onStepChange(5)},{label:"Charges pr\xE9visionnelles",command:()=>this.onStepChange(6)},{label:"Demande de cr\xE9dit",command:()=>this.onStepChange(7)},{label:"Personnes caution",command:()=>this.onStepChange(8)},{label:"R\xE9sum\xE9",command:()=>this.onStepChange(9)}])}initForms(){this.infoBaseForm=this.fb.group({nomPromoteur:["",v.required],prenomPromoteur:["",v.required],dateNaissance:[null],numeroIdentite:[""],adressePromoteur:[""],telephonePromoteur:[""],emailPromoteur:["",v.email],nomEntreprise:["",v.required],formeJuridique:[""],secteurActivite:[""],dateCreation:[null],numeroRegistre:[""],adresseEntreprise:[""],telephoneEntreprise:[""],emailEntreprise:["",v.email]}),this.bilanEntrepriseForm=this.fb.group({liquidites:[0,v.min(0)],creancesClients:[0,v.min(0)],valeurStocks:[0,v.min(0)],valeurEquipements:[0,v.min(0)],dettesFournisseurs:[0,v.min(0)],emprunts:[0,v.min(0)],capitalPropre:[0,v.min(0)]}),this.bilanPersonnelForm=this.fb.group({epargnes:[0,v.min(0)],valeurBiensDurables:[0,v.min(0)],libeleGarantie:[""],montantGarantie:[0,v.min(0)]}),this.resultatActuelForm=this.fb.group({chiffreAffaires:[0,[v.required,v.min(0)]],autresRevenus:[0,v.min(0)],coutMarchandises:[0,[v.required,v.min(0)]]}),this.resultatPrevisionnelForm=this.fb.group({chiffreAffaires:[0,[v.required,v.min(0)]],autresRevenus:[0,v.min(0)],coutMarchandises:[0,[v.required,v.min(0)]]}),this.chargesActuellesForm=this.fb.group({coutTransportProduction:[0,v.min(0)],fraisTransportPersonnel:[0,v.min(0)],fraisManutention:[0,v.min(0)],montantAideExterne:[0,v.min(0)],fraisHebergementRestauration:[0,v.min(0)],impots:[0,v.min(0)],loyers:[0,v.min(0)]}),this.chargesPrevisionellesForm=this.fb.group({coutTransportProduction:[0,v.min(0)],fraisTransportPersonnel:[0,v.min(0)],fraisManutention:[0,v.min(0)],montantAideExterne:[0,v.min(0)],fraisHebergementRestauration:[0,v.min(0)],impots:[0,v.min(0)],loyers:[0,v.min(0)]}),this.demandeCreditForm=this.fb.group({montantDemande:[0,[v.required,v.min(1)]],dureeMois:[12,[v.required,v.min(1)]],objetFinancement:["",v.required],delegation:[null],agence:[null],pointVente:[null]}),this.personnecautionForm=this.fb.group({nom:[""],prenom:[""],telephone:[""],activite:[""],age:[null,[v.min(18),v.max(100)]],profession:[""]})}onStepChange(i){this.validateCurrentForm()&&(i===9&&this.prepareSummary(),this.activeIndex.set(i))}nextStep(){let i=this.activeIndex();this.validateCurrentForm()&&i<this.items().length-1&&(i===8&&this.prepareSummary(),this.activeIndex.set(i+1))}prevStep(){let i=this.activeIndex();i>0&&this.activeIndex.set(i-1)}validateCurrentForm(){switch(this.activeIndex()){case 0:if(this.infoBaseForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs obligatoires."}),!1;this.saveInfoBaseToResume();break;case 1:if(this.bilanEntrepriseForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs du bilan."}),!1;this.saveBilanEntrepriseToResume();break;case 2:if(this.bilanPersonnelForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs du bilan personnel."}),!1;this.saveBilanPersonnelToResume();break;case 3:if(this.resultatActuelForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs des r\xE9sultats actuels."}),!1;this.saveResultatActuelToResume();break;case 4:if(this.resultatPrevisionnelForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs des r\xE9sultats pr\xE9visionnels."}),!1;this.saveResultatPrevisionnelToResume();break;case 5:if(this.chargesActuellesForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs des charges actuelles."}),!1;this.saveChargesActuellesToResume();break;case 6:if(this.chargesPrevisionellesForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs des charges pr\xE9visionnelles."}),!1;this.saveChargesPrevisionellesToResume();break;case 7:if(this.demandeCreditForm.invalid)return this.messageService.add({severity:"error",summary:"Erreur",detail:"Veuillez remplir correctement tous les champs de la demande de cr\xE9dit."}),!1;this.saveDemandeCreditToResume();break;case 8:break}return!0}onDelegationChange(i){console.log("Delegation changed:",i);let e=i.value;if(!e||!e.id){this.state.update(p=>I(A({},p),{filteredAgences:[],filteredPointsVente:[]}));return}let o=e.id;console.log("Filtering agences for delegation ID:",o);let u=this.state().allAgences?.filter(p=>p.delegation_id===o)||[];this.state.update(p=>I(A({},p),{filteredAgences:u,filteredPointsVente:[]})),this.demandeCreditForm.patchValue({agence:null,pointVente:null})}onAgenceChange(i){console.log("Agence changed:",i);let e=i.value;if(!e||!e.id){this.state.update(p=>I(A({},p),{filteredPointsVente:[]}));return}let o=e.id;console.log("Filtering points de vente for agence ID:",o);let u=this.state().allPointsVente?.filter(p=>p.agence_id===o)||[];this.state.update(p=>I(A({},p),{filteredPointsVente:u})),this.demandeCreditForm.patchValue({pointVente:null})}addPersonnecaution(){if(this.personnecautionForm.invalid){this.messageService.add({severity:"warn",summary:"Attention",detail:"Veuillez remplir correctement tous les champs avant d'ajouter la personne caution."});return}let i={nom:this.personnecautionForm.get("nom")?.value||"",prenom:this.personnecautionForm.get("prenom")?.value||"",telephone:this.personnecautionForm.get("telephone")?.value||"",activite:this.personnecautionForm.get("activite")?.value||"",age:this.personnecautionForm.get("age")?.value||void 0,profession:this.personnecautionForm.get("profession")?.value||""};this.personnecautions.push(i),this.personnecautionForm.reset(),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Personne caution ajout\xE9e avec succ\xE8s."})}removePersonnecaution(i){this.personnecautions.splice(i,1),this.messageService.add({severity:"info",summary:"Information",detail:"Personne caution supprim\xE9e."})}saveInfoBaseToResume(){let i=this.infoBaseForm.get("formeJuridique")?.value,e=i&&((typeof i=="object"&&i.label?i.label:this.formeJuridiques.find(p=>p.value===i)?.label)||i)||"",o=this.infoBaseForm.get("secteurActivite")?.value,u=o&&((typeof o=="object"&&o.label?o.label:this.secteursActivite.find(p=>p.value===o)?.label)||o)||"";this.resumeData.promoteur={nom:this.infoBaseForm.get("nomPromoteur")?.value||"",prenom:this.infoBaseForm.get("prenomPromoteur")?.value||"",date_naissance:this.formatDate(this.infoBaseForm.get("dateNaissance")?.value),numero_identite:this.infoBaseForm.get("numeroIdentite")?.value||"",adresse:this.infoBaseForm.get("adressePromoteur")?.value||"",telephone:this.infoBaseForm.get("telephonePromoteur")?.value||"",email:this.infoBaseForm.get("emailPromoteur")?.value||""},this.resumeData.entreprise={nom:this.infoBaseForm.get("nomEntreprise")?.value||"",forme_juridique:e,secteur_activite:u,date_creation:this.formatDate(this.infoBaseForm.get("dateCreation")?.value),numero_registre:this.infoBaseForm.get("numeroRegistre")?.value||"",adresse:this.infoBaseForm.get("adresseEntreprise")?.value||"",telephone:this.infoBaseForm.get("telephoneEntreprise")?.value||"",email:this.infoBaseForm.get("emailEntreprise")?.value||""}}saveBilanEntrepriseToResume(){this.resumeData.bilanEntreprise={liquidites:this.bilanEntrepriseForm.get("liquidites")?.value||0,creances_clients:this.bilanEntrepriseForm.get("creancesClients")?.value||0,valeur_stocks:this.bilanEntrepriseForm.get("valeurStocks")?.value||0,valeur_equipements:this.bilanEntrepriseForm.get("valeurEquipements")?.value||0,dettes_fournisseurs:this.bilanEntrepriseForm.get("dettesFournisseurs")?.value||0,emprunts:this.bilanEntrepriseForm.get("emprunts")?.value||0,capital_propre:this.bilanEntrepriseForm.get("capitalPropre")?.value||0}}saveBilanPersonnelToResume(){this.resumeData.bilanPersonnel={epargnes:this.bilanPersonnelForm.get("epargnes")?.value||0,valeur_biens_durables:this.bilanPersonnelForm.get("valeurBiensDurables")?.value||0,libele_garantie:this.bilanPersonnelForm.get("libeleGarantie")?.value||"",montant_garantie:this.bilanPersonnelForm.get("montantGarantie")?.value||0}}saveResultatActuelToResume(){this.resumeData.resultatActuel={chiffre_affaires:this.resultatActuelForm.get("chiffreAffaires")?.value||0,autres_revenus:this.resultatActuelForm.get("autresRevenus")?.value||0,cout_marchandises:this.resultatActuelForm.get("coutMarchandises")?.value||0}}saveResultatPrevisionnelToResume(){this.resumeData.resultatPrevisionnel={chiffre_affaires:this.resultatPrevisionnelForm.get("chiffreAffaires")?.value||0,autres_revenus:this.resultatPrevisionnelForm.get("autresRevenus")?.value||0,cout_marchandises:this.resultatPrevisionnelForm.get("coutMarchandises")?.value||0}}saveChargesActuellesToResume(){this.resumeData.chargesActuelles={cout_transport_production:this.chargesActuellesForm.get("coutTransportProduction")?.value||0,frais_transport_personnel:this.chargesActuellesForm.get("fraisTransportPersonnel")?.value||0,frais_manutention:this.chargesActuellesForm.get("fraisManutention")?.value||0,montant_aide_externe:this.chargesActuellesForm.get("montantAideExterne")?.value||0,frais_hebergement_restauration:this.chargesActuellesForm.get("fraisHebergementRestauration")?.value||0,impots:this.chargesActuellesForm.get("impots")?.value||0,loyers:this.chargesActuellesForm.get("loyers")?.value||0}}saveChargesPrevisionellesToResume(){this.resumeData.chargesPrevisionnelles={cout_transport_production:this.chargesPrevisionellesForm.get("coutTransportProduction")?.value||0,frais_transport_personnel:this.chargesPrevisionellesForm.get("fraisTransportPersonnel")?.value||0,frais_manutention:this.chargesPrevisionellesForm.get("fraisManutention")?.value||0,montant_aide_externe:this.chargesPrevisionellesForm.get("montantAideExterne")?.value||0,frais_hebergement_restauration:this.chargesPrevisionellesForm.get("fraisHebergementRestauration")?.value||0,impots:this.chargesPrevisionellesForm.get("impots")?.value||0,loyers:this.chargesPrevisionellesForm.get("loyers")?.value||0}}saveDemandeCreditToResume(){this.resumeData.demandeCredit={montant_demande:this.demandeCreditForm.get("montantDemande")?.value||0,duree_mois:this.demandeCreditForm.get("dureeMois")?.value||0,objet_financement:this.demandeCreditForm.get("objetFinancement")?.value||"",delegation:this.demandeCreditForm.get("delegation")?.value?.libele||"",agence:this.demandeCreditForm.get("agence")?.value?.libele||"",point_vente:this.demandeCreditForm.get("pointVente")?.value?.libele||""}}prepareSummary(){this.saveInfoBaseToResume(),this.saveBilanEntrepriseToResume(),this.saveBilanPersonnelToResume(),this.saveResultatActuelToResume(),this.saveResultatPrevisionnelToResume(),this.saveChargesActuellesToResume(),this.saveChargesPrevisionellesToResume(),this.saveDemandeCreditToResume()}finaliserDemande(){if(!this.userId){this.messageService.add({severity:"error",summary:"Erreur",detail:"ID utilisateur non disponible",life:3e3});return}this.loading.set(!0);let i=new Date().getFullYear(),e=new Date(i-1,0,1),o=new Date(i-1,11,31),u=new Date(i,0,1),p=new Date(i,11,31),F=E=>{let S=E.getFullYear(),P=String(E.getMonth()+1).padStart(2,"0"),vt=String(E.getDate()).padStart(2,"0");return`${S}-${P}-${vt}`};console.log("Dates being generated:",{dateDebutActuel:F(e),dateFinActuel:F(o),dateDebutPrevisionnel:F(u),dateFinPrevisionnel:F(p),userId:this.userId,montantDemande:this.demandeCreditForm.get("montantDemande")?.value});let c={nomPromoteur:this.infoBaseForm.get("nomPromoteur")?.value||"Non sp\xE9cifi\xE9",prenomPromoteur:this.infoBaseForm.get("prenomPromoteur")?.value||"Non sp\xE9cifi\xE9",dateNaissancePromoteur:this.formatDate(this.infoBaseForm.get("dateNaissance")?.value)||F(new Date(1980,0,1)),numeroIdentitePromoteur:this.infoBaseForm.get("numeroIdentite")?.value||"",adressePromoteur:this.infoBaseForm.get("adressePromoteur")?.value||"",telephonePromoteur:this.infoBaseForm.get("telephonePromoteur")?.value||"",emailPromoteur:this.infoBaseForm.get("emailPromoteur")?.value||"",nomEntreprise:this.infoBaseForm.get("nomEntreprise")?.value||"Non sp\xE9cifi\xE9",formeJuridique:this.getFormeJuridiqueValue()||"EI",secteurActivite:this.getSecteurActiviteValue()||"Commerce",dateCreationEntreprise:this.formatDate(this.infoBaseForm.get("dateCreation")?.value)||F(new Date(i-2,0,1)),numeroRegistre:this.infoBaseForm.get("numeroRegistre")?.value||"",adresseEntreprise:this.infoBaseForm.get("adresseEntreprise")?.value||"",telephoneEntreprise:this.infoBaseForm.get("telephoneEntreprise")?.value||"",emailEntreprise:this.infoBaseForm.get("emailEntreprise")?.value||"",liquidites:this.bilanEntrepriseForm.get("liquidites")?.value||0,creancesClients:this.bilanEntrepriseForm.get("creancesClients")?.value||0,valeurStocks:this.bilanEntrepriseForm.get("valeurStocks")?.value||0,valeurEquipements:this.bilanEntrepriseForm.get("valeurEquipements")?.value||0,dettesFournisseurs:this.bilanEntrepriseForm.get("dettesFournisseurs")?.value||0,emprunts:this.bilanEntrepriseForm.get("emprunts")?.value||0,capitalPropre:this.bilanEntrepriseForm.get("capitalPropre")?.value||0,epargnes:this.bilanPersonnelForm.get("epargnes")?.value||0,valeurBiensDurables:this.bilanPersonnelForm.get("valeurBiensDurables")?.value||0,libeleGarantie:this.bilanPersonnelForm.get("libeleGarantie")?.value||"",montantGarantie:this.bilanPersonnelForm.get("montantGarantie")?.value||0,dateDebutPeriodeActuel:F(e),dateFinPeriodeActuel:F(o),dateDebutPeriodePrevisionnel:F(u),dateFinPeriodePrevisionnel:F(p),chiffreAffairesActuel:this.resultatActuelForm.get("chiffreAffaires")?.value||0,autresRevenusActuel:this.resultatActuelForm.get("autresRevenus")?.value||0,coutMarchandisesActuel:this.resultatActuelForm.get("coutMarchandises")?.value||0,coutTransportProductionActuel:this.chargesActuellesForm.get("coutTransportProduction")?.value||0,fraisTransportPersonnelActuel:this.chargesActuellesForm.get("fraisTransportPersonnel")?.value||0,fraisManutentionActuel:this.chargesActuellesForm.get("fraisManutention")?.value||0,montantAideExterneActuel:this.chargesActuellesForm.get("montantAideExterne")?.value||0,fraisHebergementRestaurationActuel:this.chargesActuellesForm.get("fraisHebergementRestauration")?.value||0,impotsActuel:this.chargesActuellesForm.get("impots")?.value||0,loyersActuel:this.chargesActuellesForm.get("loyers")?.value||0,chiffreAffairesPrevisionnel:this.resultatPrevisionnelForm.get("chiffreAffaires")?.value||0,autresRevenusPrevisionnel:this.resultatPrevisionnelForm.get("autresRevenus")?.value||0,coutMarchandisesPrevisionnel:this.resultatPrevisionnelForm.get("coutMarchandises")?.value||0,coutTransportProductionPrevisionnel:this.chargesPrevisionellesForm.get("coutTransportProduction")?.value||0,fraisTransportPersonnelPrevisionnel:this.chargesPrevisionellesForm.get("fraisTransportPersonnel")?.value||0,fraisManutentionPrevisionnel:this.chargesPrevisionellesForm.get("fraisManutention")?.value||0,montantAideExternePrevisionnel:this.chargesPrevisionellesForm.get("montantAideExterne")?.value||0,fraisHebergementRestaurationPrevisionnel:this.chargesPrevisionellesForm.get("fraisHebergementRestauration")?.value||0,impotsPrevisionnel:this.chargesPrevisionellesForm.get("impots")?.value||0,loyersPrevisionnel:this.chargesPrevisionellesForm.get("loyers")?.value||0,montantDemande:this.demandeCreditForm.get("montantDemande")?.value||1e6,dureeMois:this.demandeCreditForm.get("dureeMois")?.value||12,objetFinancement:this.demandeCreditForm.get("objetFinancement")?.value||"Financement activit\xE9",personnecautions:this.personnecautions||[],delegationId:this.demandeCreditForm.get("delegation")?.value?.id?Number(this.demandeCreditForm.get("delegation")?.value?.id):void 0,agenceId:this.demandeCreditForm.get("agence")?.value?.id?Number(this.demandeCreditForm.get("agence")?.value?.id):void 0,pointVenteId:this.demandeCreditForm.get("pointVente")?.value?.id?Number(this.demandeCreditForm.get("pointVente")?.value?.id):void 0,userId:Number(this.userId)};if(console.log("Final demande object:",c),!c.dateDebutPeriodeActuel||!c.dateFinPeriodeActuel||!c.dateDebutPeriodePrevisionnel||!c.dateFinPeriodePrevisionnel){this.messageService.add({severity:"error",summary:"Erreur",detail:"Les dates de p\xE9riode sont requises",life:3e3}),this.loading.set(!1);return}this.analyseCreditService.submitCompleteDemande$(c).pipe(q(this.destroyRef)).subscribe({next:E=>{this.loading.set(!1),E?(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:"Votre demande de cr\xE9dit a \xE9t\xE9 soumise avec succ\xE8s!"}),setTimeout(()=>{this.router.navigate(["/dashboards"])},2e3)):this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la soumission de la demande compl\xE8te."})},error:E=>{this.loading.set(!1),this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la soumission de la demande compl\xE8te."}),console.error("Erreur lors de la soumission de la demande compl\xE8te:",E)}})}calculerRevenusTotauxActuel(){let i=this.resultatActuelForm.get("chiffreAffaires")?.value||0,e=this.resultatActuelForm.get("autresRevenus")?.value||0;return i+e}calculerRevenusTotauxPrevisionnel(){let i=this.resultatPrevisionnelForm.get("chiffreAffaires")?.value||0,e=this.resultatPrevisionnelForm.get("autresRevenus")?.value||0;return i+e}calculerRatioDependanceActuel(){let i=this.calculerRevenusTotauxActuel(),e=this.resultatActuelForm.get("autresRevenus")?.value||0;return i>0?e/i:0}calculerRatioDependancePrevisionnel(){let i=this.calculerRevenusTotauxPrevisionnel(),e=this.resultatPrevisionnelForm.get("autresRevenus")?.value||0;return i>0?e/i:0}calculerMargeButeActuelle(){let i=this.calculerRevenusTotauxActuel(),e=this.resultatActuelForm.get("coutMarchandises")?.value||0;return i>0?(i-e)/i:0}calculerMargeButePrevisionnelle(){let i=this.calculerRevenusTotauxPrevisionnel(),e=this.resultatPrevisionnelForm.get("coutMarchandises")?.value||0;return i>0?(i-e)/i:0}calculerTotalActif(){let i=this.bilanEntrepriseForm.get("liquidites")?.value||0,e=this.bilanEntrepriseForm.get("creancesClients")?.value||0,o=this.bilanEntrepriseForm.get("valeurStocks")?.value||0,u=this.bilanEntrepriseForm.get("valeurEquipements")?.value||0;return i+e+o+u}calculerTotalPassif(){let i=this.bilanEntrepriseForm.get("dettesFournisseurs")?.value||0,e=this.bilanEntrepriseForm.get("emprunts")?.value||0,o=this.bilanEntrepriseForm.get("capitalPropre")?.value||0;return i+e+o}calculerRatioLiquidite(){let i=this.bilanEntrepriseForm.get("liquidites")?.value||0,e=this.bilanEntrepriseForm.get("dettesFournisseurs")?.value||0,o=this.bilanEntrepriseForm.get("emprunts")?.value||0,u=e+o;return u>0?i/u:0}getFormeJuridiqueValue(){let i=this.infoBaseForm.get("formeJuridique")?.value;return i?typeof i=="object"&&i.value?i.value:i:""}getSecteurActiviteValue(){let i=this.infoBaseForm.get("secteurActivite")?.value;return i?typeof i=="object"&&i.value?i.value:i:""}calculerMensualite(){let i=this.demandeCreditForm.get("montantDemande")?.value||0,e=this.demandeCreditForm.get("dureeMois")?.value||1;return i/e}formatDateForDisplay(i){if(!i)return"";let e;if(typeof i=="string"){if(e=new Date(i),isNaN(e.getTime()))return i}else if(i instanceof Date)e=i;else return"";return e.toLocaleDateString("fr-FR")}formatDate(i){if(!i){console.warn("formatDate called with null/undefined date, using today as fallback");let c=new Date,E=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),P=String(c.getDate()).padStart(2,"0");return`${E}-${S}-${P}`}let e;if(typeof i=="string"){if(i.trim()===""){console.warn("formatDate called with empty string, using today as fallback");let c=new Date,E=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),P=String(c.getDate()).padStart(2,"0");return`${E}-${S}-${P}`}if(e=new Date(i),isNaN(e.getTime())){console.error("Invalid date string:",i,"using today as fallback");let c=new Date,E=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),P=String(c.getDate()).padStart(2,"0");return`${E}-${S}-${P}`}}else if(i instanceof Date){if(e=i,isNaN(e.getTime())){console.error("Invalid Date object:",i,"using today as fallback");let c=new Date,E=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),P=String(c.getDate()).padStart(2,"0");return`${E}-${S}-${P}`}}else{console.error("Unexpected date type:",typeof i,i,"using today as fallback");let c=new Date,E=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),P=String(c.getDate()).padStart(2,"0");return`${E}-${S}-${P}`}let o=e.getFullYear(),u=String(e.getMonth()+1).padStart(2,"0"),p=String(e.getDate()).padStart(2,"0");return`${o}-${u}-${p}`}validateDates(){let i=new Date().getFullYear(),e={dateDebutActuel:this.formatDate(new Date(i-1,0,1)),dateFinActuel:this.formatDate(new Date(i-1,11,31)),dateDebutPrevisionnel:this.formatDate(new Date(i,0,1)),dateFinPrevisionnel:this.formatDate(new Date(i,11,31))};console.log("Date validation:",e);for(let[o,u]of Object.entries(e))if(!u||u===""||!u.match(/^\d{4}-\d{2}-\d{2}$/))return console.error(`Invalid date for ${o}: ${u}`),this.messageService.add({severity:"error",summary:"Erreur",detail:`Date invalide: ${o}`,life:3e3}),!1;return!0}calculerTotalChargesActuelles(){let i=this.chargesActuellesForm.get("coutTransportProduction")?.value||0,e=this.chargesActuellesForm.get("fraisTransportPersonnel")?.value||0,o=this.chargesActuellesForm.get("fraisManutention")?.value||0,u=this.chargesActuellesForm.get("montantAideExterne")?.value||0,p=this.chargesActuellesForm.get("fraisHebergementRestauration")?.value||0,F=this.chargesActuellesForm.get("impots")?.value||0,c=this.chargesActuellesForm.get("loyers")?.value||0;return i+e+o+u+p+F+c}calculerTotalChargesPrevisionnelles(){let i=this.chargesPrevisionellesForm.get("coutTransportProduction")?.value||0,e=this.chargesPrevisionellesForm.get("fraisTransportPersonnel")?.value||0,o=this.chargesPrevisionellesForm.get("fraisManutention")?.value||0,u=this.chargesPrevisionellesForm.get("montantAideExterne")?.value||0,p=this.chargesPrevisionellesForm.get("fraisHebergementRestauration")?.value||0,F=this.chargesPrevisionellesForm.get("impots")?.value||0,c=this.chargesPrevisionellesForm.get("loyers")?.value||0;return i+e+o+u+p+F+c}calculerRatioCreditCA(){let i=this.demandeCreditForm.get("montantDemande")?.value||0,e=this.resultatPrevisionnelForm.get("chiffreAffaires")?.value||0;return e>0?i/e:0}getRatioCreditCASeverity(){let i=this.calculerRatioCreditCA();return i<=.5?"success":i<=1?"info":i<=1.5?"warn":"danger"}getMarginSeverity(i){return i>=.4?"success":i>=.25?"info":i>=.15?"warn":"danger"}getLiquiditySeverity(i){return i>2?"success":i>1.2?"info":i>.8?"warn":"danger"}selectionnerDureeMois(i){this.demandeCreditForm.patchValue({dureeMois:i})}getDureeEnAnnees(){let i=this.demandeCreditForm.get("dureeMois")?.value||0;if(i<12)return`${i} mois`;let e=Math.floor(i/12),o=i%12;return o===0?e===1?"1 an":`${e} ans`:`${e} an${e>1?"s":""} et ${o} mois`}getDureeSeverity(){let i=this.demandeCreditForm.get("dureeMois")?.value||0;return i<=12?"success":i<=36?"info":i<=60?"warn":"danger"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-step-credit"]],features:[Z([z])],decls:19,vars:15,consts:[[1,"card"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-bold","mb-6"],["styleClass","mb-5",3,"model","activeIndex","readonly"],[1,"p-fluid"],[4,"ngIf"],[1,"flex","justify-between","mt-4"],["pButton","","pRipple","","type","button","label","Pr\xE9c\xE9dent",1,"p-button-outlined",3,"click","disabled"],["pButton","","pRipple","","type","button","label","Suivant",1,"p-button-outlined",3,"click","disabled"],["header","Informations du promoteur et de l'entreprise",1,"shadow-3"],[1,"p-fluid",3,"formGroup"],[1,"grid","gap-3"],[1,"col-12"],[1,"text-xl","font-bold","border-bottom-1","surface-border","pb-2","mb-3"],[1,"col-12","md:col-6","lg:col-4"],[1,"field"],["for","nomPromoteur",1,"font-medium","block","mb-2"],["id","nomPromoteur","type","text","pInputText","","formControlName","nomPromoteur",1,"w-full"],["class","p-error block mt-1",4,"ngIf"],["for","prenomPromoteur",1,"font-medium","block","mb-2"],["id","prenomPromoteur","type","text","pInputText","","formControlName","prenomPromoteur",1,"w-full"],["for","dateNaissance",1,"font-medium","block","mb-2"],["id","dateNaissance","formControlName","dateNaissance","dateFormat","dd/mm/yy",1,"w-full",3,"showIcon"],["for","numeroIdentite",1,"font-medium","block","mb-2"],["id","numeroIdentite","type","text","pInputText","","formControlName","numeroIdentite",1,"w-full"],["for","telephonePromoteur",1,"font-medium","block","mb-2"],["id","telephonePromoteur","type","text","pInputText","","formControlName","telephonePromoteur",1,"w-full"],["for","emailPromoteur",1,"font-medium","block","mb-2"],["id","emailPromoteur","type","email","pInputText","","formControlName","emailPromoteur",1,"w-full"],["for","adressePromoteur",1,"font-medium","block","mb-2"],["id","adressePromoteur","pTextarea","","formControlName","adressePromoteur","rows","2","fluid","",1,"w-full",3,"autoResize"],[1,"col-12","mt-5"],[1,"col-12","md:col-8"],["for","nomEntreprise",1,"font-medium","block","mb-2"],["id","nomEntreprise","type","text","pInputText","","formControlName","nomEntreprise",1,"w-full"],["for","dateCreation",1,"font-medium","block","mb-2"],["id","dateCreation","formControlName","dateCreation","dateFormat","dd/mm/yy",1,"w-full",3,"showIcon"],["for","formeJuridique",1,"font-medium","block","mb-2"],["id","formeJuridique","formControlName","formeJuridique","optionLabel","label",1,"w-full",3,"options"],["for","secteurActivite",1,"font-medium","block","mb-2"],["id","secteurActivite","formControlName","secteurActivite","optionLabel","label",1,"w-full",3,"options"],["for","numeroRegistre",1,"font-medium","block","mb-2"],["id","numeroRegistre","type","text","pInputText","","formControlName","numeroRegistre",1,"w-full"],[1,"col-12","md:col-6"],["for","telephoneEntreprise",1,"font-medium","block","mb-2"],["id","telephoneEntreprise","type","text","pInputText","","formControlName","telephoneEntreprise",1,"w-full"],["for","emailEntreprise",1,"font-medium","block","mb-2"],["id","emailEntreprise","type","email","pInputText","","formControlName","emailEntreprise",1,"w-full"],["for","adresseEntreprise",1,"font-medium","block","mb-2"],["id","adresseEntreprise","pTextarea","","formControlName","adresseEntreprise","rows","2","fluid","",1,"w-full",3,"autoResize"],[1,"p-error","block","mt-1"],["header","Bilan de l'entreprise"],[1,"text-xl","font-bold","border-bottom-1","surface-border","pb-2","mb-4"],[1,"col-12","md:col-6","lg:col-3"],["for","liquidites",1,"block","font-medium","mb-2"],[1,"block","text-color-secondary"],["id","liquidites","formControlName","liquidites","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","creancesClients",1,"block","font-medium","mb-2"],["id","creancesClients","formControlName","creancesClients","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","valeurStocks",1,"block","font-medium","mb-2"],["id","valeurStocks","formControlName","valeurStocks","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","valeurEquipements",1,"block","font-medium","mb-2"],["id","valeurEquipements","formControlName","valeurEquipements","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","dettesFournisseurs",1,"block","font-medium","mb-2"],["id","dettesFournisseurs","formControlName","dettesFournisseurs","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","emprunts",1,"block","font-medium","mb-2"],["id","emprunts","formControlName","emprunts","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","capitalPropre",1,"block","font-medium","mb-2"],["id","capitalPropre","formControlName","capitalPropre","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["header","Bilan personnel du promoteur"],[1,"text-lg","font-bold","border-bottom-1","surface-border","pb-2","mb-3"],["for","epargnes",1,"block","font-medium","mb-2"],["id","epargnes","formControlName","epargnes","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","valeurBiensDurables",1,"block","font-medium","mb-2"],["id","valeurBiensDurables","formControlName","valeurBiensDurables","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","libeleGarantie",1,"block","font-medium","mb-2"],["id","libeleGarantie","type","text","pInputText","","formControlName","libeleGarantie","placeholder","Ex: Hypoth\xE8que sur terrain, Nantissement v\xE9hicule...",1,"w-full"],["for","montantGarantie",1,"block","font-medium","mb-2"],["id","montantGarantie","formControlName","montantGarantie","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["header","R\xE9sultats actuels (ann\xE9e pr\xE9c\xE9dente)"],[1,"text-lg","font-bold","mb-3","border-bottom-1","surface-border","pb-2"],["for","chiffreAffaires",1,"block","font-medium","mb-2"],["id","chiffreAffaires","formControlName","chiffreAffaires","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","autresRevenusActuel",1,"block","font-medium","mb-2"],["id","autresRevenusActuel","formControlName","autresRevenus","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","coutMarchandises",1,"block","font-medium","mb-2"],["id","coutMarchandises","formControlName","coutMarchandises","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],[1,"pi","pi-exclamation-circle","mr-1"],["header","R\xE9sultats pr\xE9visionnels (apr\xE8s financement)"],["for","chiffreAffairesPrev",1,"block","font-medium","mb-2"],["id","chiffreAffairesPrev","formControlName","chiffreAffaires","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","autresRevenusPrev",1,"block","font-medium","mb-2"],["id","autresRevenusPrev","formControlName","autresRevenus","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","coutMarchandisesPrev",1,"block","font-medium","mb-2"],["id","coutMarchandisesPrev","formControlName","coutMarchandises","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["header","Charges d'exploitation actuelles (ann\xE9e pr\xE9c\xE9dente)"],["for","coutTransportProduction",1,"block","font-medium","mb-2"],["id","coutTransportProduction","formControlName","coutTransportProduction","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisTransportPersonnel",1,"block","font-medium","mb-2"],["id","fraisTransportPersonnel","formControlName","fraisTransportPersonnel","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisManutention",1,"block","font-medium","mb-2"],["id","fraisManutention","formControlName","fraisManutention","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","montantAideExterne",1,"block","font-medium","mb-2"],["id","montantAideExterne","formControlName","montantAideExterne","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisHebergementRestauration",1,"block","font-medium","mb-2"],["id","fraisHebergementRestauration","formControlName","fraisHebergementRestauration","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","impots",1,"block","font-medium","mb-2"],["id","impots","formControlName","impots","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","loyers",1,"block","font-medium","mb-2"],["id","loyers","formControlName","loyers","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["header","Charges d'exploitation pr\xE9visionnelles (apr\xE8s financement)"],["for","coutTransportProductionPrev",1,"block","font-medium","mb-2"],["id","coutTransportProductionPrev","formControlName","coutTransportProduction","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisTransportPersonnelPrev",1,"block","font-medium","mb-2"],["id","fraisTransportPersonnelPrev","formControlName","fraisTransportPersonnel","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisManutentionPrev",1,"block","font-medium","mb-2"],["id","fraisManutentionPrev","formControlName","fraisManutention","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","montantAideExternePrev",1,"block","font-medium","mb-2"],["id","montantAideExternePrev","formControlName","montantAideExterne","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","fraisHebergementRestaurationPrev",1,"block","font-medium","mb-2"],["id","fraisHebergementRestaurationPrev","formControlName","fraisHebergementRestauration","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","impotsPrev",1,"block","font-medium","mb-2"],["id","impotsPrev","formControlName","impots","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["for","loyersPrev",1,"block","font-medium","mb-2"],["id","loyersPrev","formControlName","loyers","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],["header","Informations sur la demande de cr\xE9dit"],["for","montantDemande",1,"block","font-medium","mb-2"],["id","montantDemande","formControlName","montantDemande","mode","currency","currency","GNF","locale","fr-FR",1,"w-full"],[1,"block","font-medium","mb-3"],[1,"pi","pi-calendar","mr-2","text-primary"],[1,"duration-grid-container","p-3","surface-ground","border-round","mb-3"],[1,"grid"],[1,"col-12","mb-2"],[1,"text-sm","text-color-secondary"],[1,"pi","pi-info-circle","mr-1"],[1,"flex","flex-wrap","gap-2","justify-content-start"],[1,"duration-card","cursor-pointer","p-3","border-round-lg","text-center","transition-all","duration-200",3,"ngClass"],[1,"col-12","mt-2"],[1,"col-12","mt-3"],[1,"flex","align-items-center","gap-3","p-3","surface-card","border-round","border-1","surface-border"],[1,"text-sm","font-medium","text-color-secondary","white-space-nowrap"],[1,"pi","pi-pencil","mr-1"],["formControlName","dureeMois","buttonLayout","horizontal","spinnerMode","horizontal","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus","suffix"," mois","inputStyleClass","text-center font-bold",3,"showButtons","min","max"],[1,"ml-auto",3,"value","severity"],[1,"p-4","bg-gradient-to-r","from-blue-50","to-indigo-50","border-round-lg","border-1","border-blue-200"],[1,"col-12","md:col-4"],[1,"text-center"],[1,"text-color-secondary","text-sm","mb-1"],[1,"pi","pi-money-bill","mr-1"],[1,"text-xl","font-bold","text-900"],[1,"pi","pi-calendar","mr-1"],[1,"text-xl","font-bold","text-primary"],[1,"pi","pi-wallet","mr-1"],[1,"text-xl","font-bold","text-green-600"],[1,"col-12","mt-4"],["for","delegation",1,"block","font-medium","mb-2"],["id","delegation","formControlName","delegation","optionLabel","libele","placeholder","S\xE9lectionner...",1,"w-full",3,"onChange","options"],["for","agence",1,"block","font-medium","mb-2"],["id","agence","formControlName","agence","optionLabel","libele","placeholder","S\xE9lectionner d'abord une d\xE9l\xE9gation...",1,"w-full",3,"onChange","options","disabled"],["for","pointVente",1,"block","font-medium","mb-2"],["id","pointVente","formControlName","pointVente","optionLabel","libele","placeholder","S\xE9lectionner d'abord une agence...",1,"w-full",3,"options","disabled"],["for","objetFinancement",1,"block","font-medium","mb-2"],["id","objetFinancement","pTextarea","","formControlName","objetFinancement","rows","4",1,"w-full",3,"autoResize"],[1,"duration-card","cursor-pointer","p-3","border-round-lg","text-center","transition-all","duration-200",3,"click","ngClass"],[1,"text-2xl","font-bold"],[1,"text-xs","opacity-80"],[1,"text-xs","mt-1",3,"ngClass"],["header","Personnes caution"],[1,"text-color-secondary","mb-4"],["for","cautionNom",1,"block","font-medium","mb-2"],["id","cautionNom","type","text","pInputText","","formControlName","nom",1,"w-full"],["for","cautionPrenom",1,"block","font-medium","mb-2"],["id","cautionPrenom","type","text","pInputText","","formControlName","prenom",1,"w-full"],["for","cautionTelephone",1,"block","font-medium","mb-2"],["id","cautionTelephone","type","text","pInputText","","formControlName","telephone",1,"w-full"],["for","cautionAge",1,"block","font-medium","mb-2"],["id","cautionAge","formControlName","age","suffix"," ans",1,"w-full",3,"showButtons","min","max"],["for","cautionActivite",1,"block","font-medium","mb-2"],["id","cautionActivite","type","text","pInputText","","formControlName","activite",1,"w-full"],["for","cautionProfession",1,"block","font-medium","mb-2"],["id","cautionProfession","type","text","pInputText","","formControlName","profession",1,"w-full"],["pButton","","pRipple","","type","button","label","Ajouter cette personne caution","icon","pi pi-plus",1,"p-button-success",3,"click"],["class","col-12",4,"ngIf"],["class","col-12",4,"ngFor","ngForOf"],["styleClass","mb-3"],["pTemplate","header"],["class","col-12 md:col-6 lg:col-4",4,"ngIf"],[1,"flex","align-items-center","justify-content-between","p-3"],[1,"font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-trash","pTooltip","Supprimer",1,"p-button-rounded","p-button-danger","p-button-text",3,"click"],[1,"p-3","bg-yellow-50","border-round","border-1","border-yellow-200","text-center"],[1,"pi","pi-info-circle","mr-2"],["header","R\xE9sum\xE9 de votre demande de cr\xE9dit"],[1,"col-12","md:col-6","mb-4"],["header","Informations du promoteur",3,"toggleable"],["styleClass","p-datatable-sm",3,"value","tableStyle"],["pTemplate","body"],["header","Informations de l'entreprise",3,"toggleable"],[1,"col-12","mb-4"],["header","Bilan financier",3,"toggleable"],[1,"text-lg","font-medium"],["header","Performance \xE9conomique",3,"toggleable"],["header","Charges d'exploitation",3,"toggleable"],["header","Demande de cr\xE9dit",3,"toggleable"],[1,"text-lg","font-medium","mb-2"],["styleClass","h-full"],[1,"text-justify"],["class","col-12 mb-4",4,"ngIf"],[1,"col-12","mt-4","flex","justify-content-center"],["pButton","","pRipple","","type","button","label","Soumettre la demande compl\xE8te","icon","pi pi-check-circle",1,"p-button-success","p-button-lg",3,"click","loading"],[1,"font-medium"],[3,"ngClass"],[3,"header","toggleable"],["class","col-12 md:col-6",4,"ngFor","ngForOf"],[3,"header"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h1",1),a(2,"Analyse de Demande de Cr\xE9dit"),t(),d(3,"p-toast")(4,"p-steps",2),r(5,"div",3),h(6,Ut,90,12,"div",4)(7,Kt,49,1,"div",4)(8,Qt,30,1,"div",4)(9,Zt,26,3,"div",4)(10,nn,26,3,"div",4)(11,rn,42,1,"div",4)(12,an,42,1,"div",4)(13,dn,90,39,"div",4)(14,Fn,45,6,"div",4)(15,wn,97,448,"div",4),r(16,"div",5)(17,"button",6),D("click",function(){return o.prevStep()}),t(),r(18,"button",7),D("click",function(){return o.nextStep()}),t()()()()),e&2&&(l(4),m("model",o.items())("activeIndex",o.activeIndex())("readonly",!1),l(2),m("ngIf",o.activeIndex()===0),l(),m("ngIf",o.activeIndex()===1),l(),m("ngIf",o.activeIndex()===2),l(),m("ngIf",o.activeIndex()===3),l(),m("ngIf",o.activeIndex()===4),l(),m("ngIf",o.activeIndex()===5),l(),m("ngIf",o.activeIndex()===6),l(),m("ngIf",o.activeIndex()===7),l(),m("ngIf",o.activeIndex()===8),l(),m("ngIf",o.activeIndex()===9),l(2),m("disabled",o.activeIndex()===0),l(),m("disabled",o.activeIndex()===9))},dependencies:[ae,te,ne,ie,re,$e,qe,Ae,se,ge,ce,ue,me,de,be,pe,ve,Ee,xe,_e,he,Te,Ie,ke,Be,De,Pe,He,ze,Ge,Ve,Se,ye,Me,we,Fe,Je,Oe,Re,Ne,Le,je],styles:[".duration-grid-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--surface-ground) 0%,var(--surface-100) 100%)}.duration-grid-container[_ngcontent-%COMP%]   .duration-card[_ngcontent-%COMP%]{min-width:85px;transition:all .2s ease-in-out}.duration-grid-container[_ngcontent-%COMP%]   .duration-card[_ngcontent-%COMP%]:hover:not(.bg-primary){transform:translateY(-2px);border-color:var(--primary-color)!important;box-shadow:0 4px 12px rgba(var(--primary-color-rgb),.15)}.duration-grid-container[_ngcontent-%COMP%]   .duration-card.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color) 0%,var(--primary-600) 100%);transform:scale(1.05)}.transition-all[_ngcontent-%COMP%]{transition-property:all}.duration-200[_ngcontent-%COMP%]{transition-duration:.2s}.bg-gradient-to-r[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--blue-50),var(--indigo-50))}@media (max-width: 576px){.duration-grid-container[_ngcontent-%COMP%]   .duration-card[_ngcontent-%COMP%]{min-width:70px;padding:.5rem!important}.duration-grid-container[_ngcontent-%COMP%]   .duration-card[_ngcontent-%COMP%]   .text-2xl[_ngcontent-%COMP%]{font-size:1.25rem}}  .p-inputnumber-horizontal .p-inputnumber-input{text-align:center;font-weight:700}  .p-inputnumber-horizontal .p-inputnumber-button{background:var(--primary-color);border-color:var(--primary-color)}  .p-inputnumber-horizontal .p-inputnumber-button:hover{background:var(--primary-600);border-color:var(--primary-600)}"]})};export{mt as StepCreditComponent};
