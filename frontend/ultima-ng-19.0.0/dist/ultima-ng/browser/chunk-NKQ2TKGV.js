import {
  Popover,
  PopoverModule
} from "./chunk-Q5J6E52W.js";
import {
  ChartModule,
  UIChart
} from "./chunk-D6T4WP2M.js";
import {
  SocietariatByAgenceComponent,
  SocietariatByPsComponent
} from "./chunk-J7AGU57C.js";
import {
  Accordion,
  AccordionContent,
  AccordionHeader,
  AccordionModule,
  AccordionPanel
} from "./chunk-GWCBG6OL.js";
import {
  RapprochementCaisseComponent
} from "./chunk-7LXGAKRR.js";
import {
  DigitalVerificationComponent
} from "./chunk-ZW7VTMV7.js";
import {
  PanelModule
} from "./chunk-WJXIL2JJ.js";
import {
  TabPanel,
  TabView,
  TabViewModule
} from "./chunk-I3MJ27E7.js";
import {
  DemandeAvanceSalaireComponent
} from "./chunk-SMND6ES2.js";
import "./chunk-3BFG6HRY.js";
import {
  JavaDatePipe
} from "./chunk-O2RK2BKY.js";
import "./chunk-M4IO5JIC.js";
import {
  MessagesModule
} from "./chunk-MWCM7PKA.js";
import {
  ConfirmDialog,
  ConfirmDialogModule
} from "./chunk-JQ4E7TJM.js";
import {
  Textarea,
  TextareaModule
} from "./chunk-RW4OSSQT.js";
import {
  Message,
  MessageModule
} from "./chunk-CSEZIGTY.js";
import {
  Dialog,
  DialogModule
} from "./chunk-LPU4RT7P.js";
import "./chunk-WWXP2HWK.js";
import "./chunk-CXW3XKZ2.js";
import {
  Toast,
  ToastModule
} from "./chunk-6SRYYUT2.js";
import {
  AdminComponent
} from "./chunk-ZDAPBKCA.js";
import "./chunk-5EDISLF5.js";
import "./chunk-MCGUCMXD.js";
import "./chunk-WQ2EPPBK.js";
import "./chunk-T4LUJXIT.js";
import {
  Chip,
  ChipModule
} from "./chunk-SN3HAAMO.js";
import "./chunk-ZUPKH4BQ.js";
import {
  Divider,
  DividerModule
} from "./chunk-VDET62CU.js";
import {
  CalendarModule
} from "./chunk-NLXNXYLN.js";
import {
  SortIcon,
  SortableColumn,
  Table,
  TableModule
} from "./chunk-REDVHUQC.js";
import "./chunk-YZRRSC3U.js";
import {
  DatePicker,
  DatePickerModule
} from "./chunk-6K6X5UBT.js";
import "./chunk-7HJ4XJ7U.js";
import "./chunk-UQSIOFSP.js";
import "./chunk-OCW7T434.js";
import {
  Checkbox,
  CheckboxModule
} from "./chunk-4JIPYACT.js";
import "./chunk-6GA37Q7Z.js";
import {
  Tag,
  TagModule
} from "./chunk-MYUKI7DG.js";
import "./chunk-544F7IXR.js";
import "./chunk-YBM6FZLP.js";
import "./chunk-U4P2VV4G.js";
import "./chunk-CPYA4VSS.js";
import {
  Card,
  CardModule
} from "./chunk-H46GQ57A.js";
import "./chunk-JGOABXTK.js";
import "./chunk-HY2A3TN6.js";
import {
  SelectButton,
  SelectButtonModule
} from "./chunk-YEN5RMZS.js";
import "./chunk-XS7IVZ5T.js";
import "./chunk-CUABQE42.js";
import {
  Dropdown,
  DropdownModule
} from "./chunk-ZCIQCP6V.js";
import "./chunk-V6CKOH3G.js";
import "./chunk-DBPX6ILC.js";
import {
  IconField,
  IconFieldModule,
  InputIcon,
  InputIconModule
} from "./chunk-WIQZFAVH.js";
import "./chunk-CCBQFN2J.js";
import {
  ProgressSpinner,
  ProgressSpinnerModule
} from "./chunk-Y2J5OGKB.js";
import {
  Router,
  RouterLink
} from "./chunk-BTKK64MU.js";
import "./chunk-36C7KO53.js";
import {
  takeUntilDestroyed
} from "./chunk-WRLBQDQK.js";
import "./chunk-KHEKFKWA.js";
import {
  InputText,
  InputTextModule
} from "./chunk-FZELBHWZ.js";
import {
  Tooltip,
  TooltipModule
} from "./chunk-4IUQ6KTI.js";
import "./chunk-IVSL2HKS.js";
import "./chunk-E352KRZV.js";
import "./chunk-HHD4PK4J.js";
import {
  Badge,
  BadgeModule,
  Button,
  ButtonDirective,
  ButtonModule
} from "./chunk-PJSNAOPI.js";
import {
  Ripple,
  RippleModule
} from "./chunk-AP3OAIHW.js";
import {
  ConfirmationService,
  MessageService,
  PrimeTemplate
} from "./chunk-NQNBRQ7H.js";
import {
  DefaultValueAccessor,
  FormsModule,
  NgControlStatus,
  NgModel,
  ReactiveFormsModule
} from "./chunk-3HTR5OU7.js";
import {
  UserService
} from "./chunk-SQ5BRWVW.js";
import "./chunk-ZRELZ6R7.js";
import "./chunk-BMYIFZHZ.js";
import {
  animate,
  state,
  style,
  transition,
  trigger
} from "./chunk-W3K3GK4Z.js";
import {
  CommonModule,
  CurrencyPipe,
  DatePipe,
  NgClass,
  NgForOf,
  NgIf,
  SlicePipe,
  UpperCasePipe
} from "./chunk-SQQPVFHK.js";
import {
  DestroyRef,
  catchError,
  computed,
  forkJoin,
  inject,
  of,
  signal,
  ɵsetClassDebugInfo,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵattribute,
  ɵɵclassMap,
  ɵɵclassProp,
  ɵɵcomponentInstance,
  ɵɵconditional,
  ɵɵdefineComponent,
  ɵɵdefineInjectable,
  ɵɵelement,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵlistener,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind1,
  ɵɵpipeBind2,
  ɵɵpipeBind3,
  ɵɵpipeBind4,
  ɵɵproperty,
  ɵɵpropertyInterpolate1,
  ɵɵpureFunction0,
  ɵɵpureFunction1,
  ɵɵpureFunction2,
  ɵɵreference,
  ɵɵrepeater,
  ɵɵrepeaterCreate,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵstyleMap,
  ɵɵtemplate,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty
} from "./chunk-ZKKMBKIA.js";
import {
  __spreadProps,
  __spreadValues
} from "./chunk-4MWRP73S.js";

// src/app/pages/dashboard/agent-credit/agent-credit.component.ts
var _c0 = () => ["/dashboards/agent-credit/list-selection-ind"];
var _c1 = () => [10, 25, 50];
var _c2 = () => ["nom", "prenom", "numeroMembre", "activite", "telephone"];
function AgentCreditComponent_Conditional_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-message", 13);
    \u0275\u0275text(1, " Nouvelle demande Pour la Selection, Voir pour plus de d\xE9tails. ");
    \u0275\u0275elementStart(2, "a", 16);
    \u0275\u0275text(3, " Voir la liste \u2192 ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance(2);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction0(1, _c0));
  }
}
function AgentCreditComponent_Conditional_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 14)(1, "div", 17);
    \u0275\u0275element(2, "i", 18);
    \u0275\u0275elementStart(3, "p", 19);
    \u0275\u0275text(4, "V\xE9rification de votre statut d'activation...");
    \u0275\u0275elementEnd()()();
  }
}
function AgentCreditComponent_Conditional_20_Conditional_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31)(1, "p", 35);
    \u0275\u0275element(2, "i", 36);
    \u0275\u0275elementStart(3, "strong");
    \u0275\u0275text(4, "Note:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(5, " Votre point de service actuel est ");
    \u0275\u0275elementStart(6, "strong");
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    let tmp_2_0;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate2("", (tmp_2_0 = ctx_r1.state().pointVente) == null ? null : tmp_2_0.libele, " (", (tmp_2_0 = ctx_r1.state().pointVente) == null ? null : tmp_2_0.code, ")");
  }
}
function AgentCreditComponent_Conditional_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 15)(1, "div", 20)(2, "div", 21);
    \u0275\u0275element(3, "i", 22);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 23)(5, "h3", 24);
    \u0275\u0275text(6, " \u{1F6AB} Acc\xE8s Restreint - Agent Non Activ\xE9 ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 25)(8, "p", 26);
    \u0275\u0275text(9, " Vous n'\xEAtes pas activ\xE9 dans ce point de service. ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p", 27);
    \u0275\u0275text(11, " Pour acc\xE9der aux fonctionnalit\xE9s de gestion des cr\xE9dits, votre compte doit \xEAtre activ\xE9 par le Responsable d'Agence (RA) pour ce point de service. ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 28)(13, "h4", 29);
    \u0275\u0275text(14, "\u{1F4CB} Que faire ?");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "ul", 30)(16, "li");
    \u0275\u0275text(17, "Contactez votre Responsable d'Agence (RA)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "li");
    \u0275\u0275text(19, "Demandez l'activation de votre compte pour ce point de service");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "li");
    \u0275\u0275text(21, "Une fois activ\xE9, rafra\xEEchissez cette page");
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(22, AgentCreditComponent_Conditional_20_Conditional_22_Template, 8, 2, "div", 31);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 32)(24, "button", 33);
    \u0275\u0275listener("click", function AgentCreditComponent_Conditional_20_Template_button_click_24_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.refresh());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "button", 34);
    \u0275\u0275listener("click", function AgentCreditComponent_Conditional_20_Template_button_click_25_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.reloadPage());
    });
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(22);
    \u0275\u0275conditional(ctx_r1.state().user ? 22 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r1.state().checkingStatus);
  }
}
function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 44)(1, "p-icon-field", 45);
    \u0275\u0275element(2, "p-inputicon", 46);
    \u0275\u0275elementStart(3, "input", 47);
    \u0275\u0275listener("input", function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_3_Template_input_input_3_listener($event) {
      \u0275\u0275restoreView(_r3);
      \u0275\u0275nextContext();
      const dt_r4 = \u0275\u0275reference(2);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onGlobalFilter(dt_r4, $event));
    });
    \u0275\u0275elementEnd()()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 48);
    \u0275\u0275text(2, " Date ");
    \u0275\u0275element(3, "p-sortIcon", 49);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th", 50);
    \u0275\u0275text(5, " Nom ");
    \u0275\u0275element(6, "p-sortIcon", 51);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 52);
    \u0275\u0275text(8, " N\xB0 Membre ");
    \u0275\u0275element(9, "p-sortIcon", 53);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 54);
    \u0275\u0275text(11, " Montant ");
    \u0275\u0275element(12, "p-sortIcon", 55);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th", 56);
    \u0275\u0275text(14, " Activit\xE9 ");
    \u0275\u0275element(15, "p-sortIcon", 57);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "th", 58);
    \u0275\u0275text(17, " Statut Validation ");
    \u0275\u0275element(18, "p-sortIcon", 59);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "th", 60);
    \u0275\u0275text(20, "Action");
    \u0275\u0275elementEnd()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "td");
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "td");
    \u0275\u0275text(9);
    \u0275\u0275pipe(10, "currency");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "td");
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "td");
    \u0275\u0275element(14, "p-tag", 61);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "td")(16, "button", 62);
    \u0275\u0275listener("click", function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_5_Template_button_click_16_listener() {
      const demande_r6 = \u0275\u0275restoreView(_r5).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.miseEnPlaceCredit(demande_r6.numeroMembre));
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const demande_r6 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(3, 7, demande_r6.createdAt, "dd/MM/yyyy"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", demande_r6.prenom, " ", demande_r6.nom, "");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(demande_r6.numeroMembre);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(10, 10, demande_r6.montant, "GNF "));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r6.activite);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", ctx_r1.getStateValidation(demande_r6.statutDemande, demande_r6.validationState));
  }
}
function AgentCreditComponent_Conditional_21_Conditional_0_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 63);
    \u0275\u0275text(2, " Aucune demande avec statut de validation 'VALIDATION' trouv\xE9e. ");
    \u0275\u0275elementEnd()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 37)(1, "p-table", 39, 0);
    \u0275\u0275template(3, AgentCreditComponent_Conditional_21_Conditional_0_ng_template_3_Template, 4, 0, "ng-template", 40)(4, AgentCreditComponent_Conditional_21_Conditional_0_ng_template_4_Template, 21, 0, "ng-template", 41)(5, AgentCreditComponent_Conditional_21_Conditional_0_ng_template_5_Template, 17, 13, "ng-template", 42)(6, AgentCreditComponent_Conditional_21_Conditional_0_ng_template_6_Template, 3, 0, "ng-template", 43);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r1.state().filteredDemandeAttentes)("paginator", true)("rows", 10)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(6, _c1))("globalFilterFields", \u0275\u0275pureFunction0(7, _c2));
  }
}
function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 44)(1, "p-icon-field", 45);
    \u0275\u0275element(2, "p-inputicon", 46);
    \u0275\u0275elementStart(3, "input", 66);
    \u0275\u0275listener("input", function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_5_Template_input_input_3_listener($event) {
      \u0275\u0275restoreView(_r7);
      \u0275\u0275nextContext();
      const dtCredits_r8 = \u0275\u0275reference(4);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.onGlobalFilter(dtCredits_r8, $event));
    });
    \u0275\u0275elementEnd()()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 67);
    \u0275\u0275text(2, " Date ");
    \u0275\u0275element(3, "p-sortIcon", 68);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th", 69);
    \u0275\u0275text(5, " N\xB0 Membre ");
    \u0275\u0275element(6, "p-sortIcon", 70);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 71);
    \u0275\u0275text(8, " Statut Cr\xE9dit ");
    \u0275\u0275element(9, "p-sortIcon", 72);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 73);
    \u0275\u0275text(11, "Action");
    \u0275\u0275elementEnd()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "td");
    \u0275\u0275element(7, "p-tag", 74);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "td")(9, "button", 75);
    \u0275\u0275listener("click", function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_7_Template_button_click_9_listener() {
      const credit_r10 = \u0275\u0275restoreView(_r9).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.viewCreditDetails(credit_r10.referenceCredit, credit_r10.codeMembre));
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const credit_r10 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(3, 4, credit_r10.createAt, "dd/MM/yyyy"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(credit_r10.codeMembre);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", credit_r10.status)("severity", ctx_r1.getStatusSeverity(credit_r10.status, ""));
  }
}
function AgentCreditComponent_Conditional_21_Conditional_1_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 76);
    \u0275\u0275text(2, "Aucun cr\xE9dit trouv\xE9.");
    \u0275\u0275elementEnd()();
  }
}
function AgentCreditComponent_Conditional_21_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 38)(1, "h3", 64);
    \u0275\u0275text(2, " Liste des Cr\xE9dits Not\xE9s par le Directeur D'agence ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "p-table", 65, 1);
    \u0275\u0275template(5, AgentCreditComponent_Conditional_21_Conditional_1_ng_template_5_Template, 4, 0, "ng-template", 40)(6, AgentCreditComponent_Conditional_21_Conditional_1_ng_template_6_Template, 12, 0, "ng-template", 41)(7, AgentCreditComponent_Conditional_21_Conditional_1_ng_template_7_Template, 10, 7, "ng-template", 42)(8, AgentCreditComponent_Conditional_21_Conditional_1_ng_template_8_Template, 3, 0, "ng-template", 43);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275property("value", ctx_r1.state().creditDtos)("paginator", true)("rows", 10)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(5, _c1));
  }
}
function AgentCreditComponent_Conditional_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, AgentCreditComponent_Conditional_21_Conditional_0_Template, 7, 8, "div", 37)(1, AgentCreditComponent_Conditional_21_Conditional_1_Template, 9, 6, "div", 38);
  }
  if (rf & 2) {
    let tmp_1_0;
    let tmp_2_0;
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275conditional(((tmp_1_0 = ctx_r1.state().demandeAttentes) == null ? null : tmp_1_0.length) > 0 ? 0 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(((tmp_2_0 = ctx_r1.state().creditDtos) == null ? null : tmp_2_0.length) > 0 ? 1 : -1);
  }
}
var AgentCreditComponent = class _AgentCreditComponent {
  // ⭐ SUPPRIMÉ @Input() user - on charge directement
  state = signal({
    user: void 0,
    loading: false,
    message: void 0,
    error: void 0,
    filteredDemandeAttentes: [],
    isAgentActive: void 0,
    checkingStatus: false
  });
  userService = inject(UserService);
  router = inject(Router);
  destroyRef = inject(DestroyRef);
  messageService = inject(MessageService);
  ngOnInit() {
    console.log("\u{1F527} AgentCredit ngOnInit - Loading user...");
    this.loadUserAndCheckStatus();
  }
  /**
   * Charger l'utilisateur connecté et vérifier son statut
   */
  loadUserAndCheckStatus() {
    console.log("\u{1F464} Loading user from API...");
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { checkingStatus: true }));
    this.userService.getInstanceUser$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        console.log("\u{1F4E5} User API response:", response);
        const user = response.data?.user;
        if (!user) {
          console.error("\u274C No user in response");
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            checkingStatus: false,
            error: "Impossible de charger les informations utilisateur"
          }));
          this.messageService.add({
            severity: "error",
            summary: "Erreur",
            detail: "Impossible de charger vos informations",
            life: 5e3
          });
          return;
        }
        console.log("\u2705 User loaded:", {
          userId: user.userId,
          pointventeId: user.pointventeId,
          role: user.role,
          firstName: user.firstName,
          lastName: user.lastName
        });
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { user }));
        if (user.userId && user.pointventeId) {
          this.checkAgentStatus(user);
        } else {
          console.error("\u274C User missing userId or pointventeId");
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            checkingStatus: false,
            isAgentActive: false,
            error: "Point de vente non assign\xE9"
          }));
          this.messageService.add({
            severity: "warn",
            summary: "Attention",
            detail: "Aucun point de vente assign\xE9 \xE0 votre compte",
            life: 5e3
          });
        }
      },
      error: (error) => {
        console.error("\u274C Error loading user:", error);
        this.state.update((s) => __spreadProps(__spreadValues({}, s), {
          checkingStatus: false,
          error: "Erreur lors du chargement des informations utilisateur"
        }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger vos informations",
          life: 5e3
        });
      }
    });
  }
  /**
   * Vérifier si l'agent est actif dans son point de vente
   */
  checkAgentStatus(user) {
    console.log("\u{1F50D} checkAgentStatus called for:", {
      userId: user.userId,
      pointventeId: user.pointventeId
    });
    this.userService.checkAgentDisponibility$(user.userId, user.pointventeId).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        console.log("\u{1F4E5} Status check response:", response);
        const disponibility = response.data?.disponibilityAgent;
        const isActive = disponibility?.isActive || false;
        console.log("\u2705 Agent status:", {
          isActive,
          message: disponibility?.message,
          currentPs: disponibility?.currentPs
        });
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          isAgentActive: isActive,
          checkingStatus: false
        }));
        if (!isActive) {
          console.warn("\u26A0\uFE0F Agent is NOT active");
          this.messageService.add({
            severity: "error",
            summary: "Acc\xE8s Restreint",
            detail: "Vous n'\xEAtes pas activ\xE9 dans ce point de service. Veuillez contacter votre responsable.",
            life: 1e4
          });
        } else {
          console.log("\u2705 Agent is ACTIVE - Loading demandes...");
          this.messageService.add({
            severity: "success",
            summary: "Acc\xE8s Autoris\xE9",
            detail: "Chargement des donn\xE9es...",
            life: 3e3
          });
          this.laodDemandeAttenteByPointVente();
        }
      },
      error: (error) => {
        console.error("\u274C Error checking agent status:", error);
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          isAgentActive: false,
          checkingStatus: false,
          error: "Impossible de v\xE9rifier votre statut"
        }));
        this.messageService.add({
          severity: "warn",
          summary: "Erreur",
          detail: "Impossible de v\xE9rifier votre statut d'activation. Veuillez r\xE9essayer.",
          life: 5e3
        });
      }
    });
  }
  /**
   * Charger les demandes en attente
   */
  laodDemandeAttenteByPointVente() {
    console.log("\u{1F4CB} laodDemandeAttenteByPointVente called");
    const user = this.state().user;
    if (!user?.pointventeId) {
      console.warn("\u26A0\uFE0F No pointventeId available");
      return;
    }
    if (this.state().isAgentActive === false) {
      console.warn("\u26A0\uFE0F Cannot load data - Agent not active");
      this.messageService.add({
        severity: "warn",
        summary: "Acc\xE8s Refus\xE9",
        detail: "Vous devez \xEAtre activ\xE9 pour acc\xE9der aux donn\xE9es",
        life: 3e3
      });
      return;
    }
    console.log("\u{1F504} Loading demandes attente...");
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: true, error: void 0 }));
    this.userService.getAllDemandeAttente$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        console.log("\u{1F4E5} Demandes attente response:", response);
        const allDemandes = response.data?.demandeAttentes || [];
        const filteredDemandes = allDemandes.filter((demande) => demande.validationState === "VALIDATION");
        console.log("\u2705 Loaded demandes:", {
          total: allDemandes.length,
          filtered: filteredDemandes.length
        });
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          demandeAttentes: allDemandes,
          filteredDemandeAttentes: filteredDemandes,
          pointVente: response.data?.pointVente,
          creditDtos: response.data?.creditDtos || [],
          nombreDemandeInd: response.data?.nombreDemandeInd || 0,
          loading: false
        }));
        if (allDemandes.length > 0) {
          this.messageService.add({
            severity: "success",
            summary: "Succ\xE8s",
            detail: `${allDemandes.length} demande(s) charg\xE9e(s)`,
            life: 3e3
          });
        }
      },
      error: (error) => {
        console.error("\u274C Error loading demandes:", error);
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          error: "Erreur lors du chargement des demandes",
          loading: false
        }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les demandes en attente",
          life: 5e3
        });
      }
    });
  }
  /**
   * Rafraîchir les données
   */
  refresh() {
    console.log("\u{1F504} Refresh clicked");
    if (this.state().isAgentActive) {
      this.laodDemandeAttenteByPointVente();
    } else {
      this.loadUserAndCheckStatus();
    }
  }
  /**
   * Recharger la page complète
   */
  reloadPage() {
    window.location.reload();
  }
  // === Méthodes utilitaires ===
  getStatusLabel(statutDemande, validationState) {
    if (statutDemande === "EN_ATTENTE" && validationState === "NOUVEAU") {
      return "NOUVELLE DEMANDE";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "SELECTION") {
      return "SELECTION";
    }
    return statutDemande;
  }
  getStateValidation(statutDemande, validationState) {
    if (statutDemande === "EN_ATTENTE" && validationState === "NOUVEAU") {
      return "EN ATTENTE POUR LA SELECTION";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "SELECTION") {
      return "EN ATTENTE POUR LA VALIDATION";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "APPROVED") {
      return "DEMANDE APPROVEE PAR L'AGENT";
    }
    return validationState;
  }
  onGlobalFilter(table, event) {
    table.filterGlobal(event.target.value, "contains");
  }
  getStatusSeverity(statutDemande, validationState) {
    if (statutDemande === "APPROVED")
      return "success";
    if (statutDemande === "EN_ATTENTE")
      return "info";
    if (statutDemande === "REJECTED")
      return "danger";
    return void 0;
  }
  miseEnPlaceCredit(numeroMembre) {
    if (!this.state().isAgentActive) {
      this.messageService.add({
        severity: "error",
        summary: "Acc\xE8s Refus\xE9",
        detail: "Vous devez \xEAtre activ\xE9 dans ce point de service pour effectuer cette action",
        life: 5e3
      });
      return;
    }
    this.router.navigate(["/dashboards/agent-credit/verification/", numeroMembre]);
  }
  viewCreditDetails(referenceCredit, numeroMembre) {
    if (!this.state().isAgentActive) {
      this.messageService.add({
        severity: "error",
        summary: "Acc\xE8s Refus\xE9",
        detail: "Vous devez \xEAtre activ\xE9 dans ce point de service pour effectuer cette action",
        life: 5e3
      });
      return;
    }
    this.router.navigate(["/dashboards/agent-credit/detail-credit-ind/", referenceCredit, numeroMembre]);
  }
  static \u0275fac = function AgentCreditComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _AgentCreditComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _AgentCreditComponent, selectors: [["app-agent-credit"]], features: [\u0275\u0275ProvidersFeature([MessageService])], decls: 22, vars: 8, consts: [["dt", ""], ["dtCredits", ""], [1, "card", "h-full"], [1, "p-2", "h-full", "flex", "flex-col", "justify-between"], [1, "flex", "items-center", "justify-between", "mb-4"], [1, "flex", "gap-4", "flex-col", "justify-between", "w-full", "md:flex-row", "md:items-center"], [1, "flex", "gap-4", "items-center"], [1, "text-4xl"], [1, "flex", "flex-col", "gap-1", "text-surface-600", "dark:text-surface-200"], [1, "text-2xl", "font-semibold"], [1, "text-color"], [1, "font-bold", "text-primary"], [1, "flex", "items-center", "gap-2"], ["severity", "info"], [1, "flex", "justify-center", "items-center", "py-8"], [1, "card", "bg-red-50", "border-2", "border-red-200", "p-6", "mx-4", "my-6"], [1, "px-2", "py-1", "ml-2", "font-bold", "bg-blue-100", "text-blue-700", "rounded-md", "border", "border-blue-300", "hover:bg-blue-200", 3, "routerLink"], [1, "flex", "flex-col", "items-center", "gap-3"], [1, "pi", "pi-spin", "pi-spinner", "text-4xl", "text-blue-500"], [1, "text-gray-600"], [1, "flex", "items-start", "gap-4"], [1, "flex-shrink-0"], [1, "pi", "pi-exclamation-triangle", "text-5xl", "text-red-600"], [1, "flex-1"], [1, "text-2xl", "font-bold", "text-red-800", "mb-3"], [1, "space-y-3", "text-red-700"], [1, "text-lg", "font-semibold"], [1, "text-base"], [1, "bg-white", "rounded-lg", "p-4", "border", "border-red-300", "mt-4"], [1, "font-semibold", "text-red-800", "mb-2"], [1, "list-disc", "list-inside", "space-y-2", "text-red-700"], [1, "mt-4", "p-3", "bg-yellow-50", "border", "border-yellow-300", "rounded-lg"], [1, "mt-6", "flex", "gap-3"], ["pButton", "", "pRipple", "", "label", "V\xE9rifier mon statut", "icon", "pi pi-refresh", 1, "p-button-outlined", "p-button-danger", 3, "click", "loading"], ["pButton", "", "pRipple", "", "label", "Recharger la page", "icon", "pi pi-replay", 1, "p-button-outlined", 3, "click"], [1, "text-yellow-800", "text-sm"], [1, "pi", "pi-info-circle", "mr-2"], [1, "card"], [1, "card", "mt-5"], ["paginatorDropdownAppendTo", "body", "responsiveLayout", "scroll", "currentPageReportTemplate", "Showing {first} to {last} of {totalRecords} entries", 3, "value", "paginator", "rows", "showCurrentPageReport", "rowsPerPageOptions", "globalFilterFields"], ["pTemplate", "caption"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], [1, "flex", "flex-wrap", "gap-2", "items-center", "justify-between"], [1, "w-full", "sm:w-80", "order-1", "sm:order-none"], [1, "pi", "pi-search"], ["pInputText", "", "type", "text", "placeholder", "Global Search", 1, "w-full", 3, "input"], ["pSortableColumn", "createdAt", 1, "white-space-nowrap", 2, "width", "10%"], ["field", "createdAt"], ["pSortableColumn", "nom", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "nom"], ["pSortableColumn", "numeroMembre", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "numeroMembre"], ["pSortableColumn", "montant", 1, "white-space-nowrap", 2, "width", "10%"], ["field", "montant"], ["pSortableColumn", "activite", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "activite"], ["pSortableColumn", "statutDemande", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "statutDemande"], [1, "white-space-nowrap", 2, "width", "10%"], ["severity", "secondary", 3, "value"], ["pButton", "", "pRipple", "", "label", "Mise en Place", "text", "", 1, "ml-auto", 3, "click"], ["colspan", "8", 1, "text-center", "p-4"], [1, "text-xl", "font-medium", "mb-3"], ["paginatorDropdownAppendTo", "body", "responsiveLayout", "scroll", "currentPageReportTemplate", "Showing {first} to {last} of {totalRecords} entries", 3, "value", "paginator", "rows", "showCurrentPageReport", "rowsPerPageOptions"], ["pInputText", "", "type", "text", "placeholder", "Recherche globale", 1, "w-full", 3, "input"], ["pSortableColumn", "dateCreation", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "dateCreation"], ["pSortableColumn", "codeMembre", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "codeMembre"], ["pSortableColumn", "status", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "status"], [1, "white-space-nowrap", 2, "width", "15%"], [3, "value", "severity"], ["pButton", "", "pRipple", "", "label", "D\xE9tails", "text", "", 1, "ml-auto", 3, "click"], ["colspan", "6", 1, "text-center", "p-4"]], template: function AgentCreditComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 2);
      \u0275\u0275element(1, "p-toast");
      \u0275\u0275elementStart(2, "div", 3)(3, "div", 4)(4, "div", 5)(5, "div", 6)(6, "div", 7);
      \u0275\u0275text(7, "\u{1F44B}");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(8, "div", 8)(9, "span", 9);
      \u0275\u0275text(10, " Bonjour, ");
      \u0275\u0275elementStart(11, "span", 10);
      \u0275\u0275text(12);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(13, "span");
      \u0275\u0275text(14, " Point de Service ");
      \u0275\u0275elementStart(15, "span", 11);
      \u0275\u0275text(16);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(17, "div", 12);
      \u0275\u0275template(18, AgentCreditComponent_Conditional_18_Template, 4, 2, "p-message", 13);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275template(19, AgentCreditComponent_Conditional_19_Template, 5, 0, "div", 14)(20, AgentCreditComponent_Conditional_20_Template, 26, 2, "div", 15)(21, AgentCreditComponent_Conditional_21_Template, 2, 2);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      let tmp_0_0;
      let tmp_1_0;
      let tmp_2_0;
      \u0275\u0275advance(12);
      \u0275\u0275textInterpolate2(" ", (tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.firstName, " ", (tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.lastName, "! ");
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate2(" @ ", (tmp_1_0 = ctx.state().pointVente) == null ? null : tmp_1_0.libele, " : ", (tmp_1_0 = ctx.state().pointVente) == null ? null : tmp_1_0.code, " ");
      \u0275\u0275advance(2);
      \u0275\u0275conditional(((tmp_2_0 = ctx.state().user) == null ? null : tmp_2_0.role) === "AGENT_CREDIT" && ctx.state().nombreDemandeInd > 0 ? 18 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.state().checkingStatus ? 19 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.state().checkingStatus && ctx.state().isAgentActive === false ? 20 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.state().isAgentActive === true && !ctx.state().checkingStatus ? 21 : -1);
    }
  }, dependencies: [CommonModule, CurrencyPipe, DatePipe, ButtonModule, ButtonDirective, PrimeTemplate, RippleModule, Ripple, MessageModule, Message, RouterLink, TableModule, Table, SortableColumn, SortIcon, IconFieldModule, IconField, InputIconModule, InputIcon, TagModule, Tag, ToastModule, Toast], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(AgentCreditComponent, { className: "AgentCreditComponent", filePath: "src/app/pages/dashboard/agent-credit/agent-credit.component.ts", lineNumber: 28 });
})();

// src/app/pages/dashboard/resp-agent/resp-agent.component.ts
var _c02 = () => ({ width: "50px", height: "50px" });
var _c12 = () => ({ width: "90vw", maxWidth: "1500px" });
var _c22 = () => [10, 25, 50];
var _c3 = () => ["objetFinancement", "statut", "montantDemande"];
var _c4 = () => ({ width: "85vw", maxWidth: "1400px" });
var _c5 = () => ["nom", "prenom", "codeMembre", "activite", "telephone"];
function RespAgentComponent_p_chip_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-chip", 21);
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("label", "Analyses: " + (((tmp_1_0 = ctx_r0.state().demandeAnalyseCredits) == null ? null : tmp_1_0.length) || 0));
  }
}
function RespAgentComponent_p_chip_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-chip", 22);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("label", "Total: " + ctx_r0.formatMontantGNF(ctx_r0.getTotalMontant()));
  }
}
function RespAgentComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 23);
    \u0275\u0275element(1, "p-progressSpinner", 24);
    \u0275\u0275elementStart(2, "span", 25);
    \u0275\u0275text(3, "Chargement des demandes...");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance();
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(2, _c02));
  }
}
function RespAgentComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 26);
    \u0275\u0275element(1, "i", 27);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", ctx_r0.state().error, " ");
  }
}
function RespAgentComponent_div_22_div_1_ng_template_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 48)(1, "p-icon-field", 49);
    \u0275\u0275element(2, "p-inputicon", 50);
    \u0275\u0275elementStart(3, "input", 51);
    \u0275\u0275listener("input", function RespAgentComponent_div_22_div_1_ng_template_19_Template_input_input_3_listener($event) {
      \u0275\u0275restoreView(_r4);
      \u0275\u0275nextContext();
      const analyseTable_r5 = \u0275\u0275reference(18);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onGlobalFilter(analyseTable_r5, $event));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "div", 52);
    \u0275\u0275element(5, "i", 53);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", (tmp_5_0 = ctx_r0.state().demandeAnalyseCredits) == null ? null : tmp_5_0.length, " analyse(s) trouv\xE9e(s) ");
  }
}
function RespAgentComponent_div_22_div_1_ng_template_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 54);
    \u0275\u0275element(2, "i", 55);
    \u0275\u0275text(3, "Date Demande ");
    \u0275\u0275element(4, "p-sortIcon", 56);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th", 57);
    \u0275\u0275element(6, "i", 58);
    \u0275\u0275text(7, "Objet du Financement ");
    \u0275\u0275element(8, "p-sortIcon", 59);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 60);
    \u0275\u0275element(10, "i", 61);
    \u0275\u0275text(11, "Montant Demand\xE9 ");
    \u0275\u0275element(12, "p-sortIcon", 62);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th", 63);
    \u0275\u0275element(14, "i", 64);
    \u0275\u0275text(15, "Dur\xE9e ");
    \u0275\u0275element(16, "p-sortIcon", 65);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "th", 66);
    \u0275\u0275element(18, "i", 67);
    \u0275\u0275text(19, "Statut ");
    \u0275\u0275element(20, "p-sortIcon", 68);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "th", 69);
    \u0275\u0275element(22, "i", 70);
    \u0275\u0275text(23, "Actions ");
    \u0275\u0275elementEnd()();
  }
}
function RespAgentComponent_div_22_div_1_ng_template_21_small_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 74);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const demande_r7 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" Taux: ", demande_r7.tauxInteret, "% ");
  }
}
function RespAgentComponent_div_22_div_1_ng_template_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr", 71)(1, "td")(2, "div", 72)(3, "span", 73);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "small", 74);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(7, "td")(8, "div", 72)(9, "span", 75);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "small", 76);
    \u0275\u0275element(12, "i", 77);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(14, "td", 78)(15, "div", 79)(16, "span", 80);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd();
    \u0275\u0275template(18, RespAgentComponent_div_22_div_1_ng_template_21_small_18_Template, 2, 1, "small", 81);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(19, "td", 82);
    \u0275\u0275element(20, "p-chip", 83);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "td", 82);
    \u0275\u0275element(22, "p-tag", 84);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "td", 82)(24, "p-button", 85);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_1_ng_template_21_Template_p_button_click_24_listener() {
      const demande_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.viewAnalyseCredit(demande_r7.demandeCreditId, demande_r7.userId));
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const demande_r7 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(demande_r7.dateDemande));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("ID: ", demande_r7.demandeCreditId, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", demande_r7.objetFinancement || "Non sp\xE9cifi\xE9", "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Entreprise ID: ", demande_r7.entrepriseId, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(demande_r7.montantDemande), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", demande_r7.tauxInteret);
    \u0275\u0275advance(2);
    \u0275\u0275property("label", demande_r7.dureeMois + " mois");
    \u0275\u0275advance(2);
    \u0275\u0275property("value", ctx_r0.getAnalyseStatusLabel(demande_r7.statut))("severity", ctx_r0.getAnalyseStatusSeverity(demande_r7.statut));
  }
}
function RespAgentComponent_div_22_div_1_ng_template_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 86)(2, "div", 87);
    \u0275\u0275element(3, "i", 88);
    \u0275\u0275elementStart(4, "span", 89);
    \u0275\u0275text(5, "Aucune demande d'analyse trouv\xE9e");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "small", 74);
    \u0275\u0275text(7, "Les nouvelles demandes d'analyse appara\xEEtront ici");
    \u0275\u0275elementEnd()()()();
  }
}
function RespAgentComponent_div_22_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 31)(1, "div", 32)(2, "div", 33)(3, "h3", 34);
    \u0275\u0275element(4, "i", 35);
    \u0275\u0275text(5, " Demandes d'Analyse de Cr\xE9dit encours ");
    \u0275\u0275element(6, "p-chip", 36);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 37)(8, "p-button", 38);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_1_Template_p_button_click_8_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.refreshData());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "p-button", 39);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_1_Template_p_button_click_9_listener($event) {
      \u0275\u0275restoreView(_r2);
      const analysePopover_r3 = \u0275\u0275reference(11);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.toggleAnalyseTable(analysePopover_r3, $event));
    });
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(10, "p-popover", 40, 0)(12, "div", 32)(13, "div", 41)(14, "h4", 42);
    \u0275\u0275element(15, "i", 35);
    \u0275\u0275text(16, " Demandes d'Analyse de Cr\xE9dit encours ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "p-table", 43, 1);
    \u0275\u0275template(19, RespAgentComponent_div_22_div_1_ng_template_19_Template, 7, 1, "ng-template", 44)(20, RespAgentComponent_div_22_div_1_ng_template_20_Template, 24, 0, "ng-template", 45)(21, RespAgentComponent_div_22_div_1_ng_template_21_Template, 25, 9, "ng-template", 46)(22, RespAgentComponent_div_22_div_1_ng_template_22_Template, 8, 0, "ng-template", 47);
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    let tmp_4_0;
    let tmp_6_0;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275property("label", "Nouveau: " + (((tmp_4_0 = ctx_r0.state().demandeAnalyseCredits) == null ? null : tmp_4_0.length) || 0));
    \u0275\u0275advance(2);
    \u0275\u0275property("loading", ctx_r0.state().loading);
    \u0275\u0275advance();
    \u0275\u0275property("badge", (tmp_6_0 = ctx_r0.state().demandeAnalyseCredits) == null ? null : tmp_6_0.length.toString());
    \u0275\u0275advance();
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(11, _c12));
    \u0275\u0275advance(7);
    \u0275\u0275property("value", ctx_r0.state().demandeAnalyseCredits)("paginator", true)("rows", 10)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(12, _c22))("globalFilterFields", \u0275\u0275pureFunction0(13, _c3));
  }
}
function RespAgentComponent_div_22_p_divider_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-divider");
  }
}
function RespAgentComponent_div_22_div_3_ng_template_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 48)(1, "p-icon-field", 49);
    \u0275\u0275element(2, "p-inputicon", 50);
    \u0275\u0275elementStart(3, "input", 98);
    \u0275\u0275listener("input", function RespAgentComponent_div_22_div_3_ng_template_18_Template_input_input_3_listener($event) {
      \u0275\u0275restoreView(_r10);
      \u0275\u0275nextContext();
      const dt_r11 = \u0275\u0275reference(17);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onGlobalFilter(dt_r11, $event));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "div", 52);
    \u0275\u0275element(5, "i", 53);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", (tmp_5_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_5_0.length, " demande(s) trouv\xE9e(s) ");
  }
}
function RespAgentComponent_div_22_div_3_ng_template_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 99);
    \u0275\u0275element(2, "i", 55);
    \u0275\u0275text(3, "Date de cr\xE9ation ");
    \u0275\u0275element(4, "p-sortIcon", 100);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th", 101);
    \u0275\u0275element(6, "i", 102);
    \u0275\u0275text(7, "Membre ");
    \u0275\u0275element(8, "p-sortIcon", 103);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 104);
    \u0275\u0275element(10, "i", 105);
    \u0275\u0275text(11, "R\xE9f\xE9rence ");
    \u0275\u0275element(12, "p-sortIcon", 106);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th", 107);
    \u0275\u0275element(14, "i", 61);
    \u0275\u0275text(15, "Montant ");
    \u0275\u0275element(16, "p-sortIcon", 108);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "th", 109);
    \u0275\u0275element(18, "i", 70);
    \u0275\u0275text(19, "Actions ");
    \u0275\u0275elementEnd()();
  }
}
function RespAgentComponent_div_22_div_3_ng_template_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr", 71)(1, "td")(2, "div", 72)(3, "span", 73);
    \u0275\u0275text(4);
    \u0275\u0275pipe(5, "date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "small", 74);
    \u0275\u0275text(7);
    \u0275\u0275pipe(8, "date");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "td")(10, "div", 72)(11, "span", 75);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "small", 76);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(15, "td");
    \u0275\u0275element(16, "p-chip", 83);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "td", 78)(18, "div", 79)(19, "span", 110);
    \u0275\u0275text(20);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "small", 74);
    \u0275\u0275text(22, "Montant demand\xE9");
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(23, "td", 82)(24, "p-button", 111);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_3_ng_template_20_Template_p_button_click_24_listener() {
      const demande_r13 = \u0275\u0275restoreView(_r12).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.viewInstanceCredit(demande_r13.referenceCredit, demande_r13.codeMembre, ctx_r0.user == null ? null : ctx_r0.user.userId));
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const demande_r13 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(5, 6, demande_r13.createAt, "dd/MM/yyyy"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind2(8, 9, demande_r13.createAt, "HH:mm"));
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(demande_r13.codeMembre);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(demande_r13.nom || "Nom non disponible");
    \u0275\u0275advance(2);
    \u0275\u0275property("label", demande_r13.referenceCredit);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatMontantGNF(demande_r13.montantCredit), " ");
  }
}
function RespAgentComponent_div_22_div_3_ng_template_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 112)(2, "div", 87);
    \u0275\u0275element(3, "i", 113);
    \u0275\u0275elementStart(4, "span", 89);
    \u0275\u0275text(5, "Aucune demande en attente trouv\xE9e");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "small", 74);
    \u0275\u0275text(7, "Les nouvelles demandes appara\xEEtront ici");
    \u0275\u0275elementEnd()()()();
  }
}
function RespAgentComponent_div_22_div_3_ng_template_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 114)(1, "span", 115);
    \u0275\u0275element(2, "i", 116);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 117);
    \u0275\u0275element(5, "i", 61);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" Total des demandes: ", ((tmp_5_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_5_0.length) || 0, " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" Montant total: ", ctx_r0.formatMontantGNF(ctx_r0.getTotalMontant()), " ");
  }
}
function RespAgentComponent_div_22_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 90)(1, "div", 33)(2, "h3", 34);
    \u0275\u0275element(3, "i", 91);
    \u0275\u0275text(4, " Gestion des Cr\xE9dits ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 37)(6, "p-button", 38);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_3_Template_p_button_click_6_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.refreshData());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "p-button", 92);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_3_Template_p_button_click_7_listener($event) {
      \u0275\u0275restoreView(_r8);
      const demandesPopover_r9 = \u0275\u0275reference(9);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.toggleDataTable(demandesPopover_r9, $event));
    });
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(8, "p-popover", 93, 2)(10, "div", 32)(11, "div", 41)(12, "h4", 42);
    \u0275\u0275element(13, "i", 94);
    \u0275\u0275text(14, " Demandes en attente de notation ");
    \u0275\u0275elementEnd();
    \u0275\u0275element(15, "p-chip", 95);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "p-table", 96, 3);
    \u0275\u0275template(18, RespAgentComponent_div_22_div_3_ng_template_18_Template, 7, 1, "ng-template", 44)(19, RespAgentComponent_div_22_div_3_ng_template_19_Template, 20, 0, "ng-template", 45)(20, RespAgentComponent_div_22_div_3_ng_template_20_Template, 25, 12, "ng-template", 46)(21, RespAgentComponent_div_22_div_3_ng_template_21_Template, 8, 0, "ng-template", 47)(22, RespAgentComponent_div_22_div_3_ng_template_22_Template, 7, 2, "ng-template", 97);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275property("loading", ctx_r0.state().loading);
    \u0275\u0275advance();
    \u0275\u0275property("badge", (tmp_5_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_5_0.length.toString());
    \u0275\u0275advance();
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(11, _c4));
    \u0275\u0275advance(7);
    \u0275\u0275property("label", "Total: " + ctx_r0.formatMontantGNF(ctx_r0.getTotalMontant()));
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r0.state().filteredDemandeAttentes)("paginator", true)("rows", 10)("showCurrentPageReport", true)("rowsPerPageOptions", \u0275\u0275pureFunction0(12, _c22))("globalFilterFields", \u0275\u0275pureFunction0(13, _c5));
  }
}
function RespAgentComponent_div_22_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 118)(1, "div", 119);
    \u0275\u0275element(2, "i", 120);
    \u0275\u0275elementStart(3, "h3", 121);
    \u0275\u0275text(4, "Aucune demande en attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "p", 122);
    \u0275\u0275text(6, " Toutes les demandes de cr\xE9dit ont \xE9t\xE9 trait\xE9es. Les nouvelles demandes appara\xEEtront automatiquement ici. ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "p-button", 123);
    \u0275\u0275listener("click", function RespAgentComponent_div_22_div_4_Template_p_button_click_7_listener() {
      \u0275\u0275restoreView(_r14);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.refreshData());
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(7);
    \u0275\u0275property("loading", ctx_r0.state().loading);
  }
}
function RespAgentComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275template(1, RespAgentComponent_div_22_div_1_Template, 23, 14, "div", 28)(2, RespAgentComponent_div_22_p_divider_2_Template, 1, 0, "p-divider", 20)(3, RespAgentComponent_div_22_div_3_Template, 23, 14, "div", 29)(4, RespAgentComponent_div_22_div_4_Template, 8, 1, "div", 30);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    let tmp_2_0;
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.hasAnalyseCredits());
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.hasAnalyseCredits() && ((tmp_2_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_2_0.length) > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ((tmp_3_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_3_0.length) > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ((tmp_4_0 = ctx_r0.state().filteredDemandeAttentes) == null ? null : tmp_4_0.length) === 0 && !ctx_r0.hasAnalyseCredits() && !ctx_r0.state().loading);
  }
}
var RespAgentComponent = class _RespAgentComponent {
  user;
  state = signal({
    loading: false,
    message: void 0,
    error: void 0,
    filteredDemandeAttentes: [],
    demandeAnalyseCredits: []
  });
  userService = inject(UserService);
  router = inject(Router);
  destroyRef = inject(DestroyRef);
  messageService = inject(MessageService);
  getStatusLabel(statutDemande, validationState) {
    if (statutDemande === "EN_ATTENTE" && validationState === "NOUVEAU") {
      return "NOUVELLE DEMANDE";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "SELECTION") {
      return "SELECTION";
    }
    return statutDemande;
  }
  ngOnInit() {
    this.laodAllCreditByAgence();
  }
  getStateValidation(statut) {
    if (statut === "ENCOURS") {
      return "EN ATTENTE POUR LA NOTATION";
    } else if (statut === "VALIDE") {
      return "DEMANDE APROUVEE PAR LE DIRECTEUR";
    } else if (statut === "REJECTED") {
      return "DEMANDE REJETEE PAR LE DIRECTEUR";
    }
    return statut;
  }
  onGlobalFilter(table, event) {
    table.filterGlobal(event.target.value, "contains");
  }
  getStatusSeverity(statut) {
    if (statut === "ENCOURS")
      return "info";
    if (statut === "VALIDE")
      return "success";
    if (statut === "REJECTED")
      return "danger";
    return void 0;
  }
  // NEW: Get severity for demandeAnalyseCredits status
  getAnalyseStatusSeverity(statut) {
    switch (statut?.toUpperCase()) {
      case "VUE":
        return "info";
      case "EN_ATTENTE":
        return "warn";
      case "APPROUVE":
        return "success";
      case "REJETE":
        return "danger";
      case "EN_COURS":
        return "info";
      default:
        return "secondary";
    }
  }
  // NEW: Get label for demandeAnalyseCredits status
  getAnalyseStatusLabel(statut) {
    switch (statut?.toUpperCase()) {
      case "VUE":
        return "Vue";
      case "EN_ATTENTE":
        return "En attente";
      case "APPROUVE":
        return "Approuv\xE9";
      case "REJETE":
        return "Rejet\xE9";
      case "EN_COURS":
        return "En cours";
      default:
        return statut || "Inconnu";
    }
  }
  // Méthode pour formater le montant en GNF
  formatMontantGNF(montant) {
    if (!montant || montant === 0)
      return "0 GNF";
    return new Intl.NumberFormat("fr-FR", {
      style: "currency",
      currency: "GNF",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(montant);
  }
  // Méthode pour calculer le total des montants
  getTotalMontant() {
    return this.state().filteredDemandeAttentes?.reduce((total, demande) => total + (demande.montantCredit || 0), 0) || 0;
  }
  // NEW: Check if there are demandeAnalyseCredits
  hasAnalyseCredits() {
    return !!(this.state().demandeAnalyseCredits && this.state().demandeAnalyseCredits.length > 0);
  }
  // NEW: Format date for display
  formatDate(dateString) {
    if (!dateString)
      return "Non d\xE9finie";
    try {
      const date = new Date(dateString);
      return date.toLocaleDateString("fr-FR", {
        year: "numeric",
        month: "long",
        day: "numeric"
      });
    } catch (error) {
      return dateString;
    }
  }
  laodAllCreditByAgence() {
    this.state.set(__spreadProps(__spreadValues({}, this.state()), { loading: true }));
    this.userService.getListCreditEnAttente$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        console.log("\u{1F50D} Response re\xE7ue:", response);
        const allCredits = Array.isArray(response.data.creditDtos) ? response.data.creditDtos : response.data.creditDtos ? [response.data.creditDtos] : [];
        const filteredDemandes = allCredits.filter((demande) => demande.status === "ENCOURS");
        const analyseCredits = Array.isArray(response.data.demandeAnalyseCredits) ? response.data.demandeAnalyseCredits : response.data.demandeAnalyseCredits ? [response.data.demandeAnalyseCredits] : [];
        console.log("\u{1F4CA} Demandes d'analyse trouv\xE9es:", analyseCredits);
        this.state.set(__spreadProps(__spreadValues({}, this.state()), {
          creditDtos: allCredits,
          filteredDemandeAttentes: filteredDemandes,
          demandeAnalyseCredits: analyseCredits,
          // NEW: Set the analyse credits
          agence: response.data.agence,
          loading: false
        }));
        if (analyseCredits.length > 0) {
          this.messageService.add({
            severity: "info",
            summary: "Demandes d'analyse disponibles",
            detail: `${analyseCredits.length} demande(s) d'analyse de cr\xE9dit trouv\xE9e(s)`,
            life: 5e3
          });
        }
      },
      error: (error) => {
        console.error("Error loading credits:", error);
        this.state.set(__spreadProps(__spreadValues({}, this.state()), {
          error: "Erreur lors du chargement des informations des demandes en attente de credit",
          loading: false
        }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les informations du des demandes en attente de credit",
          life: 5e3
        });
      },
      complete: () => {
      }
    });
  }
  toggleDataTable(popover, event) {
    popover.toggle(event);
  }
  // NEW: Toggle analyse credits table
  toggleAnalyseTable(popover, event) {
    popover.toggle(event);
  }
  // Optional: If you want to handle selection like in the example
  selectedDemande;
  onDemandeSelect(popover, event) {
    this.selectedDemande = event.data;
    popover.hide();
    this.messageService.add({
      severity: "info",
      summary: "Demande S\xE9lectionn\xE9e",
      detail: `Membre: ${this.selectedDemande.codeMembre} ${this.selectedDemande.nom}`,
      life: 3e3
    });
  }
  viewInstanceCredit(referenceCredit, numeroMembre, userId) {
    console.log("viewInstanceCredit", referenceCredit, numeroMembre, userId);
    this.router.navigate(["/dashboards/resp-agent/", referenceCredit, numeroMembre, userId]);
  }
  // NEW: Navigate to analyse credit details
  viewAnalyseCredit(demandeCreditId, userId) {
    console.log("viewAnalyseCredit", demandeCreditId, userId);
    this.router.navigate([`dashboards/credit/${userId}/resume-credit/${demandeCreditId}`]);
  }
  // Méthode pour rafraîchir les données
  refreshData() {
    this.laodAllCreditByAgence();
    this.messageService.add({
      severity: "info",
      summary: "Actualisation",
      detail: "Donn\xE9es actualis\xE9es avec succ\xE8s",
      life: 2e3
    });
  }
  static \u0275fac = function RespAgentComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _RespAgentComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _RespAgentComponent, selectors: [["app-resp-agent"]], inputs: { user: "user" }, decls: 24, vars: 10, consts: [["analysePopover", ""], ["analyseTable", ""], ["demandesPopover", ""], ["dt", ""], [1, "card", "h-full"], [1, "p-4", "h-full", "flex", "flex-col", "justify-between"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "flex", "gap-4", "flex-col", "justify-between", "w-full", "md:flex-row", "md:items-center"], [1, "flex", "gap-4", "items-center"], [1, "text-4xl"], [1, "flex", "flex-col", "gap-1", "text-surface-600", "dark:text-surface-200"], [1, "text-2xl", "font-semibold"], [1, "text-color"], [1, "font-bold", "text-primary"], [1, "flex", "gap-3", "flex-wrap"], ["styleClass", "bg-purple-100 text-purple-800", 3, "label", 4, "ngIf"], ["styleClass", "bg-orange-100 text-orange-800", 3, "label"], ["styleClass", "bg-blue-100 text-blue-800", 3, "label", 4, "ngIf"], ["class", "flex justify-content-center align-items-center my-5", 4, "ngIf"], ["class", "p-message p-message-error p-3 mb-4", 4, "ngIf"], [4, "ngIf"], ["styleClass", "bg-purple-100 text-purple-800", 3, "label"], ["styleClass", "bg-blue-100 text-blue-800", 3, "label"], [1, "flex", "justify-content-center", "align-items-center", "my-5"], ["strokeWidth", "4"], [1, "ml-3", "text-600"], [1, "p-message", "p-message-error", "p-3", "mb-4"], [1, "pi", "pi-times-circle", "mr-2"], ["class", "card mb-4 border-l-4 border-purple-500", 4, "ngIf"], ["class", "card", 4, "ngIf"], ["class", "card text-center p-6", 4, "ngIf"], [1, "card", "mb-4", "border-l-4", "border-purple-500"], [1, "p-4"], [1, "flex", "flex-wrap", "gap-3", "align-items-center", "justify-content-between", "mb-4"], [1, "text-xl", "font-semibold", "m-0", "text-900"], [1, "pi", "pi-chart-line", "mr-2", "text-purple-600"], ["severity", "warning", 1, "ml-2", 3, "label"], [1, "flex", "gap-2"], ["icon", "pi pi-refresh", "severity", "secondary", "size", "small", "pTooltip", "Actualiser les donn\xE9es", 3, "click", "loading"], ["type", "button", "label", "Voir les analyses", "icon", "pi pi-eye", "badgeClass", "p-badge-warning", "severity", "warn", 3, "click", "badge"], ["id", "analyse_popover"], [1, "flex", "justify-content-between", "align-items-center", "mb-4"], [1, "text-lg", "font-semibold", "m-0"], ["paginatorDropdownAppendTo", "body", "responsiveLayout", "scroll", "currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} analyses", "styleClass", "p-datatable-striped", 3, "value", "paginator", "rows", "showCurrentPageReport", "rowsPerPageOptions", "globalFilterFields"], ["pTemplate", "caption"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], [1, "flex", "flex-wrap", "gap-3", "items-center", "justify-between"], [1, "w-full", "sm:w-80"], [1, "pi", "pi-search"], ["pInputText", "", "type", "text", "placeholder", "Rechercher par objet, statut...", 1, "w-full", 3, "input"], [1, "text-sm", "text-600"], [1, "pi", "pi-info-circle", "mr-1"], ["pSortableColumn", "dateDemande", 1, "white-space-nowrap", 2, "width", "15%"], [1, "pi", "pi-calendar", "mr-1"], ["field", "dateDemande"], ["pSortableColumn", "objetFinancement", 1, "white-space-nowrap", 2, "width", "30%"], [1, "pi", "pi-tag", "mr-1"], ["field", "objetFinancement"], ["pSortableColumn", "montantDemande", 1, "white-space-nowrap", "text-right", 2, "width", "20%"], [1, "pi", "pi-money-bill", "mr-1"], ["field", "montantDemande"], ["pSortableColumn", "dureeMois", 1, "white-space-nowrap", "text-center", 2, "width", "10%"], [1, "pi", "pi-clock", "mr-1"], ["field", "dureeMois"], ["pSortableColumn", "statut", 1, "white-space-nowrap", "text-center", 2, "width", "10%"], [1, "pi", "pi-flag", "mr-1"], ["field", "statut"], [1, "white-space-nowrap", "text-center", 2, "width", "15%"], [1, "pi", "pi-cog", "mr-1"], [1, "hover:bg-surface-50"], [1, "flex", "flex-column", "gap-1"], [1, "font-medium"], [1, "text-500"], [1, "font-semibold", "text-900"], [1, "text-600"], [1, "pi", "pi-building", "mr-1"], [1, "text-right"], [1, "flex", "flex-column", "gap-1", "align-items-end"], [1, "font-bold", "text-lg", "text-purple-600"], ["class", "text-500", 4, "ngIf"], [1, "text-center"], ["styleClass", "bg-blue-50 text-blue-700 text-xs", 3, "label"], [3, "value", "severity"], ["pRipple", "", "icon", "pi pi-chart-line", "label", "Voir le Detail ", "size", "small", "severity", "warn", "pTooltip", "Proc\xE9der \xE0 l'analyse du cr\xE9dit", 3, "click"], ["colspan", "6", 1, "text-center", "p-6"], [1, "flex", "flex-column", "align-items-center", "gap-3"], [1, "pi", "pi-chart-line", "text-4xl", "text-400"], [1, "text-600", "font-medium"], [1, "card"], [1, "pi", "pi-list", "mr-2", "text-primary"], ["type", "button", "label", "Afficher les demandes pour notation", "icon", "pi pi-eye", "badgeClass", "p-badge-danger", "severity", "info", 3, "click", "badge"], ["id", "demandes_popover"], [1, "pi", "pi-calendar-plus", "mr-2", "text-primary"], ["styleClass", "bg-green-100 text-green-800 font-semibold", 3, "label"], ["paginatorDropdownAppendTo", "body", "responsiveLayout", "scroll", "currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} demandes", "styleClass", "p-datatable-striped", 3, "value", "paginator", "rows", "showCurrentPageReport", "rowsPerPageOptions", "globalFilterFields"], ["pTemplate", "summary"], ["pInputText", "", "type", "text", "placeholder", "Rechercher par nom, num\xE9ro membre...", 1, "w-full", 3, "input"], ["pSortableColumn", "createAt", 1, "white-space-nowrap", 2, "width", "15%"], ["field", "createAt"], ["pSortableColumn", "codeMembre", 1, "white-space-nowrap", 2, "width", "25%"], [1, "pi", "pi-user", "mr-1"], ["field", "codeMembre"], ["pSortableColumn", "referenceCredit", 1, "white-space-nowrap", 2, "width", "20%"], [1, "pi", "pi-bookmark", "mr-1"], ["field", "referenceCredit"], ["pSortableColumn", "montantCredit", 1, "white-space-nowrap", "text-right", 2, "width", "20%"], ["field", "montantCredit"], [1, "white-space-nowrap", "text-center", 2, "width", "20%"], [1, "font-bold", "text-lg", "text-green-600"], ["pRipple", "", "icon", "pi pi-arrow-right", "label", "Traiter", "size", "small", "severity", "success", "pTooltip", "Proc\xE9der \xE0 la mise en place du cr\xE9dit", 3, "click"], ["colspan", "5", 1, "text-center", "p-6"], [1, "pi", "pi-inbox", "text-4xl", "text-400"], [1, "flex", "align-items-center", "justify-content-between", "p-2", "bg-surface-50", "border-round"], [1, "text-sm", "font-medium"], [1, "pi", "pi-calculator", "mr-1"], [1, "text-sm", "font-semibold", "text-green-600"], [1, "card", "text-center", "p-6"], [1, "flex", "flex-column", "align-items-center", "gap-4"], [1, "pi", "pi-check-circle", "text-6xl", "text-green-500"], [1, "text-xl", "font-semibold", "text-900", "m-0"], [1, "text-600", "m-0", "max-w-30rem"], ["icon", "pi pi-refresh", "label", "Actualiser", "severity", "secondary", 3, "click", "loading"]], template: function RespAgentComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 4)(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "div", 8)(5, "div", 9);
      \u0275\u0275text(6, "\u{1F44B}");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(7, "div", 10)(8, "span", 11);
      \u0275\u0275text(9, "Bonjour, ");
      \u0275\u0275elementStart(10, "span", 12);
      \u0275\u0275text(11);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(12, "span");
      \u0275\u0275text(13, "Agence de ");
      \u0275\u0275elementStart(14, "span", 13);
      \u0275\u0275text(15);
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(16, "div", 14);
      \u0275\u0275template(17, RespAgentComponent_p_chip_17_Template, 1, 1, "p-chip", 15);
      \u0275\u0275element(18, "p-chip", 16);
      \u0275\u0275template(19, RespAgentComponent_p_chip_19_Template, 1, 1, "p-chip", 17);
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(20, RespAgentComponent_div_20_Template, 4, 3, "div", 18)(21, RespAgentComponent_div_21_Template, 3, 1, "div", 19)(22, RespAgentComponent_div_22_Template, 5, 4, "div", 20);
      \u0275\u0275element(23, "p-toast");
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      let tmp_1_0;
      let tmp_3_0;
      let tmp_4_0;
      \u0275\u0275advance(11);
      \u0275\u0275textInterpolate2("", ctx.user == null ? null : ctx.user.firstName, " ", ctx.user == null ? null : ctx.user.lastName, "!");
      \u0275\u0275advance(4);
      \u0275\u0275textInterpolate((tmp_1_0 = ctx.state().agence) == null ? null : tmp_1_0.libele);
      \u0275\u0275advance(2);
      \u0275\u0275property("ngIf", ctx.hasAnalyseCredits());
      \u0275\u0275advance();
      \u0275\u0275propertyInterpolate1("label", "Demandes en attente: ", ((tmp_3_0 = ctx.state().filteredDemandeAttentes) == null ? null : tmp_3_0.length) || 0, "");
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ((tmp_4_0 = ctx.state().filteredDemandeAttentes) == null ? null : tmp_4_0.length) > 0);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.state().error && !ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.state().loading);
    }
  }, dependencies: [CommonModule, NgIf, DatePipe, TableModule, Table, PrimeTemplate, SortableColumn, SortIcon, InputIconModule, InputIcon, IconFieldModule, IconField, TagModule, Tag, PopoverModule, Popover, ButtonModule, Button, ToastModule, Toast, ProgressSpinnerModule, ProgressSpinner, ChipModule, Chip, CardModule, DividerModule, Divider, TabViewModule], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(RespAgentComponent, { className: "RespAgentComponent", filePath: "src/app/pages/dashboard/resp-agent/resp-agent.component.ts", lineNumber: 30 });
})();

// src/app/pages/dashboard/agent-credit/list-stock/list-stock.component.ts
var _c03 = () => ({ width: "450px" });
var _c13 = (a0, a1) => ({ "badge-dr": a0, "badge-user": a1 });
var _c23 = (a0) => ({ "row-urgent": a0 });
var _c32 = (a0) => ({ "ng-invalid": a0 });
function ListStockComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 10)(1, "span", 11);
    \u0275\u0275text(2, "D\xE9l\xE9gation : ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 12);
    \u0275\u0275text(4);
    \u0275\u0275pipe(5, "uppercase");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 13);
    \u0275\u0275text(7, "R\xF4le : ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 14);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(5, 3, (tmp_1_0 = ctx_r0.delegation()) == null ? null : tmp_1_0.libele));
    \u0275\u0275advance(4);
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction2(5, _c13, ctx_r0.user.role === "DR", ctx_r0.user.role !== "DR"));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.user.role, " ");
  }
}
function ListStockComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 15);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_p_table_7_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275element(1, "th", 20);
    \u0275\u0275elementStart(2, "th");
    \u0275\u0275text(3, "N\xB0 Commande");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th");
    \u0275\u0275text(5, "Service");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th");
    \u0275\u0275text(7, "Cat\xE9gorie");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "th");
    \u0275\u0275text(9, "Statut");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th");
    \u0275\u0275text(11, "Validation");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "th");
    \u0275\u0275text(13, "Date Cr\xE9ation");
    \u0275\u0275elementEnd()();
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_p_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const details_r5 = \u0275\u0275nextContext().ngIf;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(details_r5.detailStandard);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_div_2_div_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 48)(1, "strong");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const key_r6 = ctx.$implicit;
    const details_r5 = \u0275\u0275nextContext(2).ngIf;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", key_r6, ":");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", details_r5[key_r6], " ");
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275template(1, ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_div_2_div_1_Template, 4, 2, "div", 47);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const details_r5 = \u0275\u0275nextContext().ngIf;
    const ctx_r0 = \u0275\u0275nextContext(4);
    \u0275\u0275advance();
    \u0275\u0275property("ngForOf", ctx_r0.Object.keys(details_r5));
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div");
    \u0275\u0275template(1, ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_p_1_Template, 2, 1, "p", 25)(2, ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_div_2_Template, 2, 1, "div", 25);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const details_r5 = ctx.ngIf;
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", details_r5.detailStandard);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !details_r5.detailStandard);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_tr_48_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 32);
    \u0275\u0275element(2, "i", 49);
    \u0275\u0275text(3, " Date de traitement ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td", 34);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(stock_r3.dateTraitement));
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_tr_49_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 32);
    \u0275\u0275element(2, "i", 50);
    \u0275\u0275text(3, " Trait\xE9 par ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "td", 34);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("ID: ", stock_r3.traitePar, "");
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_div_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 55)(1, "div", 56);
    \u0275\u0275element(2, "i", 57);
    \u0275\u0275text(3, " Observations ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 58);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(3).$implicit;
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r3.observations);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_div_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 59)(1, "div", 60);
    \u0275\u0275element(2, "i", 61);
    \u0275\u0275text(3, " Motif de refus/rejet ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 62);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(3).$implicit;
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r3.motif);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1)(1, "div", 28)(2, "div", 29);
    \u0275\u0275element(3, "i", 51);
    \u0275\u0275elementStart(4, "span");
    \u0275\u0275text(5, "Observations & Motifs");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "div", 52);
    \u0275\u0275template(7, ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_div_7_Template, 6, 1, "div", 53)(8, ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_div_8_Template, 6, 1, "div", 54);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(7);
    \u0275\u0275property("ngIf", stock_r3.observations);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.motif);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_53_span_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(3).$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("par l'utilisateur #", stock_r3.traitePar, "");
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_div_53_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 63);
    \u0275\u0275element(1, "i", 30);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275template(4, ListStockComponent_p_table_7_ng_template_2_tr_16_div_53_span_4_Template, 2, 1, "span", 25);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("Trait\xE9 le ", ctx_r0.formatDate(stock_r3.dateTraitement), " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.traitePar);
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_span_59_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " Actions disponibles pour cette commande en cours ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_span_60_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " Cette commande a \xE9t\xE9 valid\xE9e par un DR ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_span_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " Cette commande a \xE9t\xE9 accept\xE9e ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_span_62_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " Cette commande a \xE9t\xE9 refus\xE9e ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_p_table_7_ng_template_2_tr_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td", 26)(2, "div", 27)(3, "div", 0)(4, "div", 1)(5, "div", 28)(6, "div", 29);
    \u0275\u0275element(7, "i", 30);
    \u0275\u0275elementStart(8, "span");
    \u0275\u0275text(9, "Informations Compl\xE8tes de la Commande");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "table", 31)(11, "tbody")(12, "tr")(13, "td", 32);
    \u0275\u0275element(14, "i", 33);
    \u0275\u0275text(15, " Demandeur ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "td", 34);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "tr")(19, "td", 32);
    \u0275\u0275element(20, "i", 35);
    \u0275\u0275text(21, " D\xE9l\xE9gation ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "td", 34);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(24, "tr")(25, "td", 32);
    \u0275\u0275element(26, "i", 36);
    \u0275\u0275text(27, " Agence ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "td", 34);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(30, "tr")(31, "td", 32);
    \u0275\u0275element(32, "i", 37);
    \u0275\u0275text(33, " Point de vente ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "td", 34);
    \u0275\u0275text(35);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(36, "tr")(37, "td", 32);
    \u0275\u0275element(38, "i", 38);
    \u0275\u0275text(39, " Description ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "td", 34);
    \u0275\u0275template(41, ListStockComponent_p_table_7_ng_template_2_tr_16_div_41_Template, 3, 2, "div", 25);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(42, "tr")(43, "td", 32);
    \u0275\u0275element(44, "i", 39);
    \u0275\u0275text(45, " Quantit\xE9 command\xE9e ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(46, "td", 34);
    \u0275\u0275text(47);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(48, ListStockComponent_p_table_7_ng_template_2_tr_16_tr_48_Template, 6, 1, "tr", 25)(49, ListStockComponent_p_table_7_ng_template_2_tr_16_tr_49_Template, 6, 1, "tr", 25);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(50, ListStockComponent_p_table_7_ng_template_2_tr_16_div_50_Template, 9, 2, "div", 40);
    \u0275\u0275elementStart(51, "div", 1)(52, "div", 41);
    \u0275\u0275template(53, ListStockComponent_p_table_7_ng_template_2_tr_16_div_53_Template, 5, 2, "div", 42);
    \u0275\u0275elementStart(54, "div", 43)(55, "button", 44);
    \u0275\u0275listener("click", function ListStockComponent_p_table_7_ng_template_2_tr_16_Template_button_click_55_listener() {
      \u0275\u0275restoreView(_r4);
      const stock_r3 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.openRejectDialog(stock_r3));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(56, "button", 45);
    \u0275\u0275listener("click", function ListStockComponent_p_table_7_ng_template_2_tr_16_Template_button_click_56_listener() {
      \u0275\u0275restoreView(_r4);
      const stock_r3 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.openValidateDialog(stock_r3));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(57, "div", 46);
    \u0275\u0275element(58, "i", 30);
    \u0275\u0275template(59, ListStockComponent_p_table_7_ng_template_2_tr_16_span_59_Template, 2, 0, "span", 25)(60, ListStockComponent_p_table_7_ng_template_2_tr_16_span_60_Template, 2, 0, "span", 25)(61, ListStockComponent_p_table_7_ng_template_2_tr_16_span_61_Template, 2, 0, "span", 25)(62, ListStockComponent_p_table_7_ng_template_2_tr_16_span_62_Template, 2, 0, "span", 25);
    \u0275\u0275elementEnd()()()()()()();
  }
  if (rf & 2) {
    const stock_r3 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("@rowExpand", ctx_r0.isExpanded(stock_r3) ? "expanded" : "collapsed");
    \u0275\u0275advance(17);
    \u0275\u0275textInterpolate(stock_r3.userFullName || stock_r3.username);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(stock_r3.delegationLibele || "-");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(stock_r3.agenceLibele || "-");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(stock_r3.pointventeLibele || "-");
    \u0275\u0275advance(6);
    \u0275\u0275property("ngIf", ctx_r0.parseDetails(stock_r3.detailBonCommande));
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(stock_r3.qte || 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.dateTraitement);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.traitePar);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.observations || stock_r3.motif);
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", stock_r3.dateTraitement);
    \u0275\u0275advance(2);
    \u0275\u0275property("disabled", ctx_r0.isRejectDisabled(stock_r3) || ctx_r0.processingAction())("pTooltip", ctx_r0.getRejectTooltip(stock_r3));
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r0.isValidateDisabled(stock_r3) || ctx_r0.processingAction())("pTooltip", ctx_r0.getValidateTooltip(stock_r3));
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", stock_r3.status === "ENCOURS" && (!stock_r3.stateValidation || stock_r3.stateValidation === "EN_ATTENTE"));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.stateValidation === "VALIDE");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.stateValidation === "ACCEPTE");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", stock_r3.stateValidation === "REFUSE");
  }
}
function ListStockComponent_p_table_7_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr", 21)(1, "td")(2, "button", 22);
    \u0275\u0275listener("click", function ListStockComponent_p_table_7_ng_template_2_Template_button_click_2_listener() {
      const stock_r3 = \u0275\u0275restoreView(_r2).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.toggleRow(stock_r3));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(3, "td", 12);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "td");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "td")(8, "span", 23);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "td");
    \u0275\u0275element(11, "p-tag", 24);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "td");
    \u0275\u0275element(13, "p-tag", 24);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "td");
    \u0275\u0275text(15);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(16, ListStockComponent_p_table_7_ng_template_2_tr_16_Template, 63, 19, "tr", 25);
  }
  if (rf & 2) {
    const stock_r3 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("ngClass", \u0275\u0275pureFunction1(12, _c23, ctx_r0.isUrgent(stock_r3)));
    \u0275\u0275advance(2);
    \u0275\u0275property("pTooltip", ctx_r0.isExpanded(stock_r3) ? "Masquer les d\xE9tails" : "Afficher les d\xE9tails")("icon", ctx_r0.isExpanded(stock_r3) ? "pi pi-chevron-down" : "pi pi-chevron-right");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(stock_r3.numeroCommande);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(stock_r3.service);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(stock_r3.categorieLibele || "-");
    \u0275\u0275advance(2);
    \u0275\u0275property("value", stock_r3.status)("severity", ctx_r0.getStatusSeverity(stock_r3.status));
    \u0275\u0275advance(2);
    \u0275\u0275property("value", ctx_r0.getStateValidationLabel(stock_r3.stateValidation || "EN_ATTENTE"))("severity", ctx_r0.getValidationSeverity(stock_r3.stateValidation || "EN_ATTENTE"));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(stock_r3.dateCreation));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r0.isExpanded(stock_r3));
  }
}
function ListStockComponent_p_table_7_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 64);
    \u0275\u0275element(2, "i", 65);
    \u0275\u0275elementStart(3, "p", 66);
    \u0275\u0275text(4, "Aucun bon de commande trouv\xE9");
    \u0275\u0275elementEnd()()();
  }
}
function ListStockComponent_p_table_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-table", 16);
    \u0275\u0275template(1, ListStockComponent_p_table_7_ng_template_1_Template, 14, 0, "ng-template", 17)(2, ListStockComponent_p_table_7_ng_template_2_Template, 17, 14, "ng-template", 18)(3, ListStockComponent_p_table_7_ng_template_3_Template, 5, 0, "ng-template", 19);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("value", ctx_r0.stocks())("paginator", true)("rows", 10)("showCurrentPageReport", true);
  }
}
function ListStockComponent_div_9_span_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " En tant que DR, cette commande sera marqu\xE9e comme ");
    \u0275\u0275elementStart(2, "strong");
    \u0275\u0275text(3, "VALID\xC9E");
    \u0275\u0275elementEnd();
    \u0275\u0275text(4, ". ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_div_9_span_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1, " Cette commande sera marqu\xE9e comme ");
    \u0275\u0275elementStart(2, "strong");
    \u0275\u0275text(3, "ACCEPT\xC9E");
    \u0275\u0275elementEnd();
    \u0275\u0275text(4, ". ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 67)(1, "div", 68)(2, "p", 69)(3, "strong");
    \u0275\u0275text(4, "Commande :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 69)(7, "strong");
    \u0275\u0275text(8, "Service :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p", 69)(11, "strong");
    \u0275\u0275text(12, "Demandeur :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 70);
    \u0275\u0275element(15, "i", 71);
    \u0275\u0275template(16, ListStockComponent_div_9_span_16_Template, 5, 0, "span", 25)(17, ListStockComponent_div_9_span_17_Template, 5, 0, "span", 25);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "div", 72)(19, "label", 73);
    \u0275\u0275text(20, "Observations (optionnel)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "textarea", 74);
    \u0275\u0275twoWayListener("ngModelChange", function ListStockComponent_div_9_Template_textarea_ngModelChange_21_listener($event) {
      \u0275\u0275restoreView(_r7);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.validateObservations, $event) || (ctx_r0.validateObservations = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275text(22, "            ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().numeroCommande, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().service, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().userFullName || ctx_r0.selectedStock().username, " ");
    \u0275\u0275advance(3);
    \u0275\u0275property("ngIf", (ctx_r0.user == null ? null : ctx_r0.user.role) === "DR");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", (ctx_r0.user == null ? null : ctx_r0.user.role) !== "DR");
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.validateObservations);
    \u0275\u0275property("disabled", ctx_r0.processingAction());
  }
}
function ListStockComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 75);
    \u0275\u0275listener("click", function ListStockComponent_ng_template_10_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.closeDialogs());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(1, "button", 76);
    \u0275\u0275listener("click", function ListStockComponent_ng_template_10_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.validateCommand());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("disabled", ctx_r0.processingAction());
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r0.processingAction())("loading", ctx_r0.processingAction());
  }
}
function ListStockComponent_div_12_small_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 85);
    \u0275\u0275text(1, " Le motif de rejet est obligatoire ");
    \u0275\u0275elementEnd();
  }
}
function ListStockComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 67)(1, "div", 68)(2, "p", 69)(3, "strong");
    \u0275\u0275text(4, "Commande :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 69)(7, "strong");
    \u0275\u0275text(8, "Service :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p", 69)(11, "strong");
    \u0275\u0275text(12, "Demandeur :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 77);
    \u0275\u0275element(15, "i", 78);
    \u0275\u0275text(16, " Cette action est irr\xE9versible. La commande sera marqu\xE9e comme ");
    \u0275\u0275elementStart(17, "strong");
    \u0275\u0275text(18, "REFUS\xC9E");
    \u0275\u0275elementEnd();
    \u0275\u0275text(19, ". ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "div", 79)(21, "label", 80);
    \u0275\u0275text(22, "Motif de rejet *");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "textarea", 81);
    \u0275\u0275twoWayListener("ngModelChange", function ListStockComponent_div_12_Template_textarea_ngModelChange_23_listener($event) {
      \u0275\u0275restoreView(_r9);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.rejectMotif, $event) || (ctx_r0.rejectMotif = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275text(24, "            ");
    \u0275\u0275elementEnd();
    \u0275\u0275template(25, ListStockComponent_div_12_small_25_Template, 2, 0, "small", 82);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 72)(27, "label", 83);
    \u0275\u0275text(28, "Observations compl\xE9mentaires (optionnel)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "textarea", 84);
    \u0275\u0275twoWayListener("ngModelChange", function ListStockComponent_div_12_Template_textarea_ngModelChange_29_listener($event) {
      \u0275\u0275restoreView(_r9);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.rejectObservations, $event) || (ctx_r0.rejectObservations = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275text(30, "            ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().numeroCommande, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().service, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().userFullName || ctx_r0.selectedStock().username, " ");
    \u0275\u0275advance(10);
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.rejectMotif);
    \u0275\u0275property("disabled", ctx_r0.processingAction())("ngClass", \u0275\u0275pureFunction1(9, _c32, !ctx_r0.rejectMotif() && ctx_r0.showRejectDialog()));
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", !ctx_r0.rejectMotif() && ctx_r0.showRejectDialog());
    \u0275\u0275advance(4);
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.rejectObservations);
    \u0275\u0275property("disabled", ctx_r0.processingAction());
  }
}
function ListStockComponent_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 75);
    \u0275\u0275listener("click", function ListStockComponent_ng_template_13_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.closeDialogs());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(1, "button", 86);
    \u0275\u0275listener("click", function ListStockComponent_ng_template_13_Template_button_click_1_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.rejectCommand());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("disabled", ctx_r0.processingAction());
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r0.processingAction() || !ctx_r0.rejectMotif())("loading", ctx_r0.processingAction());
  }
}
var ListStockComponent = class _ListStockComponent {
  user;
  Object = Object;
  userService = inject(UserService);
  messageService = inject(MessageService);
  confirmationService = inject(ConfirmationService);
  stocks = signal([]);
  delegation = signal(null);
  loading = signal(false);
  delegationId = signal(null);
  expandedRows = signal({});
  // Signals pour les dialogues
  showRejectDialog = signal(false);
  showValidateDialog = signal(false);
  selectedStock = signal(null);
  rejectMotif = signal("");
  validateObservations = signal("");
  rejectObservations = signal("");
  processingAction = signal(false);
  ngOnInit() {
    if (this.user?.delegationId) {
      this.delegationId.set(this.user.delegationId);
      this.loadStocksByDelegation();
    } else {
      this.showWarning("Aucune d\xE9l\xE9gation associ\xE9e \xE0 cet utilisateur");
    }
  }
  isUrgent(stock) {
    return stock && stock.urgent === true;
  }
  /**
   * Ouvrir le dialogue de validation
   */
  openValidateDialog(stock) {
    this.selectedStock.set(stock);
    this.validateObservations.set("");
    this.showValidateDialog.set(true);
  }
  /**
   * Ouvrir le dialogue de rejet
   */
  openRejectDialog(stock) {
    this.selectedStock.set(stock);
    this.rejectMotif.set("");
    this.rejectObservations.set("");
    this.showRejectDialog.set(true);
  }
  toggleRow(stock) {
    const currentExpanded = this.expandedRows();
    const stockId = stock.idCmd.toString();
    this.expandedRows.set(__spreadProps(__spreadValues({}, currentExpanded), {
      [stockId]: !currentExpanded[stockId]
    }));
  }
  isExpanded(stock) {
    return this.expandedRows()[stock.idCmd.toString()] || false;
  }
  loadStocksByDelegation() {
    const delId = this.delegationId();
    if (!delId)
      return;
    this.loading.set(true);
    this.userService.getStockEncoursByDelegation$(delId).subscribe({
      next: (response) => {
        console.log("Stocks par d\xE9l\xE9gation:", response);
        if (response?.data?.stocks) {
          this.stocks.set(response.data.stocks);
          this.delegation.set(response.data.delegation);
          this.showSuccess(`${response.data.stocks.length} bon(s) de commande charg\xE9(s)`);
        } else {
          this.stocks.set([]);
        }
      },
      error: (error) => {
        console.error("Erreur:", error);
        this.showError("Erreur lors du chargement des bons de commande");
        this.stocks.set([]);
      },
      complete: () => {
        this.loading.set(false);
      }
    });
  }
  parseDetails(detailJson) {
    try {
      if (!detailJson)
        return null;
      return JSON.parse(detailJson);
    } catch (e) {
      return { detailStandard: detailJson };
    }
  }
  getStatusSeverity(status) {
    switch (status) {
      case "ACCEPT":
        return "success";
      case "REJET":
        return "danger";
      case "ENCOURS":
        return "warn";
      default:
        return "warn";
    }
  }
  /**
   * Obtenir la sévérité pour le tag de validation
   */
  getValidationSeverity(validation) {
    switch (validation) {
      case "VALIDE":
      case "ACCEPTE":
        return "success";
      case "REFUSE":
        return "danger";
      case "EN_ATTENTE":
      default:
        return "warn";
    }
  }
  formatDate(date) {
    if (!date)
      return "-";
    if (Array.isArray(date)) {
      const [year, month, day, hour = 0, minute = 0] = date;
      return new Date(year, month - 1, day, hour, minute).toLocaleString("fr-FR");
    }
    return new Date(date).toLocaleString("fr-FR");
  }
  showSuccess(message) {
    this.messageService.add({
      severity: "success",
      summary: "Succ\xE8s",
      detail: message,
      life: 3e3
    });
  }
  showError(message) {
    this.messageService.add({
      severity: "error",
      summary: "Erreur",
      detail: message,
      life: 5e3
    });
  }
  showWarning(message) {
    this.messageService.add({
      severity: "warn",
      summary: "Attention",
      detail: message,
      life: 4e3
    });
  }
  /**
   * Rejeter une commande (avec confirmation)
   */
  rejectCommand(stock) {
    const stockToReject = stock || this.selectedStock();
    if (!stockToReject)
      return;
    if (!this.rejectMotif() || this.rejectMotif().trim().length === 0) {
      this.showWarning("Le motif de rejet est obligatoire");
      return;
    }
    this.confirmationService.confirm({
      message: `\xCAtes-vous s\xFBr de vouloir rejeter la commande ${stockToReject.numeroCommande} ?`,
      header: "Confirmation de rejet",
      icon: "pi pi-exclamation-triangle",
      acceptLabel: "Oui, rejeter",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-danger",
      accept: () => {
        this.performRejection(stockToReject);
      },
      reject: () => {
        this.showInfo("Rejet annul\xE9");
      }
    });
  }
  /**
   * Effectuer le rejet
   */
  performRejection(stock) {
    this.processingAction.set(true);
    const motif = this.rejectMotif();
    const observations = this.rejectObservations();
    this.userService.rejectCommand(stock.idCmd, motif, observations).subscribe({
      next: (response) => {
        this.showSuccess(`Commande ${stock.numeroCommande} rejet\xE9e avec succ\xE8s`);
        this.loadStocksByDelegation();
        this.closeDialogs();
        this.updateLocalStock(stock.idCmd, {
          stateValidation: "REFUSE",
          motif,
          dateTraitement: /* @__PURE__ */ new Date(),
          traitePar: this.user?.userId
        });
      },
      error: (error) => {
        console.error("Erreur rejet:", error);
        this.showError(error.error?.message || "Erreur lors du rejet de la commande");
      },
      complete: () => {
        this.processingAction.set(false);
      }
    });
  }
  /**
   * Valider une commande (avec confirmation)
   */
  validateCommand(stock) {
    const stockToValidate = stock || this.selectedStock();
    if (!stockToValidate)
      return;
    this.confirmationService.confirm({
      message: `\xCAtes-vous s\xFBr de vouloir valider la commande ${stockToValidate.numeroCommande} ?`,
      header: "Confirmation de validation",
      icon: "pi pi-check-circle",
      acceptLabel: "Oui, valider",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.performValidation(stockToValidate);
      },
      reject: () => {
        this.showInfo("Validation annul\xE9e");
        this.closeDialogs();
      }
    });
  }
  /**
   * Effectuer la validation
   */
  performValidation(stock) {
    this.processingAction.set(true);
    const observations = this.validateObservations();
    this.userService.validateCommand(stock.idCmd, observations).subscribe({
      next: (response) => {
        this.showSuccess(`Commande ${stock.numeroCommande} valid\xE9e avec succ\xE8s`);
        this.loadStocksByDelegation();
        this.closeDialogs();
        this.updateLocalStock(stock.idCmd, {
          stateValidation: this.user?.role === "DR" ? "VALIDE" : "ACCEPTE",
          dateTraitement: /* @__PURE__ */ new Date(),
          traitePar: this.user?.userId
        });
      },
      error: (error) => {
        console.error("Erreur validation:", error);
        this.showError(error.error?.message || "Erreur lors de la validation de la commande");
      },
      complete: () => {
        this.processingAction.set(false);
      }
    });
  }
  /**
   * Vérifie si les boutons d'action doivent être affichés
   */
  shouldShowActionButtons(stock) {
    return stock.status === "ENCOURS" || stock.stateValidation === "EN_ATTENTE";
  }
  /**
   * Vérifier si le bouton de rejet doit être désactivé
   */
  isRejectDisabled(stock) {
    return stock.status !== "ENCOURS" || stock.stateValidation === "REFUSE" || stock.stateValidation === "VALIDE" || stock.stateValidation === "ACCEPTE";
  }
  /**
   * Vérifier si le bouton de validation doit être désactivé
   */
  isValidateDisabled(stock) {
    return stock.status !== "ENCOURS" || stock.stateValidation === "REFUSE" || stock.stateValidation === "VALIDE" || stock.stateValidation === "ACCEPTE";
  }
  /**
   * Obtenir le libellé du state validation
   */
  getStateValidationLabel(stateValidation) {
    const labels = {
      VALIDE: "Valid\xE9 par DR",
      ACCEPTE: "Accept\xE9",
      REFUSE: "Refus\xE9",
      EN_ATTENTE: "En attente"
    };
    return labels[stateValidation] || stateValidation;
  }
  /**
   * Obtenir le tooltip pour le bouton de rejet
   */
  getRejectTooltip(stock) {
    if (stock.stateValidation === "REFUSE") {
      return "Cette commande a d\xE9j\xE0 \xE9t\xE9 rejet\xE9e";
    }
    if (stock.stateValidation === "VALIDE" || stock.stateValidation === "ACCEPTE") {
      return "Impossible de rejeter une commande valid\xE9e";
    }
    if (stock.status === "ACCEPT") {
      return "Impossible de rejeter une commande accept\xE9e";
    }
    if (stock.status === "REJET") {
      return "Cette commande a d\xE9j\xE0 \xE9t\xE9 rejet\xE9e";
    }
    return "Rejeter cette commande";
  }
  /**
   * Obtenir le tooltip pour le bouton de validation
   */
  getValidateTooltip(stock) {
    if (stock.stateValidation === "VALIDE" || stock.stateValidation === "ACCEPTE") {
      return "Cette commande a d\xE9j\xE0 \xE9t\xE9 valid\xE9e";
    }
    if (stock.stateValidation === "REFUSE") {
      return "Impossible de valider une commande refus\xE9e";
    }
    if (stock.status === "ACCEPT") {
      return "Cette commande a d\xE9j\xE0 \xE9t\xE9 accept\xE9e";
    }
    if (stock.status === "REJET") {
      return "Impossible de valider une commande rejet\xE9e";
    }
    return "Valider cette commande";
  }
  /**
   * Message d'information temporaire
   */
  showInfo(message) {
    this.messageService.add({
      severity: "info",
      summary: "Information",
      detail: message,
      life: 3e3
    });
  }
  /**
   * Fermer tous les dialogues
   */
  closeDialogs() {
    this.showValidateDialog.set(false);
    this.showRejectDialog.set(false);
    this.selectedStock.set(null);
    this.rejectMotif.set("");
    this.validateObservations.set("");
    this.rejectObservations.set("");
  }
  /**
   * Mettre à jour un stock localement (optimistic update)
   */
  updateLocalStock(idCmd, updates) {
    const currentStocks = this.stocks();
    const updatedStocks = currentStocks.map((stock) => {
      if (stock.idCmd === idCmd) {
        return __spreadValues(__spreadValues({}, stock), updates);
      }
      return stock;
    });
    this.stocks.set(updatedStocks);
  }
  static \u0275fac = function ListStockComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _ListStockComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _ListStockComponent, selectors: [["app-list-stock"]], inputs: { user: "user" }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 14, vars: 21, consts: [[1, "grid"], [1, "col-12"], ["header", "Bons de Commande - Espace DR"], ["class", "mb-3", 4, "ngIf"], ["class", "flex justify-content-center p-4", 4, "ngIf"], ["currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} entr\xE9es", "responsiveLayout", "scroll", "dataKey", "idCmd", 3, "value", "paginator", "rows", "showCurrentPageReport", 4, "ngIf"], ["header", "Validation de la commande", 3, "visibleChange", "visible", "modal", "draggable", "resizable", "closable"], ["class", "dialog-content", 4, "ngIf"], ["pTemplate", "footer"], ["header", "Rejet de la commande", 3, "visibleChange", "visible", "modal", "draggable", "resizable", "closable"], [1, "mb-3"], [1, "ml-3", "text-500"], [1, "font-bold"], [1, "ml-4", "text-500"], [1, "font-bold", "badge", 3, "ngClass"], [1, "flex", "justify-content-center", "p-4"], ["currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} entr\xE9es", "responsiveLayout", "scroll", "dataKey", "idCmd", 3, "value", "paginator", "rows", "showCurrentPageReport"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], [2, "width", "3rem"], [3, "ngClass"], ["type", "button", "pButton", "", 1, "p-button-text", "p-button-rounded", "p-button-plain", 3, "click", "pTooltip", "icon"], [1, "badge", "badge-info"], [3, "value", "severity"], [4, "ngIf"], ["colspan", "8"], [1, "detail-container"], [1, "detail-card"], [1, "detail-header"], [1, "pi", "pi-info-circle"], [1, "detail-table"], [1, "label-cell"], [1, "pi", "pi-user", "mini-icon"], [1, "value-cell"], [1, "pi", "pi-map-marker", "mini-icon"], [1, "pi", "pi-home", "mini-icon"], [1, "pi", "pi-shopping-cart", "mini-icon"], [1, "pi", "pi-file-text", "mini-icon"], [1, "pi", "pi-sort-numeric-up", "mini-icon"], ["class", "col-12", 4, "ngIf"], [1, "action-buttons-container"], ["class", "action-status-info", 4, "ngIf"], [1, "action-buttons"], ["pButton", "", "type", "button", "label", "Rejeter", "icon", "pi pi-times", 1, "p-button-danger", "p-button-raised", 3, "click", "disabled", "pTooltip"], ["pButton", "", "type", "button", "label", "Valider", "icon", "pi pi-check", 1, "p-button-success", "p-button-raised", 3, "click", "disabled", "pTooltip"], [1, "action-info"], ["class", "mb-1", 4, "ngFor", "ngForOf"], [1, "mb-1"], [1, "pi", "pi-calendar", "mini-icon"], [1, "pi", "pi-user-edit", "mini-icon"], [1, "pi", "pi-comments"], [1, "observations-content"], ["class", "observation-box", 4, "ngIf"], ["class", "motif-box", 4, "ngIf"], [1, "observation-box"], [1, "observation-label"], [1, "pi", "pi-eye", "mini-icon"], [1, "observation-text"], [1, "motif-box"], [1, "motif-label"], [1, "pi", "pi-exclamation-triangle"], [1, "motif-text"], [1, "action-status-info"], ["colspan", "8", 1, "text-center", "p-4"], [1, "pi", "pi-inbox", "text-4xl", "text-300"], [1, "mt-3"], [1, "dialog-content"], [1, "info-section", "mb-3"], [1, "mb-2"], [1, "alert", "alert-info", "mb-3"], [1, "pi", "pi-info-circle", "mr-2"], [1, "field"], ["for", "validate-observations"], ["pTextarea", "", "id", "validate-observations", "rows", "3", "placeholder", "Ajoutez des observations si n\xE9cessaire...", 1, "w-full", 3, "ngModelChange", "ngModel", "disabled"], ["pButton", "", "label", "Annuler", "icon", "pi pi-times", 1, "p-button-text", 3, "click", "disabled"], ["pButton", "", "label", "Confirmer la validation", "icon", "pi pi-check", 1, "p-button-success", 3, "click", "disabled", "loading"], [1, "alert", "alert-warning", "mb-3"], [1, "pi", "pi-exclamation-triangle", "mr-2"], [1, "field", "mb-3"], ["for", "reject-motif", 1, "required"], ["pTextarea", "", "id", "reject-motif", "rows", "3", "placeholder", "Indiquez le motif de rejet (obligatoire)...", 1, "w-full", 3, "ngModelChange", "ngModel", "disabled", "ngClass"], ["class", "p-error", 4, "ngIf"], ["for", "reject-observations"], ["id", "reject-observations", "pTextarea", "", "rows", "2", "placeholder", "Observations suppl\xE9mentaires...", 1, "w-full", 3, "ngModelChange", "ngModel", "disabled"], [1, "p-error"], ["pButton", "", "label", "Confirmer le rejet", "icon", "pi pi-ban", 1, "p-button-danger", 3, "click", "disabled", "loading"]], template: function ListStockComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1);
      \u0275\u0275element(2, "p-toast")(3, "p-confirmDialog");
      \u0275\u0275elementStart(4, "p-card", 2);
      \u0275\u0275template(5, ListStockComponent_div_5_Template, 10, 8, "div", 3)(6, ListStockComponent_div_6_Template, 2, 0, "div", 4)(7, ListStockComponent_p_table_7_Template, 4, 4, "p-table", 5);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(8, "p-dialog", 6);
      \u0275\u0275twoWayListener("visibleChange", function ListStockComponent_Template_p_dialog_visibleChange_8_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.showValidateDialog, $event) || (ctx.showValidateDialog = $event);
        return $event;
      });
      \u0275\u0275template(9, ListStockComponent_div_9_Template, 23, 7, "div", 7)(10, ListStockComponent_ng_template_10_Template, 2, 3, "ng-template", 8);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(11, "p-dialog", 9);
      \u0275\u0275twoWayListener("visibleChange", function ListStockComponent_Template_p_dialog_visibleChange_11_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.showRejectDialog, $event) || (ctx.showRejectDialog = $event);
        return $event;
      });
      \u0275\u0275template(12, ListStockComponent_div_12_Template, 31, 11, "div", 7)(13, ListStockComponent_ng_template_13_Template, 2, 3, "ng-template", 8);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(5);
      \u0275\u0275property("ngIf", ctx.user);
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.loading());
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", !ctx.loading());
      \u0275\u0275advance();
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(19, _c03));
      \u0275\u0275twoWayProperty("visible", ctx.showValidateDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false)("closable", !ctx.processingAction());
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.selectedStock());
      \u0275\u0275advance(2);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(20, _c03));
      \u0275\u0275twoWayProperty("visible", ctx.showRejectDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false)("closable", !ctx.processingAction());
      \u0275\u0275advance();
      \u0275\u0275property("ngIf", ctx.selectedStock());
    }
  }, dependencies: [
    CommonModule,
    NgClass,
    NgForOf,
    NgIf,
    UpperCasePipe,
    FormsModule,
    DefaultValueAccessor,
    NgControlStatus,
    NgModel,
    TableModule,
    Table,
    PrimeTemplate,
    TagModule,
    Tag,
    ButtonModule,
    ButtonDirective,
    CardModule,
    Card,
    ToastModule,
    Toast,
    ProgressSpinnerModule,
    ProgressSpinner,
    DividerModule,
    TooltipModule,
    Tooltip,
    DialogModule,
    Dialog,
    ConfirmDialogModule,
    ConfirmDialog,
    TextareaModule,
    Textarea
  ], styles: ['\n\n[_nghost-%COMP%]     .detail-container {\n  padding: 1.5rem;\n  background:\n    linear-gradient(\n      135deg,\n      #f5f7fa 0%,\n      #f9fbfd 100%);\n  border-radius: 12px;\n  animation: _ngcontent-%COMP%_slideDown 0.3s ease-out;\n}\n[_nghost-%COMP%]     .detail-card {\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  margin-bottom: 1rem;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n[_nghost-%COMP%]     .detail-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n[_nghost-%COMP%]     .detail-header {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  padding: 0.75rem 1rem;\n  font-weight: 600;\n  font-size: 0.95rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .detail-header i {\n  font-size: 1.1rem;\n}\n[_nghost-%COMP%]     .detail-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n[_nghost-%COMP%]     .detail-table tbody tr {\n  border-bottom: 1px solid #f0f0f0;\n  transition: background-color 0.2s ease;\n}\n[_nghost-%COMP%]     .detail-table tbody tr:last-child {\n  border-bottom: none;\n}\n[_nghost-%COMP%]     .detail-table tbody tr:hover {\n  background-color: #f8f9fc;\n}\n[_nghost-%COMP%]     .detail-table .label-cell {\n  padding: 0.75rem 1rem;\n  color: #6b7280;\n  font-size: 0.875rem;\n  font-weight: 500;\n  width: 45%;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .detail-table .label-cell .mini-icon {\n  color: #9ca3af;\n  font-size: 0.875rem;\n}\n[_nghost-%COMP%]     .detail-table .value-cell {\n  padding: 0.75rem 1rem;\n  color: #1f2937;\n  font-size: 0.9rem;\n  font-weight: 600;\n}\n[_nghost-%COMP%]     .description-content {\n  padding: 1rem;\n}\n[_nghost-%COMP%]     .description-content .description-box {\n  background: #f9fafb;\n  border-left: 4px solid #667eea;\n  padding: 1rem;\n  border-radius: 6px;\n}\n[_nghost-%COMP%]     .description-content .description-box .description-text {\n  margin: 0;\n  color: #374151;\n  line-height: 1.6;\n  font-size: 0.95rem;\n}\n[_nghost-%COMP%]     .description-content .description-box .description-items {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .description-content .description-box .description-items .description-item {\n  display: flex;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .description-content .description-box .description-items .description-item .item-key {\n  color: #6b7280;\n  font-weight: 500;\n  min-width: 120px;\n}\n[_nghost-%COMP%]     .description-content .description-box .description-items .description-item .item-value {\n  color: #1f2937;\n  font-weight: 600;\n}\n[_nghost-%COMP%]     .observations-content {\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n[_nghost-%COMP%]     .observations-content .observation-box {\n  background: #e0f2fe;\n  border-radius: 8px;\n  padding: 1rem;\n  border-left: 4px solid #0ea5e9;\n}\n[_nghost-%COMP%]     .observations-content .observation-box .observation-label {\n  color: #0369a1;\n  font-weight: 600;\n  font-size: 0.875rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .observations-content .observation-box .observation-label i {\n  font-size: 0.875rem;\n}\n[_nghost-%COMP%]     .observations-content .observation-box .observation-text {\n  color: #0c4a6e;\n  line-height: 1.5;\n  font-size: 0.95rem;\n}\n[_nghost-%COMP%]     .observations-content .motif-box {\n  background: #fee2e2;\n  border-radius: 8px;\n  padding: 1rem;\n  border-left: 4px solid #ef4444;\n}\n[_nghost-%COMP%]     .observations-content .motif-box .motif-label {\n  color: #dc2626;\n  font-weight: 600;\n  font-size: 0.875rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .observations-content .motif-box .motif-label i {\n  font-size: 1rem;\n}\n[_nghost-%COMP%]     .observations-content .motif-box .motif-text {\n  color: #991b1b;\n  line-height: 1.5;\n  font-size: 0.95rem;\n  font-weight: 500;\n}\n[_nghost-%COMP%]     .action-buttons-container {\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  padding: 1.5rem;\n  margin-top: 0.5rem;\n  position: relative;\n  overflow: hidden;\n}\n[_nghost-%COMP%]     .action-buttons-container::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background:\n    linear-gradient(\n      90deg,\n      #ef4444,\n      #22c55e);\n  animation: _ngcontent-%COMP%_shimmer 2s ease-in-out infinite;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button {\n  min-width: 140px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  transform: translate(-50%, -50%);\n  transition: width 0.6s, height 0.6s;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button:hover::before {\n  width: 300px;\n  height: 300px;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-danger {\n  background:\n    linear-gradient(\n      135deg,\n      #ef4444 0%,\n      #dc2626 100%);\n  border: none;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-danger:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      #dc2626 0%,\n      #b91c1c 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-danger:active:not(:disabled) {\n  transform: translateY(0);\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-danger:disabled {\n  background: #e5e7eb;\n  color: #9ca3af;\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-success {\n  background:\n    linear-gradient(\n      135deg,\n      #22c55e 0%,\n      #16a34a 100%);\n  border: none;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-success:hover:not(:disabled) {\n  background:\n    linear-gradient(\n      135deg,\n      #16a34a 0%,\n      #15803d 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-success:active:not(:disabled) {\n  transform: translateY(0);\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button.p-button-success:disabled {\n  background: #e5e7eb;\n  color: #9ca3af;\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button .pi {\n  margin-right: 0.5rem;\n  transition: transform 0.3s ease;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button:hover:not(:disabled) .pi {\n  transform: scale(1.2);\n}\n[_nghost-%COMP%]     .action-buttons-container .action-info {\n  text-align: center;\n  color: #6b7280;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n[_nghost-%COMP%]     .action-buttons-container .action-info i {\n  color: #9ca3af;\n  font-size: 1rem;\n  animation: _ngcontent-%COMP%_pulse 2s ease-in-out infinite;\n}\n@keyframes _ngcontent-%COMP%_shimmer {\n  0%, 100% {\n    opacity: 0.5;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n@keyframes _ngcontent-%COMP%_pulse {\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.7;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 1;\n  }\n}\n[_nghost-%COMP%]     .badge-info {\n  background:\n    linear-gradient(\n      135deg,\n      #e0e7ff 0%,\n      #c7d2fe 100%);\n  color: #4338ca;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n@keyframes _ngcontent-%COMP%_slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n@media (max-width: 768px) {\n  [_nghost-%COMP%]     .detail-container {\n    padding: 1rem;\n  }\n  [_nghost-%COMP%]     .detail-table .label-cell, \n   [_nghost-%COMP%]     .detail-table .value-cell {\n    padding: 0.5rem 0.75rem;\n    font-size: 0.8rem;\n  }\n  [_nghost-%COMP%]     .detail-header {\n    font-size: 0.9rem;\n    padding: 0.5rem 0.75rem;\n  }\n  [_nghost-%COMP%]     .action-buttons-container {\n    padding: 1rem;\n  }\n  [_nghost-%COMP%]     .action-buttons-container .action-buttons {\n    flex-direction: column;\n    width: 100%;\n  }\n  [_nghost-%COMP%]     .action-buttons-container .action-buttons .p-button {\n    width: 100%;\n    max-width: 300px;\n  }\n}\n[_nghost-%COMP%]     .p-datatable .p-datatable-tbody tr {\n  transition: background-color 0.2s ease;\n}\n[_nghost-%COMP%]     .p-datatable .p-datatable-tbody tr:hover {\n  background-color: #f8f9fa;\n}\n.dialog-content[_ngcontent-%COMP%] {\n  padding: 0.5rem 0;\n}\n.info-section[_ngcontent-%COMP%] {\n  background: #f8f9fa;\n  padding: 1rem;\n  border-radius: 6px;\n}\n.alert[_ngcontent-%COMP%] {\n  padding: 0.75rem;\n  border-radius: 6px;\n  display: flex;\n  align-items: flex-start;\n}\n.alert-info[_ngcontent-%COMP%] {\n  background: #e0f2fe;\n  color: #0369a1;\n}\n.alert-warning[_ngcontent-%COMP%] {\n  background: #fed7aa;\n  color: #92400e;\n}\n.required[_ngcontent-%COMP%]::after {\n  content: " *";\n  color: #ef4444;\n}\n.field[_ngcontent-%COMP%] {\n  margin-bottom: 1rem;\n}\n.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n  color: #374151;\n}\n.badge-dr[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-weight: 600;\n}\n.badge-user[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #4facfe 0%,\n      #00f2fe 100%);\n  color: white;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-weight: 600;\n}\n.row-urgent[_ngcontent-%COMP%] {\n  background-color: #fef2f2 !important;\n}\n.action-status-info[_ngcontent-%COMP%] {\n  background: #f0f9ff;\n  color: #0369a1;\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n}\n/*# sourceMappingURL=list-stock.component.css.map */'], data: { animation: [
    trigger("rowExpand", [
      state("collapsed", style({ height: "0px", minHeight: "0", display: "none" })),
      state("expanded", style({ height: "*" })),
      transition("expanded <=> collapsed", animate("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))
    ])
  ] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(ListStockComponent, { className: "ListStockComponent", filePath: "src/app/pages/dashboard/agent-credit/list-stock/list-stock.component.ts", lineNumber: 57 });
})();

// src/app/pages/dashboard/agent-credit/correction-rejet-pp/correction-rejet-pp.component.ts
var _c04 = () => [5, 10, 20, 50];
var _c14 = () => ["nomCliente", "codCliente", "numId", "telPrincipal", "codeAgence"];
var _c24 = () => ({ "min-width": "80rem" });
function CorrectionRejetPpComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 3)(1, "h2", 4);
    \u0275\u0275element(2, "i", 5);
    \u0275\u0275text(3, " Corrections Rejet\xE9es ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 6)(5, "p-iconField", 7);
    \u0275\u0275element(6, "p-inputIcon", 8);
    \u0275\u0275elementStart(7, "input", 9);
    \u0275\u0275twoWayListener("ngModelChange", function CorrectionRejetPpComponent_ng_template_3_Template_input_ngModelChange_7_listener($event) {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r1.state().searchValue, $event) || (ctx_r1.state().searchValue = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(8, "button", 10);
    \u0275\u0275listener("click", function CorrectionRejetPpComponent_ng_template_3_Template_button_click_8_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.refresh());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "button", 11);
    \u0275\u0275listener("click", function CorrectionRejetPpComponent_ng_template_3_Template_button_click_9_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.exportData());
    });
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(7);
    \u0275\u0275twoWayProperty("ngModel", ctx_r1.state().searchValue);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 15);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementStart(2, "p");
    \u0275\u0275text(3, "Chargement des corrections rejet\xE9es...");
    \u0275\u0275elementEnd()();
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 16);
    \u0275\u0275element(1, "i", 17);
    \u0275\u0275elementStart(2, "p");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "button", 18);
    \u0275\u0275listener("click", function CorrectionRejetPpComponent_ng_template_4_div_1_Template_button_click_4_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.loadListePPRejet());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.state().error);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 25)(1, "div", 26)(2, "span", 27)(3, "strong");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275text(5, " correction(s) rejet\xE9e(s) sur ");
    \u0275\u0275elementStart(6, "strong");
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275text(8, " total ");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 28);
    \u0275\u0275element(10, "p-tag", 29);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.filteredCount);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.totalRejet);
    \u0275\u0275advance(3);
    \u0275\u0275property("value", "Rejet\xE9es: " + ctx_r1.rejetCount)("rounded", true);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 30);
    \u0275\u0275text(2, "#");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th", 31);
    \u0275\u0275text(4, " Code Client ");
    \u0275\u0275element(5, "p-sortIcon", 32);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th", 33);
    \u0275\u0275text(7, " Nom Complet ");
    \u0275\u0275element(8, "p-sortIcon", 34);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th");
    \u0275\u0275text(10, "N\xB0 Identit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "th");
    \u0275\u0275text(12, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th", 35);
    \u0275\u0275text(14, " Date Naissance ");
    \u0275\u0275element(15, "p-sortIcon", 36);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "th");
    \u0275\u0275text(17, "Sexe");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "th");
    \u0275\u0275text(19, "\xC9tat Civil");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "th", 37);
    \u0275\u0275text(21, " Statut ");
    \u0275\u0275element(22, "p-sortIcon", 38);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "th");
    \u0275\u0275text(24, "Agence");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "th", 39);
    \u0275\u0275text(26, " Date Rejet ");
    \u0275\u0275element(27, "p-sortIcon", 40);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "th", 41);
    \u0275\u0275text(29, "Actions");
    \u0275\u0275elementEnd()();
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_small_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 44);
    \u0275\u0275element(1, "i", 56);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const pp_r5 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", pp_r5.telOtro, " ");
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_span_24_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const pp_r5 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(pp_r5.fechNacimiento);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_span_25_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 57);
    \u0275\u0275text(1, "-");
    \u0275\u0275elementEnd();
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_small_31_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "small", 44);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const pp_r5 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" Conjoint: ", pp_r5.conjoint, " ");
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td")(4, "span", 42);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "td")(7, "div", 43)(8, "strong");
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "small", 44);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(12, "td")(13, "div", 45)(14, "span");
    \u0275\u0275text(15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "small", 44);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(18, "td")(19, "div", 46);
    \u0275\u0275element(20, "i", 47);
    \u0275\u0275text(21);
    \u0275\u0275template(22, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_small_22_Template, 3, 1, "small", 48);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "td");
    \u0275\u0275template(24, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_span_24_Template, 2, 1, "span", 49)(25, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_span_25_Template, 2, 0, "span", 50);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "td");
    \u0275\u0275element(27, "p-tag", 51);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "td")(29, "span");
    \u0275\u0275text(30);
    \u0275\u0275elementEnd();
    \u0275\u0275template(31, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_small_31_Template, 2, 1, "small", 48);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "td");
    \u0275\u0275element(33, "p-tag", 51);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(34, "td")(35, "span", 52);
    \u0275\u0275text(36);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "td")(38, "small", 53);
    \u0275\u0275text(39);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(40, "td")(41, "div", 54)(42, "button", 55);
    \u0275\u0275listener("click", function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_Template_button_click_42_listener() {
      const pp_r5 = \u0275\u0275restoreView(_r4).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.processRejectedCorrection(pp_r5));
    });
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const pp_r5 = ctx.$implicit;
    const rowIndex_r6 = ctx.rowIndex;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(rowIndex_r6 + 1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(pp_r5.codCliente);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(pp_r5.nomCliente);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2("", pp_r5.nomClient, " ", pp_r5.prenomClient, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(pp_r5.numId);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Type: ", pp_r5.typePiece, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", pp_r5.telPrincipal, " ");
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", pp_r5.telOtro && pp_r5.telOtro !== pp_r5.telPrincipal);
    \u0275\u0275advance(2);
    \u0275\u0275property("ngIf", pp_r5.fechNacimiento);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !pp_r5.fechNacimiento);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", ctx_r1.getSexeLabel(pp_r5.indSexo))("severity", pp_r5.indSexo === "M" ? "info" : "success");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.getEtatCivilLabel(pp_r5.estCivil));
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", pp_r5.conjoint);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", ctx_r1.getStatusLabel(pp_r5.correctionStatut))("severity", ctx_r1.getStatusSeverity(pp_r5.correctionStatut));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(pp_r5.codeAgence);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(pp_r5.updatedAt);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 58)(2, "div", 59);
    \u0275\u0275element(3, "i", 60);
    \u0275\u0275elementStart(4, "p", 61);
    \u0275\u0275text(5, " Aucune correction rejet\xE9e trouv\xE9e ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 62);
    \u0275\u0275text(7, " Les corrections rejet\xE9es appara\xEEtront ici ");
    \u0275\u0275elementEnd()()()();
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_span_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 69);
    \u0275\u0275element(1, "i", 5);
    \u0275\u0275text(2, " Rejet\xE9es: ");
    \u0275\u0275elementStart(3, "strong");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.rejetCount);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_span_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 65);
    \u0275\u0275element(1, "i", 70);
    \u0275\u0275text(2, " Filtr\xE9es: ");
    \u0275\u0275elementStart(3, "strong");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(4);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.filteredCount);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 63)(1, "div", 64)(2, "span", 65);
    \u0275\u0275element(3, "i", 66);
    \u0275\u0275text(4, " Total: ");
    \u0275\u0275elementStart(5, "strong");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(7, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_span_7_Template, 5, 1, "span", 67)(8, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_span_8_Template, 5, 1, "span", 68);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(ctx_r1.totalRejet);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.rejetCount > 0);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.state().searchValue);
  }
}
function CorrectionRejetPpComponent_ng_template_4_div_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 19)(1, "p-table", 20);
    \u0275\u0275template(2, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_2_Template, 11, 4, "ng-template", 21)(3, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_3_Template, 30, 0, "ng-template", 1)(4, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_4_Template, 43, 19, "ng-template", 22)(5, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_5_Template, 8, 0, "ng-template", 23)(6, CorrectionRejetPpComponent_ng_template_4_div_2_ng_template_6_Template, 9, 3, "ng-template", 24);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r1.filteredList())("paginator", true)("rows", 10)("rowsPerPageOptions", \u0275\u0275pureFunction0(7, _c04))("showCurrentPageReport", true)("globalFilterFields", \u0275\u0275pureFunction0(8, _c14))("tableStyle", \u0275\u0275pureFunction0(9, _c24));
  }
}
function CorrectionRejetPpComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, CorrectionRejetPpComponent_ng_template_4_div_0_Template, 4, 0, "div", 12)(1, CorrectionRejetPpComponent_ng_template_4_div_1_Template, 5, 1, "div", 13)(2, CorrectionRejetPpComponent_ng_template_4_div_2_Template, 7, 10, "div", 14);
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("ngIf", ctx_r1.state().loading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", ctx_r1.state().error && !ctx_r1.state().loading);
    \u0275\u0275advance();
    \u0275\u0275property("ngIf", !ctx_r1.state().loading && !ctx_r1.state().error);
  }
}
var CorrectionRejetPpComponent = class _CorrectionRejetPpComponent {
  user;
  state = signal({
    listRejet: [],
    loading: false,
    message: void 0,
    error: void 0,
    statusOptions: [
      { label: "En attente", value: "EN_ATTENTE" },
      { label: "Suspendu", value: "SUSPENDU" },
      { label: "Valid\xE9", value: "VALIDE" },
      { label: "Rejet\xE9", value: "REJETE" }
    ],
    dateKeys: ["fecVencim", "fechNacimiento", "dateAttente", "createdAt", "updatedAt"],
    selectedPP: null,
    searchValue: ""
  });
  userService = inject(UserService);
  router = inject(Router);
  destroyRef = inject(DestroyRef);
  messageService = inject(MessageService);
  ngOnInit() {
    this.loadListePPRejet();
  }
  loadListePPRejet() {
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { loading: true, error: void 0 }));
    this.userService.getListPPRejet$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        if (response.code === 200 && response.data?.listRejet) {
          const liste = Array.isArray(response.data.listRejet) ? response.data.listRejet : [response.data.listRejet];
          const processedList = this.processDateArrays(liste);
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            listRejet: processedList,
            loading: false,
            message: response.message
          }));
          this.messageService.add({
            severity: "success",
            summary: "Succ\xE8s",
            detail: `${processedList.length} correction(s) rejet\xE9e(s) charg\xE9e(s)`,
            life: 3e3
          });
        } else {
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            listRejet: [],
            loading: false,
            error: response.message || "Aucune donn\xE9e trouv\xE9e"
          }));
          this.messageService.add({
            severity: "info",
            summary: "Information",
            detail: "Aucune correction rejet\xE9e trouv\xE9e",
            life: 3e3
          });
        }
      },
      error: (error) => {
        this.state.update((s) => __spreadProps(__spreadValues({}, s), {
          loading: false,
          error: error.message || "Erreur lors du chargement des donn\xE9es"
        }));
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Erreur lors du chargement des donn\xE9es",
          life: 5e3
        });
        console.error("Erreur lors du chargement:", error);
      }
    });
  }
  /**
   * Convertit les tableaux de dates en objets Date
   */
  processDateArrays(list) {
    return list.map((item) => {
      const processed = __spreadValues({}, item);
      if (item.fecVencim && Array.isArray(item.fecVencim)) {
        processed.fecVencim = this.arrayToDateString(item.fecVencim);
      }
      if (item.fechNacimiento && Array.isArray(item.fechNacimiento)) {
        processed.fechNacimiento = this.arrayToDateString(item.fechNacimiento);
      }
      if (item.createdAt && Array.isArray(item.createdAt)) {
        processed.createdAt = this.arrayToDateTimeString(item.createdAt);
      }
      if (item.updatedAt && Array.isArray(item.updatedAt)) {
        processed.updatedAt = this.arrayToDateTimeString(item.updatedAt);
      }
      return processed;
    });
  }
  /**
   * Convertit un tableau de date [année, mois, jour] en chaîne
   */
  arrayToDateString(dateArray) {
    if (!dateArray || dateArray.length < 3)
      return "";
    const [year, month, day] = dateArray;
    return `${String(day).padStart(2, "0")}/${String(month).padStart(2, "0")}/${year}`;
  }
  /**
   * Convertit un tableau de date-heure en chaîne
   */
  arrayToDateTimeString(dateArray) {
    if (!dateArray || dateArray.length < 6)
      return "";
    const [year, month, day, hour, minute, second] = dateArray;
    return `${String(day).padStart(2, "0")}/${String(month).padStart(2, "0")}/${year} ${String(hour).padStart(2, "0")}:${String(minute).padStart(2, "0")}`;
  }
  /**
   * Obtenir la couleur du badge selon le statut
   */
  getStatusSeverity(status) {
    switch (status) {
      case "EN_ATTENTE":
        return "info";
      case "VALIDE":
        return "success";
      case "REJETE":
        return "danger";
      case "SUSPENDU":
        return "warn";
      default:
        return "secondary";
    }
  }
  /**
   * Obtenir le label du statut
   */
  getStatusLabel(status) {
    switch (status) {
      case "EN_ATTENTE":
        return "En attente";
      case "VALIDE":
        return "Valid\xE9";
      case "REJETE":
        return "Rejet\xE9";
      case "SUSPENDU":
        return "Suspendu";
      default:
        return status;
    }
  }
  /**
   * Obtenir le label du sexe
   */
  getSexeLabel(sexe) {
    return sexe === "M" ? "Masculin" : sexe === "F" ? "F\xE9minin" : sexe;
  }
  /**
   * Obtenir le label de l'état civil
   */
  getEtatCivilLabel(etatCivil) {
    switch (etatCivil) {
      case "S":
        return "C\xE9libataire";
      case "M":
        return "Mari\xE9(e)";
      case "D":
        return "Divorc\xE9(e)";
      case "V":
        return "Veuf/Veuve";
      case "C":
        return "Concubinage";
      default:
        return etatCivil;
    }
  }
  /**
   * Filtrer la liste selon la recherche
   */
  filteredList() {
    const searchValue = this.state().searchValue.toLowerCase();
    if (!searchValue) {
      return this.state().listRejet;
    }
    return this.state().listRejet.filter((pp) => pp.nomCliente?.toLowerCase().includes(searchValue) || pp.codCliente?.toLowerCase().includes(searchValue) || pp.numId?.toLowerCase().includes(searchValue) || pp.telPrincipal?.includes(searchValue) || pp.codeAgence?.toLowerCase().includes(searchValue));
  }
  /**
   * Rafraîchir la liste
   */
  refresh() {
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { searchValue: "" }));
    this.loadListePPRejet();
  }
  /**
   * Voir les détails d'une personne physique
   */
  viewDetails(pp) {
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { selectedPP: pp }));
    console.log("D\xE9tails de:", pp);
    this.messageService.add({
      severity: "info",
      summary: "D\xE9tails",
      detail: `Consultation des d\xE9tails de ${pp.nomCliente}`,
      life: 2e3
    });
  }
  /**
   * Traiter une correction rejetée
   */
  processRejectedCorrection(pp) {
    console.log("Traitement de la correction rejet\xE9e:", pp);
    this.router.navigate(["dashboards/update-correction-rejet/", pp.codCliente]);
  }
  /**
   * Exporter les données
   */
  exportData() {
    const dataToExport = this.filteredList();
    if (dataToExport.length === 0) {
      this.messageService.add({
        severity: "warn",
        summary: "Export",
        detail: "Aucune donn\xE9e \xE0 exporter",
        life: 3e3
      });
      return;
    }
    console.log("Export des donn\xE9es:", dataToExport);
    this.messageService.add({
      severity: "success",
      summary: "Export",
      detail: `${dataToExport.length} enregistrement(s) export\xE9(s)`,
      life: 3e3
    });
  }
  // Getters pour les statistiques
  get totalRejet() {
    return this.state().listRejet.length;
  }
  get rejetCount() {
    return this.filteredList().filter((p) => p.correctionStatut === "REJETE").length;
  }
  get filteredCount() {
    return this.filteredList().length;
  }
  static \u0275fac = function CorrectionRejetPpComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CorrectionRejetPpComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _CorrectionRejetPpComponent, selectors: [["app-correction-rejet-pp"]], inputs: { user: "user" }, features: [\u0275\u0275ProvidersFeature([MessageService])], decls: 5, vars: 0, consts: [[1, "correction-rejet-container"], ["pTemplate", "header"], ["pTemplate", "content"], [1, "card-header"], [1, "card-title"], [1, "pi", "pi-times-circle"], [1, "header-actions"], ["iconPosition", "left"], ["styleClass", "pi pi-search"], ["type", "text", "pInputText", "", "placeholder", "Rechercher...", 1, "search-input", 3, "ngModelChange", "ngModel"], ["pButton", "", "icon", "pi pi-refresh", "pTooltip", "Rafra\xEEchir", 1, "p-button-rounded", "p-button-outlined", 3, "click"], ["pButton", "", "icon", "pi pi-download", "pTooltip", "Exporter", 1, "p-button-rounded", "p-button-outlined", 3, "click"], ["class", "loading-container", 4, "ngIf"], ["class", "error-container", 4, "ngIf"], ["class", "table-container", 4, "ngIf"], [1, "loading-container"], [1, "error-container"], [1, "pi", "pi-exclamation-triangle"], ["pButton", "", "label", "R\xE9essayer", "icon", "pi pi-refresh", 3, "click"], [1, "table-container"], ["currentPageReportTemplate", "Affichage de {first} \xE0 {last} sur {totalRecords} entr\xE9es", "styleClass", "p-datatable-striped", "responsiveLayout", "scroll", 3, "value", "paginator", "rows", "rowsPerPageOptions", "showCurrentPageReport", "globalFilterFields", "tableStyle"], ["pTemplate", "caption"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], ["pTemplate", "summary"], [1, "table-caption"], [1, "caption-left"], [1, "caption-text"], [1, "caption-right"], ["severity", "danger", 3, "value", "rounded"], [2, "width", "3rem"], ["pSortableColumn", "codCliente"], ["field", "codCliente"], ["pSortableColumn", "nomCliente"], ["field", "nomCliente"], ["pSortableColumn", "fechNacimiento"], ["field", "fechNacimiento"], ["pSortableColumn", "correctionStatut"], ["field", "correctionStatut"], ["pSortableColumn", "updatedAt"], ["field", "updatedAt"], [2, "width", "14rem"], [1, "code-badge"], [1, "client-info"], [1, "text-muted", "d-block"], [1, "id-info"], [1, "phone-info"], [1, "pi", "pi-phone"], ["class", "text-muted d-block", 4, "ngIf"], [4, "ngIf"], ["class", "text-muted", 4, "ngIf"], [3, "value", "severity"], [1, "agence-code"], [1, "date-text"], [1, "action-buttons"], ["pButton", "", "icon", "pi pi-pencil", "pTooltip", "Traiter la correction", 1, "p-button-rounded", "p-button-text", "p-button-warning", 3, "click"], [1, "pi", "pi-mobile"], [1, "text-muted"], ["colspan", "12", 1, "text-center"], [1, "empty-message"], [1, "pi", "pi-inbox", 2, "font-size", "3rem", "color", "#ccc"], [2, "margin-top", "1rem", "font-size", "1.1rem", "color", "#666"], [2, "margin-top", "0.5rem", "color", "#999"], [1, "summary-section"], [1, "summary-stats"], [1, "stat-item"], [1, "pi", "pi-users"], ["class", "stat-item stat-danger", 4, "ngIf"], ["class", "stat-item", 4, "ngIf"], [1, "stat-item", "stat-danger"], [1, "pi", "pi-filter"]], template: function CorrectionRejetPpComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275element(1, "p-toast");
      \u0275\u0275elementStart(2, "p-card");
      \u0275\u0275template(3, CorrectionRejetPpComponent_ng_template_3_Template, 10, 1, "ng-template", 1)(4, CorrectionRejetPpComponent_ng_template_4_Template, 3, 3, "ng-template", 2);
      \u0275\u0275elementEnd()();
    }
  }, dependencies: [CommonModule, NgIf, TableModule, Table, PrimeTemplate, SortableColumn, SortIcon, ButtonModule, ButtonDirective, InputTextModule, InputText, ProgressSpinnerModule, ProgressSpinner, TagModule, Tag, TooltipModule, Tooltip, CalendarModule, FormsModule, DefaultValueAccessor, NgControlStatus, NgModel, IconFieldModule, IconField, InputIconModule, InputIcon, CardModule, Card, ToastModule, Toast], styles: ["\n\n.correction-rejet-container[_ngcontent-%COMP%] {\n  padding: 1rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  background:\n    linear-gradient(\n      135deg,\n      #667eea 0%,\n      #764ba2 100%);\n  color: white;\n  border-radius: 8px 8px 0 0;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin: 0;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.8rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%] {\n  width: 300px;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 1.5rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: #666;\n  margin: 0;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  gap: 1.5rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 4rem;\n  color: #ef4444;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: #666;\n  margin: 0;\n  text-align: center;\n  max-width: 500px;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%] {\n  padding: 0;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-caption[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: #f8f9fa;\n  border-bottom: 2px solid #e9ecef;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-caption[_ngcontent-%COMP%]   .caption-left[_ngcontent-%COMP%]   .caption-text[_ngcontent-%COMP%] {\n  font-size: 1rem;\n  color: #495057;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-caption[_ngcontent-%COMP%]   .caption-left[_ngcontent-%COMP%]   .caption-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #212529;\n  font-weight: 600;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-caption[_ngcontent-%COMP%]   .caption-right[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .code-badge[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  background: #e3f2fd;\n  color: #1976d2;\n  border-radius: 4px;\n  font-family: monospace;\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  display: block;\n  color: #212529;\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 0.875rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .id-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  display: block;\n  font-weight: 500;\n  color: #495057;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .id-info[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 0.85rem;\n  margin-top: 0.25rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .phone-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #6c757d;\n  margin-right: 0.25rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .phone-info[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 0.85rem;\n  margin-top: 0.25rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .agence-code[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  background: #fff3cd;\n  color: #856404;\n  border-radius: 4px;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .date-text[_ngcontent-%COMP%] {\n  color: #6c757d;\n  font-size: 0.85rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.25rem;\n  justify-content: center;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\n  transform: scale(1.1);\n  transition: transform 0.2s ease;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%] {\n  padding: 3rem 1rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: #f8f9fa;\n  border-top: 2px solid #e9ecef;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 2rem;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid #e9ecef;\n  font-size: 0.95rem;\n  color: #495057;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #6c757d;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #212529;\n  font-weight: 600;\n  margin-left: 0.25rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item.stat-danger[_ngcontent-%COMP%] {\n  background: #fee2e2;\n  border-color: #fecaca;\n  color: #991b1b;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item.stat-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #dc2626;\n}\n.correction-rejet-container[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%]   .stat-item.stat-danger[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #991b1b;\n}\n@media (max-width: 768px) {\n  .correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    text-align: center;\n  }\n  .correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n  .correction-rejet-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%] {\n    width: 100%;\n    max-width: 300px;\n  }\n  .correction-rejet-container[_ngcontent-%COMP%]   .table-caption[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    text-align: center;\n  }\n  .correction-rejet-container[_ngcontent-%COMP%]   .summary-stats[_ngcontent-%COMP%] {\n    justify-content: center !important;\n  }\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody tr {\n  transition: background-color 0.2s ease;\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-datatable .p-datatable-tbody tr:hover {\n  background-color: #f8f9fa !important;\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-tag {\n  font-weight: 500;\n  font-size: 0.85rem;\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-button.p-button-outlined {\n  background: white;\n  color: #667eea;\n  border-color: white;\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-button.p-button-outlined:hover {\n  background: rgba(255, 255, 255, 0.9);\n  border-color: rgba(255, 255, 255, 0.9);\n}\n.correction-rejet-container[_ngcontent-%COMP%]     .p-iconfield .p-inputtext {\n  padding-left: 2.5rem;\n}\n/*# sourceMappingURL=correction-rejet-pp.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(CorrectionRejetPpComponent, { className: "CorrectionRejetPpComponent", filePath: "src/app/pages/dashboard/agent-credit/correction-rejet-pp/correction-rejet-pp.component.ts", lineNumber: 29 });
})();

// src/app/pages/dashboard/agent-credit/rotation-agent/rotation-agent.component.ts
var _c05 = () => ({ width: "50px", height: "50px" });
var _c15 = () => [5, 10, 20];
var _c25 = () => ({ "width": "100%" });
function RotationAgentComponent_Conditional_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 3);
    \u0275\u0275text(1, " Agence: ");
    \u0275\u0275elementStart(2, "strong");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275text(4, " | Responsable: ");
    \u0275\u0275elementStart(5, "strong");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_1_0;
    let tmp_2_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate((tmp_1_0 = ctx_r0.state().user) == null ? null : tmp_1_0.agenceId);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", (tmp_2_0 = ctx_r0.state().user) == null ? null : tmp_2_0.firstName, " ", (tmp_2_0 = ctx_r0.state().user) == null ? null : tmp_2_0.lastName, "");
  }
}
function RotationAgentComponent_Conditional_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 5);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275advance();
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(2, _c05));
  }
}
function RotationAgentComponent_Conditional_10_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 10)(1, "span", 11);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate2(" Agents (", ctx_r0.state().agents.length, ") | Points de vente disponibles (", ctx_r0.state().pointsVente.length, ") ");
  }
}
function RotationAgentComponent_Conditional_10_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275text(2, "Agent");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th");
    \u0275\u0275text(4, "Email / T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th");
    \u0275\u0275text(6, "PS Actuel");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th");
    \u0275\u0275text(8, "Statut");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 12);
    \u0275\u0275text(10, "S\xE9lectionner PS");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "th", 13);
    \u0275\u0275text(12, "Action");
    \u0275\u0275elementEnd()();
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 18);
    \u0275\u0275element(1, "i", 27);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const agent_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(agent_r2.phone);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 22);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 28);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 29);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Conditional_0_Template, 1, 0, "p-tag", 28)(1, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Conditional_1_Template, 1, 0, "p-tag", 29);
  }
  if (rf & 2) {
    const agent_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275conditional(agent_r2.isActive ? 0 : 1);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_1_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 19);
    \u0275\u0275element(1, "i", 33);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ps_r4 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("", ps_r4.libele, " (", ps_r4.code, ")");
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_1_Conditional_0_Template, 4, 2, "div", 19);
  }
  if (rf & 2) {
    const ps_r4 = ctx.$implicit;
    \u0275\u0275conditional(ps_r4 ? 0 : -1);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 34);
    \u0275\u0275element(1, "i", 20);
    \u0275\u0275elementStart(2, "div")(3, "div", 14);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 15);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ps_r5 = ctx.$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ps_r5.libele);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("Code: ", ps_r5.code, "");
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-dropdown", 30);
    \u0275\u0275twoWayListener("ngModelChange", function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_Template_p_dropdown_ngModelChange_0_listener($event) {
      \u0275\u0275restoreView(_r3);
      const agent_r2 = \u0275\u0275nextContext().$implicit;
      \u0275\u0275twoWayBindingSet(agent_r2.selectedPointVenteId, $event) || (agent_r2.selectedPointVenteId = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275template(1, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_1_Template, 1, 1, "ng-template", 31)(2, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_ng_template_2_Template, 7, 2, "ng-template", 32);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const agent_r2 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(6, _c25));
    \u0275\u0275twoWayProperty("ngModel", agent_r2.selectedPointVenteId);
    \u0275\u0275property("options", ctx_r0.state().pointsVente)("showClear", false)("filter", true);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 24);
    \u0275\u0275text(1, "Rotation active");
    \u0275\u0275elementEnd();
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 35);
    \u0275\u0275listener("click", function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_24_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r6);
      const agent_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.deactivateRotation(agent_r2));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const agent_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275property("loading", agent_r2.isLoading)("disabled", agent_r2.isLoading);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_25_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "button", 36);
    \u0275\u0275listener("click", function RotationAgentComponent_Conditional_10_ng_template_3_Conditional_25_Template_button_click_0_listener() {
      \u0275\u0275restoreView(_r7);
      const agent_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.activateRotation(agent_r2));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const agent_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275property("loading", agent_r2.isLoading)("disabled", agent_r2.isLoading || !agent_r2.selectedPointVenteId);
  }
}
function RotationAgentComponent_Conditional_10_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td")(2, "div", 14);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 15);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "td")(7, "div", 16)(8, "div");
    \u0275\u0275element(9, "i", 17);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd();
    \u0275\u0275template(11, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_11_Template, 3, 1, "div", 18);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td")(13, "div", 19);
    \u0275\u0275element(14, "i", 20);
    \u0275\u0275elementStart(15, "span", 21);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(17, "td");
    \u0275\u0275template(18, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_18_Template, 1, 0, "i", 22)(19, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_19_Template, 2, 1);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "td");
    \u0275\u0275template(21, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_21_Template, 3, 7, "p-dropdown", 23)(22, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_22_Template, 2, 0, "span", 24);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "td");
    \u0275\u0275template(24, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_24_Template, 1, 2, "button", 25)(25, RotationAgentComponent_Conditional_10_ng_template_3_Conditional_25_Template, 1, 2, "button", 26);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const agent_r2 = ctx.$implicit;
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(agent_r2.fullName);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(agent_r2.username);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(agent_r2.email);
    \u0275\u0275advance();
    \u0275\u0275conditional(agent_r2.phone ? 11 : -1);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(agent_r2.pointVenteDisplay);
    \u0275\u0275advance(2);
    \u0275\u0275conditional(agent_r2.isLoading ? 18 : 19);
    \u0275\u0275advance(3);
    \u0275\u0275conditional(!agent_r2.isActive ? 21 : 22);
    \u0275\u0275advance(3);
    \u0275\u0275conditional(agent_r2.isActive ? 24 : 25);
  }
}
function RotationAgentComponent_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-table", 6);
    \u0275\u0275template(1, RotationAgentComponent_Conditional_10_ng_template_1_Template, 3, 2, "ng-template", 7)(2, RotationAgentComponent_Conditional_10_ng_template_2_Template, 13, 0, "ng-template", 8)(3, RotationAgentComponent_Conditional_10_ng_template_3_Template, 26, 8, "ng-template", 9);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("value", ctx_r0.state().agents)("paginator", true)("rows", 10)("rowsPerPageOptions", \u0275\u0275pureFunction0(4, _c15));
  }
}
var RotationAgentComponent = class _RotationAgentComponent {
  state = signal({
    agents: [],
    pointsVente: [],
    loading: false
  });
  userService = inject(UserService);
  messageService = inject(MessageService);
  confirmationService = inject(ConfirmationService);
  destroyRef = inject(DestroyRef);
  ngOnInit() {
    this.loadUserAndData();
  }
  /**
   * Charger l'utilisateur connecté et les données associées
   */
  loadUserAndData() {
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: true }));
    this.userService.getInstanceUser$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        const user = response.data?.user;
        if (!user?.agenceId) {
          this.messageService.add({
            severity: "error",
            summary: "Erreur",
            detail: "Aucune agence associ\xE9e \xE0 votre compte",
            life: 3e3
          });
          this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false }));
          return;
        }
        console.log("\u{1F464} Utilisateur connect\xE9:", user);
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { user }));
        this.loadAgenceData(user.agenceId);
      },
      error: (error) => {
        console.error("\u274C Erreur chargement utilisateur:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les informations utilisateur",
          life: 3e3
        });
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false }));
      }
    });
  }
  /**
   * Charger les données de l'agence (points de vente + agents)
   */
  loadAgenceData(agenceId) {
    forkJoin({
      pointsVente: this.userService.getAllPointVenteByAgenceId$(agenceId),
      agents: this.userService.getListAgentCredit$(agenceId)
    }).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (results) => {
        const pointsVente = results.pointsVente.data?.pointVentes || [];
        const agents = results.agents.data?.agentCreditDTO || [];
        console.log("\u{1F3E2} Points de vente charg\xE9s:", pointsVente.length);
        console.log("\u{1F465} Agents charg\xE9s:", agents.length);
        const validAgents = agents.filter((agent) => agent.userId && agent.pointventeId);
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          pointsVente,
          agents: validAgents
        }));
        if (validAgents.length > 0) {
          this.loadAgentsStatus(validAgents);
        } else {
          this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false }));
        }
      },
      error: (error) => {
        console.error("\u274C Erreur chargement donn\xE9es agence:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les donn\xE9es de l'agence",
          life: 3e3
        });
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false }));
      }
    });
  }
  /**
   * Charger le statut de chaque agent
   */
  loadAgentsStatus(agents) {
    const statusRequests = agents.map((agent) => this.userService.checkAgentDisponibility$(agent.userId, agent.pointventeId).pipe(catchError(() => of({
      data: { disponibilityAgent: { isActive: false } }
    }))));
    forkJoin(statusRequests).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (responses) => {
        const agentsWithStatus = agents.map((agent, index) => __spreadProps(__spreadValues({}, agent), {
          isActive: responses[index]?.data?.disponibilityAgent?.isActive || false,
          selectedPointVenteId: agent.pointventeId,
          // PS actuel par défaut
          isLoading: false
        }));
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          agents: agentsWithStatus,
          loading: false
        }));
      }
    });
  }
  /**
   * Activer la rotation avec le PS sélectionné
   */
  activateRotation(agent) {
    console.log("\u{1F504} Activation pour:", agent);
    if (!agent.selectedPointVenteId) {
      this.messageService.add({
        severity: "warn",
        summary: "Attention",
        detail: "Veuillez s\xE9lectionner un point de vente",
        life: 3e3
      });
      return;
    }
    const selectedPs = this.state().pointsVente.find((pv) => pv.id === agent.selectedPointVenteId);
    this.confirmationService.confirm({
      message: `Activer la rotation pour ${agent.fullName} au point de vente ${selectedPs?.libele} (${selectedPs?.code}) ?`,
      header: "Confirmation d'activation",
      icon: "pi pi-check-circle",
      acceptLabel: "Oui, activer",
      rejectLabel: "Annuler",
      accept: () => {
        this.performActivation(agent);
      }
    });
  }
  /**
   * Effectuer l'activation
   */
  performActivation(agent) {
    this.updateAgentLoadingState(agent.userId, true);
    const request = {
      userId: agent.userId,
      pointVenteId: agent.selectedPointVenteId
    };
    this.userService.activateRotation$(request).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: () => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `Rotation activ\xE9e pour ${agent.fullName}`,
          life: 3e3
        });
        this.updateAgentAfterActivation(agent.userId, agent.selectedPointVenteId);
      },
      error: (error) => {
        console.error("\u274C Erreur activation:", error);
        this.updateAgentLoadingState(agent.userId, false);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.message || "Impossible d'activer la rotation",
          life: 3e3
        });
      }
    });
  }
  /**
   * Désactiver la rotation
   */
  deactivateRotation(agent) {
    this.confirmationService.confirm({
      message: `D\xE9sactiver la rotation pour ${agent.fullName} ?`,
      header: "Confirmation de d\xE9sactivation",
      icon: "pi pi-exclamation-triangle",
      acceptLabel: "Oui, d\xE9sactiver",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-danger",
      accept: () => {
        this.performDeactivation(agent);
      }
    });
  }
  /**
   * Effectuer la désactivation
   */
  performDeactivation(agent) {
    this.updateAgentLoadingState(agent.userId, true);
    this.userService.deactivateRotation$(agent.userId).pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: () => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `Rotation d\xE9sactiv\xE9e pour ${agent.fullName}`,
          life: 3e3
        });
        this.updateAgentStatus(agent.userId, false);
      },
      error: (error) => {
        console.error("\u274C Erreur d\xE9sactivation:", error);
        this.updateAgentLoadingState(agent.userId, false);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.message || "Impossible de d\xE9sactiver",
          life: 3e3
        });
      }
    });
  }
  /**
   * Mettre à jour l'agent après activation
   */
  updateAgentAfterActivation(userId, newPointVenteId) {
    const ps = this.state().pointsVente.find((p) => p.id === newPointVenteId);
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
      agents: state2.agents.map((a) => a.userId === userId ? __spreadProps(__spreadValues({}, a), {
        isActive: true,
        isLoading: false,
        pointventeId: newPointVenteId,
        pointventeLibele: ps?.libele ?? "",
        pointventeCode: ps?.code ?? "",
        pointVenteDisplay: ps ? `${ps.libele} (${ps.code})` : "Non assign\xE9"
      }) : a)
    }));
  }
  /**
   * Mettre à jour l'état de chargement
   */
  updateAgentLoadingState(userId, isLoading) {
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
      agents: state2.agents.map((a) => a.userId === userId ? __spreadProps(__spreadValues({}, a), { isLoading }) : a)
    }));
  }
  /**
   * Mettre à jour le statut
   */
  updateAgentStatus(userId, isActive) {
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
      agents: state2.agents.map((a) => a.userId === userId ? __spreadProps(__spreadValues({}, a), { isActive, isLoading: false }) : a)
    }));
  }
  /**
   * Rafraîchir
   */
  refresh() {
    const user = this.state().user;
    if (user?.agenceId) {
      this.loadAgenceData(user.agenceId);
    }
  }
  static \u0275fac = function RotationAgentComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _RotationAgentComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _RotationAgentComponent, selectors: [["app-rotation-agent"]], features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 11, vars: 4, consts: [[1, "card"], [1, "flex", "justify-between", "items-center", "mb-6"], [1, "text-2xl", "font-bold", "text-surface-900", "dark:text-surface-0", "mb-2"], [1, "text-surface-600", "dark:text-surface-400"], ["pButton", "", "pRipple", "", "icon", "pi pi-refresh", "label", "Actualiser", 1, "p-button-outlined", 3, "click", "loading"], [1, "flex", "justify-center", "items-center", "py-8"], ["styleClass", "p-datatable-gridlines", 3, "value", "paginator", "rows", "rowsPerPageOptions"], ["pTemplate", "caption"], ["pTemplate", "header"], ["pTemplate", "body"], [1, "flex", "justify-between", "items-center"], [1, "text-xl", "font-semibold"], [2, "min-width", "250px"], [2, "width", "180px"], [1, "font-semibold"], [1, "text-sm", "text-gray-600"], [1, "text-sm"], [1, "pi", "pi-envelope", "text-blue-500", "mr-1"], [1, "mt-1"], [1, "flex", "items-center", "gap-2"], [1, "pi", "pi-map-marker", "text-orange-500"], [1, "font-medium"], [1, "pi", "pi-spin", "pi-spinner", "text-blue-500"], ["optionLabel", "libele", "optionValue", "id", "placeholder", "S\xE9lectionner un point de vente", "filterBy", "libele,code", "appendTo", "body", 3, "ngModel", "options", "showClear", "filter", "style"], [1, "text-gray-500", "italic"], ["pButton", "", "pRipple", "", "icon", "pi pi-times-circle", "label", "D\xE9sactiver", 1, "p-button-danger", "p-button-sm", "w-full", 3, "loading", "disabled"], ["pButton", "", "pRipple", "", "icon", "pi pi-check-circle", "label", "Activer", 1, "p-button-success", "p-button-sm", "w-full", 3, "loading", "disabled"], [1, "pi", "pi-phone", "text-green-500", "mr-1"], ["value", "ACTIF", "severity", "success", "icon", "pi pi-check-circle"], ["value", "INACTIF", "severity", "danger", "icon", "pi pi-times-circle"], ["optionLabel", "libele", "optionValue", "id", "placeholder", "S\xE9lectionner un point de vente", "filterBy", "libele,code", "appendTo", "body", 3, "ngModelChange", "ngModel", "options", "showClear", "filter"], ["pTemplate", "selectedItem"], ["pTemplate", "item"], [1, "pi", "pi-map-marker", "text-blue-500"], [1, "flex", "items-center", "gap-2", "p-2"], ["pButton", "", "pRipple", "", "icon", "pi pi-times-circle", "label", "D\xE9sactiver", 1, "p-button-danger", "p-button-sm", "w-full", 3, "click", "loading", "disabled"], ["pButton", "", "pRipple", "", "icon", "pi pi-check-circle", "label", "Activer", 1, "p-button-success", "p-button-sm", "w-full", 3, "click", "loading", "disabled"]], template: function RotationAgentComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275element(0, "p-toast")(1, "p-confirmDialog");
      \u0275\u0275elementStart(2, "div", 0)(3, "div", 1)(4, "div")(5, "h2", 2);
      \u0275\u0275text(6, " Gestion des Rotations - Agents de Cr\xE9dit ");
      \u0275\u0275elementEnd();
      \u0275\u0275template(7, RotationAgentComponent_Conditional_7_Template, 7, 3, "p", 3);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(8, "button", 4);
      \u0275\u0275listener("click", function RotationAgentComponent_Template_button_click_8_listener() {
        return ctx.refresh();
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275template(9, RotationAgentComponent_Conditional_9_Template, 2, 3, "div", 5)(10, RotationAgentComponent_Conditional_10_Template, 4, 5, "p-table", 6);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(7);
      \u0275\u0275conditional(ctx.state().user ? 7 : -1);
      \u0275\u0275advance();
      \u0275\u0275property("loading", ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.state().loading ? 9 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.state().loading && ctx.state().agents.length > 0 ? 10 : -1);
    }
  }, dependencies: [CommonModule, FormsModule, NgControlStatus, NgModel, TableModule, Table, PrimeTemplate, ButtonModule, ButtonDirective, CardModule, TagModule, Tag, DropdownModule, Dropdown, ProgressSpinnerModule, ProgressSpinner, ToastModule, Toast, ConfirmDialogModule, ConfirmDialog, TooltipModule], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(RotationAgentComponent, { className: "RotationAgentComponent", filePath: "src/app/pages/dashboard/agent-credit/rotation-agent/rotation-agent.component.ts", lineNumber: 36 });
})();

// src/app/service/print-bon-commande.service.ts
var PrintBonCommandeService = class _PrintBonCommandeService {
  /**
   * Imprime le rapport des bons de commande (version legacy)
   */
  imprimerRapport(delegation, bonsCommande, options = {}) {
    const printWindow = window.open("", "_blank", "width=1200,height=800");
    if (!printWindow) {
      console.error("Impossible d'ouvrir la fen\xEAtre d'impression");
      return;
    }
    const htmlContent = this.genererHTML(delegation, bonsCommande, options);
    printWindow.document.write(htmlContent);
    printWindow.document.close();
    printWindow.onload = () => {
      setTimeout(() => {
        printWindow.print();
        if (options.autoClose !== false) {
          printWindow.close();
        }
      }, 500);
    };
  }
  /**
   * Imprime le rapport des bons acceptés pour la logistique
   */
  imprimerRapportLogistique(stocks, options = {}) {
    const printWindow = window.open("", "_blank", "width=1200,height=800");
    if (!printWindow) {
      console.error("Impossible d'ouvrir la fen\xEAtre d'impression");
      return;
    }
    const htmlContent = this.genererHTMLLogistique(stocks, options);
    printWindow.document.write(htmlContent);
    printWindow.document.close();
    printWindow.onload = () => {
      setTimeout(() => {
        printWindow.print();
        if (options.autoClose !== false) {
          printWindow.close();
        }
      }, 500);
    };
  }
  /**
   * Génère le HTML pour le rapport logistique
   */
  genererHTMLLogistique(stocks, options) {
    const styles = this.getLogistiqueStyles();
    const content = this.genererContenuLogistique(stocks, options);
    return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <title>Rapport Logistique - Bons de Commande Accept\xE9s</title>
                <style>${styles}</style>
            </head>
            <body>
                ${content}
            </body>
            </html>
        `;
  }
  /**
   * Génère le contenu principal du rapport logistique
   */
  genererContenuLogistique(stocks, options) {
    const dateImpression = (/* @__PURE__ */ new Date()).toLocaleDateString("fr-FR", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
    const stats = this.calculerStatistiquesLogistique(stocks);
    const parDelegation = this.grouperParDelegation(stocks);
    return `
            <div class="print-container">
                <!-- En-t\xEAte -->
                <div class="header">
                    <div class="logo-section">
                        <div class="company-name">${options.companyName || "ENTREPRISE"}</div>
                    </div>
                    <div class="header-content">
                        <h1>\u{1F4E6} RAPPORT LOGISTIQUE</h1>
                        <h2>Bons de Commande Accept\xE9s par le DE</h2>
                        <div class="header-meta">
                            <span class="meta-item">\u{1F4C5} ${dateImpression}</span>
                            <span class="meta-item">\u{1F4CB} ${stocks.length} commande(s)</span>
                            <span class="meta-item">\u{1F4CA} ${stats.totalQuantite} unit\xE9(s)</span>
                        </div>
                    </div>
                </div>

                <!-- Statistiques globales -->
                <div class="section stats-section">
                    <h3>\u{1F4CA} SYNTH\xC8SE GLOBALE</h3>
                    <div class="stats-grid">
                        <div class="stat-card stat-primary">
                            <div class="stat-icon">\u{1F4CB}</div>
                            <div class="stat-info">
                                <div class="stat-value">${stats.totalCommandes}</div>
                                <div class="stat-label">Commandes</div>
                            </div>
                        </div>
                        <div class="stat-card stat-success">
                            <div class="stat-icon">\u{1F4E6}</div>
                            <div class="stat-info">
                                <div class="stat-value">${stats.totalQuantite}</div>
                                <div class="stat-label">Unit\xE9s totales</div>
                            </div>
                        </div>
                        <div class="stat-card stat-warning">
                            <div class="stat-icon">\u{1F504}</div>
                            <div class="stat-info">
                                <div class="stat-value">${stats.commandesModifiees}</div>
                                <div class="stat-label">Qt\xE9 modifi\xE9es</div>
                            </div>
                        </div>
                        <div class="stat-card stat-info">
                            <div class="stat-icon">\u{1F3E2}</div>
                            <div class="stat-info">
                                <div class="stat-value">${stats.nombreDelegations}</div>
                                <div class="stat-label">D\xE9l\xE9gations</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Synth\xE8se par d\xE9l\xE9gation -->
                <div class="section">
                    <h3>\u{1F3E2} SYNTH\xC8SE PAR D\xC9L\xC9GATION</h3>
                    <table class="summary-table">
                        <thead>
                            <tr>
                                <th style="width: 5%">#</th>
                                <th style="width: 35%">D\xE9l\xE9gation</th>
                                <th style="width: 20%" class="text-center">Nb Commandes</th>
                                <th style="width: 20%" class="text-center">Qt\xE9 Demand\xE9e</th>
                                <th style="width: 20%" class="text-center">Qt\xE9 Valid\xE9e</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${parDelegation.map((d, i) => `
                                <tr>
                                    <td class="text-center">${i + 1}</td>
                                    <td><strong>${d.delegation}</strong></td>
                                    <td class="text-center"><span class="badge badge-primary">${d.count}</span></td>
                                    <td class="text-center">${d.qteDemandee}</td>
                                    <td class="text-center"><strong class="text-success">${d.qteValidee}</strong></td>
                                </tr>
                            `).join("")}
                        </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td colspan="2"><strong>TOTAL</strong></td>
                                <td class="text-center"><strong>${stats.totalCommandes}</strong></td>
                                <td class="text-center"><strong>${stats.totalQteDemandee}</strong></td>
                                <td class="text-center"><strong class="text-success">${stats.totalQuantite}</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>

                <!-- D\xE9tail par commande (optionnel) -->
                ${options.includeDetails ? this.genererDetailsCommandes(stocks) : ""}

                <!-- Pied de page -->
                <div class="footer">
                    <div class="footer-content">
                        <p>Document g\xE9n\xE9r\xE9 automatiquement le ${dateImpression}</p>
                        <p class="text-small">Rapport logistique - Bons de commande accept\xE9s par le Directeur d'Exploitation</p>
                    </div>
                    ${options.includeSignature ? `
                        <div class="signature-section">
                            <div class="signature-box">
                                <p>Responsable Logistique</p>
                                <div class="signature-line"></div>
                                <p class="signature-date">Date: _______________</p>
                            </div>
                            <div class="signature-box">
                                <p>Validation</p>
                                <div class="signature-line"></div>
                                <p class="signature-date">Date: _______________</p>
                            </div>
                        </div>
                    ` : ""}
                </div>
            </div>
        `;
  }
  /**
   * Rendu de la quantité avec indication visuelle
   */
  renderQuantite(stock) {
    const qteValidee = stock.qteSuggeree || stock.qte;
    if (stock.qteSuggeree && stock.qteSuggeree !== stock.qte) {
      const diff = stock.qteSuggeree - (stock.qte || 0);
      const diffClass = diff > 0 ? "text-success" : "text-danger";
      const diffSign = diff > 0 ? "+" : "";
      return `<strong class="text-warning">${qteValidee}</strong> <small class="${diffClass}">(${diffSign}${diff})</small>`;
    }
    return `<strong>${qteValidee}</strong>`;
  }
  /**
   * Génère les détails complets de chaque commande
   */
  genererDetailsCommandes(stocks) {
    return `
            <div class="section">
                <h3>\u{1F4C4} FICHES D\xC9TAILL\xC9ES</h3>
                ${stocks.map((stock, index) => this.genererFicheCommande(stock, index + 1)).join("")}
            </div>
        `;
  }
  /**
   * Génère la fiche détaillée d'une commande
   */
  genererFicheCommande(stock, numero) {
    const detail = this.parseDetailCommande(stock.detailBonCommande || "");
    const hasModification = stock.qteSuggeree && stock.qteSuggeree !== stock.qte;
    return `
            <div class="fiche-commande">
                <div class="fiche-header">
                    <div class="fiche-numero">
                        <span class="numero-badge">${numero}</span>
                        <strong>Commande N\xB0 ${stock.numeroCommande}</strong>
                    </div>
                    <div class="fiche-status status-accepted">\u2713 Accept\xE9</div>
                </div>
                <div class="fiche-body">
                    <div class="fiche-grid">
                        <div class="fiche-col">
                            <div class="fiche-field">
                                <label>Service</label>
                                <span>${stock.service}</span>
                            </div>
                            <div class="fiche-field">
                                <label>D\xE9tails</label>
                                <span>${detail}</span>
                            </div>
                            <div class="fiche-field">
                                <label>Demandeur</label>
                                <span>${stock.userFullName || stock.username}</span>
                            </div>
                        </div>
                        <div class="fiche-col">
                            <div class="fiche-field">
                                <label>D\xE9l\xE9gation</label>
                                <span>${stock.delegationLibele || "-"}</span>
                            </div>
                            <div class="fiche-field">
                                <label>Agence</label>
                                <span>${stock.agenceLibele || "-"}</span>
                            </div>
                            <div class="fiche-field">
                                <label>Point de vente</label>
                                <span>${stock.pointventeLibele || "-"}</span>
                            </div>
                        </div>
                    </div>
                    <div class="fiche-quantites ${hasModification ? "modified" : ""}">
                        <div class="qte-box">
                            <label>Qt\xE9 demand\xE9e</label>
                            <span class="qte-value">${stock.qte}</span>
                        </div>
                        <div class="qte-arrow">\u2192</div>
                        <div class="qte-box qte-finale">
                            <label>Qt\xE9 valid\xE9e</label>
                            <span class="qte-value">${stock.qteSuggeree || stock.qte}</span>
                        </div>
                        ${hasModification && stock.motifQte ? `
                            <div class="qte-motif">
                                <label>Motif</label>
                                <span>${stock.motifQte}</span>
                            </div>
                        ` : ""}
                    </div>
                    <div class="fiche-dates">
                        <span>\u{1F4C5} Cr\xE9ation: ${this.formatDateLogistique(stock.dateCreation)}</span>
                        <span>\u2713 Acceptation: ${this.formatDateLogistique(stock.dateTraitement)}</span>
                    </div>
                    ${stock.observations ? `
                        <div class="fiche-observations">
                            <label>Observations</label>
                            <p>${stock.observations}</p>
                        </div>
                    ` : ""}
                </div>
            </div>
        `;
  }
  /**
   * Calcule les statistiques pour la logistique
   */
  calculerStatistiquesLogistique(stocks) {
    const totalCommandes = stocks.length;
    const totalQuantite = stocks.reduce((sum, s) => sum + (s.qteSuggeree || s.qte || 0), 0);
    const totalQteDemandee = stocks.reduce((sum, s) => sum + (s.qte || 0), 0);
    const commandesModifiees = stocks.filter((s) => s.qteSuggeree && s.qteSuggeree !== s.qte).length;
    const delegations = new Set(stocks.map((s) => s.delegationLibele).filter(Boolean));
    return {
      totalCommandes,
      totalQuantite,
      totalQteDemandee,
      commandesModifiees,
      nombreDelegations: delegations.size
    };
  }
  /**
   * Groupe les stocks par délégation avec statistiques
   */
  grouperParDelegation(stocks) {
    const map = /* @__PURE__ */ new Map();
    stocks.forEach((stock) => {
      const delegation = stock.delegationLibele || "Non sp\xE9cifi\xE9e";
      const existing = map.get(delegation) || { count: 0, qteDemandee: 0, qteValidee: 0 };
      map.set(delegation, {
        count: existing.count + 1,
        qteDemandee: existing.qteDemandee + (stock.qte || 0),
        qteValidee: existing.qteValidee + (stock.qteSuggeree || stock.qte || 0)
      });
    });
    return Array.from(map.entries()).map(([delegation, data]) => ({
      delegation,
      count: data.count,
      qteDemandee: data.qteDemandee,
      qteValidee: data.qteValidee
    })).sort((a, b) => b.count - a.count);
  }
  /**
   * Formate une date pour la logistique
   */
  formatDateLogistique(date) {
    if (!date)
      return "-";
    let dateObj;
    if (Array.isArray(date)) {
      dateObj = new Date(date[0], date[1] - 1, date[2], date[3] || 0, date[4] || 0);
    } else if (typeof date === "string") {
      dateObj = new Date(date);
    } else {
      return "-";
    }
    return dateObj.toLocaleDateString("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
  /**
   * Styles CSS pour le rapport logistique
   */
  getLogistiqueStyles() {
    return `
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 10px;
                line-height: 1.4;
                color: #1f2937;
                background: white;
            }

            .print-container {
                max-width: 210mm;
                margin: 0 auto;
                padding: 10mm;
            }

            /* En-t\xEAte */
            .header {
                background: linear-gradient(135deg, #059669 0%, #047857 100%);
                color: white;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 12px;
                text-align: center;
            }

            .company-name {
                font-size: 12px;
                font-weight: bold;
                letter-spacing: 2px;
                margin-bottom: 5px;
                opacity: 0.9;
            }

            .header h1 {
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 3px;
            }

            .header h2 {
                font-size: 12px;
                font-weight: normal;
                opacity: 0.9;
                margin-bottom: 10px;
            }

            .header-meta {
                display: flex;
                justify-content: center;
                gap: 20px;
                flex-wrap: wrap;
            }

            .meta-item {
                background: rgba(255, 255, 255, 0.2);
                padding: 5px 12px;
                border-radius: 15px;
                font-size: 11px;
            }

            /* Sections */
            .section {
                margin-bottom: 10px;
            }

            .section h3 {
                background: #f3f4f6;
                color: #374151;
                padding: 8px 12px;
                font-size: 12px;
                font-weight: bold;
                border-left: 4px solid #059669;
                margin-bottom: 10px;
            }

            /* Statistiques */
            .stats-section {
                background: #f8fafc;
                padding: 10px;
                border-radius: 10px;
                border: 1px solid #e5e7eb;
            }

            .stats-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }

            .stat-card {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 10px;
                border-radius: 8px;
                background: white;
                border: 2px solid;
            }

            .stat-card.stat-primary {
                border-color: #3b82f6;
                background: #eff6ff;
            }

            .stat-card.stat-success {
                border-color: #22c55e;
                background: #f0fdf4;
            }

            .stat-card.stat-warning {
                border-color: #f59e0b;
                background: #fffbeb;
            }

            .stat-card.stat-info {
                border-color: #06b6d4;
                background: #ecfeff;
            }

            .stat-icon {
                font-size: 18px;
            }

            .stat-info .stat-value {
                font-size: 18px;
                font-weight: bold;
                color: #1f2937;
            }

            .stat-info .stat-label {
                font-size: 10px;
                color: #6b7280;
                text-transform: uppercase;
            }

            /* Tableaux */
            .summary-table, .detail-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 10px;
            }

            .summary-table th, .detail-table th {
                background: #374151;
                color: white;
                padding: 10px 8px;
                text-align: left;
                font-weight: 600;
                font-size: 9px;
                text-transform: uppercase;
            }

            .summary-table td, .detail-table td {
                padding: 8px;
                border-bottom: 1px solid #e5e7eb;
                vertical-align: middle;
            }

            .summary-table tbody tr:hover, .detail-table tbody tr:hover {
                background: #f9fafb;
            }

            .summary-table tfoot .total-row {
                background: #f3f4f6;
                font-weight: bold;
            }

            .summary-table tfoot .total-row td {
                border-top: 2px solid #374151;
                padding: 12px 8px;
            }

            .detail-table .row-modified {
                background: #fefce8;
            }

            .text-center {
                text-align: center;
            }

            .text-right {
                text-align: right;
            }

            .text-small {
                font-size: 9px;
            }

            .text-muted {
                color: #9ca3af;
            }

            .text-success {
                color: #16a34a;
            }

            .text-warning {
                color: #d97706;
            }

            .text-danger {
                color: #dc2626;
            }

            .badge {
                display: inline-block;
                padding: 3px 8px;
                border-radius: 10px;
                font-size: 10px;
                font-weight: bold;
            }

            .badge-primary {
                background: #dbeafe;
                color: #1d4ed8;
            }

            /* Fiches d\xE9taill\xE9es */
            .fiche-commande {
                border: 1px solid #e5e7eb;
                border-radius: 6px;
                margin-bottom: 10px;
                page-break-inside: avoid;
                overflow: hidden;
            }

            .fiche-header {
                background: #f3f4f6;
                padding: 8px 12px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                border-bottom: 1px solid #e5e7eb;
            }

            .fiche-numero {
                display: flex;
                align-items: center;
                gap: 10px;
                font-size: 12px;
            }

            .numero-badge {
                background: #374151;
                color: white;
                width: 24px;
                height: 24px;
                border-radius: 50%;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                font-size: 11px;
                font-weight: bold;
            }

            .fiche-status {
                padding: 4px 10px;
                border-radius: 15px;
                font-size: 10px;
                font-weight: bold;
            }

            .status-accepted {
                background: #dcfce7;
                color: #166534;
            }

            .fiche-body {
                padding: 10px;
            }

            .fiche-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 10px;
            }

            .fiche-field {
                margin-bottom: 5px;
            }

            .fiche-field label {
                display: block;
                font-size: 9px;
                color: #6b7280;
                text-transform: uppercase;
                margin-bottom: 2px;
            }

            .fiche-field span {
                font-size: 11px;
                color: #1f2937;
            }

            .fiche-quantites {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 8px;
                background: #f9fafb;
                border-radius: 6px;
                margin-bottom: 8px;
            }

            .fiche-quantites.modified {
                background: #fefce8;
                border: 1px solid #fcd34d;
            }

            .qte-box {
                text-align: center;
            }

            .qte-box label {
                display: block;
                font-size: 9px;
                color: #6b7280;
                margin-bottom: 4px;
            }

            .qte-value {
                font-size: 18px;
                font-weight: bold;
                color: #374151;
            }

            .qte-finale .qte-value {
                color: #059669;
            }

            .qte-arrow {
                font-size: 18px;
                color: #9ca3af;
            }

            .qte-motif {
                flex: 1;
                padding-left: 15px;
                border-left: 2px solid #fcd34d;
            }

            .qte-motif label {
                display: block;
                font-size: 9px;
                color: #6b7280;
                margin-bottom: 2px;
            }

            .qte-motif span {
                font-size: 10px;
                color: #92400e;
                font-style: italic;
            }

            .fiche-dates {
                display: flex;
                gap: 15px;
                font-size: 9px;
                color: #6b7280;
                margin-bottom: 6px;
            }

            .fiche-observations {
                background: #fef3c7;
                padding: 10px;
                border-radius: 6px;
                border-left: 3px solid #f59e0b;
            }

            .fiche-observations label {
                display: block;
                font-size: 9px;
                color: #92400e;
                font-weight: bold;
                margin-bottom: 4px;
            }

            .fiche-observations p {
                font-size: 10px;
                color: #78350f;
                margin: 0;
            }

            /* Pied de page */
            .footer {
                margin-top: 15px;
                padding-top: 10px;
                border-top: 2px solid #e5e7eb;
            }

            .footer-content {
                text-align: center;
                color: #6b7280;
                margin-bottom: 10px;
            }

            .signature-section {
                display: flex;
                justify-content: space-around;
                margin-top: 30px;
            }

            .signature-box {
                text-align: center;
                min-width: 200px;
            }

            .signature-box p {
                font-weight: bold;
                margin-bottom: 40px;
            }

            .signature-line {
                border-bottom: 1px solid #374151;
                margin-bottom: 10px;
            }

            .signature-date {
                font-size: 10px;
                color: #6b7280;
            }

            /* Utilitaires */
            .page-break-before {
                page-break-before: always;
            }

            /* Impression */
            @media print {
                body {
                    margin: 0;
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                }

                .print-container {
                    padding: 5mm;
                }

                .fiche-commande, .section {
                    page-break-inside: avoid;
                }

                .header {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                }
            }

            @page {
                margin: 10mm;
                size: A4;
            }
        `;
  }
  // ============ MÉTHODES LEGACY (conservées pour compatibilité) ============
  /**
   * Génère le HTML pour l'impression (legacy)
   */
  genererHTML(delegation, bonsCommande, options) {
    const styles = this.getStyles();
    const content = this.genererContenu(delegation, bonsCommande, options);
    return `
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <title>Rapport des Bons de Commande - ${delegation}</title>
                <style>${styles}</style>
            </head>
            <body>
                ${content}
            </body>
            </html>
        `;
  }
  genererContenu(delegation, bonsCommande, options) {
    const dateImpression = (/* @__PURE__ */ new Date()).toLocaleDateString("fr-FR", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
    return `
            <div class="print-container">
                <div class="header">
                    <div class="header-content">
                        <h1>RAPPORT DES BONS DE COMMANDE</h1>
                        <div class="header-info">
                            <p><strong>D\xE9l\xE9gation:</strong> ${delegation}</p>
                            <p><strong>Date d'impression:</strong> ${dateImpression}</p>
                            <p><strong>Nombre de commandes:</strong> ${bonsCommande.length}</p>
                        </div>
                    </div>
                </div>
                ${this.genererListeCommandes(bonsCommande)}
                <div class="footer">
                    <p>Document g\xE9n\xE9r\xE9 automatiquement le ${dateImpression}</p>
                    ${options.includeSignature ? '<div class="signature-section"><p>Signature du responsable: ___________________</p></div>' : ""}
                </div>
            </div>
        `;
  }
  genererListeCommandes(bonsCommande) {
    return `
            <div class="section">
                <h2>D\xC9TAILS DES COMMANDES (${bonsCommande.length})</h2>
                ${bonsCommande.map((bon, index) => this.genererDetailCommande(bon, index + 1)).join("")}
            </div>
        `;
  }
  genererDetailCommande(bon, numero) {
    const statusClass = this.getStatusClass(bon.status);
    const statusLabel = this.getStatusLabel(bon.status);
    const detail = this.parseDetailCommande(bon.detailBonCommande);
    return `
            <div class="commande-card">
                <div class="commande-header">
                    <div class="commande-number">
                        <span class="number-badge">${numero}</span>
                        <strong>Commande N\xB0 ${bon.numeroCommande}</strong>
                    </div>
                    <div class="commande-status ${statusClass}">${statusLabel}</div>
                </div>
                <div class="commande-body">
                    <div class="commande-grid">
                        <div class="commande-col">
                            <div class="info-group">
                                <div class="info-label">\u{1F527} Service</div>
                                <div class="info-value">${bon.service}</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u{1F4DD} D\xE9tails</div>
                                <div class="info-value">${detail}</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u{1F464} Utilisateur</div>
                                <div class="info-value">${bon.nomCompletUtilisateur}</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u{1F4DE} Contact</div>
                                <div class="info-value">${bon.contactUtilisateur || "N/A"}</div>
                            </div>
                        </div>
                        <div class="commande-col">
                            <div class="info-group">
                                <div class="info-label">\u{1F4CD} D\xE9l\xE9gation</div>
                                <div class="info-value">${bon.delegation}</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u{1F3E2} Agence</div>
                                <div class="info-value">${bon.agence}</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u{1F3EA} Point de Vente</div>
                                <div class="info-value">${bon.pointVente} (${bon.codePointVente})</div>
                            </div>
                            <div class="info-group">
                                <div class="info-label">\u23F1\uFE0F Dur\xE9e traitement</div>
                                <div class="info-value highlight">${bon.dureeTraitementFormatee}</div>
                            </div>
                        </div>
                    </div>
                    <div class="dates-section">
                        <div class="date-item"><strong>\u{1F4C5} Cr\xE9ation:</strong> ${this.formatDate(bon.dateCreation)}</div>
                        <div class="date-item"><strong>\u2713 Traitement:</strong> ${this.formatDate(bon.dateTraitement)}</div>
                    </div>
                    ${bon.observations ? `<div class="observations-section"><strong>\u{1F4AC} Observations:</strong><p>${bon.observations}</p></div>` : ""}
                </div>
            </div>
        `;
  }
  parseDetailCommande(detail) {
    if (!detail)
      return "N/A";
    try {
      const parsed = JSON.parse(detail);
      return parsed.detailStandard || detail;
    } catch {
      return detail;
    }
  }
  formatDate(date) {
    if (!date)
      return "N/A";
    let dateObj;
    if (Array.isArray(date)) {
      dateObj = new Date(date[0], date[1] - 1, date[2], date[3] || 0, date[4] || 0, date[5] || 0);
    } else if (typeof date === "string") {
      dateObj = new Date(date);
    } else {
      return "N/A";
    }
    return dateObj.toLocaleDateString("fr-FR", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
  getStatusClass(status) {
    const statusMap = {
      ENCOURS: "status-warning",
      TERMINE: "status-success",
      ANNULE: "status-danger",
      EN_ATTENTE: "status-info",
      VALIDE: "status-success",
      ACCEPTE: "status-success"
    };
    return statusMap[status] || "status-secondary";
  }
  getStatusLabel(status) {
    const statusLabels = {
      ENCOURS: "En cours",
      TERMINE: "Termin\xE9",
      ANNULE: "Annul\xE9",
      EN_ATTENTE: "En attente",
      VALIDE: "Valid\xE9",
      ACCEPTE: "Accept\xE9"
    };
    return statusLabels[status] || status;
  }
  getStyles() {
    return `
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 11px; line-height: 1.4; color: #333; background: white; }
            .print-container { max-width: 210mm; margin: 0 auto; padding: 15mm; }
            .header { text-align: center; margin-bottom: 25px; border-bottom: 3px solid #2c3e50; padding-bottom: 15px; }
            .header h1 { font-size: 26px; font-weight: bold; color: #2c3e50; margin-bottom: 12px; }
            .header-info { display: flex; justify-content: space-around; flex-wrap: wrap; }
            .header-info p { margin: 4px 10px; font-size: 11px; }
            .section { margin-bottom: 25px; page-break-inside: avoid; }
            .section h2 { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 10px 15px; font-size: 14px; margin-bottom: 15px; font-weight: bold; }
            .commande-card { background: white; border: 2px solid #dee2e6; border-radius: 8px; margin-bottom: 20px; page-break-inside: avoid; overflow: hidden; }
            .commande-header { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 12px 15px; border-bottom: 2px solid #dee2e6; display: flex; justify-content: space-between; align-items: center; }
            .commande-number { display: flex; align-items: center; gap: 10px; font-size: 13px; font-weight: bold; color: #2c3e50; }
            .number-badge { background: #2c3e50; color: white; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; }
            .commande-status { padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 11px; text-transform: uppercase; }
            .status-warning { background: #fff3cd; color: #856404; border: 1px solid #ffc107; }
            .status-success { background: #d4edda; color: #155724; border: 1px solid #28a745; }
            .status-danger { background: #f8d7da; color: #721c24; border: 1px solid #dc3545; }
            .status-info { background: #d1ecf1; color: #0c5460; border: 1px solid #17a2b8; }
            .status-secondary { background: #e2e3e5; color: #383d41; border: 1px solid #6c757d; }
            .commande-body { padding: 15px; }
            .commande-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
            .commande-col { display: flex; flex-direction: column; gap: 10px; }
            .info-group { border-bottom: 1px solid #e9ecef; padding-bottom: 8px; }
            .info-label { font-size: 10px; color: #6c757d; font-weight: 600; margin-bottom: 3px; text-transform: uppercase; }
            .info-value { font-size: 11px; color: #2c3e50; font-weight: 500; }
            .info-value.highlight { color: #2196F3; font-weight: bold; }
            .dates-section { background: #f8f9fa; padding: 10px 15px; border-radius: 6px; margin-top: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
            .date-item { font-size: 10px; }
            .date-item strong { color: #2c3e50; }
            .observations-section { background: #fff3cd; padding: 10px 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #ffc107; }
            .observations-section strong { display: block; margin-bottom: 5px; color: #856404; font-size: 11px; }
            .observations-section p { color: #333; font-size: 10px; line-height: 1.5; }
            .footer { margin-top: 30px; padding-top: 15px; border-top: 2px solid #dee2e6; text-align: center; font-size: 10px; color: #6c757d; }
            .signature-section { margin-top: 25px; text-align: right; font-size: 11px; }
            @media print { body { margin: 0; } .print-container { padding: 10mm; } .commande-card { page-break-inside: avoid; } .section { page-break-inside: avoid; } .footer { page-break-inside: avoid; } }
            @page { margin: 15mm; size: A4; }
        `;
  }
  static \u0275fac = function PrintBonCommandeService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PrintBonCommandeService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PrintBonCommandeService, factory: _PrintBonCommandeService.\u0275fac, providedIn: "root" });
};

// src/app/pages/dashboard/agent-credit/logistique/logistique.component.ts
var _c06 = () => ({ width: "700px" });
var _c16 = () => ({ width: "500px" });
var _c26 = () => ({ "min-width": "200px" });
var _c33 = () => ({ "min-width": "80rem" });
var _c42 = () => [5, 10, 25, 50];
var _forTrack0 = ($index, $item) => $item.delegation;
function LogistiqueComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 10)(1, "div", 17)(2, "div", 18)(3, "div", 19);
    \u0275\u0275element(4, "i", 20);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 21)(6, "div", 22);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 23);
    \u0275\u0275text(9, "Commandes \xE0 traiter");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(10, "div", 17)(11, "div", 24)(12, "div", 19);
    \u0275\u0275element(13, "i", 25);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div", 21)(15, "div", 22);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 23);
    \u0275\u0275text(18, "Quantit\xE9 totale");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(19, "div", 17)(20, "div", 26)(21, "div", 19);
    \u0275\u0275element(22, "i", 27);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div", 21)(24, "div", 22);
    \u0275\u0275text(25);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 23);
    \u0275\u0275text(27, "D\xE9l\xE9gations");
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(7);
    \u0275\u0275textInterpolate(ctx_r0.totalCommandes());
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate(ctx_r0.totalQuantite());
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate(ctx_r0.getCommandesParDelegation().length);
  }
}
function LogistiqueComponent_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 11)(1, "div", 28);
    \u0275\u0275element(2, "p-progressSpinner");
    \u0275\u0275elementStart(3, "p", 29);
    \u0275\u0275text(4, "Chargement des bons accept\xE9s...");
    \u0275\u0275elementEnd()()();
  }
}
function LogistiqueComponent_Conditional_15_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 34)(1, "div", 3)(2, "h3", 35);
    \u0275\u0275element(3, "i", 36);
    \u0275\u0275text(4, " Bons de Commande Accept\xE9s par le DE ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 37)(6, "span", 38);
    \u0275\u0275element(7, "i", 39);
    \u0275\u0275elementStart(8, "input", 40);
    \u0275\u0275listener("ngModelChange", function LogistiqueComponent_Conditional_15_ng_template_1_Template_input_ngModelChange_8_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.searchTerm.set($event));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "p-dropdown", 41);
    \u0275\u0275listener("ngModelChange", function LogistiqueComponent_Conditional_15_ng_template_1_Template_p_dropdown_ngModelChange_9_listener($event) {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.selectedDelegation.set($event));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "div", 42)(11, "p-button", 43);
    \u0275\u0275listener("onClick", function LogistiqueComponent_Conditional_15_ng_template_1_Template_p_button_onClick_11_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.printRapportSynthese());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "p-button", 44);
    \u0275\u0275listener("onClick", function LogistiqueComponent_Conditional_15_ng_template_1_Template_p_button_onClick_12_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.printRapportComplet());
    });
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(8);
    \u0275\u0275property("ngModel", ctx_r0.searchTerm());
    \u0275\u0275advance();
    \u0275\u0275styleMap(\u0275\u0275pureFunction0(9, _c26));
    \u0275\u0275property("options", ctx_r0.delegations())("ngModel", ctx_r0.selectedDelegation());
    \u0275\u0275advance(2);
    \u0275\u0275property("outlined", true)("disabled", ctx_r0.filteredStocks().length === 0);
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true)("disabled", ctx_r0.filteredStocks().length === 0);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275element(1, "th", 48);
    \u0275\u0275elementStart(2, "th", 49);
    \u0275\u0275text(3, "N\xB0 Commande");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th");
    \u0275\u0275text(5, "Service");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th");
    \u0275\u0275text(7, "D\xE9l\xE9gation");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "th");
    \u0275\u0275text(9, "Demandeur");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 50);
    \u0275\u0275text(11, "Qt\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "th", 51);
    \u0275\u0275text(13, "\xC9tat");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "th", 49);
    \u0275\u0275text(15, "Date Acceptation");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "th", 50);
    \u0275\u0275text(17, "Actions");
    \u0275\u0275elementEnd()();
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_21_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 68);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
    \u0275\u0275element(2, "i", 69);
    \u0275\u0275elementStart(3, "span", 70);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const stock_r4 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(stock_r4.qte);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(stock_r4.qteSuggeree);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 61);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const stock_r4 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(stock_r4.qteSuggeree || stock_r4.qte);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_59_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 77)(1, "span", 78);
    \u0275\u0275text(2, "Qt\xE9 valid\xE9e:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 81);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r4 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(stock_r4.qteSuggeree);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_60_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 77)(1, "span", 78);
    \u0275\u0275text(2, "Motif:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 82);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r4 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(stock_r4.motifQte);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_61_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 80)(1, "h5", 75);
    \u0275\u0275element(2, "i", 83);
    \u0275\u0275text(3, " Observations ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 84);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const stock_r4 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r4.observations);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 71)(2, "div", 72)(3, "div", 73)(4, "div", 17)(5, "div", 74)(6, "h5", 75);
    \u0275\u0275element(7, "i", 76);
    \u0275\u0275text(8, " Informations ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "div", 77)(10, "span", 78);
    \u0275\u0275text(11, "Service:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 79);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "div", 77)(15, "span", 78);
    \u0275\u0275text(16, "Cat\xE9gorie:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "span", 79);
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(19, "div", 77)(20, "span", 78);
    \u0275\u0275text(21, "D\xE9tails:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 79);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(24, "div", 17)(25, "div", 74)(26, "h5", 75);
    \u0275\u0275element(27, "i", 27);
    \u0275\u0275text(28, " Localisation ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "div", 77)(30, "span", 78);
    \u0275\u0275text(31, "D\xE9l\xE9gation:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "span", 79);
    \u0275\u0275text(33);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(34, "div", 77)(35, "span", 78);
    \u0275\u0275text(36, "Agence:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(37, "span", 79);
    \u0275\u0275text(38);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(39, "div", 77)(40, "span", 78);
    \u0275\u0275text(41, "Point de vente:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(42, "span", 79);
    \u0275\u0275text(43);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(44, "div", 17)(45, "div", 74)(46, "h5", 75);
    \u0275\u0275element(47, "i", 25);
    \u0275\u0275text(48, " Quantit\xE9s ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(49, "div", 77)(50, "span", 78);
    \u0275\u0275text(51, "Qt\xE9 demand\xE9e:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(52, "span", 79);
    \u0275\u0275text(53);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(54, "div", 77)(55, "span", 78);
    \u0275\u0275text(56, "Qt\xE9 actuelle:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(57, "span", 79);
    \u0275\u0275text(58);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(59, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_59_Template, 5, 1, "div", 77)(60, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_60_Template, 5, 1, "div", 77);
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(61, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Conditional_61_Template, 6, 1, "div", 80);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    let tmp_8_0;
    const stock_r4 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275property("@rowExpand", "expanded");
    \u0275\u0275advance(13);
    \u0275\u0275textInterpolate(stock_r4.service);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r4.categorieLibele || "-");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(((tmp_8_0 = ctx_r0.parseDetails(stock_r4.detailBonCommande)) == null ? null : tmp_8_0.detailStandard) || "-");
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate(stock_r4.delegationLibele || "-");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r4.agenceLibele || "-");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r4.pointventeLibele || "-");
    \u0275\u0275advance(10);
    \u0275\u0275textInterpolate(stock_r4.qte);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(stock_r4.qteActuelle || stock_r4.qte);
    \u0275\u0275advance();
    \u0275\u0275conditional(stock_r4.qteSuggeree ? 59 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(stock_r4.motifQte ? 60 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(stock_r4.observations ? 61 : -1);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr")(1, "td")(2, "button", 52);
    \u0275\u0275listener("click", function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template_button_click_2_listener() {
      const stock_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.toggleRow(stock_r4));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(3, "td")(4, "span", 53);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(6, "td")(7, "span", 54);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "td")(10, "span", 55);
    \u0275\u0275element(11, "i", 56);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "td")(14, "div", 57)(15, "span", 58);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "small", 59);
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(19, "td", 28)(20, "div", 60);
    \u0275\u0275template(21, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_21_Template, 5, 2)(22, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_22_Template, 2, 1, "span", 61);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "td", 28);
    \u0275\u0275element(24, "p-tag", 62);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "td")(26, "span", 63);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "td", 28)(29, "div", 64)(30, "button", 65);
    \u0275\u0275listener("click", function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template_button_click_30_listener() {
      const stock_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.openDetailDialog(stock_r4));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "button", 66);
    \u0275\u0275listener("click", function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template_button_click_31_listener() {
      const stock_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.printCommande(stock_r4));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(32, "button", 67);
    \u0275\u0275listener("click", function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template_button_click_32_listener() {
      const stock_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.quickValidate(stock_r4));
    });
    \u0275\u0275elementEnd()()()();
    \u0275\u0275template(33, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Conditional_33_Template, 62, 12, "tr");
  }
  if (rf & 2) {
    const stock_r4 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("row-expanded", ctx_r0.isExpanded(stock_r4));
    \u0275\u0275advance(2);
    \u0275\u0275property("icon", ctx_r0.isExpanded(stock_r4) ? "pi pi-chevron-down" : "pi pi-chevron-right");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(stock_r4.numeroCommande);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(stock_r4.service);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", stock_r4.delegationLibele || "-", " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(stock_r4.userFullName || stock_r4.username);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(stock_r4.agenceLibele);
    \u0275\u0275advance(3);
    \u0275\u0275conditional(stock_r4.qteSuggeree && stock_r4.qteSuggeree !== stock_r4.qte ? 21 : 22);
    \u0275\u0275advance(3);
    \u0275\u0275property("value", ctx_r0.getValidationLabel(stock_r4.stateValidation))("severity", ctx_r0.getValidationSeverity(stock_r4.stateValidation));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(stock_r4.dateTraitement));
    \u0275\u0275advance(5);
    \u0275\u0275property("disabled", ctx_r0.processingAction());
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.isExpanded(stock_r4) ? 33 : -1);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 85)(2, "div", 86);
    \u0275\u0275element(3, "i", 87);
    \u0275\u0275elementStart(4, "p", 6);
    \u0275\u0275text(5, "Aucun bon de commande accept\xE9 trouv\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "small", 88);
    \u0275\u0275text(7, "Les bons valid\xE9s par le DE appara\xEEtront ici");
    \u0275\u0275elementEnd()()()();
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 89)(1, "span")(2, "strong");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd();
    \u0275\u0275text(4, " commande(s) - ");
    \u0275\u0275elementStart(5, "strong");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275text(7, " unit\xE9(s) au total ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.filteredStocks().length);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.totalQuantite());
  }
}
function LogistiqueComponent_Conditional_15_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-table", 31);
    \u0275\u0275template(1, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_1_Template, 18, 0, "ng-template", 30)(2, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_2_Template, 34, 14, "ng-template", 45)(3, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_3_Template, 8, 0, "ng-template", 46)(4, LogistiqueComponent_Conditional_15_Conditional_2_ng_template_4_Template, 8, 2, "ng-template", 47);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("value", ctx_r0.filteredStocks())("tableStyle", \u0275\u0275pureFunction0(6, _c33))("paginator", true)("rows", 10)("rowsPerPageOptions", \u0275\u0275pureFunction0(7, _c42))("showCurrentPageReport", true);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275element(1, "i", 90);
    \u0275\u0275elementStart(2, "h3", 91);
    \u0275\u0275text(3, "Aucun bon de commande en attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 88);
    \u0275\u0275text(5, " Les bons de commande accept\xE9s par le Directeur d'Exploitation appara\xEEtront ici. ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p-button", 92);
    \u0275\u0275listener("onClick", function LogistiqueComponent_Conditional_15_Conditional_3_Template_p_button_onClick_6_listener() {
      \u0275\u0275restoreView(_r5);
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.loadStockAcceptes());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance(6);
    \u0275\u0275property("outlined", true);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_4_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 34)(1, "h3", 35);
    \u0275\u0275element(2, "i", 94);
    \u0275\u0275text(3, " Synth\xE8se par D\xE9l\xE9gation ");
    \u0275\u0275elementEnd()();
  }
}
function LogistiqueComponent_Conditional_15_Conditional_4_For_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 93)(1, "div", 95);
    \u0275\u0275listener("click", function LogistiqueComponent_Conditional_15_Conditional_4_For_4_Template_div_click_1_listener() {
      const item_r7 = \u0275\u0275restoreView(_r6).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.selectedDelegation.set(item_r7.delegation));
    });
    \u0275\u0275elementStart(2, "div", 96);
    \u0275\u0275element(3, "i", 97);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 98)(6, "span", 99)(7, "strong");
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275text(9, " cmd ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span", 99)(11, "strong");
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275text(13, " unit\xE9s ");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const item_r7 = ctx.$implicit;
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", item_r7.delegation, " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(item_r7.count);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(item_r7.quantite);
  }
}
function LogistiqueComponent_Conditional_15_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-card", 33);
    \u0275\u0275template(1, LogistiqueComponent_Conditional_15_Conditional_4_ng_template_1_Template, 4, 0, "ng-template", 30);
    \u0275\u0275elementStart(2, "div", 73);
    \u0275\u0275repeaterCreate(3, LogistiqueComponent_Conditional_15_Conditional_4_For_4_Template, 14, 3, "div", 93, _forTrack0);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275repeater(ctx_r0.getCommandesParDelegation());
  }
}
function LogistiqueComponent_Conditional_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-card");
    \u0275\u0275template(1, LogistiqueComponent_Conditional_15_ng_template_1_Template, 13, 10, "ng-template", 30)(2, LogistiqueComponent_Conditional_15_Conditional_2_Template, 5, 8, "p-table", 31)(3, LogistiqueComponent_Conditional_15_Conditional_3_Template, 7, 1, "div", 32);
    \u0275\u0275elementEnd();
    \u0275\u0275template(4, LogistiqueComponent_Conditional_15_Conditional_4_Template, 5, 0, "p-card", 33);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275conditional(ctx_r0.filteredStocks().length > 0 ? 2 : 3);
    \u0275\u0275advance(2);
    \u0275\u0275conditional(ctx_r0.getCommandesParDelegation().length > 1 ? 4 : -1);
  }
}
function LogistiqueComponent_Conditional_17_Conditional_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p", 108)(1, "strong");
    \u0275\u0275text(2, "Motif:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "span", 114);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r0.selectedStock().motifQte);
  }
}
function LogistiqueComponent_Conditional_17_Conditional_57_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 112)(1, "h5", 115);
    \u0275\u0275element(2, "i", 116);
    \u0275\u0275text(3, "D\xE9tails de la commande ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 117);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_2_0;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate((tmp_2_0 = ctx_r0.parseDetails(ctx_r0.selectedStock().detailBonCommande)) == null ? null : tmp_2_0.detailStandard);
  }
}
function LogistiqueComponent_Conditional_17_Conditional_58_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 113)(1, "h5", 115);
    \u0275\u0275element(2, "i", 118);
    \u0275\u0275text(3, "Observations ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 117);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.selectedStock().observations);
  }
}
function LogistiqueComponent_Conditional_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 13)(1, "div", 100)(2, "div", 89)(3, "div")(4, "h4", 101);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 102);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd()();
    \u0275\u0275element(8, "p-tag", 103);
    \u0275\u0275elementEnd()();
    \u0275\u0275element(9, "p-divider");
    \u0275\u0275elementStart(10, "div", 73)(11, "div", 104)(12, "div", 105)(13, "h5", 106);
    \u0275\u0275element(14, "i", 107);
    \u0275\u0275text(15, "Demandeur ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(16, "p", 108)(17, "strong");
    \u0275\u0275text(18, "Nom:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(19);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "p", 108)(21, "strong");
    \u0275\u0275text(22, "Agence:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(23);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "p", 108)(25, "strong");
    \u0275\u0275text(26, "Point de vente:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(28, "div", 104)(29, "div", 105)(30, "h5", 106);
    \u0275\u0275element(31, "i", 5);
    \u0275\u0275text(32, "Quantit\xE9s ");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "p", 108)(34, "strong");
    \u0275\u0275text(35, "Demand\xE9e:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(36);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(37, "p", 108)(38, "strong");
    \u0275\u0275text(39, "Valid\xE9e:");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "span", 109);
    \u0275\u0275text(41);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(42, LogistiqueComponent_Conditional_17_Conditional_42_Template, 5, 1, "p", 108);
    \u0275\u0275elementEnd()()();
    \u0275\u0275element(43, "p-divider");
    \u0275\u0275elementStart(44, "div", 73)(45, "div", 104)(46, "p", 108);
    \u0275\u0275element(47, "i", 110);
    \u0275\u0275elementStart(48, "strong");
    \u0275\u0275text(49, "Cr\xE9ation:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(50);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(51, "div", 104)(52, "p", 108);
    \u0275\u0275element(53, "i", 111);
    \u0275\u0275elementStart(54, "strong");
    \u0275\u0275text(55, "Acceptation:");
    \u0275\u0275elementEnd();
    \u0275\u0275text(56);
    \u0275\u0275elementEnd()()();
    \u0275\u0275template(57, LogistiqueComponent_Conditional_17_Conditional_57_Template, 6, 1, "div", 112)(58, LogistiqueComponent_Conditional_17_Conditional_58_Template, 6, 1, "div", 113);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.selectedStock().numeroCommande);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r0.selectedStock().service);
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r0.getValidationLabel(ctx_r0.selectedStock().stateValidation))("severity", ctx_r0.getValidationSeverity(ctx_r0.selectedStock().stateValidation));
    \u0275\u0275advance(11);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().userFullName, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().agenceLibele, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().pointventeLibele || "-", "");
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().qte, "");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.selectedStock().qteSuggeree || ctx_r0.selectedStock().qte);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStock().motifQte ? 42 : -1);
    \u0275\u0275advance(8);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatDate(ctx_r0.selectedStock().dateCreation), " ");
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatDate(ctx_r0.selectedStock().dateTraitement), " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStock().detailBonCommande ? 57 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStock().observations ? 58 : -1);
  }
}
function LogistiqueComponent_ng_template_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 119);
    \u0275\u0275listener("onClick", function LogistiqueComponent_ng_template_18_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r8);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.closeDetailDialog());
    });
    \u0275\u0275elementEnd();
  }
}
function LogistiqueComponent_Conditional_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 16)(1, "div", 120)(2, "p", 108)(3, "strong");
    \u0275\u0275text(4, "Commande :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "p", 108)(7, "strong");
    \u0275\u0275text(8, "Service :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "p", 108)(11, "strong");
    \u0275\u0275text(12, "D\xE9l\xE9gation :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "p", 108)(15, "strong");
    \u0275\u0275text(16, "Quantit\xE9 :");
    \u0275\u0275elementEnd();
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "div", 121);
    \u0275\u0275element(19, "i", 122);
    \u0275\u0275elementStart(20, "span");
    \u0275\u0275text(21, "En validant, cette commande sera marqu\xE9e comme ");
    \u0275\u0275elementStart(22, "strong");
    \u0275\u0275text(23, "trait\xE9e");
    \u0275\u0275elementEnd();
    \u0275\u0275text(24, " et dispara\xEEtra de votre liste.");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "div", 123)(26, "label", 124);
    \u0275\u0275text(27, "Observations (optionnel)");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "textarea", 125);
    \u0275\u0275twoWayListener("ngModelChange", function LogistiqueComponent_Conditional_21_Template_textarea_ngModelChange_28_listener($event) {
      \u0275\u0275restoreView(_r9);
      const ctx_r0 = \u0275\u0275nextContext();
      \u0275\u0275twoWayBindingSet(ctx_r0.validationObservations, $event) || (ctx_r0.validationObservations = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275text(29, "            ");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().numeroCommande, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().service, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().delegationLibele, "");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1(" ", ctx_r0.selectedStock().qteSuggeree || ctx_r0.selectedStock().qte, "");
    \u0275\u0275advance(11);
    \u0275\u0275twoWayProperty("ngModel", ctx_r0.validationObservations);
    \u0275\u0275property("disabled", ctx_r0.processingAction());
  }
}
function LogistiqueComponent_ng_template_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 126);
    \u0275\u0275listener("onClick", function LogistiqueComponent_ng_template_22_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.closeValidationDialog());
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(1, "p-button", 127);
    \u0275\u0275listener("onClick", function LogistiqueComponent_ng_template_22_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r10);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.confirmValidation());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("text", true)("disabled", ctx_r0.processingAction());
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r0.processingAction())("loading", ctx_r0.processingAction());
  }
}
var LogistiqueComponent = class _LogistiqueComponent {
  user;
  Object = Object;
  userService = inject(UserService);
  messageService = inject(MessageService);
  printService = inject(PrintBonCommandeService);
  confirmationService = inject(ConfirmationService);
  // Signals principaux
  stocks = signal([]);
  loading = signal(false);
  expandedRows = signal({});
  processingAction = signal(false);
  // Dialogue de validation
  showValidationDialog = signal(false);
  validationObservations = signal("");
  // Filtres
  searchTerm = signal("");
  selectedDelegation = signal(null);
  // Dialogue de détail
  showDetailDialog = signal(false);
  selectedStock = signal(null);
  // Liste des délégations uniques
  delegations = computed(() => {
    const uniqueDelegations = [
      ...new Set(this.stocks().map((s) => s.delegationLibele).filter(Boolean))
    ];
    return [{ label: "Toutes les d\xE9l\xE9gations", value: null }, ...uniqueDelegations.map((d) => ({ label: d, value: d }))];
  });
  // Stocks filtrés
  filteredStocks = computed(() => {
    let result = this.stocks();
    if (this.selectedDelegation()) {
      result = result.filter((s) => s.delegationLibele === this.selectedDelegation());
    }
    const term = this.searchTerm().toLowerCase();
    if (term) {
      result = result.filter((s) => s.numeroCommande?.toLowerCase().includes(term) || s.service?.toLowerCase().includes(term) || s.userFullName?.toLowerCase().includes(term) || s.delegationLibele?.toLowerCase().includes(term) || s.agenceLibele?.toLowerCase().includes(term));
    }
    return result;
  });
  // Statistiques
  totalCommandes = computed(() => this.filteredStocks().length);
  totalQuantite = computed(() => this.filteredStocks().reduce((sum, s) => sum + (s.qteSuggeree || s.qte || 0), 0));
  ngOnInit() {
    this.loadStockAcceptes();
  }
  /**
   * Charger les bons acceptés par le DE pour la logistique
   */
  loadStockAcceptes() {
    this.loading.set(true);
    this.userService.getStockAcceptesPourLogistique$().pipe(catchError((error) => {
      console.error("Erreur lors du chargement des bons accept\xE9s:", error);
      this.showError("Erreur lors du chargement des bons de commande");
      return of({ data: { stocks: [] } });
    })).subscribe((response) => {
      console.log("Bons accept\xE9s pour logistique:", response);
      if (response?.data?.stocks) {
        this.stocks.set(response.data.stocks);
        this.showSuccess(`${response.data.stocks.length} bon(s) de commande pr\xEAt(s) pour traitement`);
      } else {
        this.stocks.set([]);
      }
      this.loading.set(false);
    });
  }
  /**
   * Afficher un message de succès
   */
  showSuccess(message) {
    this.messageService.add({
      severity: "success",
      summary: "Succ\xE8s",
      detail: message,
      life: 3e3
    });
  }
  /**
   * Afficher un message d'erreur
   */
  showError(message) {
    this.messageService.add({
      severity: "error",
      summary: "Erreur",
      detail: message,
      life: 5e3
    });
  }
  // ==================== GESTION DES LIGNES EXPANSIBLES ====================
  toggleRow(stock) {
    const currentExpanded = this.expandedRows();
    const stockId = stock.idCmd?.toString() || "";
    this.expandedRows.set(__spreadProps(__spreadValues({}, currentExpanded), {
      [stockId]: !currentExpanded[stockId]
    }));
  }
  isExpanded(stock) {
    return this.expandedRows()[stock.idCmd?.toString() || ""] || false;
  }
  // ==================== UTILITAIRES D'AFFICHAGE ====================
  parseDetails(detailJson) {
    try {
      if (!detailJson)
        return null;
      return JSON.parse(detailJson);
    } catch (e) {
      return { detailStandard: detailJson };
    }
  }
  getStatusSeverity(status) {
    const statusMap = {
      ENCOURS: "warn",
      TERMINE: "success",
      ANNULE: "danger",
      EN_ATTENTE: "info",
      VALIDE: "success",
      ACCEPTE: "success"
    };
    return statusMap[status] || "secondary";
  }
  getStatusLabel(status) {
    const statusLabels = {
      ENCOURS: "En cours",
      TERMINE: "Termin\xE9",
      ANNULE: "Annul\xE9",
      EN_ATTENTE: "En attente",
      VALIDE: "Valid\xE9 DR",
      ACCEPTE: "Accept\xE9 DE"
    };
    return statusLabels[status] || status;
  }
  getValidationSeverity(validation) {
    switch (validation) {
      case "ACCEPTE":
        return "success";
      case "VALIDE":
        return "info";
      case "REFUSE":
        return "danger";
      default:
        return "warn";
    }
  }
  getValidationLabel(validation) {
    const labels = {
      ACCEPTE: "Accept\xE9 par DE",
      VALIDE: "Valid\xE9 par DR",
      REFUSE: "Refus\xE9",
      EN_ATTENTE: "En attente"
    };
    return labels[validation] || validation;
  }
  formatDate(date) {
    if (!date)
      return "-";
    if (Array.isArray(date)) {
      const [year, month, day, hour = 0, minute = 0] = date;
      return new Date(year, month - 1, day, hour, minute).toLocaleString("fr-FR");
    }
    if (typeof date === "string") {
      return new Date(date).toLocaleString("fr-FR");
    }
    return "-";
  }
  // ==================== DIALOGUE DE DÉTAIL ====================
  openDetailDialog(stock) {
    this.selectedStock.set(stock);
    this.showDetailDialog.set(true);
  }
  closeDetailDialog() {
    this.showDetailDialog.set(false);
    this.selectedStock.set(null);
  }
  // ==================== IMPRESSION ====================
  /**
   * Imprimer le rapport synthétique (tableau uniquement)
   */
  printRapportSynthese() {
    if (this.filteredStocks().length === 0) {
      this.showError("Aucune commande \xE0 imprimer");
      return;
    }
    this.printService.imprimerRapportLogistique(this.filteredStocks(), {
      includeSignature: true,
      includeDetails: false,
      autoClose: false,
      companyName: "DIRECTION LOGISTIQUE"
    });
  }
  /**
   * Imprimer le rapport complet avec fiches détaillées
   */
  printRapportComplet() {
    if (this.filteredStocks().length === 0) {
      this.showError("Aucune commande \xE0 imprimer");
      return;
    }
    this.printService.imprimerRapportLogistique(this.filteredStocks(), {
      includeSignature: true,
      includeDetails: true,
      autoClose: false,
      companyName: "DIRECTION LOGISTIQUE"
    });
  }
  /**
   * Imprimer une commande spécifique
   */
  printCommande(stock) {
    this.printService.imprimerRapportLogistique([stock], {
      includeSignature: true,
      includeDetails: true,
      autoClose: false,
      companyName: "DIRECTION LOGISTIQUE"
    });
  }
  /**
   * Obtenir la date actuelle formatée
   */
  getCurrentDate() {
    return (/* @__PURE__ */ new Date()).toLocaleDateString("fr-FR", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
  // ==================== VALIDATION LOGISTIQUE ====================
  /**
   * Ouvrir le dialogue de validation pour une commande
   */
  openValidationDialog(stock) {
    this.selectedStock.set(stock);
    this.validationObservations.set("");
    this.showValidationDialog.set(true);
  }
  /**
   * Fermer le dialogue de validation
   */
  closeValidationDialog() {
    this.showValidationDialog.set(false);
    this.selectedStock.set(null);
    this.validationObservations.set("");
  }
  /**
   * Confirmer et exécuter la validation logistique
   */
  confirmValidation() {
    const stock = this.selectedStock();
    if (!stock)
      return;
    this.confirmationService.confirm({
      message: `\xCAtes-vous s\xFBr de vouloir valider la commande ${stock.numeroCommande} ?
Cette action est d\xE9finitive et le bon dispara\xEEtra de votre liste.`,
      header: "Confirmation de traitement",
      icon: "pi pi-check-circle",
      acceptLabel: "Valider",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.executeValidation(stock);
      }
    });
  }
  /**
   * Exécuter la validation logistique
   */
  executeValidation(stock) {
    this.processingAction.set(true);
    this.userService.validationLogistique$(stock.idCmd, this.validationObservations() || void 0).subscribe({
      next: (response) => {
        this.showSuccess(`Commande ${stock.numeroCommande} trait\xE9e avec succ\xE8s`);
        this.closeValidationDialog();
        this.loadStockAcceptes();
      },
      error: (error) => {
        console.error("Erreur validation logistique:", error);
        this.showError(error.error?.message || "Erreur lors du traitement de la commande");
      },
      complete: () => {
        this.processingAction.set(false);
      }
    });
  }
  /**
   * Validation rapide sans dialogue (avec confirmation)
   */
  quickValidate(stock) {
    this.confirmationService.confirm({
      message: `Valider la commande ${stock.numeroCommande} ?
Le bon sera marqu\xE9 comme trait\xE9 et dispara\xEEtra de votre liste.`,
      header: "Confirmation rapide",
      icon: "pi pi-check",
      acceptLabel: "Oui, valider",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.processingAction.set(true);
        this.userService.validationLogistique$(stock.idCmd).subscribe({
          next: () => {
            this.showSuccess(`Commande ${stock.numeroCommande} trait\xE9e`);
            this.loadStockAcceptes();
          },
          error: (error) => {
            this.showError(error.error?.message || "Erreur lors du traitement");
          },
          complete: () => {
            this.processingAction.set(false);
          }
        });
      }
    });
  }
  /**
   * Compter les commandes par délégation
   */
  getCommandesParDelegation() {
    const map = /* @__PURE__ */ new Map();
    this.filteredStocks().forEach((stock) => {
      const delegation = stock.delegationLibele || "Non sp\xE9cifi\xE9e";
      const existing = map.get(delegation) || { count: 0, quantite: 0 };
      map.set(delegation, {
        count: existing.count + 1,
        quantite: existing.quantite + (stock.qteSuggeree || stock.qte || 0)
      });
    });
    return Array.from(map.entries()).map(([delegation, data]) => ({
      delegation,
      count: data.count,
      quantite: data.quantite
    })).sort((a, b) => b.count - a.count);
  }
  static \u0275fac = function LogistiqueComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _LogistiqueComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _LogistiqueComponent, selectors: [["app-logistique"]], inputs: { user: "user" }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 23, vars: 24, consts: [[1, "logistique-container"], ["position", "top-right"], ["styleClass", "header-card mb-4"], [1, "flex", "justify-content-between", "align-items-center", "flex-wrap", "gap-3"], [1, "text-2xl", "font-bold", "text-primary", "m-0", "mb-2"], [1, "pi", "pi-box", "mr-2"], [1, "text-600", "m-0"], [1, "flex", "gap-2"], ["icon", "pi pi-refresh", "label", "Actualiser", 3, "onClick", "outlined", "loading"], ["icon", "pi pi-print", "label", "Imprimer", "severity", "secondary", "pTooltip", "Imprimer le rapport synth\xE9tique", 3, "onClick", "disabled"], [1, "grid", "mb-4"], [1, "flex", "justify-content-center", "align-items-center", 2, "min-height", "300px"], ["header", "D\xE9tails de la commande", 3, "visibleChange", "visible", "modal", "draggable", "resizable", "closable"], [1, "detail-dialog-content"], ["pTemplate", "footer"], ["header", "Validation de la commande", 3, "visibleChange", "visible", "modal", "draggable", "resizable", "closable"], [1, "validation-dialog-content"], [1, "col-12", "md:col-4"], [1, "stat-card", "stat-total"], [1, "stat-icon"], [1, "pi", "pi-list"], [1, "stat-content"], [1, "stat-value"], [1, "stat-label"], [1, "stat-card", "stat-quantity"], [1, "pi", "pi-box"], [1, "stat-card", "stat-delegations"], [1, "pi", "pi-map-marker"], [1, "text-center"], [1, "mt-3", "text-600"], ["pTemplate", "header"], ["styleClass", "p-datatable-striped p-datatable-gridlines", "currentPageReportTemplate", "Affichage {first} \xE0 {last} sur {totalRecords} commandes", 3, "value", "tableStyle", "paginator", "rows", "rowsPerPageOptions", "showCurrentPageReport"], [1, "empty-state-large"], ["styleClass", "mt-4"], [1, "p-4", "border-bottom-1", "surface-border"], [1, "m-0", "text-xl", "font-semibold"], [1, "pi", "pi-check-circle", "mr-2", "text-green-500"], [1, "flex", "gap-2", "flex-wrap", "align-items-center"], [1, "p-input-icon-left"], [1, "pi", "pi-search"], ["pInputText", "", "type", "text", "placeholder", "Rechercher...", 3, "ngModelChange", "ngModel"], ["optionLabel", "label", "optionValue", "value", "placeholder", "Filtrer par d\xE9l\xE9gation", 3, "ngModelChange", "options", "ngModel"], [1, "flex", "gap-1", "ml-2"], ["icon", "pi pi-file", "severity", "info", "size", "small", "pTooltip", "Rapport synth\xE9tique", 3, "onClick", "outlined", "disabled"], ["icon", "pi pi-file-pdf", "severity", "danger", "size", "small", "pTooltip", "Rapport complet avec d\xE9tails", 3, "onClick", "outlined", "disabled"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], ["pTemplate", "summary"], [2, "width", "3%"], [2, "width", "12%"], [1, "text-center", 2, "width", "8%"], [1, "text-center", 2, "width", "10%"], ["pButton", "", "type", "button", 1, "p-button-text", "p-button-rounded", "p-button-sm", 3, "click", "icon"], [1, "font-bold", "text-primary"], [1, "service-badge"], [1, "delegation-badge"], [1, "pi", "pi-map-marker", "mr-1"], [1, "flex", "flex-column"], [1, "font-semibold"], [1, "text-500"], [1, "quantity-display"], [1, "quantity-normal"], [3, "value", "severity"], [1, "text-sm"], [1, "flex", "gap-1", "justify-content-center"], ["pButton", "", "type", "button", "icon", "pi pi-eye", "pTooltip", "Voir les d\xE9tails", 1, "p-button-info", "p-button-rounded", "p-button-sm", 3, "click"], ["pButton", "", "type", "button", "icon", "pi pi-print", "pTooltip", "Imprimer cette commande", 1, "p-button-secondary", "p-button-rounded", "p-button-sm", 3, "click"], ["pButton", "", "type", "button", "icon", "pi pi-check", "pTooltip", "Valider - Marquer comme trait\xE9", 1, "p-button-success", "p-button-rounded", "p-button-sm", 3, "click", "disabled"], [1, "quantity-original"], [1, "pi", "pi-arrow-right", "mx-1", "text-orange-500"], [1, "quantity-suggested"], ["colspan", "9"], [1, "detail-container"], [1, "grid"], [1, "detail-section"], [1, "detail-title"], [1, "pi", "pi-info-circle"], [1, "detail-item"], [1, "label"], [1, "value"], [1, "observations-section", "mt-3"], [1, "value", "text-green-600", "font-bold"], [1, "value", "text-orange-600"], [1, "pi", "pi-comment"], [1, "observations-text"], ["colspan", "9", 1, "text-center", "p-5"], [1, "empty-state"], [1, "pi", "pi-inbox", "text-5xl", "text-400", "mb-3"], [1, "text-400"], [1, "flex", "justify-content-between", "align-items-center"], [1, "pi", "pi-check-circle", "text-6xl", "text-green-300", "mb-4"], [1, "text-600", "mb-2"], ["icon", "pi pi-refresh", "label", "Actualiser", 1, "mt-3", 3, "onClick", "outlined"], [1, "col-12", "md:col-6", "lg:col-4", "xl:col-3"], [1, "pi", "pi-chart-bar", "mr-2", "text-primary"], [1, "delegation-summary-card", 3, "click"], [1, "delegation-name"], [1, "pi", "pi-map-marker", "mr-2"], [1, "delegation-stats"], [1, "stat"], [1, "dialog-header-section", "mb-4"], [1, "m-0", "text-primary"], [1, "text-600"], ["styleClass", "text-lg px-3", 3, "value", "severity"], [1, "col-12", "md:col-6"], [1, "info-group"], [1, "text-primary", "mb-3"], [1, "pi", "pi-user", "mr-2"], [1, "mb-2"], [1, "text-green-600", "font-bold"], [1, "pi", "pi-calendar-plus", "text-blue-500", "mr-2"], [1, "pi", "pi-calendar-check", "text-green-500", "mr-2"], [1, "detail-box", "mt-3"], [1, "observations-box", "mt-3"], [1, "text-orange-600"], [1, "text-primary", "mb-2"], [1, "pi", "pi-file-edit", "mr-2"], [1, "m-0"], [1, "pi", "pi-comment", "mr-2"], ["label", "Fermer", "icon", "pi pi-times", "severity", "secondary", 3, "onClick"], [1, "info-section", "mb-3"], [1, "alert-info", "mb-3"], [1, "pi", "pi-info-circle", "mr-2"], [1, "field"], ["for", "validation-obs"], ["pTextarea", "", "id", "validation-obs", "rows", "3", "placeholder", "Ajoutez des observations sur le traitement...", 1, "w-full", 3, "ngModelChange", "ngModel", "disabled"], ["label", "Annuler", "icon", "pi pi-times", "severity", "secondary", 3, "onClick", "text", "disabled"], ["label", "Valider la commande", "icon", "pi pi-check", "severity", "success", 3, "onClick", "disabled", "loading"]], template: function LogistiqueComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275element(1, "p-toast", 1);
      \u0275\u0275elementStart(2, "p-card", 2)(3, "div", 3)(4, "div")(5, "h2", 4);
      \u0275\u0275element(6, "i", 5);
      \u0275\u0275text(7, " Gestion Logistique - Bons Accept\xE9s ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(8, "p", 6);
      \u0275\u0275text(9, " Bons de commande valid\xE9s par le DE, pr\xEAts pour traitement ");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(10, "div", 7)(11, "p-button", 8);
      \u0275\u0275listener("onClick", function LogistiqueComponent_Template_p_button_onClick_11_listener() {
        return ctx.loadStockAcceptes();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(12, "p-button", 9);
      \u0275\u0275listener("onClick", function LogistiqueComponent_Template_p_button_onClick_12_listener() {
        return ctx.printRapportSynthese();
      });
      \u0275\u0275elementEnd()()()();
      \u0275\u0275template(13, LogistiqueComponent_Conditional_13_Template, 28, 3, "div", 10)(14, LogistiqueComponent_Conditional_14_Template, 5, 0, "div", 11)(15, LogistiqueComponent_Conditional_15_Template, 5, 2);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(16, "p-dialog", 12);
      \u0275\u0275twoWayListener("visibleChange", function LogistiqueComponent_Template_p_dialog_visibleChange_16_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.showDetailDialog, $event) || (ctx.showDetailDialog = $event);
        return $event;
      });
      \u0275\u0275template(17, LogistiqueComponent_Conditional_17_Template, 59, 14, "div", 13)(18, LogistiqueComponent_ng_template_18_Template, 1, 0, "ng-template", 14);
      \u0275\u0275elementEnd();
      \u0275\u0275element(19, "p-confirmDialog");
      \u0275\u0275elementStart(20, "p-dialog", 15);
      \u0275\u0275twoWayListener("visibleChange", function LogistiqueComponent_Template_p_dialog_visibleChange_20_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.showValidationDialog, $event) || (ctx.showValidationDialog = $event);
        return $event;
      });
      \u0275\u0275template(21, LogistiqueComponent_Conditional_21_Template, 30, 6, "div", 16)(22, LogistiqueComponent_ng_template_22_Template, 2, 4, "ng-template", 14);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(11);
      \u0275\u0275property("outlined", true)("loading", ctx.loading());
      \u0275\u0275advance();
      \u0275\u0275property("disabled", ctx.filteredStocks().length === 0);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.loading() ? 13 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.loading() ? 14 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.loading() ? 15 : -1);
      \u0275\u0275advance();
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(22, _c06));
      \u0275\u0275twoWayProperty("visible", ctx.showDetailDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false)("closable", true);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.selectedStock() ? 17 : -1);
      \u0275\u0275advance(3);
      \u0275\u0275styleMap(\u0275\u0275pureFunction0(23, _c16));
      \u0275\u0275twoWayProperty("visible", ctx.showValidationDialog);
      \u0275\u0275property("modal", true)("draggable", false)("resizable", false)("closable", !ctx.processingAction());
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.selectedStock() ? 21 : -1);
    }
  }, dependencies: [
    CommonModule,
    FormsModule,
    DefaultValueAccessor,
    NgControlStatus,
    NgModel,
    ReactiveFormsModule,
    ButtonModule,
    ButtonDirective,
    Button,
    PrimeTemplate,
    CardModule,
    Card,
    TableModule,
    Table,
    TagModule,
    Tag,
    ToastModule,
    Toast,
    ProgressSpinnerModule,
    ProgressSpinner,
    DividerModule,
    Divider,
    PanelModule,
    TabViewModule,
    DialogModule,
    Dialog,
    MessageModule,
    MessagesModule,
    TooltipModule,
    Tooltip,
    BadgeModule,
    ChipModule,
    InputTextModule,
    InputText,
    DropdownModule,
    Dropdown,
    ConfirmDialogModule,
    ConfirmDialog,
    TextareaModule,
    Textarea
  ], styles: ["\n\n.logistique-container[_ngcontent-%COMP%] {\n  padding: 2rem;\n  min-height: 100vh;\n}\n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #22c55e 0%,\n      #16a34a 100%);\n}\n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]     .p-card-body {\n  padding: 1.5rem;\n}\n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], \n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: white;\n}\n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]     .p-button-outlined {\n  border-color: white;\n  color: white;\n}\n.logistique-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]     .p-button-outlined:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n.stat-card[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-radius: 12px;\n  background: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n.stat-card[_ngcontent-%COMP%]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n}\n.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  width: 60px;\n  height: 60px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.75rem;\n  color: white;\n}\n.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-weight: 700;\n  line-height: 1;\n  margin-bottom: 0.25rem;\n}\n.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n.stat-card.stat-total[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #3b82f6 0%,\n      #2563eb 100%);\n}\n.stat-card.stat-total[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: #2563eb;\n}\n.stat-card.stat-quantity[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #22c55e 0%,\n      #16a34a 100%);\n}\n.stat-card.stat-quantity[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: #16a34a;\n}\n.stat-card.stat-delegations[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background:\n    linear-gradient(\n      135deg,\n      #f59e0b 0%,\n      #d97706 100%);\n}\n.stat-card.stat-delegations[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  color: #d97706;\n}\n.service-badge[_ngcontent-%COMP%] {\n  background: #e0e7ff;\n  color: #4338ca;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n}\n.delegation-badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  background: #fef3c7;\n  color: #d97706;\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 600;\n}\n.delegation-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n}\n.quantity-display[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.25rem;\n}\n.quantity-display[_ngcontent-%COMP%]   .quantity-original[_ngcontent-%COMP%] {\n  text-decoration: line-through;\n  color: #9ca3af;\n  font-size: 0.875rem;\n}\n.quantity-display[_ngcontent-%COMP%]   .quantity-suggested[_ngcontent-%COMP%] {\n  font-weight: 700;\n  color: #22c55e;\n  font-size: 1.125rem;\n}\n.quantity-display[_ngcontent-%COMP%]   .quantity-normal[_ngcontent-%COMP%] {\n  font-weight: 600;\n  font-size: 1rem;\n}\n.row-expanded[_ngcontent-%COMP%] {\n  background-color: #f0fdf4 !important;\n}\n.detail-container[_ngcontent-%COMP%] {\n  padding: 1.5rem;\n  background: #f8fafc;\n  border-radius: 8px;\n  animation: _ngcontent-%COMP%_slideDown 0.3s ease-out;\n}\n@keyframes _ngcontent-%COMP%_slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n.detail-section[_ngcontent-%COMP%] {\n  background: white;\n  padding: 1rem;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  height: 100%;\n}\n.detail-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #374151;\n  font-weight: 600;\n  font-size: 0.9rem;\n  margin-bottom: 0.75rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 2px solid #e5e7eb;\n}\n.detail-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #22c55e;\n}\n.detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.4rem 0;\n  font-size: 0.875rem;\n}\n.detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  color: #6b7280;\n}\n.detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%] {\n  font-weight: 500;\n  color: #1f2937;\n  text-align: right;\n}\n.observations-section[_ngcontent-%COMP%] {\n  background: white;\n  padding: 1rem;\n  border-radius: 8px;\n  border-left: 4px solid #22c55e;\n}\n.observations-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #374151;\n  font-weight: 600;\n  font-size: 0.9rem;\n  margin-bottom: 0.5rem;\n}\n.observations-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #22c55e;\n}\n.observations-section[_ngcontent-%COMP%]   .observations-text[_ngcontent-%COMP%] {\n  margin: 0;\n  color: #4b5563;\n  font-size: 0.875rem;\n  font-style: italic;\n}\n.empty-state[_ngcontent-%COMP%] {\n  padding: 2rem;\n}\n.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  display: block;\n}\n.empty-state-large[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 4rem 2rem;\n}\n.empty-state-large[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  display: block;\n}\n.delegation-summary-card[_ngcontent-%COMP%] {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 10px;\n  padding: 1rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.delegation-summary-card[_ngcontent-%COMP%]:hover {\n  border-color: #22c55e;\n  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.15);\n  transform: translateY(-2px);\n}\n.delegation-summary-card[_ngcontent-%COMP%]   .delegation-name[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n}\n.delegation-summary-card[_ngcontent-%COMP%]   .delegation-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #22c55e;\n}\n.delegation-summary-card[_ngcontent-%COMP%]   .delegation-stats[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1rem;\n}\n.delegation-summary-card[_ngcontent-%COMP%]   .delegation-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%] {\n  font-size: 0.875rem;\n  color: #6b7280;\n}\n.delegation-summary-card[_ngcontent-%COMP%]   .delegation-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\n  color: #22c55e;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .dialog-header-section[_ngcontent-%COMP%] {\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1rem;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .info-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  font-size: 0.9rem;\n  color: #4b5563;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%] {\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid #e5e7eb;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .detail-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #4b5563;\n  font-size: 0.875rem;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .observations-box[_ngcontent-%COMP%] {\n  background: #fef3c7;\n  padding: 1rem;\n  border-radius: 8px;\n  border-left: 4px solid #f59e0b;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .observations-box[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n}\n.detail-dialog-content[_ngcontent-%COMP%]   .observations-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: #92400e;\n  font-size: 0.875rem;\n  font-style: italic;\n}\n.validation-dialog-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%] {\n  background: #f8fafc;\n  padding: 1rem;\n  border-radius: 8px;\n}\n.validation-dialog-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 0.9rem;\n  color: #4b5563;\n}\n.validation-dialog-content[_ngcontent-%COMP%]   .alert-info[_ngcontent-%COMP%] {\n  background: #dbeafe;\n  color: #1e40af;\n  padding: 0.75rem 1rem;\n  border-radius: 8px;\n  border-left: 4px solid #3b82f6;\n  display: flex;\n  align-items: center;\n  font-size: 0.875rem;\n}\n@media screen and (max-width: 768px) {\n  .logistique-container[_ngcontent-%COMP%] {\n    padding: 1rem;\n  }\n  .stat-card[_ngcontent-%COMP%] {\n    padding: 1rem;\n  }\n  .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n    width: 50px;\n    height: 50px;\n  }\n  .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n    font-size: 1.5rem;\n  }\n  .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n    font-size: 1.5rem;\n  }\n}\n.print-view[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #e9ecef;\n  z-index: 9999;\n  overflow-y: auto;\n}\n.print-view[_ngcontent-%COMP%]   .print-header[_ngcontent-%COMP%] {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  padding: 1rem;\n  background-color: #e9ecef;\n}\n.print-view[_ngcontent-%COMP%]   .print-content[_ngcontent-%COMP%] {\n  padding: 2rem;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n.print-view[_ngcontent-%COMP%]   .print-content[_ngcontent-%COMP%]   .print-page[_ngcontent-%COMP%] {\n  min-height: calc(100vh - 6rem);\n}\n.print-view[_ngcontent-%COMP%]   .page-break-avoid[_ngcontent-%COMP%] {\n  page-break-inside: avoid;\n  break-inside: avoid;\n}\n@media print {\n  body[_ngcontent-%COMP%] {\n    background: white !important;\n  }\n  .no-print[_ngcontent-%COMP%] {\n    display: none !important;\n  }\n  .print-view[_ngcontent-%COMP%] {\n    position: static;\n    background-color: white;\n    overflow: visible;\n  }\n  .print-view[_ngcontent-%COMP%]   .print-header[_ngcontent-%COMP%] {\n    display: none !important;\n  }\n  .print-view[_ngcontent-%COMP%]   .print-content[_ngcontent-%COMP%] {\n    padding: 0;\n    max-width: 100%;\n  }\n  .print-view[_ngcontent-%COMP%]   .print-content[_ngcontent-%COMP%]   .print-page[_ngcontent-%COMP%] {\n    box-shadow: none !important;\n    border-radius: 0 !important;\n    min-height: auto;\n  }\n  .page-break-avoid[_ngcontent-%COMP%] {\n    page-break-inside: avoid;\n    break-inside: avoid;\n  }\n  *[_ngcontent-%COMP%] {\n    -webkit-print-color-adjust: exact !important;\n    print-color-adjust: exact !important;\n    color-adjust: exact !important;\n  }\n  .shadow-1[_ngcontent-%COMP%], \n   .shadow-2[_ngcontent-%COMP%], \n   .shadow-3[_ngcontent-%COMP%] {\n    box-shadow: none !important;\n  }\n  .border-round[_ngcontent-%COMP%] {\n    border-radius: 8px !important;\n  }\n  .surface-card[_ngcontent-%COMP%] {\n    border: 1px solid #dee2e6 !important;\n    page-break-inside: avoid;\n  }\n  h1[_ngcontent-%COMP%], \n   h2[_ngcontent-%COMP%], \n   h3[_ngcontent-%COMP%], \n   h4[_ngcontent-%COMP%], \n   h5[_ngcontent-%COMP%], \n   h6[_ngcontent-%COMP%] {\n    page-break-after: avoid;\n  }\n  .grid[_ngcontent-%COMP%] {\n    page-break-inside: avoid;\n  }\n}\n/*# sourceMappingURL=logistique.component.css.map */"], data: { animation: [trigger("rowExpand", [state("collapsed", style({ height: "0px", minHeight: "0", display: "none" })), state("expanded", style({ height: "*" })), transition("expanded <=> collapsed", animate("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])] } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(LogistiqueComponent, { className: "LogistiqueComponent", filePath: "src/app/pages/dashboard/agent-credit/logistique/logistique.component.ts", lineNumber: 70 });
})();

// src/app/pages/dashboard/admin/de/credit-par-delegation/credit-par-delegation.component.ts
var _c07 = () => [10, 25, 50];
var _c17 = () => ["nom", "prenom", "numeroMembre", "descriptionActivite"];
var _c27 = (a0) => ["/dashboards/credit/individuel/attente/detail", a0];
function CreditParDelegationComponent_Conditional_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 7)(1, "div", 12)(2, "div", 13)(3, "div", 14);
    \u0275\u0275element(4, "i", 15);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div")(6, "div", 16);
    \u0275\u0275text(7, "D\xE9l\xE9gations");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "div", 17);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(10, "div", 18)(11, "div", 13)(12, "div", 19);
    \u0275\u0275element(13, "i", 20);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "div")(15, "div", 16);
    \u0275\u0275text(16, "Total Demandes");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "div", 17);
    \u0275\u0275text(18);
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(19, "div", 21)(20, "div", 13)(21, "div", 22);
    \u0275\u0275element(22, "i", 23);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(23, "div")(24, "div", 16);
    \u0275\u0275text(25, "Montant Global");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(26, "div", 17);
    \u0275\u0275text(27);
    \u0275\u0275pipe(28, "currency");
    \u0275\u0275elementEnd()()()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1(" ", ctx_r0.state().delegations.length, " ");
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1(" ", ctx_r0.state().totalDemandes, " ");
    \u0275\u0275advance(9);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind4(28, 3, ctx_r0.state().montantGlobal, "GNF ", "symbol", "1.0-0"), " ");
  }
}
function CreditParDelegationComponent_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 8);
    \u0275\u0275element(1, "p-progressSpinner", 24);
    \u0275\u0275elementEnd();
  }
}
function CreditParDelegationComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-message", 9);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("text", ctx_r0.state().error);
  }
}
function CreditParDelegationComponent_Conditional_12_For_2_ng_template_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275text(2, "R\xE9f\xE9rence");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th");
    \u0275\u0275text(4, "Client");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th");
    \u0275\u0275text(6, "N\xB0 Membre");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th");
    \u0275\u0275text(8, "Montant");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th");
    \u0275\u0275text(10, "Dur\xE9e");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "th");
    \u0275\u0275text(12, "Activit\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "th");
    \u0275\u0275text(14, "Statut");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(15, "th");
    \u0275\u0275text(16, "Date");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(17, "th", 35);
    \u0275\u0275text(18, "Actions");
    \u0275\u0275elementEnd()();
  }
}
function CreditParDelegationComponent_Conditional_12_For_2_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td")(2, "span", 36);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "td")(5, "div", 2)(6, "span", 37);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 38);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(10, "td")(11, "span", 39);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "td")(14, "span", 40);
    \u0275\u0275text(15);
    \u0275\u0275pipe(16, "currency");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "td");
    \u0275\u0275text(18);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(19, "td")(20, "span", 41);
    \u0275\u0275text(21);
    \u0275\u0275pipe(22, "slice");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(23, "td");
    \u0275\u0275element(24, "p-tag", 28);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(25, "td")(26, "span", 42);
    \u0275\u0275text(27);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(28, "td", 35)(29, "div", 43);
    \u0275\u0275element(30, "p-button", 44)(31, "p-button", 45);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const demande_r2 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r2.demandeIndividuelId);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate2("", demande_r2.prenom, " ", demande_r2.nom, "");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(demande_r2.telephone);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r2.numeroMembre);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind4(16, 17, demande_r2.montantDemande, "GNF ", "symbol", "1.0-0"), " ");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("", demande_r2.dureeDemande, " mois");
    \u0275\u0275advance(2);
    \u0275\u0275property("pTooltip", demande_r2.descriptionActivite);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind3(22, 22, demande_r2.typeActivite || demande_r2.descriptionActivite, 0, 20), "... ");
    \u0275\u0275advance(3);
    \u0275\u0275property("value", ctx_r0.getStatusLabel(demande_r2.statutDemande, demande_r2.validationState))("severity", ctx_r0.getStatusSeverity(demande_r2.statutDemande, demande_r2.validationState));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(demande_r2.createdAt));
    \u0275\u0275advance(3);
    \u0275\u0275property("routerLink", \u0275\u0275pureFunction1(26, _c27, demande_r2.demandeIndividuelId))("rounded", true)("text", true);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true);
  }
}
function CreditParDelegationComponent_Conditional_12_For_2_ng_template_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 46);
    \u0275\u0275element(2, "i", 47);
    \u0275\u0275elementStart(3, "p", 48);
    \u0275\u0275text(4, "Aucune demande pour cette d\xE9l\xE9gation");
    \u0275\u0275elementEnd()()();
  }
}
function CreditParDelegationComponent_Conditional_12_For_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-accordion-panel")(1, "p-accordion-header")(2, "div", 25)(3, "div", 13);
    \u0275\u0275element(4, "i", 26);
    \u0275\u0275elementStart(5, "span", 27);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(7, "div", 13);
    \u0275\u0275element(8, "p-tag", 28);
    \u0275\u0275elementStart(9, "span", 29);
    \u0275\u0275text(10);
    \u0275\u0275pipe(11, "currency");
    \u0275\u0275elementEnd()()()();
    \u0275\u0275elementStart(12, "p-accordion-content")(13, "div", 30)(14, "p-table", 31);
    \u0275\u0275template(15, CreditParDelegationComponent_Conditional_12_For_2_ng_template_15_Template, 19, 0, "ng-template", 32)(16, CreditParDelegationComponent_Conditional_12_For_2_ng_template_16_Template, 32, 28, "ng-template", 33)(17, CreditParDelegationComponent_Conditional_12_For_2_ng_template_17_Template, 5, 0, "ng-template", 34);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const delegation_r3 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(delegation_r3.delegationLibele);
    \u0275\u0275advance(2);
    \u0275\u0275property("value", delegation_r3.totalDemandes + " demande(s)")("severity", ctx_r0.getDelegationSeverity(delegation_r3.totalDemandes));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind4(11, 10, delegation_r3.montantTotal, "GNF ", "symbol", "1.0-0"), " ");
    \u0275\u0275advance(4);
    \u0275\u0275property("value", delegation_r3.demandes)("paginator", delegation_r3.demandes.length > 10)("rows", 10)("rowsPerPageOptions", \u0275\u0275pureFunction0(15, _c07))("globalFilterFields", \u0275\u0275pureFunction0(16, _c17))("rowHover", true);
  }
}
function CreditParDelegationComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-accordion", 10);
    \u0275\u0275repeaterCreate(1, CreditParDelegationComponent_Conditional_12_For_2_Template, 18, 17, "p-accordion-panel", null, \u0275\u0275componentInstance().trackByDelegation, true);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("multiple", true);
    \u0275\u0275advance();
    \u0275\u0275repeater(ctx_r0.state().delegations);
  }
}
function CreditParDelegationComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 11);
    \u0275\u0275element(1, "i", 49);
    \u0275\u0275elementStart(2, "p", 50);
    \u0275\u0275text(3, "Aucune demande de cr\xE9dit trouv\xE9e");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p", 51);
    \u0275\u0275text(5, "Les demandes en attente appara\xEEtront ici");
    \u0275\u0275elementEnd()();
  }
}
var CreditParDelegationComponent = class _CreditParDelegationComponent {
  state = signal({
    delegations: [],
    loading: false,
    message: void 0,
    error: void 0,
    totalDemandes: 0,
    montantGlobal: 0
  });
  userService = inject(UserService);
  destroyRef = inject(DestroyRef);
  ngOnInit() {
    this.loadCreditParDelegation();
  }
  loadCreditParDelegation() {
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: true, error: void 0 }));
    this.userService.getListCreditParDelegation$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        const delegations = response.data.listCreditParDelegation || [];
        const totalDemandes = delegations.reduce((sum, d) => sum + d.totalDemandes, 0);
        const montantGlobal = delegations.reduce((sum, d) => sum + (d.montantTotal || 0), 0);
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          delegations,
          totalDemandes,
          montantGlobal,
          loading: false,
          message: response.message,
          error: void 0
        }));
      },
      error: (error) => {
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), {
          loading: false,
          message: void 0,
          error
        }));
      }
    });
  }
  getStatusLabel(statutDemande, validationState) {
    if (statutDemande === "EN_ATTENTE" && validationState === "NOUVEAU") {
      return "NOUVELLE DEMANDE";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "SELECTION") {
      return "S\xC9LECTION";
    } else if (statutDemande === "EN_ATTENTE" && validationState === "APPROVED") {
      return "EN COURS DE VALIDATION";
    }
    return statutDemande;
  }
  getStatusSeverity(statutDemande, validationState) {
    if (statutDemande === "EN_ATTENTE" && validationState === "APPROVED")
      return "warn";
    if (statutDemande === "EN_ATTENTE" && validationState === "NOUVEAU")
      return "info";
    if (statutDemande === "EN_ATTENTE" && validationState === "SELECTION")
      return "secondary";
    if (statutDemande === "REJECTED")
      return "danger";
    if (statutDemande === "APPROVED")
      return "success";
    return void 0;
  }
  getDelegationSeverity(totalDemandes) {
    if (totalDemandes >= 10)
      return "danger";
    if (totalDemandes >= 5)
      return "warn";
    if (totalDemandes >= 1)
      return "info";
    return "success";
  }
  formatDate(date) {
    if (!date)
      return "-";
    const d = new Date(date);
    return d.toLocaleDateString("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
  refreshData() {
    this.loadCreditParDelegation();
  }
  trackByDelegation(index, delegation) {
    return delegation.delegationId;
  }
  trackByDemande(index, demande) {
    return demande.demandeIndividuelId || index;
  }
  static \u0275fac = function CreditParDelegationComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CreditParDelegationComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _CreditParDelegationComponent, selectors: [["app-credit-par-delegation"]], features: [\u0275\u0275ProvidersFeature([MessageService])], decls: 14, vars: 5, consts: [[1, "card"], [1, "flex", "flex-col", "md:flex-row", "justify-between", "items-start", "md:items-center", "gap-4", "mb-4"], [1, "flex", "flex-col"], [1, "text-surface-900", "dark:text-surface-0", "text-2xl", "font-semibold", "mb-2"], [1, "text-surface-600", "dark:text-surface-200"], [1, "flex", "gap-2"], ["icon", "pi pi-refresh", "label", "Actualiser", "severity", "secondary", 3, "onClick", "loading"], [1, "grid", "grid-cols-1", "md:grid-cols-3", "gap-4", "mb-4"], [1, "flex", "justify-center", "items-center", "py-8"], ["severity", "error", "styleClass", "w-full mb-4", 3, "text"], [3, "multiple"], [1, "flex", "flex-col", "items-center", "justify-center", "py-12"], [1, "bg-blue-50", "dark:bg-blue-900/20", "rounded-lg", "p-4"], [1, "flex", "items-center", "gap-3"], [1, "bg-blue-500", "rounded-full", "p-3"], [1, "pi", "pi-building", "text-white", "text-xl"], [1, "text-surface-600", "dark:text-surface-300", "text-sm"], [1, "text-2xl", "font-bold", "text-surface-900", "dark:text-surface-0"], [1, "bg-green-50", "dark:bg-green-900/20", "rounded-lg", "p-4"], [1, "bg-green-500", "rounded-full", "p-3"], [1, "pi", "pi-file", "text-white", "text-xl"], [1, "bg-purple-50", "dark:bg-purple-900/20", "rounded-lg", "p-4"], [1, "bg-purple-500", "rounded-full", "p-3"], [1, "pi", "pi-wallet", "text-white", "text-xl"], ["strokeWidth", "4"], [1, "flex", "justify-between", "items-center", "w-full", "pr-4"], [1, "pi", "pi-building", "text-primary"], [1, "font-semibold", "text-lg"], [3, "value", "severity"], [1, "text-sm", "text-surface-600", "dark:text-surface-300"], [1, "p-2"], ["responsiveLayout", "scroll", "styleClass", "p-datatable-sm", 3, "value", "paginator", "rows", "rowsPerPageOptions", "globalFilterFields", "rowHover"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], [1, "text-center"], [1, "font-mono", "text-sm"], [1, "font-medium"], [1, "text-xs", "text-surface-500"], [1, "font-mono"], [1, "font-semibold", "text-primary"], [1, "text-sm", 3, "pTooltip"], [1, "text-sm"], [1, "flex", "justify-center", "gap-1"], ["icon", "pi pi-eye", "severity", "info", "pTooltip", "Voir d\xE9tails", 3, "routerLink", "rounded", "text"], ["icon", "pi pi-check-circle", "severity", "success", "pTooltip", "Valider", 3, "rounded", "text"], ["colspan", "9", 1, "text-center", "py-4"], [1, "pi", "pi-inbox", "text-4xl", "text-surface-300", "mb-2"], [1, "text-surface-500"], [1, "pi", "pi-folder-open", "text-6xl", "text-surface-300", "mb-4"], [1, "text-xl", "text-surface-500"], [1, "text-surface-400"]], template: function CreditParDelegationComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "span", 3);
      \u0275\u0275text(4, " Liste des Cr\xE9dits par D\xE9l\xE9gation ");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "span", 4);
      \u0275\u0275text(6, " Vue consolid\xE9e des demandes de cr\xE9dit pour la mise en place ");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(7, "div", 5)(8, "p-button", 6);
      \u0275\u0275listener("onClick", function CreditParDelegationComponent_Template_p_button_onClick_8_listener() {
        return ctx.refreshData();
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(9, CreditParDelegationComponent_Conditional_9_Template, 29, 8, "div", 7)(10, CreditParDelegationComponent_Conditional_10_Template, 2, 0, "div", 8)(11, CreditParDelegationComponent_Conditional_11_Template, 1, 1, "p-message", 9)(12, CreditParDelegationComponent_Conditional_12_Template, 3, 1, "p-accordion", 10)(13, CreditParDelegationComponent_Conditional_13_Template, 6, 0, "div", 11);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(8);
      \u0275\u0275property("loading", ctx.state().loading);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.state().loading && ctx.state().delegations.length > 0 ? 9 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.state().loading ? 10 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.state().error ? 11 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.state().loading && ctx.state().delegations.length > 0 ? 12 : !ctx.state().loading ? 13 : -1);
    }
  }, dependencies: [CommonModule, SlicePipe, CurrencyPipe, AccordionModule, Accordion, PrimeTemplate, AccordionPanel, AccordionHeader, AccordionContent, TableModule, Table, TagModule, Tag, ButtonModule, Button, ProgressSpinner, MessageModule, Message, CardModule, BadgeModule, DividerModule, IconFieldModule, InputIconModule, InputTextModule, TooltipModule, Tooltip, RouterLink], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n}\n.p-accordion-header-link[_ngcontent-%COMP%] {\n  padding: 1rem 1.25rem;\n}\n/*# sourceMappingURL=credit-par-delegation.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(CreditParDelegationComponent, { className: "CreditParDelegationComponent", filePath: "src/app/pages/dashboard/admin/de/credit-par-delegation/credit-par-delegation.component.ts", lineNumber: 42 });
})();

// src/app/pages/dashboard/admin/de/de.component.ts
var DeComponent = class _DeComponent {
  user;
  CreditParDelegationComponent = CreditParDelegationComponent;
  static \u0275fac = function DeComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DeComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _DeComponent, selectors: [["app-de"]], inputs: { user: "user" }, decls: 2, vars: 0, consts: [[1, "de-container"]], template: function DeComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "div", 0);
      \u0275\u0275element(1, "app-credit-par-delegation");
      \u0275\u0275elementEnd();
    }
  }, dependencies: [CreditParDelegationComponent], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(DeComponent, { className: "DeComponent", filePath: "src/app/pages/dashboard/admin/de/de.component.ts", lineNumber: 13 });
})();

// src/app/pages/dashboard/agent-credit/societariat/societariat.component.ts
var _c08 = () => ({ "min-width": "100%" });
var _forTrack02 = ($index, $item) => $item.periode;
function SocietariatComponent_Conditional_11_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275element(1, "i");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(ctx_r0.summaryStats().variations.enAttente));
    \u0275\u0275advance();
    \u0275\u0275classMap(ctx_r0.getVariationIcon(ctx_r0.summaryStats().variations.enAttente));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(ctx_r0.summaryStats().variations.enAttente), " ");
  }
}
function SocietariatComponent_Conditional_11_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275element(1, "i");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(ctx_r0.summaryStats().variations.rejete));
    \u0275\u0275advance();
    \u0275\u0275classMap(ctx_r0.getVariationIcon(ctx_r0.summaryStats().variations.rejete));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(ctx_r0.summaryStats().variations.rejete), " ");
  }
}
function SocietariatComponent_Conditional_11_Conditional_22_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275element(1, "i");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(ctx_r0.summaryStats().variations.valide));
    \u0275\u0275advance();
    \u0275\u0275classMap(ctx_r0.getVariationIcon(ctx_r0.summaryStats().variations.valide));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(ctx_r0.summaryStats().variations.valide), " ");
  }
}
function SocietariatComponent_Conditional_11_Conditional_30_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275element(1, "i");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(ctx_r0.summaryStats().variations.total));
    \u0275\u0275advance();
    \u0275\u0275classMap(ctx_r0.getVariationIcon(ctx_r0.summaryStats().variations.total));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(ctx_r0.summaryStats().variations.total), " ");
  }
}
function SocietariatComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 6)(1, "div", 28)(2, "div", 29);
    \u0275\u0275text(3, "En attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "div", 30);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275template(6, SocietariatComponent_Conditional_11_Conditional_6_Template, 3, 4, "div", 31);
    \u0275\u0275elementStart(7, "div", 32);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(9, "div", 33)(10, "div", 29);
    \u0275\u0275text(11, "Rejet\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 30);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, SocietariatComponent_Conditional_11_Conditional_14_Template, 3, 4, "div", 31);
    \u0275\u0275elementStart(15, "div", 32);
    \u0275\u0275text(16);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(17, "div", 34)(18, "div", 29);
    \u0275\u0275text(19, "Valid\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "div", 30);
    \u0275\u0275text(21);
    \u0275\u0275elementEnd();
    \u0275\u0275template(22, SocietariatComponent_Conditional_11_Conditional_22_Template, 3, 4, "div", 31);
    \u0275\u0275elementStart(23, "div", 32);
    \u0275\u0275text(24);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(25, "div", 35)(26, "div", 29);
    \u0275\u0275text(27, "Total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(28, "div", 30);
    \u0275\u0275text(29);
    \u0275\u0275elementEnd();
    \u0275\u0275template(30, SocietariatComponent_Conditional_11_Conditional_30_Template, 3, 4, "div", 31);
    \u0275\u0275elementStart(31, "div", 32);
    \u0275\u0275text(32);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.summaryStats().current.enAttente);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.summaryStats().variations.enAttente !== null ? 6 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("vs ", ctx_r0.summaryStats().previous.enAttente, " p\xE9riode pr\xE9c.");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.summaryStats().current.rejete);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.summaryStats().variations.rejete !== null ? 14 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("vs ", ctx_r0.summaryStats().previous.rejete, " p\xE9riode pr\xE9c.");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.summaryStats().current.valide);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.summaryStats().variations.valide !== null ? 22 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("vs ", ctx_r0.summaryStats().previous.valide, " p\xE9riode pr\xE9c.");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.summaryStats().current.total);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.summaryStats().variations.total !== null ? 30 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("vs ", ctx_r0.summaryStats().previous.total, " p\xE9riode pr\xE9c.");
  }
}
function SocietariatComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 7);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r0.chartError());
  }
}
function SocietariatComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 8);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementEnd();
  }
}
function SocietariatComponent_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 9);
    \u0275\u0275element(1, "p-chart", 36);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("data", ctx_r0.chartData())("options", ctx_r0.chartOptions);
  }
}
function SocietariatComponent_Conditional_15_ng_template_2_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "th", 41);
    \u0275\u0275text(1, "Var. Total");
    \u0275\u0275elementEnd();
  }
}
function SocietariatComponent_Conditional_15_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th");
    \u0275\u0275text(2, "P\xE9riode");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th", 41);
    \u0275\u0275text(4, "En attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th", 41);
    \u0275\u0275text(6, "Rejet\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 41);
    \u0275\u0275text(8, "Valid\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 41);
    \u0275\u0275text(10, "Total");
    \u0275\u0275elementEnd();
    \u0275\u0275template(11, SocietariatComponent_Conditional_15_ng_template_2_Conditional_11_Template, 2, 0, "th", 41);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(11);
    \u0275\u0275conditional(ctx_r0.showComparison ? 11 : -1);
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Conditional_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const row_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("(", row_r2.enAttentePrev, ")");
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Conditional_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const row_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("(", row_r2.rejetePrev, ")");
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const row_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("(", row_r2.validePrev, ")");
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 43);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const row_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1("(", row_r2.totalPrev, ")");
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Conditional_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "td", 41)(1, "span", 47);
    \u0275\u0275element(2, "i");
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const row_r2 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(row_r2.totalVariation));
    \u0275\u0275advance();
    \u0275\u0275classMap(ctx_r0.getVariationIcon(row_r2.totalVariation));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(row_r2.totalVariation), " ");
  }
}
function SocietariatComponent_Conditional_15_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td", 42);
    \u0275\u0275text(4);
    \u0275\u0275template(5, SocietariatComponent_Conditional_15_ng_template_3_Conditional_5_Template, 2, 1, "span", 43);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "td", 44);
    \u0275\u0275text(7);
    \u0275\u0275template(8, SocietariatComponent_Conditional_15_ng_template_3_Conditional_8_Template, 2, 1, "span", 43);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 45);
    \u0275\u0275text(10);
    \u0275\u0275template(11, SocietariatComponent_Conditional_15_ng_template_3_Conditional_11_Template, 2, 1, "span", 43);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "td", 46);
    \u0275\u0275text(13);
    \u0275\u0275template(14, SocietariatComponent_Conditional_15_ng_template_3_Conditional_14_Template, 2, 1, "span", 43);
    \u0275\u0275elementEnd();
    \u0275\u0275template(15, SocietariatComponent_Conditional_15_ng_template_3_Conditional_15_Template, 4, 4, "td", 41);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const row_r2 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r2.periode);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", row_r2.enAttente, " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.showComparison && row_r2.enAttentePrev !== null ? 5 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", row_r2.rejete, " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.showComparison && row_r2.rejetePrev !== null ? 8 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", row_r2.valide, " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.showComparison && row_r2.validePrev !== null ? 11 : -1);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", row_r2.total, " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.showComparison && row_r2.totalPrev !== null ? 14 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.showComparison ? 15 : -1);
  }
}
function SocietariatComponent_Conditional_15_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 48);
    \u0275\u0275text(2, " Aucune donn\xE9e disponible ");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275attribute("colspan", ctx_r0.showComparison ? 6 : 5);
  }
}
function SocietariatComponent_Conditional_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 10)(1, "p-table", 37);
    \u0275\u0275template(2, SocietariatComponent_Conditional_15_ng_template_2_Template, 12, 1, "ng-template", 38)(3, SocietariatComponent_Conditional_15_ng_template_3_Template, 16, 10, "ng-template", 39)(4, SocietariatComponent_Conditional_15_ng_template_4_Template, 3, 1, "ng-template", 40);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("value", ctx_r0.evolutionData())("tableStyle", \u0275\u0275pureFunction0(3, _c08))("scrollable", true);
  }
}
function SocietariatComponent_Conditional_16_For_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 50)(1, "div", 51);
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 52)(4, "div", 53)(5, "span", 54);
    \u0275\u0275text(6, "En attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "span", 55);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "span", 56);
    \u0275\u0275text(10, "vs");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(11, "span", 57);
    \u0275\u0275text(12);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(13, "span", 58);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "div", 53)(16, "span", 54);
    \u0275\u0275text(17, "Rejet\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "span", 59);
    \u0275\u0275text(19);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(20, "span", 56);
    \u0275\u0275text(21, "vs");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(22, "span", 57);
    \u0275\u0275text(23);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(24, "span", 58);
    \u0275\u0275text(25);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(26, "div", 53)(27, "span", 54);
    \u0275\u0275text(28, "Valid\xE9es");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(29, "span", 60);
    \u0275\u0275text(30);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(31, "span", 56);
    \u0275\u0275text(32, "vs");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(33, "span", 57);
    \u0275\u0275text(34);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(35, "span", 58);
    \u0275\u0275text(36);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(37, "div", 61)(38, "span", 54);
    \u0275\u0275text(39, "Total");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(40, "span", 62);
    \u0275\u0275text(41);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(42, "span", 56);
    \u0275\u0275text(43, "vs");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(44, "span", 57);
    \u0275\u0275text(45);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(46, "span", 58);
    \u0275\u0275text(47);
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    let tmp_13_0;
    let tmp_17_0;
    let tmp_21_0;
    let tmp_25_0;
    const row_r3 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r3.periode);
    \u0275\u0275advance(6);
    \u0275\u0275textInterpolate(row_r3.enAttente);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate((tmp_13_0 = row_r3.enAttentePrev) !== null && tmp_13_0 !== void 0 ? tmp_13_0 : "-");
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(row_r3.enAttenteVariation));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(row_r3.enAttenteVariation), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(row_r3.rejete);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate((tmp_17_0 = row_r3.rejetePrev) !== null && tmp_17_0 !== void 0 ? tmp_17_0 : "-");
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(row_r3.rejeteVariation));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(row_r3.rejeteVariation), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(row_r3.valide);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate((tmp_21_0 = row_r3.validePrev) !== null && tmp_21_0 !== void 0 ? tmp_21_0 : "-");
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(row_r3.valideVariation));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(row_r3.valideVariation), " ");
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(row_r3.total);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate((tmp_25_0 = row_r3.totalPrev) !== null && tmp_25_0 !== void 0 ? tmp_25_0 : "-");
    \u0275\u0275advance();
    \u0275\u0275property("ngClass", ctx_r0.getVariationClass(row_r3.totalVariation));
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.formatVariation(row_r3.totalVariation), " ");
  }
}
function SocietariatComponent_Conditional_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 11)(1, "div", 49);
    \u0275\u0275repeaterCreate(2, SocietariatComponent_Conditional_16_For_3_Template, 48, 17, "div", 50, _forTrack02);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275repeater(ctx_r0.evolutionData());
  }
}
function SocietariatComponent_Conditional_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 12);
    \u0275\u0275element(1, "i", 63);
    \u0275\u0275elementStart(2, "p");
    \u0275\u0275text(3, "Aucune donn\xE9e d'\xE9volution disponible");
    \u0275\u0275elementEnd()();
  }
}
function SocietariatComponent_Conditional_39_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 25);
    \u0275\u0275element(1, "i", 64);
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3);
    \u0275\u0275pipe(4, "date");
    \u0275\u0275pipe(5, "date");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate2("P\xE9riode: ", \u0275\u0275pipeBind2(4, 2, ctx_r0.dateDebut, "dd/MM/yyyy"), " - ", \u0275\u0275pipeBind2(5, 5, ctx_r0.dateFin, "dd/MM/yyyy"), "");
  }
}
function SocietariatComponent_Conditional_40_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 7);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", ctx_r0.error(), " ");
  }
}
function SocietariatComponent_Conditional_41_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 8);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementEnd();
  }
}
function SocietariatComponent_Conditional_42_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "th", 65);
    \u0275\u0275text(2, "D\xE9l\xE9gation");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "th", 66);
    \u0275\u0275text(4, "En attente");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "th", 66);
    \u0275\u0275text(6, "Rejet\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "th", 66);
    \u0275\u0275text(8, "Valid\xE9");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "th", 66);
    \u0275\u0275text(10, "Total");
    \u0275\u0275elementEnd()();
  }
}
function SocietariatComponent_Conditional_42_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "tr", 67);
    \u0275\u0275listener("click", function SocietariatComponent_Conditional_42_ng_template_2_Template_tr_click_0_listener() {
      const row_r5 = \u0275\u0275restoreView(_r4).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r0.onSelectDelegation(row_r5));
    });
    \u0275\u0275elementStart(1, "td");
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "td", 68);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "td", 69);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "td", 70);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(9, "td", 71);
    \u0275\u0275text(10);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const row_r5 = ctx.$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r5.delegationLibele || "Non renseign\xE9e");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r5.enAttente);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r5.rejete);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r5.valide);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(row_r5.total);
  }
}
function SocietariatComponent_Conditional_42_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 72);
    \u0275\u0275text(2, "Aucune donn\xE9e disponible");
    \u0275\u0275elementEnd()();
  }
}
function SocietariatComponent_Conditional_42_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "p-table", 26);
    \u0275\u0275template(1, SocietariatComponent_Conditional_42_ng_template_1_Template, 11, 0, "ng-template", 38)(2, SocietariatComponent_Conditional_42_ng_template_2_Template, 11, 5, "ng-template", 39)(3, SocietariatComponent_Conditional_42_ng_template_3_Template, 3, 0, "ng-template", 40);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("value", ctx_r0.stats())("tableStyle", \u0275\u0275pureFunction0(2, _c08));
  }
}
function SocietariatComponent_Conditional_43_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 27)(1, "div", 73)(2, "app-societariat-by-agence", 74);
    \u0275\u0275listener("agenceSelected", function SocietariatComponent_Conditional_43_Template_app_societariat_by_agence_agenceSelected_2_listener($event) {
      \u0275\u0275restoreView(_r6);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.onSelectAgence($event));
    });
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(3, "div", 73);
    \u0275\u0275element(4, "app-societariat-by-ps", 75);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    let tmp_1_0;
    let tmp_5_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(2);
    \u0275\u0275property("delegationLibele", (tmp_1_0 = ctx_r0.selectedDelegation()) == null ? null : tmp_1_0.delegationLibele)("stats", ctx_r0.agences())("loading", ctx_r0.loadingAgences())("error", ctx_r0.agenceError());
    \u0275\u0275advance(2);
    \u0275\u0275property("agenceLibele", (tmp_5_0 = ctx_r0.selectedAgence()) == null ? null : tmp_5_0.agenceLibele)("stats", ctx_r0.points())("loading", ctx_r0.loadingPoints())("error", ctx_r0.pointError());
  }
}
var SocietariatComponent = class _SocietariatComponent {
  user;
  userService = inject(UserService);
  // Date range for period filter
  dateDebut = null;
  dateFin = null;
  maxDate = /* @__PURE__ */ new Date();
  usePeriodFilter = false;
  // Chart period options
  chartPeriodOptions = [
    { label: "Par jour", value: "day" },
    { label: "Par semaine", value: "week" }
  ];
  selectedPeriod = "day";
  // View mode options and other
  viewModeOptions = [
    { label: "Graphique", value: "chart", icon: "pi pi-chart-line" },
    { label: "Tableau", value: "table", icon: "pi pi-table" },
    { label: "Comparaison", value: "comparison", icon: "pi pi-arrows-h" }
  ];
  selectedViewMode = "chart";
  // Show comparison toggle
  showComparison = false;
  state = signal({
    loading: false,
    stats: [],
    error: void 0,
    loadingAgences: false,
    agences: [],
    agenceError: void 0,
    loadingPoints: false,
    points: [],
    pointError: void 0,
    selectedDelegation: null,
    selectedAgence: null,
    loadingChart: false,
    evolutionByDay: [],
    evolutionByWeek: [],
    chartError: void 0
  });
  isLoading = computed(() => this.state().loading);
  stats = computed(() => this.state().stats);
  error = computed(() => this.state().error);
  agences = computed(() => this.state().agences);
  points = computed(() => this.state().points);
  loadingAgences = computed(() => this.state().loadingAgences);
  loadingPoints = computed(() => this.state().loadingPoints);
  selectedDelegation = computed(() => this.state().selectedDelegation);
  selectedAgence = computed(() => this.state().selectedAgence);
  agenceError = computed(() => this.state().agenceError);
  pointError = computed(() => this.state().pointError);
  loadingChart = computed(() => this.state().loadingChart);
  chartError = computed(() => this.state().chartError);
  // Evolution data computed
  evolutionData = computed(() => {
    return this.selectedPeriod === "day" ? this.state().evolutionByDay : this.state().evolutionByWeek;
  });
  // Summary statistics computed
  summaryStats = computed(() => {
    const data = this.evolutionData();
    if (!data || data.length === 0)
      return null;
    const current = data.reduce((acc, d) => ({
      enAttente: acc.enAttente + d.enAttente,
      rejete: acc.rejete + d.rejete,
      valide: acc.valide + d.valide,
      total: acc.total + d.total
    }), { enAttente: 0, rejete: 0, valide: 0, total: 0 });
    const previous = data.reduce((acc, d) => ({
      enAttente: acc.enAttente + (d.enAttentePrev || 0),
      rejete: acc.rejete + (d.rejetePrev || 0),
      valide: acc.valide + (d.validePrev || 0),
      total: acc.total + (d.totalPrev || 0)
    }), { enAttente: 0, rejete: 0, valide: 0, total: 0 });
    const calcVariation = (curr, prev) => prev > 0 ? Math.round((curr - prev) / prev * 100 * 100) / 100 : null;
    return {
      current,
      previous,
      variations: {
        enAttente: calcVariation(current.enAttente, previous.enAttente),
        rejete: calcVariation(current.rejete, previous.rejete),
        valide: calcVariation(current.valide, previous.valide),
        total: calcVariation(current.total, previous.total)
      }
    };
  });
  // Chart data computed with comparison option
  chartData = computed(() => {
    const data = this.evolutionData();
    if (!data || data.length === 0)
      return null;
    const datasets = [
      {
        label: "En attente",
        data: data.map((d) => d.enAttente),
        fill: false,
        borderColor: "#f59e0b",
        backgroundColor: "rgba(245, 158, 11, 0.2)",
        tension: 0.4
      },
      {
        label: "Rejet\xE9es",
        data: data.map((d) => d.rejete),
        fill: false,
        borderColor: "#ef4444",
        backgroundColor: "rgba(239, 68, 68, 0.2)",
        tension: 0.4
      },
      {
        label: "Valid\xE9es",
        data: data.map((d) => d.valide),
        fill: false,
        borderColor: "#22c55e",
        backgroundColor: "rgba(34, 197, 94, 0.2)",
        tension: 0.4
      },
      {
        label: "Total",
        data: data.map((d) => d.total),
        fill: false,
        borderColor: "#6366f1",
        backgroundColor: "rgba(99, 102, 241, 0.2)",
        tension: 0.4,
        borderDash: [5, 5]
      }
    ];
    if (this.showComparison) {
      datasets.push({
        label: "En attente (p\xE9riode pr\xE9c.)",
        data: data.map((d) => d.enAttentePrev || 0),
        fill: false,
        borderColor: "#f59e0b",
        backgroundColor: "rgba(245, 158, 11, 0.1)",
        tension: 0.4,
        borderDash: [10, 5],
        borderWidth: 1
      }, {
        label: "Rejet\xE9es (p\xE9riode pr\xE9c.)",
        data: data.map((d) => d.rejetePrev || 0),
        fill: false,
        borderColor: "#ef4444",
        backgroundColor: "rgba(239, 68, 68, 0.1)",
        tension: 0.4,
        borderDash: [10, 5],
        borderWidth: 1
      }, {
        label: "Valid\xE9es (p\xE9riode pr\xE9c.)",
        data: data.map((d) => d.validePrev || 0),
        fill: false,
        borderColor: "#22c55e",
        backgroundColor: "rgba(34, 197, 94, 0.1)",
        tension: 0.4,
        borderDash: [10, 5],
        borderWidth: 1
      }, {
        label: "Total (p\xE9riode pr\xE9c.)",
        data: data.map((d) => d.totalPrev || 0),
        fill: false,
        borderColor: "#6366f1",
        backgroundColor: "rgba(99, 102, 241, 0.1)",
        tension: 0.4,
        borderDash: [10, 5],
        borderWidth: 1
      });
    }
    return {
      labels: data.map((d) => d.periode),
      datasets
    };
  });
  chartOptions = {
    maintainAspectRatio: false,
    aspectRatio: 0.6,
    plugins: {
      legend: {
        labels: {
          color: "#495057"
        }
      },
      tooltip: {
        mode: "index",
        intersect: false,
        callbacks: {
          afterBody: (context) => {
            const dataIndex = context[0]?.dataIndex;
            const data = this.evolutionData();
            if (dataIndex !== void 0 && data && data[dataIndex]) {
              const item = data[dataIndex];
              const lines = [];
              if (item.totalVariation !== null && item.totalVariation !== void 0) {
                const sign = item.totalVariation >= 0 ? "+" : "";
                lines.push(`Variation totale: ${sign}${item.totalVariation}%`);
              }
              return lines;
            }
            return [];
          }
        }
      }
    },
    scales: {
      x: {
        ticks: {
          color: "#6b7280"
        },
        grid: {
          color: "#e5e7eb"
        }
      },
      y: {
        ticks: {
          color: "#6b7280"
        },
        grid: {
          color: "#e5e7eb"
        },
        beginAtZero: true
      }
    }
  };
  ngOnInit() {
    this.loadStats();
    this.loadChartData();
  }
  loadStats() {
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { loading: true, error: void 0 }));
    if (this.usePeriodFilter && this.dateDebut && this.dateFin) {
      const dateDebutStr = this.formatDateForApi(this.dateDebut);
      const dateFinStr = this.formatDateForApi(this.dateFin);
      this.userService.getCorrectionStatsByDelegationWithPeriod$(dateDebutStr, dateFinStr).subscribe({
        next: (response) => {
          const stats = response.data?.correctionStats || [];
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            stats,
            loading: false,
            selectedDelegation: null,
            selectedAgence: null,
            agences: [],
            points: []
          }));
        },
        error: (err) => {
          const message = err.error?.message || "Erreur lors du chargement des statistiques.";
          this.state.update((s) => __spreadProps(__spreadValues({}, s), { loading: false, error: message }));
        }
      });
    } else {
      this.userService.getCorrectionStatsByDelegation$().subscribe({
        next: (response) => {
          const stats = response.data?.correctionStats || [];
          this.state.update((s) => __spreadProps(__spreadValues({}, s), {
            stats,
            loading: false,
            selectedDelegation: null,
            selectedAgence: null,
            agences: [],
            points: []
          }));
        },
        error: (err) => {
          const message = err.error?.message || "Erreur lors du chargement des statistiques.";
          this.state.update((s) => __spreadProps(__spreadValues({}, s), { loading: false, error: message }));
        }
      });
    }
  }
  formatDateForApi(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }
  onApplyPeriodFilter() {
    if (this.dateDebut && this.dateFin) {
      if (this.dateDebut > this.dateFin) {
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { error: "La date de d\xE9but doit \xEAtre ant\xE9rieure \xE0 la date de fin." }));
        return;
      }
      this.usePeriodFilter = true;
      this.loadStats();
    }
  }
  onClearPeriodFilter() {
    this.dateDebut = null;
    this.dateFin = null;
    this.usePeriodFilter = false;
    this.loadStats();
  }
  loadChartData() {
    this.state.update((s) => __spreadProps(__spreadValues({}, s), { loadingChart: true, chartError: void 0 }));
    this.userService.getCorrectionEvolutionByDay$().subscribe({
      next: (response) => {
        const evolutionByDay = response.data?.evolutionByDay || [];
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { evolutionByDay }));
      },
      error: (err) => {
        console.error("Erreur chargement \xE9volution par jour:", err);
      }
    });
    this.userService.getCorrectionEvolutionByWeek$().subscribe({
      next: (response) => {
        const evolutionByWeek = response.data?.evolutionByWeek || [];
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { evolutionByWeek, loadingChart: false }));
      },
      error: (err) => {
        const message = err.error?.message || "Erreur lors du chargement des donn\xE9es du graphique.";
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { loadingChart: false, chartError: message }));
      }
    });
  }
  onPeriodChange() {
  }
  onViewModeChange() {
  }
  toggleComparison() {
    this.showComparison = !this.showComparison;
  }
  getVariationClass(variation) {
    if (variation === null || variation === void 0)
      return "";
    if (variation > 0)
      return "variation-up";
    if (variation < 0)
      return "variation-down";
    return "variation-neutral";
  }
  getVariationIcon(variation) {
    if (variation === null || variation === void 0)
      return "";
    if (variation > 0)
      return "pi pi-arrow-up";
    if (variation < 0)
      return "pi pi-arrow-down";
    return "pi pi-minus";
  }
  formatVariation(variation) {
    if (variation === null || variation === void 0)
      return "-";
    const sign = variation >= 0 ? "+" : "";
    return `${sign}${variation}%`;
  }
  onSelectDelegation(row) {
    if (!row?.delegationId) {
      this.state.update((s) => __spreadProps(__spreadValues({}, s), {
        selectedDelegation: row,
        selectedAgence: null,
        agences: [],
        points: [],
        agenceError: "Identifiant de d\xE9l\xE9gation manquant"
      }));
      return;
    }
    this.state.update((s) => __spreadProps(__spreadValues({}, s), {
      selectedDelegation: row,
      selectedAgence: null,
      agences: [],
      points: [],
      agenceError: void 0,
      pointError: void 0,
      loadingAgences: true
    }));
    this.userService.getCorrectionStatsByAgence$(row.delegationId).subscribe({
      next: (response) => {
        const agences = response.data?.correctionAgenceStats || [];
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { agences, loadingAgences: false }));
      },
      error: (err) => {
        const message = err.error?.message || "Erreur lors du chargement des agences.";
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { loadingAgences: false, agenceError: message }));
      }
    });
  }
  onSelectAgence(row) {
    if (!row?.agenceId) {
      this.state.update((s) => __spreadProps(__spreadValues({}, s), {
        selectedAgence: row,
        points: [],
        pointError: "Identifiant agence manquant"
      }));
      return;
    }
    this.state.update((s) => __spreadProps(__spreadValues({}, s), {
      selectedAgence: row,
      points: [],
      pointError: void 0,
      loadingPoints: true
    }));
    this.userService.getCorrectionStatsByPointVente$(row.agenceId).subscribe({
      next: (response) => {
        const points = response.data?.correctionPointVenteStats || [];
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { points, loadingPoints: false }));
      },
      error: (err) => {
        const message = err.error?.message || "Erreur lors du chargement des points de vente.";
        this.state.update((s) => __spreadProps(__spreadValues({}, s), { loadingPoints: false, pointError: message }));
      }
    });
  }
  static \u0275fac = function SocietariatComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _SocietariatComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _SocietariatComponent, selectors: [["app-societariat"]], inputs: { user: "user" }, decls: 44, vars: 23, consts: [[1, "societariat-card", "chart-card"], [1, "header"], [1, "subtitle"], [1, "header-actions"], ["optionLabel", "label", "optionValue", "value", 3, "ngModelChange", "onChange", "options", "ngModel"], ["pButton", "", "type", "button", 1, "p-button-outlined", "p-button-secondary", 3, "click", "icon", "label"], [1, "summary-cards"], [1, "error"], [1, "loading"], [1, "chart-container"], [1, "table-container"], [1, "comparison-container"], [1, "empty-chart"], [1, "societariat-card"], ["pButton", "", "type", "button", "icon", "pi pi-refresh", "label", "Rafra\xEEchir", 1, "p-button-outlined", 3, "click", "disabled"], [1, "period-filter"], [1, "period-filter-inputs"], [1, "field"], ["for", "dateDebut"], ["dateFormat", "dd/mm/yy", "inputId", "dateDebut", "placeholder", "S\xE9lectionner...", "appendTo", "body", 3, "ngModelChange", "ngModel", "maxDate", "showIcon"], ["for", "dateFin"], ["dateFormat", "dd/mm/yy", "inputId", "dateFin", "placeholder", "S\xE9lectionner...", "appendTo", "body", 3, "ngModelChange", "ngModel", "maxDate", "showIcon"], [1, "field-buttons"], ["pButton", "", "type", "button", "icon", "pi pi-search", "label", "Appliquer", 1, "p-button-primary", 3, "click", "disabled"], ["pButton", "", "type", "button", "icon", "pi pi-times", "label", "Effacer", 1, "p-button-outlined", "p-button-secondary", 3, "click", "disabled"], [1, "period-active-badge"], ["styleClass", "stats-table", 3, "value", "tableStyle"], [1, "grid"], [1, "summary-card", "summary-attente"], [1, "summary-label"], [1, "summary-value"], [1, "summary-variation", 3, "ngClass"], [1, "summary-prev"], [1, "summary-card", "summary-rejete"], [1, "summary-card", "summary-valide"], [1, "summary-card", "summary-total"], ["type", "line", "height", "350px", 3, "data", "options"], ["scrollHeight", "400px", 3, "value", "tableStyle", "scrollable"], ["pTemplate", "header"], ["pTemplate", "body"], ["pTemplate", "emptymessage"], [1, "text-right"], [1, "text-right", "en-attente"], [1, "prev-value"], [1, "text-right", "rejete"], [1, "text-right", "valide"], [1, "text-right", "total"], [3, "ngClass"], [1, "empty"], [1, "comparison-grid"], [1, "comparison-card"], [1, "comparison-header"], [1, "comparison-body"], [1, "comparison-row"], [1, "label"], [1, "current", "en-attente"], [1, "vs"], [1, "previous"], [1, "variation", 3, "ngClass"], [1, "current", "rejete"], [1, "current", "valide"], [1, "comparison-row", "total-row"], [1, "current", "total"], [1, "pi", "pi-chart-line"], [1, "pi", "pi-filter"], [2, "width", "40%"], [2, "width", "15%", "text-align", "center"], [1, "clickable", 3, "click"], [1, "number", "en-attente", 2, "text-align", "center"], [1, "number", "rejete", 2, "text-align", "center"], [1, "number", "valide", 2, "text-align", "center"], [1, "number", "total", 2, "text-align", "center"], ["colspan", "5", 1, "empty"], [1, "col-12", "md:col-6"], [3, "agenceSelected", "delegationLibele", "stats", "loading", "error"], [3, "agenceLibele", "stats", "loading", "error"]], template: function SocietariatComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "p-card", 0)(1, "div", 1)(2, "div")(3, "h3");
      \u0275\u0275text(4, "\xC9volution des corrections");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "p", 2);
      \u0275\u0275text(6);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(7, "div", 3)(8, "p-selectButton", 4);
      \u0275\u0275twoWayListener("ngModelChange", function SocietariatComponent_Template_p_selectButton_ngModelChange_8_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.selectedPeriod, $event) || (ctx.selectedPeriod = $event);
        return $event;
      });
      \u0275\u0275listener("onChange", function SocietariatComponent_Template_p_selectButton_onChange_8_listener() {
        return ctx.onPeriodChange();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(9, "button", 5);
      \u0275\u0275listener("click", function SocietariatComponent_Template_button_click_9_listener() {
        return ctx.toggleComparison();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(10, "p-selectButton", 4);
      \u0275\u0275twoWayListener("ngModelChange", function SocietariatComponent_Template_p_selectButton_ngModelChange_10_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.selectedViewMode, $event) || (ctx.selectedViewMode = $event);
        return $event;
      });
      \u0275\u0275listener("onChange", function SocietariatComponent_Template_p_selectButton_onChange_10_listener() {
        return ctx.onViewModeChange();
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(11, SocietariatComponent_Conditional_11_Template, 33, 12, "div", 6)(12, SocietariatComponent_Conditional_12_Template, 2, 1, "div", 7)(13, SocietariatComponent_Conditional_13_Template, 2, 0, "div", 8)(14, SocietariatComponent_Conditional_14_Template, 2, 2, "div", 9)(15, SocietariatComponent_Conditional_15_Template, 5, 4, "div", 10)(16, SocietariatComponent_Conditional_16_Template, 4, 0, "div", 11)(17, SocietariatComponent_Conditional_17_Template, 4, 0, "div", 12);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(18, "p-card", 13)(19, "div", 1)(20, "div")(21, "h3");
      \u0275\u0275text(22, "Statistiques des corrections");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(23, "p", 2);
      \u0275\u0275text(24, "R\xE9partition par d\xE9l\xE9gation (EN_ATTENTE / REJETE / VALIDE)");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(25, "button", 14);
      \u0275\u0275listener("click", function SocietariatComponent_Template_button_click_25_listener() {
        ctx.loadStats();
        return ctx.loadChartData();
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(26, "div", 15)(27, "div", 16)(28, "div", 17)(29, "label", 18);
      \u0275\u0275text(30, "Date d\xE9but");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(31, "p-datepicker", 19);
      \u0275\u0275twoWayListener("ngModelChange", function SocietariatComponent_Template_p_datepicker_ngModelChange_31_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.dateDebut, $event) || (ctx.dateDebut = $event);
        return $event;
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(32, "div", 17)(33, "label", 20);
      \u0275\u0275text(34, "Date fin");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(35, "p-datepicker", 21);
      \u0275\u0275twoWayListener("ngModelChange", function SocietariatComponent_Template_p_datepicker_ngModelChange_35_listener($event) {
        \u0275\u0275twoWayBindingSet(ctx.dateFin, $event) || (ctx.dateFin = $event);
        return $event;
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(36, "div", 22)(37, "button", 23);
      \u0275\u0275listener("click", function SocietariatComponent_Template_button_click_37_listener() {
        return ctx.onApplyPeriodFilter();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(38, "button", 24);
      \u0275\u0275listener("click", function SocietariatComponent_Template_button_click_38_listener() {
        return ctx.onClearPeriodFilter();
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(39, SocietariatComponent_Conditional_39_Template, 6, 8, "div", 25);
      \u0275\u0275elementEnd();
      \u0275\u0275template(40, SocietariatComponent_Conditional_40_Template, 2, 1, "div", 7)(41, SocietariatComponent_Conditional_41_Template, 2, 0, "div", 8)(42, SocietariatComponent_Conditional_42_Template, 4, 3, "p-table", 26);
      \u0275\u0275elementEnd();
      \u0275\u0275template(43, SocietariatComponent_Conditional_43_Template, 5, 8, "div", 27);
    }
    if (rf & 2) {
      \u0275\u0275advance(6);
      \u0275\u0275textInterpolate1("Tendance sur les derni\xE8res ", ctx.selectedPeriod === "day" ? "30 jours" : "12 semaines", " ");
      \u0275\u0275advance(2);
      \u0275\u0275property("options", ctx.chartPeriodOptions);
      \u0275\u0275twoWayProperty("ngModel", ctx.selectedPeriod);
      \u0275\u0275advance();
      \u0275\u0275property("icon", ctx.showComparison ? "pi pi-eye-slash" : "pi pi-eye")("label", ctx.showComparison ? "Masquer comparaison" : "Comparer");
      \u0275\u0275advance();
      \u0275\u0275property("options", ctx.viewModeOptions);
      \u0275\u0275twoWayProperty("ngModel", ctx.selectedViewMode);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.summaryStats() ? 11 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.chartError() ? 12 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.loadingChart() ? 13 : ctx.selectedViewMode === "chart" && ctx.chartData() ? 14 : ctx.selectedViewMode === "table" && ctx.evolutionData().length > 0 ? 15 : ctx.selectedViewMode === "comparison" && ctx.evolutionData().length > 0 ? 16 : 17);
      \u0275\u0275advance(12);
      \u0275\u0275property("disabled", ctx.isLoading());
      \u0275\u0275advance(6);
      \u0275\u0275twoWayProperty("ngModel", ctx.dateDebut);
      \u0275\u0275property("maxDate", ctx.maxDate)("showIcon", true);
      \u0275\u0275advance(4);
      \u0275\u0275twoWayProperty("ngModel", ctx.dateFin);
      \u0275\u0275property("maxDate", ctx.maxDate)("showIcon", true);
      \u0275\u0275advance(2);
      \u0275\u0275property("disabled", !ctx.dateDebut || !ctx.dateFin || ctx.isLoading());
      \u0275\u0275advance();
      \u0275\u0275property("disabled", !ctx.usePeriodFilter || ctx.isLoading());
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.usePeriodFilter && ctx.dateDebut && ctx.dateFin ? 39 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.error() ? 40 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.isLoading() ? 41 : 42);
      \u0275\u0275advance(2);
      \u0275\u0275conditional(ctx.selectedDelegation() ? 43 : -1);
    }
  }, dependencies: [CommonModule, NgClass, DatePipe, CardModule, Card, PrimeTemplate, TableModule, Table, ProgressSpinnerModule, ProgressSpinner, ButtonModule, ButtonDirective, ChartModule, UIChart, SelectButtonModule, SelectButton, FormsModule, NgControlStatus, NgModel, TooltipModule, TagModule, DatePickerModule, DatePicker, SocietariatByAgenceComponent, SocietariatByPsComponent], styles: ["\n\n.societariat-card[_ngcontent-%COMP%] {\n  width: 100%;\n  margin-bottom: 1.5rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n.societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 0;\n  font-weight: 700;\n}\n.societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  margin: 0.15rem 0 0;\n  color: #6b7280;\n  font-size: 0.95rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%] {\n  padding: 1rem;\n  border-radius: 8px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #6b7280;\n  margin-bottom: 0.25rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  font-size: 1.75rem;\n  font-weight: 700;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-variation[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.85rem;\n  font-weight: 600;\n  margin-top: 0.25rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-variation[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-prev[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  color: #9ca3af;\n  margin-top: 0.25rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-attente[_ngcontent-%COMP%] {\n  border-left: 4px solid #f59e0b;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-attente[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  color: #d97706;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-rejete[_ngcontent-%COMP%] {\n  border-left: 4px solid #ef4444;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-rejete[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  color: #dc2626;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-valide[_ngcontent-%COMP%] {\n  border-left: 4px solid #22c55e;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-valide[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  color: #15803d;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-total[_ngcontent-%COMP%] {\n  border-left: 4px solid #6366f1;\n}\n.societariat-card[_ngcontent-%COMP%]   .summary-card.summary-total[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%] {\n  color: #4f46e5;\n}\n.societariat-card[_ngcontent-%COMP%]   .variation-up[_ngcontent-%COMP%] {\n  color: #dc2626;\n}\n.societariat-card[_ngcontent-%COMP%]   .variation-down[_ngcontent-%COMP%] {\n  color: #15803d;\n}\n.societariat-card[_ngcontent-%COMP%]   .variation-neutral[_ngcontent-%COMP%] {\n  color: #6b7280;\n}\n.societariat-card[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  padding: 2rem 0;\n}\n.societariat-card[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%] {\n  padding: 0.75rem 1rem;\n  margin-bottom: 1rem;\n  border-radius: 6px;\n  background: #fef2f2;\n  color: #b91c1c;\n  border: 1px solid #fecdd3;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%] {\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background: #f8fafc;\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-end;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  min-width: 180px;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #475569;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%]   .field-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-active-badge[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  padding: 0.5rem 1rem;\n  background: #dbeafe;\n  color: #1e40af;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n.societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-active-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n}\n.societariat-card[_ngcontent-%COMP%]     .p-table .p-datatable-header {\n  display: none;\n}\n.societariat-card[_ngcontent-%COMP%]     .p-selectbutton .p-button {\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%] {\n  text-align: right;\n}\n.societariat-card[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%] {\n  text-align: center;\n  font-weight: 700;\n}\n.societariat-card[_ngcontent-%COMP%]     .stats-table .p-datatable-thead > tr > th {\n  background: #f8fafc;\n  border-bottom: 2px solid #e2e8f0;\n  padding: 1rem;\n  font-weight: 600;\n  color: #475569;\n}\n.societariat-card[_ngcontent-%COMP%]     .stats-table .p-datatable-tbody > tr > td {\n  padding: 0.875rem 1rem;\n  border-bottom: 1px solid #f1f5f9;\n}\n.societariat-card[_ngcontent-%COMP%]     .stats-table .p-datatable-tbody > tr:hover {\n  background: #f8fafc;\n}\n.societariat-card[_ngcontent-%COMP%]   .prev-value[_ngcontent-%COMP%] {\n  color: #9ca3af;\n  font-size: 0.85rem;\n  margin-left: 0.25rem;\n}\n.societariat-card[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%] {\n  cursor: pointer;\n}\n.societariat-card[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]:hover {\n  background: #f9fafb;\n}\n.societariat-card[_ngcontent-%COMP%]   .en-attente[_ngcontent-%COMP%] {\n  color: #d97706;\n  font-weight: 600;\n}\n.societariat-card[_ngcontent-%COMP%]   .rejete[_ngcontent-%COMP%] {\n  color: #dc2626;\n  font-weight: 600;\n}\n.societariat-card[_ngcontent-%COMP%]   .valide[_ngcontent-%COMP%] {\n  color: #15803d;\n  font-weight: 600;\n}\n.societariat-card[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%] {\n  color: #111827;\n  font-weight: 700;\n}\n.societariat-card[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 1rem;\n  color: #6b7280;\n}\n.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%] {\n  padding: 1rem 0;\n  min-height: 350px;\n}\n.chart-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%] {\n  max-height: 450px;\n  overflow: auto;\n}\n.chart-card[_ngcontent-%COMP%]   .empty-chart[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  color: #9ca3af;\n}\n.chart-card[_ngcontent-%COMP%]   .empty-chart[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n.chart-card[_ngcontent-%COMP%]   .empty-chart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 0.95rem;\n}\n.comparison-container[_ngcontent-%COMP%] {\n  padding: 1rem 0;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-grid[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 1rem;\n  max-height: 500px;\n  overflow-y: auto;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%] {\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-header[_ngcontent-%COMP%] {\n  background: #f3f4f6;\n  padding: 0.75rem 1rem;\n  font-weight: 600;\n  color: #374151;\n  border-bottom: 1px solid #e5e7eb;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-body[_ngcontent-%COMP%] {\n  padding: 0.75rem;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%] {\n  display: grid;\n  grid-template-columns: 1fr auto auto auto auto;\n  gap: 0.5rem;\n  align-items: center;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]:last-child {\n  border-bottom: none;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row.total-row[_ngcontent-%COMP%] {\n  border-top: 2px solid #e5e7eb;\n  margin-top: 0.5rem;\n  padding-top: 0.75rem;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #6b7280;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%] {\n  font-weight: 700;\n  font-size: 1rem;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]   .vs[_ngcontent-%COMP%] {\n  font-size: 0.75rem;\n  color: #9ca3af;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]   .previous[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: #6b7280;\n}\n.comparison-container[_ngcontent-%COMP%]   .comparison-card[_ngcontent-%COMP%]   .comparison-row[_ngcontent-%COMP%]   .variation[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  min-width: 60px;\n  text-align: right;\n}\n@media (max-width: 768px) {\n  .societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  .societariat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n    width: 100%;\n    justify-content: flex-start;\n  }\n  .societariat-card[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%] {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  .societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  .societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] {\n    width: 100%;\n    min-width: unset;\n  }\n  .societariat-card[_ngcontent-%COMP%]   .period-filter[_ngcontent-%COMP%]   .period-filter-inputs[_ngcontent-%COMP%]   .field-buttons[_ngcontent-%COMP%] {\n    width: 100%;\n    justify-content: flex-start;\n  }\n  .comparison-container[_ngcontent-%COMP%]   .comparison-grid[_ngcontent-%COMP%] {\n    grid-template-columns: 1fr;\n  }\n}\n/*# sourceMappingURL=societariat.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(SocietariatComponent, { className: "SocietariatComponent", filePath: "src/app/pages/dashboard/agent-credit/societariat/societariat.component.ts", lineNumber: 29 });
})();

// src/app/pages/dashboard/admin/rh/rh.component.ts
var _c09 = () => ({ "min-width": "50rem" });
var _forTrack03 = ($index, $item) => $item.date;
function RhComponent_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 7);
    \u0275\u0275element(1, "i", 31);
    \u0275\u0275text(2, " Les demandes sont OUVERTES ");
    \u0275\u0275elementEnd();
  }
}
function RhComponent_Conditional_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 8);
    \u0275\u0275element(1, "i", 32);
    \u0275\u0275text(2, " Les demandes sont FERM\xC9ES ");
    \u0275\u0275elementEnd();
  }
}
function RhComponent_ng_template_29_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 33);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "En attente");
    \u0275\u0275elementEnd();
    \u0275\u0275element(3, "p-badge", 34);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275property("value", ctx_r0.selectedStatut() === "ENCOURS" ? ctx_r0.totalDemandes().toString() : "");
  }
}
function RhComponent_ng_template_31_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 35);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Valid\xE9es");
    \u0275\u0275elementEnd();
  }
}
function RhComponent_ng_template_33_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 36);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Rejet\xE9es");
    \u0275\u0275elementEnd();
  }
}
function RhComponent_Conditional_51_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 28)(1, "div", 21);
    \u0275\u0275element(2, "i", 37);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 23)(4, "span", 24);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 25);
    \u0275\u0275text(7, "S\xE9lectionn\xE9es");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r0.totalSelected());
  }
}
function RhComponent_Conditional_52_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 29)(1, "div", 38);
    \u0275\u0275element(2, "i", 39);
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "p-button", 40);
    \u0275\u0275listener("onClick", function RhComponent_Conditional_52_Template_p_button_onClick_5_listener() {
      \u0275\u0275restoreView(_r2);
      const ctx_r0 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r0.confirmValiderSelection());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("", ctx_r0.totalSelected(), " demande(s) s\xE9lectionn\xE9e(s)");
    \u0275\u0275advance();
    \u0275\u0275property("loading", ctx_r0.isValidating());
  }
}
function RhComponent_Conditional_53_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 30);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3, "Chargement des demandes...");
    \u0275\u0275elementEnd()();
  }
}
function RhComponent_Conditional_54_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 41);
    \u0275\u0275element(1, "i", 43);
    \u0275\u0275elementStart(2, "h3");
    \u0275\u0275text(3, "Aucune demande");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate1("Il n'y a pas de demandes ", ctx_r0.selectedStatut() === "ENCOURS" ? "en attente" : ctx_r0.selectedStatut() === "VALIDER" ? "valid\xE9es" : "rejet\xE9es", " pour le moment.");
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 57);
    \u0275\u0275listener("click", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_13_Template_div_click_0_listener($event) {
      \u0275\u0275restoreView(_r5);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275elementStart(1, "p-button", 58);
    \u0275\u0275listener("onClick", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_13_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r5);
      const jour_r4 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.confirmValiderJour(jour_r4));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(4);
    \u0275\u0275advance();
    \u0275\u0275property("outlined", true)("loading", ctx_r0.isValidating());
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 59)(1, "p-checkbox", 62);
    \u0275\u0275twoWayListener("ngModelChange", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Conditional_1_Template_p_checkbox_ngModelChange_1_listener($event) {
      \u0275\u0275restoreView(_r6);
      const jour_r4 = \u0275\u0275nextContext(2).$implicit;
      \u0275\u0275twoWayBindingSet(jour_r4.allSelected, $event) || (jour_r4.allSelected = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onChange", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Conditional_1_Template_p_checkbox_onChange_1_listener() {
      \u0275\u0275restoreView(_r6);
      const jour_r4 = \u0275\u0275nextContext(2).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.toggleSelectAll(jour_r4));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "label", 63);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const jour_r4 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275propertyInterpolate1("inputId", "selectAll-", jour_r4.date, "");
    \u0275\u0275twoWayProperty("ngModel", jour_r4.allSelected);
    \u0275\u0275property("binary", true);
    \u0275\u0275advance();
    \u0275\u0275propertyInterpolate1("for", "selectAll-", jour_r4.date, "");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" Tout s\xE9lectionner (", (jour_r4.selectedIds == null ? null : jour_r4.selectedIds.length) || 0, "/", jour_r4.count, ") ");
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_3_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "th", 64);
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275template(1, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_3_Conditional_1_Template, 1, 0, "th", 64);
    \u0275\u0275elementStart(2, "th", 65);
    \u0275\u0275text(3, "Matricule");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th");
    \u0275\u0275text(5, "Nom & Pr\xE9nom");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th", 66);
    \u0275\u0275text(7, "Montant");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "th", 67);
    \u0275\u0275text(9, "N\xB0 Compte");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 68);
    \u0275\u0275text(11, "Heure");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "th", 66);
    \u0275\u0275text(13, "Actions");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(5);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStatut() === "ENCOURS" ? 1 : -1);
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "td")(1, "p-checkbox", 77);
    \u0275\u0275listener("onChange", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_1_Template_p_checkbox_onChange_1_listener() {
      \u0275\u0275restoreView(_r7);
      const demande_r8 = \u0275\u0275nextContext().$implicit;
      const jour_r4 = \u0275\u0275nextContext(2).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.toggleSelectDemande(jour_r4, demande_r8.id));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r8 = \u0275\u0275nextContext().$implicit;
    const jour_r4 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("binary", true)("ngModel", ctx_r0.isSelected(jour_r4, demande_r8.id));
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 75)(1, "p-button", 78);
    \u0275\u0275listener("onClick", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_19_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r9);
      const demande_r8 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(5);
      return \u0275\u0275resetView(ctx_r0.confirmValider(demande_r8));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 79);
    \u0275\u0275listener("onClick", function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_19_Template_p_button_onClick_2_listener() {
      \u0275\u0275restoreView(_r9);
      const demande_r8 = \u0275\u0275nextContext().$implicit;
      const ctx_r0 = \u0275\u0275nextContext(5);
      return \u0275\u0275resetView(ctx_r0.confirmRejeter(demande_r8));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r8 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(5);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true)("loading", ctx_r0.validatingId() === demande_r8.id);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true)("loading", ctx_r0.validatingId() === demande_r8.id);
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_20_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 76);
  }
  if (rf & 2) {
    const demande_r8 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(5);
    \u0275\u0275property("value", ctx_r0.getStatutLabel(demande_r8.statut))("severity", ctx_r0.getStatutSeverity(demande_r8.statut));
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275template(1, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_1_Template, 2, 2, "td");
    \u0275\u0275elementStart(2, "td")(3, "span", 69);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "td")(6, "div", 70)(7, "span", 71);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "td", 72)(10, "span", 73);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td")(13, "span", 74);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "td");
    \u0275\u0275text(16);
    \u0275\u0275pipe(17, "javaDate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(18, "td");
    \u0275\u0275template(19, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_19_Template, 3, 6, "div", 75)(20, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Conditional_20_Template, 1, 2, "p-tag", 76);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r8 = ctx.$implicit;
    const jour_r4 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected-row", ctx_r0.isSelected(jour_r4, demande_r8.id));
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStatut() === "ENCOURS" ? 1 : -1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r8.matricule);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate2("", demande_r8.prenomPersonnel, " ", demande_r8.nomPersonnel, "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.formatMontant(demande_r8.amount));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r8.numeroCompte || "-");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(17, 10, demande_r8.createdAt, "HH:mm"), " ");
    \u0275\u0275advance(3);
    \u0275\u0275conditional(ctx_r0.selectedStatut() === "ENCOURS" ? 19 : 20);
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 56);
    \u0275\u0275template(1, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Conditional_1_Template, 4, 8, "div", 59);
    \u0275\u0275elementStart(2, "p-table", 60);
    \u0275\u0275template(3, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_3_Template, 14, 1, "ng-template", 18)(4, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_ng_template_4_Template, 21, 13, "ng-template", 61);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const jour_r4 = \u0275\u0275nextContext().$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStatut() === "ENCOURS" ? 1 : -1);
    \u0275\u0275advance();
    \u0275\u0275property("value", jour_r4.demandes)("tableStyle", \u0275\u0275pureFunction0(3, _c09));
  }
}
function RhComponent_Conditional_54_Conditional_1_For_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 45)(1, "div", 46);
    \u0275\u0275listener("click", function RhComponent_Conditional_54_Conditional_1_For_2_Template_div_click_1_listener() {
      const jour_r4 = \u0275\u0275restoreView(_r3).$implicit;
      const ctx_r0 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r0.toggleDay(jour_r4));
    });
    \u0275\u0275elementStart(2, "div", 47)(3, "div", 48);
    \u0275\u0275element(4, "i");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 49)(6, "span", 50);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 51);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 52);
    \u0275\u0275element(11, "p-chip", 53)(12, "p-chip", 54);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(13, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_13_Template, 2, 2, "div", 55);
    \u0275\u0275elementEnd();
    \u0275\u0275template(14, RhComponent_Conditional_54_Conditional_1_For_2_Conditional_14_Template, 5, 4, "div", 56);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const jour_r4 = ctx.$implicit;
    const ctx_r0 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("expanded", jour_r4.expanded);
    \u0275\u0275advance(4);
    \u0275\u0275classMap(jour_r4.expanded ? "pi pi-chevron-down" : "pi pi-chevron-right");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r0.formatDate(jour_r4.date));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r0.formatDateShort(jour_r4.date));
    \u0275\u0275advance(2);
    \u0275\u0275property("label", jour_r4.count + " demande(s)");
    \u0275\u0275advance();
    \u0275\u0275property("label", ctx_r0.formatMontant(jour_r4.totalAmount));
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r0.selectedStatut() === "ENCOURS" ? 13 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(jour_r4.expanded ? 14 : -1);
  }
}
function RhComponent_Conditional_54_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 42);
    \u0275\u0275repeaterCreate(1, RhComponent_Conditional_54_Conditional_1_For_2_Template, 15, 10, "div", 44, _forTrack03);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275repeater(ctx_r0.demandesParJour());
  }
}
function RhComponent_Conditional_54_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, RhComponent_Conditional_54_Conditional_0_Template, 6, 1, "div", 41)(1, RhComponent_Conditional_54_Conditional_1_Template, 3, 0, "div", 42);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275conditional(ctx_r0.demandesParJour().length === 0 ? 0 : 1);
  }
}
var RhComponent = class _RhComponent {
  user;
  salaireService = inject(UserService);
  messageService = inject(MessageService);
  confirmationService = inject(ConfirmationService);
  // ==================== SIGNALS ====================
  isLoading = signal(false);
  isValidating = signal(false);
  validatingId = signal(null);
  demandesParJour = signal([]);
  selectedStatut = signal("ENCOURS");
  isLoadingAuth = signal(false);
  authorizeSalaire = signal(null);
  isDemandesAuthorized = computed(() => this.authorizeSalaire()?.isAuthorized ?? false);
  // ==================== COMPUTED ====================
  totalDemandes = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + jour.count, 0);
  });
  totalMontant = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + jour.totalAmount, 0);
  });
  totalSelected = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + (jour.selectedIds?.length || 0), 0);
  });
  hasSelection = computed(() => this.totalSelected() > 0);
  // ==================== LIFECYCLE ====================
  ngOnInit() {
    this.loadAuthorizeSalaire();
    this.loadDemandesGroupedByDate();
  }
  loadAuthorizeSalaire() {
    this.salaireService.getAuthorizeSalaire().subscribe({
      next: (response) => {
        if (response.data?.authorize) {
          this.authorizeSalaire.set(response.data.authorize);
        }
      },
      error: (error) => {
        console.error("Erreur chargement autorisation:", error);
      }
    });
  }
  toggleAuthorization() {
    const newValue = !this.isDemandesAuthorized();
    this.confirmationService.confirm({
      message: newValue ? "Voulez-vous ACTIVER les demandes d'avance sur salaire ?" : "Voulez-vous D\xC9SACTIVER les demandes d'avance sur salaire ?",
      header: "Confirmation",
      icon: newValue ? "pi pi-check-circle" : "pi pi-exclamation-triangle",
      acceptLabel: newValue ? "Activer" : "D\xE9sactiver",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: newValue ? "p-button-success" : "p-button-danger",
      accept: () => {
        this.isLoadingAuth.set(true);
        const action$ = newValue ? this.salaireService.enableAuthorizeSalaire() : this.salaireService.disableAuthorizeSalaire();
        action$.subscribe({
          next: (response) => {
            this.messageService.add({
              severity: "success",
              summary: "Succ\xE8s",
              detail: newValue ? "Les demandes d'avance sur salaire sont maintenant OUVERTES" : "Les demandes d'avance sur salaire sont maintenant FERM\xC9ES"
            });
            this.loadAuthorizeSalaire();
            this.isLoadingAuth.set(false);
          },
          error: (error) => {
            console.error("Erreur toggle autorisation:", error);
            this.messageService.add({
              severity: "error",
              summary: "Erreur",
              detail: "Impossible de modifier l'autorisation"
            });
            this.isLoadingAuth.set(false);
          }
        });
      }
    });
  }
  // ==================== CHARGEMENT ====================
  loadDemandesGroupedByDate() {
    this.isLoading.set(true);
    this.salaireService.getDemandesGroupedByDate(this.selectedStatut()).subscribe({
      next: (response) => {
        if (response.data?.groupedDemandes) {
          const grouped = response.data.groupedDemandes;
          this.demandesParJour.set(grouped.map((g) => __spreadProps(__spreadValues({}, g), {
            expanded: false,
            selectedIds: [],
            allSelected: false
          })));
        }
        this.isLoading.set(false);
      },
      error: (error) => {
        console.error("Erreur chargement demandes:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les demandes"
        });
        this.isLoading.set(false);
      }
    });
  }
  onStatutChange(statut) {
    this.selectedStatut.set(statut);
    this.loadDemandesGroupedByDate();
  }
  // ==================== TOGGLE / SÉLECTION ====================
  toggleDay(jour) {
    jour.expanded = !jour.expanded;
  }
  toggleSelectAll(jour) {
    if (jour.allSelected) {
      jour.selectedIds = jour.demandes.map((d) => d.id);
    } else {
      jour.selectedIds = [];
    }
    this.demandesParJour.set([...this.demandesParJour()]);
  }
  toggleSelectDemande(jour, demandeId) {
    if (!jour.selectedIds) {
      jour.selectedIds = [];
    }
    const index = jour.selectedIds.indexOf(demandeId);
    if (index > -1) {
      jour.selectedIds.splice(index, 1);
    } else {
      jour.selectedIds.push(demandeId);
    }
    jour.allSelected = jour.selectedIds.length === jour.demandes.length;
    this.demandesParJour.set([...this.demandesParJour()]);
  }
  isSelected(jour, demandeId) {
    return jour.selectedIds?.includes(demandeId) || false;
  }
  // ==================== VALIDATION INDIVIDUELLE ====================
  confirmValider(demande) {
    this.confirmationService.confirm({
      message: `Voulez-vous valider la demande de ${this.formatMontant(demande.amount)} pour ${demande.prenomPersonnel} ${demande.nomPersonnel} ?`,
      header: "Confirmer la validation",
      icon: "pi pi-check-circle",
      acceptLabel: "Valider",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.validerDemande(demande.id);
      }
    });
  }
  validerDemande(id) {
    this.validatingId.set(id);
    this.salaireService.validerDemandeSalary(id).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Demande valid\xE9e avec succ\xE8s"
        });
        this.validatingId.set(null);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur validation:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Impossible de valider la demande"
        });
        this.validatingId.set(null);
      }
    });
  }
  // ==================== VALIDATION MASSIVE ====================
  confirmValiderSelection() {
    const total = this.totalSelected();
    this.confirmationService.confirm({
      message: `Voulez-vous valider les ${total} demande(s) s\xE9lectionn\xE9e(s) ?`,
      header: "Validation massive",
      icon: "pi pi-check-circle",
      acceptLabel: `Valider ${total} demande(s)`,
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.validerSelection();
      }
    });
  }
  validerSelection() {
    const allSelectedIds = [];
    this.demandesParJour().forEach((jour) => {
      if (jour.selectedIds && jour.selectedIds.length > 0) {
        allSelectedIds.push(...jour.selectedIds);
      }
    });
    if (allSelectedIds.length === 0) {
      this.messageService.add({
        severity: "warn",
        summary: "Attention",
        detail: "Aucune demande s\xE9lectionn\xE9e"
      });
      return;
    }
    this.isValidating.set(true);
    this.salaireService.validerMultipleDemandeSalary(allSelectedIds).subscribe({
      next: (response) => {
        const totalValidated = response.data?.totalValidated || 0;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `${totalValidated} demande(s) valid\xE9e(s) avec succ\xE8s`
        });
        this.isValidating.set(false);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur validation massive:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Erreur lors de la validation massive"
        });
        this.isValidating.set(false);
      }
    });
  }
  // ==================== VALIDATION PAR JOUR ====================
  confirmValiderJour(jour) {
    this.confirmationService.confirm({
      message: `Voulez-vous valider les ${jour.count} demande(s) du ${this.formatDate(jour.date)} pour un total de ${this.formatMontant(jour.totalAmount)} ?`,
      header: "Valider toutes les demandes du jour",
      icon: "pi pi-check-circle",
      acceptLabel: `Valider ${jour.count} demande(s)`,
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.validerJour(jour);
      }
    });
  }
  validerJour(jour) {
    const ids = jour.demandes.map((d) => d.id);
    this.isValidating.set(true);
    this.salaireService.validerMultipleDemandeSalary(ids).subscribe({
      next: (response) => {
        const totalValidated = response.data?.totalValidated || 0;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `${totalValidated} demande(s) du ${this.formatDate(jour.date)} valid\xE9e(s)`
        });
        this.isValidating.set(false);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur validation jour:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Erreur lors de la validation"
        });
        this.isValidating.set(false);
      }
    });
  }
  // ==================== REJETER ====================
  confirmRejeter(demande) {
    this.confirmationService.confirm({
      message: `Voulez-vous rejeter la demande de ${this.formatMontant(demande.amount)} pour ${demande.prenomPersonnel} ${demande.nomPersonnel} ?`,
      header: "Confirmer le rejet",
      icon: "pi pi-times-circle",
      acceptLabel: "Rejeter",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-danger",
      accept: () => {
        this.rejeterDemande(demande.id);
      }
    });
  }
  rejeterDemande(id) {
    this.validatingId.set(id);
    this.salaireService.rejeterDemandeSalary(id).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "info",
          summary: "Information",
          detail: "Demande rejet\xE9e"
        });
        this.validatingId.set(null);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur rejet:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Impossible de rejeter la demande"
        });
        this.validatingId.set(null);
      }
    });
  }
  // ==================== UTILITAIRES ====================
  formatMontant(montant) {
    if (montant === void 0 || montant === null)
      return "-";
    return new Intl.NumberFormat("fr-FR", {
      style: "currency",
      currency: "GNF",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(montant);
  }
  formatDate(dateStr) {
    const date = new Date(dateStr);
    return date.toLocaleDateString("fr-FR", {
      weekday: "long",
      day: "numeric",
      month: "long",
      year: "numeric"
    });
  }
  formatDateShort(dateStr) {
    const date = new Date(dateStr);
    return date.toLocaleDateString("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric"
    });
  }
  getStatutSeverity(statut) {
    switch (statut?.toUpperCase()) {
      case "ENCOURS":
        return "info";
      case "VALIDER":
        return "success";
      case "CONFIRMER":
        return "success";
      case "REJET":
        return "danger";
      case "ANNULLER":
        return "secondary";
      default:
        return "info";
    }
  }
  getStatutLabel(statut) {
    switch (statut?.toUpperCase()) {
      case "ENCOURS":
        return "En cours";
      case "VALIDER":
        return "Valid\xE9e";
      case "CONFIRMER":
        return "Confirm\xE9e";
      case "REJET":
        return "Rejet\xE9e";
      case "ANNULLER":
        return "Annul\xE9e";
      default:
        return statut;
    }
  }
  static \u0275fac = function RhComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _RhComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _RhComponent, selectors: [["app-rh"]], inputs: { user: "user" }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 55, vars: 19, consts: [[1, "rh-container"], [1, "header-section"], [1, "authorization-control"], [1, "auth-content"], [1, "auth-info"], [1, "auth-status"], [1, "auth-text"], [1, "status-active"], [1, "status-inactive"], [1, "auth-action"], [3, "onClick", "icon", "label", "severity", "loading"], [1, "header-content"], [1, "pi", "pi-briefcase"], [1, "subtitle"], [1, "header-actions"], ["icon", "pi pi-refresh", "label", "Actualiser", 3, "onClick", "text", "loading"], [1, "filter-section"], [3, "onChange"], ["pTemplate", "header"], [1, "stats-section"], [1, "stat-card"], [1, "stat-icon"], [1, "pi", "pi-file"], [1, "stat-info"], [1, "stat-value"], [1, "stat-label"], [1, "stat-card", "amount"], [1, "pi", "pi-wallet"], [1, "stat-card", "selected"], [1, "bulk-action-bar"], [1, "loading-container"], [1, "pi", "pi-check-circle"], [1, "pi", "pi-times-circle"], [1, "pi", "pi-clock", "mr-2"], ["severity", "info", 1, "ml-2", 3, "value"], [1, "pi", "pi-check-circle", "mr-2"], [1, "pi", "pi-times-circle", "mr-2"], [1, "pi", "pi-check-square"], [1, "selection-info"], [1, "pi", "pi-info-circle"], ["icon", "pi pi-check-circle", "label", "Valider la s\xE9lection", "severity", "success", 3, "onClick", "loading"], [1, "empty-state"], [1, "days-list"], [1, "pi", "pi-inbox"], [1, "day-card", 3, "expanded"], [1, "day-card"], [1, "day-header", 3, "click"], [1, "day-info"], [1, "day-toggle"], [1, "day-date"], [1, "date-full"], [1, "date-short"], [1, "day-badges"], ["icon", "pi pi-file", 3, "label"], ["icon", "pi pi-wallet", "styleClass", "amount-chip", 3, "label"], [1, "day-actions"], [1, "day-content"], [1, "day-actions", 3, "click"], ["icon", "pi pi-check-circle", "label", "Tout valider", "severity", "success", "size", "small", 3, "onClick", "outlined", "loading"], [1, "select-all-row"], ["styleClass", "p-datatable-sm p-datatable-striped", 3, "value", "tableStyle"], ["pTemplate", "body"], [3, "ngModelChange", "onChange", "ngModel", "binary", "inputId"], [3, "for"], [2, "width", "50px"], [2, "width", "80px"], [2, "width", "150px"], [2, "width", "130px"], [2, "width", "100px"], [1, "matricule-badge"], [1, "person-info"], [1, "person-name"], [1, "text-right"], [1, "montant"], [1, "numero-compte"], [1, "action-buttons"], [3, "value", "severity"], [3, "onChange", "binary", "ngModel"], ["icon", "pi pi-check", "severity", "success", "size", "small", "pTooltip", "Valider", 3, "onClick", "rounded", "text", "loading"], ["icon", "pi pi-times", "severity", "danger", "size", "small", "pTooltip", "Rejeter", 3, "onClick", "rounded", "text", "loading"]], template: function RhComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275element(0, "p-toast")(1, "p-confirmDialog");
      \u0275\u0275elementStart(2, "div", 0)(3, "div", 1)(4, "div", 2)(5, "p-card")(6, "div", 3)(7, "div", 4)(8, "div", 5);
      \u0275\u0275element(9, "i");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(10, "div", 6)(11, "h4");
      \u0275\u0275text(12, "Demandes d'avance sur salaire");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(13, "p");
      \u0275\u0275template(14, RhComponent_Conditional_14_Template, 3, 0, "span", 7)(15, RhComponent_Conditional_15_Template, 3, 0, "span", 8);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(16, "div", 9)(17, "p-button", 10);
      \u0275\u0275listener("onClick", function RhComponent_Template_p_button_onClick_17_listener() {
        return ctx.toggleAuthorization();
      });
      \u0275\u0275elementEnd()()()()();
      \u0275\u0275elementStart(18, "div", 11)(19, "h2");
      \u0275\u0275element(20, "i", 12);
      \u0275\u0275text(21, " Gestion des demandes d'avance sur salaire");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(22, "p", 13);
      \u0275\u0275text(23, "Validez les demandes d'avance des employ\xE9s");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(24, "div", 14)(25, "p-button", 15);
      \u0275\u0275listener("onClick", function RhComponent_Template_p_button_onClick_25_listener() {
        return ctx.loadDemandesGroupedByDate();
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(26, "div", 16)(27, "p-tabView", 17);
      \u0275\u0275listener("onChange", function RhComponent_Template_p_tabView_onChange_27_listener($event) {
        return ctx.onStatutChange($event.index === 0 ? "ENCOURS" : $event.index === 1 ? "VALIDER" : "REJET");
      });
      \u0275\u0275elementStart(28, "p-tabPanel");
      \u0275\u0275template(29, RhComponent_ng_template_29_Template, 4, 1, "ng-template", 18);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(30, "p-tabPanel");
      \u0275\u0275template(31, RhComponent_ng_template_31_Template, 3, 0, "ng-template", 18);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(32, "p-tabPanel");
      \u0275\u0275template(33, RhComponent_ng_template_33_Template, 3, 0, "ng-template", 18);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(34, "div", 19)(35, "div", 20)(36, "div", 21);
      \u0275\u0275element(37, "i", 22);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(38, "div", 23)(39, "span", 24);
      \u0275\u0275text(40);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(41, "span", 25);
      \u0275\u0275text(42, "Demandes");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(43, "div", 26)(44, "div", 21);
      \u0275\u0275element(45, "i", 27);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(46, "div", 23)(47, "span", 24);
      \u0275\u0275text(48);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(49, "span", 25);
      \u0275\u0275text(50, "Montant total");
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(51, RhComponent_Conditional_51_Template, 8, 1, "div", 28);
      \u0275\u0275elementEnd();
      \u0275\u0275template(52, RhComponent_Conditional_52_Template, 6, 2, "div", 29)(53, RhComponent_Conditional_53_Template, 4, 0, "div", 30)(54, RhComponent_Conditional_54_Template, 2, 1);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(8);
      \u0275\u0275classProp("active", ctx.isDemandesAuthorized())("inactive", !ctx.isDemandesAuthorized());
      \u0275\u0275advance();
      \u0275\u0275classMap(ctx.isDemandesAuthorized() ? "pi pi-lock-open" : "pi pi-lock");
      \u0275\u0275advance(5);
      \u0275\u0275conditional(ctx.isDemandesAuthorized() ? 14 : 15);
      \u0275\u0275advance(3);
      \u0275\u0275property("icon", ctx.isDemandesAuthorized() ? "pi pi-lock" : "pi pi-lock-open")("label", ctx.isDemandesAuthorized() ? "D\xE9sactiver" : "Activer")("severity", ctx.isDemandesAuthorized() ? "danger" : "success")("loading", ctx.isLoadingAuth());
      \u0275\u0275advance(8);
      \u0275\u0275property("text", true)("loading", ctx.isLoading());
      \u0275\u0275advance(15);
      \u0275\u0275textInterpolate(ctx.totalDemandes());
      \u0275\u0275advance(8);
      \u0275\u0275textInterpolate(ctx.formatMontant(ctx.totalMontant()));
      \u0275\u0275advance(3);
      \u0275\u0275conditional(ctx.hasSelection() && ctx.selectedStatut() === "ENCOURS" ? 51 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.hasSelection() && ctx.selectedStatut() === "ENCOURS" ? 52 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.isLoading() ? 53 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.isLoading() ? 54 : -1);
    }
  }, dependencies: [
    CommonModule,
    FormsModule,
    NgControlStatus,
    NgModel,
    JavaDatePipe,
    CardModule,
    Card,
    PrimeTemplate,
    TableModule,
    Table,
    ButtonModule,
    Button,
    TagModule,
    Tag,
    ToastModule,
    Toast,
    ConfirmDialogModule,
    ConfirmDialog,
    TooltipModule,
    Tooltip,
    BadgeModule,
    Badge,
    DividerModule,
    AccordionModule,
    CheckboxModule,
    Checkbox,
    ProgressSpinnerModule,
    ProgressSpinner,
    TabViewModule,
    TabView,
    TabPanel,
    ChipModule,
    Chip
  ], styles: ["\n\n.rh-container[_ngcontent-%COMP%] {\n  padding: 1.5rem;\n}\n.header-section[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 1.5rem;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  color: var(--primary-color);\n  margin: 0 0 0.5rem 0;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 0.5rem;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  margin: 0;\n}\n.filter-section[_ngcontent-%COMP%] {\n  margin-bottom: 1.5rem;\n}\n.stats-section[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 8px;\n  padding: 1rem 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid var(--surface-400);\n  min-width: 180px;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.amount[_ngcontent-%COMP%] {\n  border-left-color: var(--green-500);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background: var(--green-100);\n  color: var(--green-600);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.selected[_ngcontent-%COMP%] {\n  border-left-color: var(--blue-500);\n  background: var(--blue-50);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.selected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background: var(--blue-100);\n  color: var(--blue-600);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: var(--surface-100);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.25rem;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  display: block;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--text-color);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.bulk-action-bar[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: var(--blue-50);\n  border: 1px solid var(--blue-200);\n  border-radius: 8px;\n  padding: 1rem 1.5rem;\n  margin-bottom: 1.5rem;\n}\n.bulk-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: var(--blue-700);\n  font-weight: 500;\n}\n.bulk-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.25rem;\n}\n.loading-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem;\n}\n.loading-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  margin-top: 1rem;\n  color: var(--text-color-secondary);\n}\n.empty-state[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 4rem;\n  background: var(--surface-50);\n  border-radius: 8px;\n}\n.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 4rem;\n  color: var(--surface-400);\n}\n.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 1rem 0 0.5rem 0;\n  color: var(--text-color);\n}\n.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  margin: 0;\n}\n.days-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.day-card[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  border: 1px solid var(--surface-border);\n}\n.day-card.expanded[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n  border-bottom: 1px solid var(--surface-border);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]:hover {\n  background: var(--surface-50);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  transition: transform 0.2s;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-full[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-color);\n  text-transform: capitalize;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-short[_ngcontent-%COMP%] {\n  display: none;\n  color: var(--text-color-secondary);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-badges[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: var(--surface-50);\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%]   .select-all-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: white;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%]   .select-all-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  cursor: pointer;\n  color: var(--text-color-secondary);\n  font-size: 0.9rem;\n}\n.matricule-badge[_ngcontent-%COMP%] {\n  background: var(--primary-100);\n  color: var(--primary-700);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 0.85rem;\n}\n.person-info[_ngcontent-%COMP%]   .person-name[_ngcontent-%COMP%] {\n  font-weight: 500;\n}\n.montant[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-color);\n}\n.numero-compte[_ngcontent-%COMP%] {\n  font-family: monospace;\n  font-size: 0.85rem;\n}\n.action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.25rem;\n}\n.selected-row[_ngcontent-%COMP%] {\n  background: var(--blue-50) !important;\n}\n[_nghost-%COMP%]     .amount-chip {\n  background: var(--green-100);\n  color: var(--green-700);\n}\n@media (max-width: 768px) {\n  .stats-section[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .bulk-action-bar[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: stretch;\n    text-align: center;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: flex-start;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%] {\n    flex-wrap: wrap;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-full[_ngcontent-%COMP%] {\n    display: none;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-short[_ngcontent-%COMP%] {\n    display: block;\n  }\n}\n.authorization-control[_ngcontent-%COMP%] {\n  margin-bottom: 1.5rem;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%] {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.75rem;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status.active[_ngcontent-%COMP%] {\n  background: var(--green-100);\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: var(--green-600);\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status.inactive[_ngcontent-%COMP%] {\n  background: var(--red-100);\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-status.inactive[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: var(--red-600);\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%] {\n  margin: 0 0 0.25rem 0;\n  color: var(--text-color);\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  margin: 0;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%] {\n  color: var(--green-600);\n  font-weight: 500;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 0.25rem;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%] {\n  color: var(--red-600);\n  font-weight: 500;\n}\n.authorization-control[_ngcontent-%COMP%]   .auth-text[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 0.25rem;\n}\n/*# sourceMappingURL=rh.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(RhComponent, { className: "RhComponent", filePath: "src/app/pages/dashboard/admin/rh/rh.component.ts", lineNumber: 63 });
})();

// src/app/pages/dashboard/admin/df/df.component.ts
var _c010 = () => ({ "min-width": "60rem" });
var _forTrack04 = ($index, $item) => $item.date;
function DfComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 23);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_12_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.exportAllConfirmed());
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("outlined", true)("loading", ctx_r1.isExporting());
  }
}
function DfComponent_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 24);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "\xC0 confirmer (valid\xE9es par DRH)");
    \u0275\u0275elementEnd();
    \u0275\u0275element(3, "p-badge", 25);
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(3);
    \u0275\u0275property("value", ctx_r1.selectedStatut() === "VALIDER" ? ctx_r1.totalDemandes().toString() : "");
  }
}
function DfComponent_ng_template_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "i", 26);
    \u0275\u0275elementStart(1, "span");
    \u0275\u0275text(2, "Confirm\xE9es");
    \u0275\u0275elementEnd();
  }
}
function DfComponent_Conditional_36_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 20)(1, "div", 13);
    \u0275\u0275element(2, "i", 27);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "div", 15)(4, "span", 16);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "span", 17);
    \u0275\u0275text(7, "S\xE9lectionn\xE9es");
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r1.totalSelected());
  }
}
function DfComponent_Conditional_37_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 21)(1, "div", 28);
    \u0275\u0275element(2, "i", 29);
    \u0275\u0275elementStart(3, "span");
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "p-button", 30);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_37_Template_p_button_onClick_5_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.confirmConfirmerSelection());
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate1("", ctx_r1.totalSelected(), " demande(s) s\xE9lectionn\xE9e(s)");
    \u0275\u0275advance();
    \u0275\u0275property("loading", ctx_r1.isConfirming());
  }
}
function DfComponent_Conditional_38_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 22);
    \u0275\u0275element(1, "p-progressSpinner");
    \u0275\u0275elementStart(2, "span");
    \u0275\u0275text(3, "Chargement des demandes...");
    \u0275\u0275elementEnd()();
  }
}
function DfComponent_Conditional_39_Conditional_0_Conditional_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0, " Il n'y a pas de demandes valid\xE9es par le DRH \xE0 confirmer pour le moment. ");
  }
}
function DfComponent_Conditional_39_Conditional_0_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0, " Il n'y a pas de demandes confirm\xE9es pour le moment. ");
  }
}
function DfComponent_Conditional_39_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 31);
    \u0275\u0275element(1, "i", 33);
    \u0275\u0275elementStart(2, "h3");
    \u0275\u0275text(3, "Aucune demande");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "p");
    \u0275\u0275template(5, DfComponent_Conditional_39_Conditional_0_Conditional_5_Template, 1, 0)(6, DfComponent_Conditional_39_Conditional_0_Conditional_6_Template, 1, 0);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(5);
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 5 : 6);
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 49);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_14_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r6);
      const jour_r5 = \u0275\u0275nextContext().$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.confirmConfirmerJour(jour_r5));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(4);
    \u0275\u0275property("outlined", true)("loading", ctx_r1.isConfirming());
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "p-button", 50);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_15_Template_p_button_onClick_0_listener() {
      \u0275\u0275restoreView(_r7);
      const jour_r5 = \u0275\u0275nextContext().$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.exportJour(jour_r5));
    });
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(4);
    \u0275\u0275property("outlined", true)("loading", ctx_r1.isExporting());
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 51)(1, "p-checkbox", 55);
    \u0275\u0275twoWayListener("ngModelChange", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Conditional_1_Template_p_checkbox_ngModelChange_1_listener($event) {
      \u0275\u0275restoreView(_r8);
      const jour_r5 = \u0275\u0275nextContext(2).$implicit;
      \u0275\u0275twoWayBindingSet(jour_r5.allSelected, $event) || (jour_r5.allSelected = $event);
      return \u0275\u0275resetView($event);
    });
    \u0275\u0275listener("onChange", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Conditional_1_Template_p_checkbox_onChange_1_listener() {
      \u0275\u0275restoreView(_r8);
      const jour_r5 = \u0275\u0275nextContext(2).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.toggleSelectAll(jour_r5));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "label", 56);
    \u0275\u0275text(3);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const jour_r5 = \u0275\u0275nextContext(2).$implicit;
    \u0275\u0275advance();
    \u0275\u0275propertyInterpolate1("inputId", "selectAll-", jour_r5.date, "");
    \u0275\u0275twoWayProperty("ngModel", jour_r5.allSelected);
    \u0275\u0275property("binary", true);
    \u0275\u0275advance();
    \u0275\u0275propertyInterpolate1("for", "selectAll-", jour_r5.date, "");
    \u0275\u0275advance();
    \u0275\u0275textInterpolate2(" Tout s\xE9lectionner (", (jour_r5.selectedIds == null ? null : jour_r5.selectedIds.length) || 0, "/", jour_r5.count, ") ");
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_3_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "th", 57);
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275template(1, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_3_Conditional_1_Template, 1, 0, "th", 57);
    \u0275\u0275elementStart(2, "th", 58);
    \u0275\u0275text(3, "Matricule");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "th");
    \u0275\u0275text(5, "Nom & Pr\xE9nom");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(6, "th", 59);
    \u0275\u0275text(7, "N\xB0 Compte");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "th", 60);
    \u0275\u0275text(9, "T\xE9l\xE9phone");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "th", 61);
    \u0275\u0275text(11, "Montant");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "th", 62);
    \u0275\u0275text(13, "Heure");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(14, "th", 63);
    \u0275\u0275text(15, "Actions");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(5);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 1 : -1);
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "td")(1, "p-checkbox", 73);
    \u0275\u0275listener("onChange", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_1_Template_p_checkbox_onChange_1_listener() {
      \u0275\u0275restoreView(_r9);
      const demande_r10 = \u0275\u0275nextContext().$implicit;
      const jour_r5 = \u0275\u0275nextContext(2).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.toggleSelectDemande(jour_r5, demande_r10.id));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r10 = \u0275\u0275nextContext().$implicit;
    const jour_r5 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275property("binary", true)("ngModel", ctx_r1.isSelected(jour_r5, demande_r10.id));
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 71)(1, "p-button", 74);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_22_Template_p_button_onClick_1_listener() {
      \u0275\u0275restoreView(_r11);
      const demande_r10 = \u0275\u0275nextContext().$implicit;
      const ctx_r1 = \u0275\u0275nextContext(5);
      return \u0275\u0275resetView(ctx_r1.confirmConfirmer(demande_r10));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "p-button", 75);
    \u0275\u0275listener("onClick", function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_22_Template_p_button_onClick_2_listener() {
      \u0275\u0275restoreView(_r11);
      const demande_r10 = \u0275\u0275nextContext().$implicit;
      const ctx_r1 = \u0275\u0275nextContext(5);
      return \u0275\u0275resetView(ctx_r1.confirmRejeter(demande_r10));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r10 = \u0275\u0275nextContext().$implicit;
    const ctx_r1 = \u0275\u0275nextContext(5);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true)("loading", ctx_r1.confirmingId() === demande_r10.id);
    \u0275\u0275advance();
    \u0275\u0275property("rounded", true)("text", true)("loading", ctx_r1.confirmingId() === demande_r10.id);
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_23_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "p-tag", 72);
  }
  if (rf & 2) {
    const demande_r10 = \u0275\u0275nextContext().$implicit;
    const ctx_r1 = \u0275\u0275nextContext(5);
    \u0275\u0275property("value", ctx_r1.getStatutLabel(demande_r10.statut))("severity", ctx_r1.getStatutSeverity(demande_r10.statut));
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr");
    \u0275\u0275template(1, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_1_Template, 2, 2, "td");
    \u0275\u0275elementStart(2, "td")(3, "span", 64);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "td")(6, "div", 65)(7, "span", 66);
    \u0275\u0275text(8);
    \u0275\u0275elementEnd()()();
    \u0275\u0275elementStart(9, "td")(10, "span", 67);
    \u0275\u0275text(11);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(12, "td")(13, "span", 68);
    \u0275\u0275text(14);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(15, "td", 69)(16, "span", 70);
    \u0275\u0275text(17);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(18, "td");
    \u0275\u0275text(19);
    \u0275\u0275pipe(20, "javaDate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(21, "td");
    \u0275\u0275template(22, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_22_Template, 3, 6, "div", 71)(23, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Conditional_23_Template, 1, 2, "p-tag", 72);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const demande_r10 = ctx.$implicit;
    const jour_r5 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("selected-row", ctx_r1.isSelected(jour_r5, demande_r10.id));
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 1 : -1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r10.matricule);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate2("", demande_r10.prenomPersonnel, " ", demande_r10.nomPersonnel, "");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r10.numeroCompte || "-");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(demande_r10.phone || "-");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.formatMontant(demande_r10.amount));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(20, 11, demande_r10.createdAt, "HH:mm"), " ");
    \u0275\u0275advance(3);
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 22 : 23);
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "tr")(1, "td", 69)(2, "strong");
    \u0275\u0275text(3, "Total du jour:");
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(4, "td", 69)(5, "strong", 76);
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()();
    \u0275\u0275element(7, "td", 77);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const jour_r5 = \u0275\u0275nextContext(2).$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275attribute("colspan", ctx_r1.selectedStatut() === "VALIDER" ? 5 : 4);
    \u0275\u0275advance(5);
    \u0275\u0275textInterpolate(ctx_r1.formatMontant(jour_r5.totalAmount));
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 48);
    \u0275\u0275template(1, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Conditional_1_Template, 4, 8, "div", 51);
    \u0275\u0275elementStart(2, "p-table", 52);
    \u0275\u0275template(3, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_3_Template, 16, 1, "ng-template", 10)(4, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_4_Template, 24, 14, "ng-template", 53)(5, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_ng_template_5_Template, 8, 2, "ng-template", 54);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const jour_r5 = \u0275\u0275nextContext().$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 1 : -1);
    \u0275\u0275advance();
    \u0275\u0275property("value", jour_r5.demandes)("tableStyle", \u0275\u0275pureFunction0(3, _c010));
  }
}
function DfComponent_Conditional_39_Conditional_1_For_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 35)(1, "div", 36);
    \u0275\u0275listener("click", function DfComponent_Conditional_39_Conditional_1_For_2_Template_div_click_1_listener() {
      const jour_r5 = \u0275\u0275restoreView(_r4).$implicit;
      const ctx_r1 = \u0275\u0275nextContext(3);
      return \u0275\u0275resetView(ctx_r1.toggleDay(jour_r5));
    });
    \u0275\u0275elementStart(2, "div", 37)(3, "div", 38);
    \u0275\u0275element(4, "i");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "div", 39)(6, "span", 40);
    \u0275\u0275text(7);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(8, "span", 41);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(10, "div", 42);
    \u0275\u0275element(11, "p-chip", 43)(12, "p-chip", 44);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(13, "div", 45);
    \u0275\u0275listener("click", function DfComponent_Conditional_39_Conditional_1_For_2_Template_div_click_13_listener($event) {
      \u0275\u0275restoreView(_r4);
      return \u0275\u0275resetView($event.stopPropagation());
    });
    \u0275\u0275template(14, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_14_Template, 1, 2, "p-button", 46)(15, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_15_Template, 1, 2, "p-button", 47);
    \u0275\u0275elementEnd()();
    \u0275\u0275template(16, DfComponent_Conditional_39_Conditional_1_For_2_Conditional_16_Template, 6, 4, "div", 48);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const jour_r5 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext(3);
    \u0275\u0275classProp("expanded", jour_r5.expanded);
    \u0275\u0275advance(4);
    \u0275\u0275classMap(jour_r5.expanded ? "pi pi-chevron-down" : "pi pi-chevron-right");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.formatDate(jour_r5.date));
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(ctx_r1.formatDateShort(jour_r5.date));
    \u0275\u0275advance(2);
    \u0275\u0275property("label", jour_r5.count + " demande(s)");
    \u0275\u0275advance();
    \u0275\u0275property("label", ctx_r1.formatMontant(jour_r5.totalAmount));
    \u0275\u0275advance(2);
    \u0275\u0275conditional(ctx_r1.selectedStatut() === "VALIDER" ? 14 : 15);
    \u0275\u0275advance(2);
    \u0275\u0275conditional(jour_r5.expanded ? 16 : -1);
  }
}
function DfComponent_Conditional_39_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 32);
    \u0275\u0275repeaterCreate(1, DfComponent_Conditional_39_Conditional_1_For_2_Template, 17, 10, "div", 34, _forTrack04);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275repeater(ctx_r1.demandesParJour());
  }
}
function DfComponent_Conditional_39_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, DfComponent_Conditional_39_Conditional_0_Template, 7, 1, "div", 31)(1, DfComponent_Conditional_39_Conditional_1_Template, 3, 0, "div", 32);
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275conditional(ctx_r1.demandesParJour().length === 0 ? 0 : 1);
  }
}
var DfComponent = class _DfComponent {
  user;
  salaireService = inject(UserService);
  messageService = inject(MessageService);
  confirmationService = inject(ConfirmationService);
  // ==================== SIGNALS ====================
  isLoading = signal(false);
  isConfirming = signal(false);
  isExporting = signal(false);
  confirmingId = signal(null);
  demandesParJour = signal([]);
  selectedStatut = signal("VALIDER");
  // ==================== COMPUTED ====================
  totalDemandes = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + jour.count, 0);
  });
  totalMontant = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + jour.totalAmount, 0);
  });
  totalSelected = computed(() => {
    return this.demandesParJour().reduce((sum, jour) => sum + (jour.selectedIds?.length || 0), 0);
  });
  hasSelection = computed(() => this.totalSelected() > 0);
  // IDs confirmés pour export
  confirmedIds = signal([]);
  // ==================== LIFECYCLE ====================
  ngOnInit() {
    this.loadDemandesGroupedByDate();
  }
  // ==================== CHARGEMENT ====================
  loadDemandesGroupedByDate() {
    this.isLoading.set(true);
    this.salaireService.getDemandesGroupedByDate(this.selectedStatut()).subscribe({
      next: (response) => {
        if (response.data?.groupedDemandes) {
          const grouped = response.data.groupedDemandes;
          this.demandesParJour.set(grouped.map((g) => __spreadProps(__spreadValues({}, g), {
            expanded: false,
            selectedIds: [],
            allSelected: false
          })));
        }
        this.isLoading.set(false);
      },
      error: (error) => {
        console.error("Erreur chargement demandes:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: "Impossible de charger les demandes"
        });
        this.isLoading.set(false);
      }
    });
  }
  onStatutChange(statut) {
    this.selectedStatut.set(statut);
    this.loadDemandesGroupedByDate();
  }
  // ==================== TOGGLE / SÉLECTION ====================
  toggleDay(jour) {
    jour.expanded = !jour.expanded;
  }
  toggleSelectAll(jour) {
    if (jour.allSelected) {
      jour.selectedIds = jour.demandes.map((d) => d.id);
    } else {
      jour.selectedIds = [];
    }
    this.demandesParJour.set([...this.demandesParJour()]);
  }
  toggleSelectDemande(jour, demandeId) {
    if (!jour.selectedIds) {
      jour.selectedIds = [];
    }
    const index = jour.selectedIds.indexOf(demandeId);
    if (index > -1) {
      jour.selectedIds.splice(index, 1);
    } else {
      jour.selectedIds.push(demandeId);
    }
    jour.allSelected = jour.selectedIds.length === jour.demandes.length;
    this.demandesParJour.set([...this.demandesParJour()]);
  }
  isSelected(jour, demandeId) {
    return jour.selectedIds?.includes(demandeId) || false;
  }
  // ==================== CONFIRMATION INDIVIDUELLE ====================
  confirmConfirmer(demande) {
    this.confirmationService.confirm({
      message: `Voulez-vous confirmer la demande de ${this.formatMontant(demande.amount)} pour ${demande.prenomPersonnel} ${demande.nomPersonnel} ?`,
      header: "Confirmer la demande",
      icon: "pi pi-check-circle",
      acceptLabel: "Confirmer",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.confirmerDemande(demande.id);
      }
    });
  }
  confirmerDemande(id) {
    this.confirmingId.set(id);
    this.salaireService.confirmerDemandeSalary(id).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: "Demande confirm\xE9e avec succ\xE8s"
        });
        this.confirmingId.set(null);
        this.confirmedIds.update((ids) => [...ids, id]);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur confirmation:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Impossible de confirmer la demande"
        });
        this.confirmingId.set(null);
      }
    });
  }
  // ==================== CONFIRMATION MASSIVE ====================
  confirmConfirmerSelection() {
    const total = this.totalSelected();
    this.confirmationService.confirm({
      message: `Voulez-vous confirmer les ${total} demande(s) s\xE9lectionn\xE9e(s) ?`,
      header: "Confirmation massive",
      icon: "pi pi-check-circle",
      acceptLabel: `Confirmer ${total} demande(s)`,
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.confirmerSelection();
      }
    });
  }
  confirmerSelection() {
    const allSelectedIds = [];
    this.demandesParJour().forEach((jour) => {
      if (jour.selectedIds && jour.selectedIds.length > 0) {
        allSelectedIds.push(...jour.selectedIds);
      }
    });
    if (allSelectedIds.length === 0) {
      this.messageService.add({
        severity: "warn",
        summary: "Attention",
        detail: "Aucune demande s\xE9lectionn\xE9e"
      });
      return;
    }
    this.isConfirming.set(true);
    this.salaireService.confirmerMultipleDemandeSalary(allSelectedIds).subscribe({
      next: (response) => {
        const totalConfirmed = response.data?.totalConfirmed || 0;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `${totalConfirmed} demande(s) confirm\xE9e(s) avec succ\xE8s`
        });
        this.isConfirming.set(false);
        this.confirmedIds.update((ids) => [...ids, ...allSelectedIds]);
        this.proposeExport(allSelectedIds);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur confirmation massive:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Erreur lors de la confirmation massive"
        });
        this.isConfirming.set(false);
      }
    });
  }
  // ==================== CONFIRMATION PAR JOUR ====================
  confirmConfirmerJour(jour) {
    this.confirmationService.confirm({
      message: `Voulez-vous confirmer les ${jour.count} demande(s) du ${this.formatDate(jour.date)} pour un total de ${this.formatMontant(jour.totalAmount)} ?`,
      header: "Confirmer toutes les demandes du jour",
      icon: "pi pi-check-circle",
      acceptLabel: `Confirmer ${jour.count} demande(s)`,
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.confirmerJour(jour);
      }
    });
  }
  confirmerJour(jour) {
    const ids = jour.demandes.map((d) => d.id);
    this.isConfirming.set(true);
    this.salaireService.confirmerMultipleDemandeSalary(ids).subscribe({
      next: (response) => {
        const totalConfirmed = response.data?.totalConfirmed || 0;
        this.messageService.add({
          severity: "success",
          summary: "Succ\xE8s",
          detail: `${totalConfirmed} demande(s) du ${this.formatDate(jour.date)} confirm\xE9e(s)`
        });
        this.isConfirming.set(false);
        this.proposeExport(ids);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur confirmation jour:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Erreur lors de la confirmation"
        });
        this.isConfirming.set(false);
      }
    });
  }
  // ==================== REJET ====================
  confirmRejeter(demande) {
    this.confirmationService.confirm({
      message: `Voulez-vous rejeter la demande de ${this.formatMontant(demande.amount)} pour ${demande.prenomPersonnel} ${demande.nomPersonnel} ?`,
      header: "Confirmer le rejet",
      icon: "pi pi-times-circle",
      acceptLabel: "Rejeter",
      rejectLabel: "Annuler",
      acceptButtonStyleClass: "p-button-danger",
      accept: () => {
        this.rejeterDemande(demande.id);
      }
    });
  }
  rejeterDemande(id) {
    this.confirmingId.set(id);
    this.salaireService.rejeterDemandeSalary(id).subscribe({
      next: (response) => {
        this.messageService.add({
          severity: "info",
          summary: "Information",
          detail: "Demande rejet\xE9e"
        });
        this.confirmingId.set(null);
        this.loadDemandesGroupedByDate();
      },
      error: (error) => {
        console.error("Erreur rejet:", error);
        this.messageService.add({
          severity: "error",
          summary: "Erreur",
          detail: error.error?.message || "Impossible de rejeter la demande"
        });
        this.confirmingId.set(null);
      }
    });
  }
  // ==================== EXPORT EXCEL ====================
  proposeExport(ids) {
    this.confirmationService.confirm({
      message: "Voulez-vous exporter ces demandes en Excel ?",
      header: "Export Excel",
      icon: "pi pi-file-excel",
      acceptLabel: "Exporter",
      rejectLabel: "Plus tard",
      acceptButtonStyleClass: "p-button-success",
      accept: () => {
        this.exportExcel(ids);
      }
    });
  }
  exportExcel(ids) {
    this.isExporting.set(true);
    const exportObservable = ids && ids.length > 0 ? this.salaireService.exportDemandesExcel(ids) : this.salaireService.exportAllConfirmedDemandesExcel();
    exportObservable.subscribe({
      next: (blob) => {
        if (blob.type === "application/json") {
          blob.text().then((text) => {
            try {
              const errorResponse = JSON.parse(text);
              this.messageService.add({
                severity: "warn",
                summary: "Attention",
                detail: errorResponse.message || "Aucune donn\xE9e \xE0 exporter"
              });
            } catch {
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: "Impossible d'exporter le fichier"
              });
            }
            this.isExporting.set(false);
          });
          return;
        }
        const filename = `avances_salaire_${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.xlsx`;
        this.downloadFile(blob, filename);
        this.messageService.add({
          severity: "success",
          summary: "Export r\xE9ussi",
          detail: "Le fichier Excel a \xE9t\xE9 t\xE9l\xE9charg\xE9"
        });
        this.isExporting.set(false);
      },
      error: (error) => {
        console.error("Erreur export:", error);
        if (error.error instanceof Blob) {
          error.error.text().then((text) => {
            try {
              const errorResponse = JSON.parse(text);
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: errorResponse.message || "Impossible d'exporter le fichier"
              });
            } catch {
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: "Impossible d'exporter le fichier"
              });
            }
          });
        } else {
          this.messageService.add({
            severity: "error",
            summary: "Erreur",
            detail: error.error?.message || "Impossible d'exporter le fichier"
          });
        }
        this.isExporting.set(false);
      }
    });
  }
  exportAllConfirmed() {
    this.isExporting.set(true);
    this.salaireService.exportAllConfirmedDemandesExcel().subscribe({
      next: (blob) => {
        if (blob.type === "application/json") {
          blob.text().then((text) => {
            try {
              const errorResponse = JSON.parse(text);
              this.messageService.add({
                severity: "warn",
                summary: "Attention",
                detail: errorResponse.message || "Aucune donn\xE9e \xE0 exporter"
              });
            } catch {
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: "Impossible d'exporter le fichier"
              });
            }
            this.isExporting.set(false);
          });
          return;
        }
        const filename = `avances_salaire_confirmees_${(/* @__PURE__ */ new Date()).toISOString().split("T")[0]}.xlsx`;
        this.downloadFile(blob, filename);
        this.messageService.add({
          severity: "success",
          summary: "Export r\xE9ussi",
          detail: "Le fichier Excel a \xE9t\xE9 t\xE9l\xE9charg\xE9"
        });
        this.isExporting.set(false);
      },
      error: (error) => {
        console.error("Erreur export:", error);
        if (error.error instanceof Blob) {
          error.error.text().then((text) => {
            try {
              const errorResponse = JSON.parse(text);
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: errorResponse.message || "Impossible d'exporter le fichier"
              });
            } catch {
              this.messageService.add({
                severity: "error",
                summary: "Erreur",
                detail: "Impossible d'exporter le fichier"
              });
            }
          });
        } else {
          this.messageService.add({
            severity: "error",
            summary: "Erreur",
            detail: error.error?.message || "Impossible d'exporter le fichier"
          });
        }
        this.isExporting.set(false);
      }
    });
  }
  downloadFile(blob, filename) {
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = filename;
    link.click();
    window.URL.revokeObjectURL(url);
  }
  // ==================== UTILITAIRES ====================
  formatMontant(montant) {
    if (montant === void 0 || montant === null)
      return "-";
    return new Intl.NumberFormat("fr-FR", {
      style: "currency",
      currency: "GNF",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(montant);
  }
  formatDate(dateStr) {
    const date = new Date(dateStr);
    return date.toLocaleDateString("fr-FR", {
      weekday: "long",
      day: "numeric",
      month: "long",
      year: "numeric"
    });
  }
  formatDateShort(dateStr) {
    const date = new Date(dateStr);
    return date.toLocaleDateString("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric"
    });
  }
  getStatutSeverity(statut) {
    switch (statut?.toUpperCase()) {
      case "ENCOURS":
        return "info";
      case "VALIDER":
        return "warn";
      case "CONFIRMER":
        return "success";
      case "REJET":
        return "danger";
      case "ANNULLER":
        return "secondary";
      default:
        return "info";
    }
  }
  getStatutLabel(statut) {
    switch (statut?.toUpperCase()) {
      case "ENCOURS":
        return "En cours";
      case "VALIDER":
        return "Valid\xE9e (DRH)";
      case "CONFIRMER":
        return "Confirm\xE9e (DF)";
      case "REJET":
        return "Rejet\xE9e";
      case "ANNULLER":
        return "Annul\xE9e";
      default:
        return statut;
    }
  }
  /**
   * Récupérer les IDs des demandes d'un jour
   */
  getDemandeIds(jour) {
    return jour.demandes.map((d) => d.id);
  }
  /**
   * Exporter les demandes d'un jour
   */
  exportJour(jour) {
    const ids = this.getDemandeIds(jour);
    this.exportExcel(ids);
  }
  static \u0275fac = function DfComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _DfComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _DfComponent, selectors: [["app-df"]], inputs: { user: "user" }, features: [\u0275\u0275ProvidersFeature([MessageService, ConfirmationService])], decls: 40, vars: 9, consts: [[1, "df-container"], [1, "header-section"], [1, "header-content"], [1, "pi", "pi-building"], [1, "subtitle"], [1, "header-actions"], ["icon", "pi pi-refresh", "label", "Actualiser", 3, "onClick", "text", "loading"], ["icon", "pi pi-file-excel", "label", "Exporter tout (Excel)", "severity", "success", 3, "outlined", "loading"], [1, "filter-section"], [3, "onChange"], ["pTemplate", "header"], [1, "stats-section"], [1, "stat-card"], [1, "stat-icon"], [1, "pi", "pi-file"], [1, "stat-info"], [1, "stat-value"], [1, "stat-label"], [1, "stat-card", "amount"], [1, "pi", "pi-wallet"], [1, "stat-card", "selected"], [1, "bulk-action-bar"], [1, "loading-container"], ["icon", "pi pi-file-excel", "label", "Exporter tout (Excel)", "severity", "success", 3, "onClick", "outlined", "loading"], [1, "pi", "pi-clock", "mr-2"], ["severity", "warn", 1, "ml-2", 3, "value"], [1, "pi", "pi-check-circle", "mr-2"], [1, "pi", "pi-check-square"], [1, "selection-info"], [1, "pi", "pi-info-circle"], ["icon", "pi pi-check-circle", "label", "Confirmer la s\xE9lection", "severity", "success", 3, "onClick", "loading"], [1, "empty-state"], [1, "days-list"], [1, "pi", "pi-inbox"], [1, "day-card", 3, "expanded"], [1, "day-card"], [1, "day-header", 3, "click"], [1, "day-info"], [1, "day-toggle"], [1, "day-date"], [1, "date-full"], [1, "date-short"], [1, "day-badges"], ["icon", "pi pi-file", 3, "label"], ["icon", "pi pi-wallet", "styleClass", "amount-chip", 3, "label"], [1, "day-actions", 3, "click"], ["icon", "pi pi-check-circle", "label", "Tout confirmer", "severity", "success", "size", "small", 3, "outlined", "loading"], ["icon", "pi pi-file-excel", "label", "Exporter", "severity", "success", "size", "small", 3, "outlined", "loading"], [1, "day-content"], ["icon", "pi pi-check-circle", "label", "Tout confirmer", "severity", "success", "size", "small", 3, "onClick", "outlined", "loading"], ["icon", "pi pi-file-excel", "label", "Exporter", "severity", "success", "size", "small", 3, "onClick", "outlined", "loading"], [1, "select-all-row"], ["styleClass", "p-datatable-sm p-datatable-striped", 3, "value", "tableStyle"], ["pTemplate", "body"], ["pTemplate", "footer"], [3, "ngModelChange", "onChange", "ngModel", "binary", "inputId"], [3, "for"], [2, "width", "50px"], [2, "width", "80px"], [2, "width", "130px"], [2, "width", "120px"], [2, "width", "140px"], [2, "width", "100px"], [2, "width", "150px"], [1, "matricule-badge"], [1, "person-info"], [1, "person-name"], [1, "numero-compte"], [1, "phone"], [1, "text-right"], [1, "montant"], [1, "action-buttons"], [3, "value", "severity"], [3, "onChange", "binary", "ngModel"], ["icon", "pi pi-check", "severity", "success", "size", "small", "pTooltip", "Confirmer", 3, "onClick", "rounded", "text", "loading"], ["icon", "pi pi-times", "severity", "danger", "size", "small", "pTooltip", "Rejeter", 3, "onClick", "rounded", "text", "loading"], [1, "montant-total"], ["colspan", "2"]], template: function DfComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275element(0, "p-toast")(1, "p-confirmDialog");
      \u0275\u0275elementStart(2, "div", 0)(3, "div", 1)(4, "div", 2)(5, "h2");
      \u0275\u0275element(6, "i", 3);
      \u0275\u0275text(7, " Direction Financi\xE8re - Gestion des demandes");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(8, "p", 4);
      \u0275\u0275text(9, "Confirmez les demandes valid\xE9es par le DRH et exportez les donn\xE9es");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(10, "div", 5)(11, "p-button", 6);
      \u0275\u0275listener("onClick", function DfComponent_Template_p_button_onClick_11_listener() {
        return ctx.loadDemandesGroupedByDate();
      });
      \u0275\u0275elementEnd();
      \u0275\u0275template(12, DfComponent_Conditional_12_Template, 1, 2, "p-button", 7);
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(13, "div", 8)(14, "p-tabView", 9);
      \u0275\u0275listener("onChange", function DfComponent_Template_p_tabView_onChange_14_listener($event) {
        return ctx.onStatutChange($event.index === 0 ? "VALIDER" : "CONFIRMER");
      });
      \u0275\u0275elementStart(15, "p-tabPanel");
      \u0275\u0275template(16, DfComponent_ng_template_16_Template, 4, 1, "ng-template", 10);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(17, "p-tabPanel");
      \u0275\u0275template(18, DfComponent_ng_template_18_Template, 3, 0, "ng-template", 10);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(19, "div", 11)(20, "div", 12)(21, "div", 13);
      \u0275\u0275element(22, "i", 14);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(23, "div", 15)(24, "span", 16);
      \u0275\u0275text(25);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(26, "span", 17);
      \u0275\u0275text(27, "Demandes");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(28, "div", 18)(29, "div", 13);
      \u0275\u0275element(30, "i", 19);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(31, "div", 15)(32, "span", 16);
      \u0275\u0275text(33);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(34, "span", 17);
      \u0275\u0275text(35, "Montant total");
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(36, DfComponent_Conditional_36_Template, 8, 1, "div", 20);
      \u0275\u0275elementEnd();
      \u0275\u0275template(37, DfComponent_Conditional_37_Template, 6, 2, "div", 21)(38, DfComponent_Conditional_38_Template, 4, 0, "div", 22)(39, DfComponent_Conditional_39_Template, 2, 1);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275advance(11);
      \u0275\u0275property("text", true)("loading", ctx.isLoading());
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.selectedStatut() === "CONFIRMER" ? 12 : -1);
      \u0275\u0275advance(13);
      \u0275\u0275textInterpolate(ctx.totalDemandes());
      \u0275\u0275advance(8);
      \u0275\u0275textInterpolate(ctx.formatMontant(ctx.totalMontant()));
      \u0275\u0275advance(3);
      \u0275\u0275conditional(ctx.hasSelection() && ctx.selectedStatut() === "VALIDER" ? 36 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.hasSelection() && ctx.selectedStatut() === "VALIDER" ? 37 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.isLoading() ? 38 : -1);
      \u0275\u0275advance();
      \u0275\u0275conditional(!ctx.isLoading() ? 39 : -1);
    }
  }, dependencies: [CommonModule, FormsModule, NgControlStatus, NgModel, JavaDatePipe, CardModule, PrimeTemplate, TableModule, Table, ButtonModule, Button, TagModule, Tag, ToastModule, Toast, ConfirmDialogModule, ConfirmDialog, TooltipModule, Tooltip, BadgeModule, Badge, DividerModule, CheckboxModule, Checkbox, ProgressSpinnerModule, ProgressSpinner, TabViewModule, TabView, TabPanel, ChipModule, Chip], styles: ["\n\n.df-container[_ngcontent-%COMP%] {\n  padding: 1.5rem;\n}\n.header-section[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\n  color: var(--primary-color);\n  margin: 0 0 0.5rem 0;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 0.5rem;\n}\n.header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  margin: 0;\n}\n.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.filter-section[_ngcontent-%COMP%] {\n  margin-bottom: 1.5rem;\n}\n.stats-section[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  flex-wrap: wrap;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 8px;\n  padding: 1rem 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  border-left: 4px solid var(--surface-400);\n  min-width: 180px;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.amount[_ngcontent-%COMP%] {\n  border-left-color: var(--green-500);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.amount[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background: var(--green-100);\n  color: var(--green-600);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.selected[_ngcontent-%COMP%] {\n  border-left-color: var(--blue-500);\n  background: var(--blue-50);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card.selected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  background: var(--blue-100);\n  color: var(--blue-600);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: var(--surface-100);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.25rem;\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%] {\n  display: block;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--text-color);\n}\n.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%] {\n  font-size: 0.85rem;\n  color: var(--text-color-secondary);\n}\n.bulk-action-bar[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: var(--green-50);\n  border: 1px solid var(--green-200);\n  border-radius: 8px;\n  padding: 1rem 1.5rem;\n  margin-bottom: 1.5rem;\n}\n.bulk-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: var(--green-700);\n  font-weight: 500;\n}\n.bulk-action-bar[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 1.25rem;\n}\n.loading-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem;\n}\n.loading-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  margin-top: 1rem;\n  color: var(--text-color-secondary);\n}\n.empty-state[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: 4rem;\n  background: var(--surface-50);\n  border-radius: 8px;\n}\n.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 4rem;\n  color: var(--surface-400);\n}\n.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\n  margin: 1rem 0 0.5rem 0;\n  color: var(--text-color);\n}\n.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  margin: 0;\n}\n.days-list[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.day-card[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  border: 1px solid var(--surface-border);\n}\n.day-card.expanded[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n  border-bottom: 1px solid var(--surface-border);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]:hover {\n  background: var(--surface-50);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: var(--text-color-secondary);\n  transition: transform 0.2s;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-full[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-color);\n  text-transform: capitalize;\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-short[_ngcontent-%COMP%] {\n  display: none;\n  color: var(--text-color-secondary);\n}\n.day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-badges[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.5rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%] {\n  padding: 1rem;\n  background: var(--surface-50);\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%]   .select-all-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: white;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n}\n.day-card[_ngcontent-%COMP%]   .day-content[_ngcontent-%COMP%]   .select-all-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  cursor: pointer;\n  color: var(--text-color-secondary);\n  font-size: 0.9rem;\n}\n.matricule-badge[_ngcontent-%COMP%] {\n  background: var(--primary-100);\n  color: var(--primary-700);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 0.85rem;\n}\n.person-info[_ngcontent-%COMP%]   .person-name[_ngcontent-%COMP%] {\n  font-weight: 500;\n}\n.montant[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--text-color);\n}\n.montant-total[_ngcontent-%COMP%] {\n  font-size: 1.1rem;\n  color: var(--green-600);\n}\n.numero-compte[_ngcontent-%COMP%], \n.phone[_ngcontent-%COMP%] {\n  font-family: monospace;\n  font-size: 0.85rem;\n}\n.action-buttons[_ngcontent-%COMP%] {\n  display: flex;\n  gap: 0.25rem;\n}\n.selected-row[_ngcontent-%COMP%] {\n  background: var(--green-50) !important;\n}\n[_nghost-%COMP%]     .amount-chip {\n  background: var(--green-100);\n  color: var(--green-700);\n}\n@media (max-width: 768px) {\n  .header-section[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%] {\n    width: 100%;\n    justify-content: flex-end;\n  }\n  .stats-section[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .bulk-action-bar[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: stretch;\n    text-align: center;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: flex-start;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%] {\n    flex-wrap: wrap;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-full[_ngcontent-%COMP%] {\n    display: none;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-info[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]   .date-short[_ngcontent-%COMP%] {\n    display: block;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-actions[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .day-card[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n}\n/*# sourceMappingURL=df.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(DfComponent, { className: "DfComponent", filePath: "src/app/pages/dashboard/admin/df/df.component.ts", lineNumber: 43 });
})();

// src/app/pages/dashboard/home/home.component.ts
function HomeComponent_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-admin");
  }
}
function HomeComponent_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-agent-credit");
  }
}
function HomeComponent_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-resp-agent", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-logistique", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-societariat", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-demande-avance-salaire", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-rh", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-de", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-df", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Case_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-digital-verification", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, HomeComponent_Conditional_3_Case_0_Template, 1, 1, "app-logistique", 0)(1, HomeComponent_Conditional_3_Case_1_Template, 1, 1, "app-societariat", 0)(2, HomeComponent_Conditional_3_Case_2_Template, 1, 1, "app-demande-avance-salaire", 0)(3, HomeComponent_Conditional_3_Case_3_Template, 1, 1, "app-rh", 0)(4, HomeComponent_Conditional_3_Case_4_Template, 1, 1, "app-de", 0)(5, HomeComponent_Conditional_3_Case_5_Template, 1, 1, "app-df", 0)(6, HomeComponent_Conditional_3_Case_6_Template, 1, 1, "app-digital-verification", 0);
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275conditional((tmp_1_0 = (tmp_1_0 = ctx_r0.state().user) == null ? null : tmp_1_0.service) === "Logistique" ? 0 : tmp_1_0 === "Societariat" ? 1 : tmp_1_0 === "Personnel" ? 2 : tmp_1_0 === "DRH" ? 3 : tmp_1_0 === "DE" ? 4 : tmp_1_0 === "DF" ? 5 : 6);
  }
}
function HomeComponent_Conditional_4_Case_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-demande-avance-salaire", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, HomeComponent_Conditional_4_Case_0_Template, 1, 1, "app-demande-avance-salaire", 0);
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275conditional((tmp_1_0 = (tmp_1_0 = ctx_r0.state().user) == null ? null : tmp_1_0.service) === "Personnel" ? 0 : -1);
  }
}
function HomeComponent_Conditional_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-list-stock", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-rapprochement-caisse", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-correction-rejet-pp", 0);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275property("user", ctx_r0.state().user);
  }
}
function HomeComponent_Conditional_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "app-rotation-agent");
  }
}
function HomeComponent_Conditional_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 1)(1, "p");
    \u0275\u0275text(2, "R\xF4le non reconnu. Veuillez contacter l'administrateur.");
    \u0275\u0275elementEnd()();
  }
}
var HomeComponent = class _HomeComponent {
  state = signal({
    loading: false,
    message: void 0,
    error: void 0
  });
  destroyRef = inject(DestroyRef);
  userService = inject(UserService);
  ngOnInit() {
    this.loadUserProfile();
  }
  // this load user informations
  loadUserProfile() {
    console.log("Loading user profile...");
    this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: true, message: void 0, error: void 0 }));
    this.userService.getInstanceUser$().pipe(takeUntilDestroyed(this.destroyRef)).subscribe({
      next: (response) => {
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false, user: response.data.user, message: void 0, error: void 0 }));
      },
      error: (error) => {
        this.state.update((state2) => __spreadProps(__spreadValues({}, state2), { loading: false, user: void 0, message: void 0, error }));
      },
      complete: () => {
      }
    });
  }
  static \u0275fac = function HomeComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _HomeComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _HomeComponent, selectors: [["app-home"]], decls: 10, vars: 1, consts: [[3, "user"], [1, "alert", "alert-warning"]], template: function HomeComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275template(0, HomeComponent_Conditional_0_Template, 1, 0, "app-admin")(1, HomeComponent_Conditional_1_Template, 1, 0, "app-agent-credit")(2, HomeComponent_Conditional_2_Template, 1, 1, "app-resp-agent", 0)(3, HomeComponent_Conditional_3_Template, 7, 1)(4, HomeComponent_Conditional_4_Template, 1, 1)(5, HomeComponent_Conditional_5_Template, 1, 1, "app-list-stock", 0)(6, HomeComponent_Conditional_6_Template, 1, 1, "app-rapprochement-caisse", 0)(7, HomeComponent_Conditional_7_Template, 1, 1, "app-correction-rejet-pp", 0)(8, HomeComponent_Conditional_8_Template, 1, 0, "app-rotation-agent")(9, HomeComponent_Conditional_9_Template, 3, 0, "div", 1);
    }
    if (rf & 2) {
      let tmp_0_0;
      \u0275\u0275conditional(((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "SUPER_ADMIN" ? 0 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "AGENT_CREDIT" ? 1 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "DA" ? 2 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "MANAGER" ? 3 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "USER" ? 4 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "DR" ? 5 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "CAISSE" ? 6 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "AGENT_CORRECTEUR" ? 7 : ((tmp_0_0 = ctx.state().user) == null ? null : tmp_0_0.role) === "RA" ? 8 : 9);
    }
  }, dependencies: [
    AdminComponent,
    AgentCreditComponent,
    RespAgentComponent,
    ListStockComponent,
    RapprochementCaisseComponent,
    DigitalVerificationComponent,
    CorrectionRejetPpComponent,
    RotationAgentComponent,
    LogistiqueComponent,
    DeComponent,
    SocietariatComponent,
    DemandeAvanceSalaireComponent,
    RhComponent,
    DfComponent
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(HomeComponent, { className: "HomeComponent", filePath: "src/app/pages/dashboard/home/home.component.ts", lineNumber: 40 });
})();
export {
  HomeComponent
};
//# sourceMappingURL=chunk-NKQ2TKGV.js.map
