import{a as le}from"./chunk-SDW5API3.js";import{a as ae}from"./chunk-4R64MDDH.js";import{a as _e,b as be}from"./chunk-KRA3R5HH.js";import{a as pe,b as ce}from"./chunk-FN33ABM3.js";import{a as xe,b as ve}from"./chunk-IDKLANHK.js";import{a as Se,b as Ee}from"./chunk-GBSAZIIF.js";import{a as fe,b as he}from"./chunk-F6BLPIFZ.js";import"./chunk-SQPWYWAP.js";import"./chunk-TOQUJNDH.js";import"./chunk-FXA6QVNY.js";import{c as oe,d as re}from"./chunk-JK4JG2UW.js";import{b as me}from"./chunk-BGHZ5NVU.js";import"./chunk-XYTTGGFW.js";import"./chunk-ZNT52ZF3.js";import{b as se,d as de}from"./chunk-Z7KSDRLV.js";import"./chunk-N4Q6Z3MW.js";import{a as ue,b as ge}from"./chunk-3BEM77IG.js";import{b as U,d as G,j as O}from"./chunk-UCSGE5ZL.js";import"./chunk-2O7XYKW4.js";import{a as T}from"./chunk-YTFCGSG6.js";import"./chunk-RHLJ6NE2.js";import{a as Z,b as J}from"./chunk-R2ZYXRFE.js";import"./chunk-NRZ4QNP7.js";import"./chunk-GFZUU5ZD.js";import"./chunk-BODZH67C.js";import"./chunk-KR7F45VC.js";import{f as $,g as ee}from"./chunk-XKXBFP6V.js";import"./chunk-ULM4QL4Q.js";import{oa as M}from"./chunk-3YZBLOIS.js";import{b as L,e as q,f as W,h as B,i as z,j,r as K,s as Q,t as Y,x as X}from"./chunk-2I6ZAGC7.js";import{a as te,b as ne}from"./chunk-FVCMZ6IK.js";import{a as ie}from"./chunk-VDYO34A5.js";import"./chunk-Y2QT2WK5.js";import"./chunk-S35HUXPS.js";import"./chunk-GZWLZB4Q.js";import{Bb as m,G as D,Gb as e,Hb as t,Ib as n,Mb as P,O as k,Rb as w,Sb as h,Va as l,_ as x,bc as c,cc as o,fa as b,ga as S,gb as N,i as A,ic as R,jc as V,kc as F,lc as H,ma as I,mb as f,mc as C,va as E,vb as v,yb as y}from"./chunk-MKA3N2SS.js";import"./chunk-GAL4ENT6.js";var we=()=>({width:"5rem",height:"5rem"}),Ce=()=>({background:"white",color:"#10b981",border:"none","border-radius":"1.5rem"}),Me=()=>({width:"500px"}),Te=()=>({"background-color":"#059669","border-color":"#059669"});function Ae(r,i){r&1&&(e(0,"div",8)(1,"div",9),n(2,"p-progress-spinner",10),t(),e(3,"h2",11),o(4,"V\xE9rification du compte ..."),t(),e(5,"p",12),o(6,"Veuillez patienter pendant que nous v\xE9rifions vos identifiants. "),t()()),r&2&&(l(2),y(C(2,we)))}function De(r,i){if(r&1&&(e(0,"div",53),n(1,"p-message",71),t()),r&2){let a=h(2);l(),v("text",a.personnelState().message)}}function ke(r,i){if(r&1&&(e(0,"div",53),n(1,"p-message",72),t()),r&2){let a=h(2);l(),v("text",a.personnelState().error)}}function Ie(r,i){r&1&&(e(0,"small",57),o(1,"Le matricule est obligatoire"),t())}function Ne(r,i){r&1&&(e(0,"small",57),o(1,"Le pr\xE9nom est obligatoire"),t())}function Pe(r,i){r&1&&(e(0,"small",57),o(1,"Le nom est obligatoire"),t())}function Re(r,i){r&1&&(e(0,"small",57),o(1,"L'email est obligatoire"),t())}function Ve(r,i){r&1&&(e(0,"small",57),o(1,"Format d'email invalide"),t())}function Fe(r,i){r&1&&(e(0,"small",57),o(1,"Le mot de passe est obligatoire"),t())}function He(r,i){r&1&&(e(0,"small",57),o(1,"Le mot de passe doit contenir au moins 6 caract\xE8res"),t())}function Ue(r,i){if(r&1){let a=P();e(0,"div",13),n(1,"topbar"),e(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),n(6,"br")(7,"br")(8,"br"),e(9,"div",18)(10,"div",19)(11,"div",20),n(12,"i",21),e(13,"h3",22),o(14,"GESTION ECREDIT"),t()(),e(15,"p",23),o(16," Faire une nouvelle demande de Cr\xE9dit "),t(),e(17,"div",24)(18,"p-button",25),w("click",function(d){b(a);let p=c(20);return S(p.toggle(d))}),t(),n(19,"p-menu",26,0),t()(),e(21,"div",27)(22,"div",20),n(23,"i",28),e(24,"h3",22)(25,"strong"),o(26,"GESTION RECLAMATIONS"),t()()(),e(27,"p",29),o(28," Gestion des r\xE9clamations et incidents "),t(),e(29,"button",30),o(30," Acceder "),t(),e(31,"div",31),n(32,"i",32),e(33,"span"),o(34,"En cours"),t()()(),e(35,"div",33)(36,"div",20),n(37,"i",34),e(38,"h3",22)(39,"strong"),o(40,"ESOCIETARIAT"),t()()(),e(41,"p",35),o(42," Gestion pour l'assainissement du soci\xE9tariat "),t(),e(43,"button",36),o(44," Acceder "),t(),e(45,"div",31),n(46,"i",32),e(47,"span"),o(48,"En cours"),t()()(),e(49,"div",37)(50,"div",20),n(51,"i",38),e(52,"h3",22)(53,"strong"),o(54,"GESTION ARRETE DE CAISSE"),t()()(),e(55,"p",39),o(56," Gestion pour la remont\xE9e des arr\xEAt\xE9s de caisse "),t(),e(57,"button",40),o(58," Acceder "),t(),e(59,"div",31),n(60,"i",32),e(61,"span"),o(62,"En cours"),t()()(),e(63,"div",41),w("click",function(){b(a);let d=h();return S(d.openPersonnelDialog())}),e(64,"div",20),n(65,"i",42),e(66,"h3",22)(67,"strong"),o(68,"GESTION DU PERSONNEL"),t()()(),e(69,"p",43),o(70," Gestion avance salaire et des t\xE2cherons "),t(),e(71,"button",44),o(72," Souscrire "),t(),e(73,"div",45),n(74,"i",46),e(75,"span"),o(76,"Disponible"),t()()(),e(77,"div",47)(78,"div",20),n(79,"i",48),e(80,"h3",22)(81,"strong"),o(82,"DIGI-MAP"),t()()(),e(83,"p",49),o(84," G\xE9olocalisation de nos points de services "),t(),e(85,"button",50),o(86," Acceder "),t(),e(87,"div",31),n(88,"i",32),e(89,"span"),o(90,"En cours"),t()()()()()()()()(),e(91,"p-dialog",51),F("visibleChange",function(d){b(a);let p=h();return V(p.showPersonnelDialog,d)||(p.showPersonnelDialog=d),S(d)}),e(92,"div",52),f(93,De,2,1,"div",53)(94,ke,2,1,"div",53),e(95,"form",54,1),w("ngSubmit",function(){b(a);let d=c(96),p=h();return S(p.registerPersonnel(d))}),e(97,"p-input-group")(98,"p-inputgroup-addon"),n(99,"i",55),t(),n(100,"input",56,2),t(),f(102,Ie,2,0,"small",57),e(103,"p-input-group")(104,"p-inputgroup-addon"),n(105,"i",58),t(),n(106,"input",59,3),t(),f(108,Ne,2,0,"small",57),e(109,"p-input-group")(110,"p-inputgroup-addon"),n(111,"i",58),t(),n(112,"input",60,4),t(),f(114,Pe,2,0,"small",57),e(115,"p-input-group")(116,"p-inputgroup-addon"),n(117,"i",61),t(),n(118,"input",62,5),t(),f(120,Re,2,0,"small",57)(121,Ve,2,0,"small",57),e(122,"p-input-group")(123,"p-inputgroup-addon"),n(124,"i",63),t(),n(125,"input",64,6),t(),e(127,"p-input-group")(128,"p-inputgroup-addon"),n(129,"i",65),t(),n(130,"input",66,7),t(),f(132,Fe,2,0,"small",57)(133,He,2,0,"small",57),e(134,"div",67),n(135,"i",32),e(136,"span"),o(137,"Le nom d'utilisateur sera g\xE9n\xE9r\xE9 automatiquement \xE0 partir de votre pr\xE9nom et nom."),t()(),e(138,"div",68)(139,"p-button",69),w("onClick",function(){b(a);let d=h();return S(d.closePersonnelDialog())}),t(),n(140,"p-button",70),t()()()(),n(141,"p-toast")}if(r&2){let a=c(96),s=c(101),d=c(107),p=c(113),u=c(119),g=c(131),_=h();l(18),y(C(24,Ce)),l(),v("model",_.demandesItems)("popup",!0),l(72),y(C(25,Me)),R("visible",_.showPersonnelDialog),v("modal",!0)("closable",!0)("draggable",!1),l(2),m(_.personnelState().message?93:-1),l(),m(_.personnelState().error?94:-1),l(8),m(s.invalid&&s.touched?102:-1),l(6),m(d.invalid&&d.touched?108:-1),l(6),m(p.invalid&&p.touched?114:-1),l(6),m(u.invalid&&u.touched&&(u.errors!=null&&u.errors.required)?120:-1),l(),m(u.invalid&&u.touched&&(u.errors!=null&&u.errors.email)?121:-1),l(11),m(g.invalid&&g.touched&&(g.errors!=null&&g.errors.required)?132:-1),l(),m(g.invalid&&g.touched&&(g.errors!=null&&g.errors.minlength)?133:-1),l(6),v("outlined",!0),l(),y(C(26,Te)),v("loading",_.personnelState().loading)("disabled",a.invalid||_.personnelState().loading)}}var ye=class r{loading=E(!0);isAuthenticatedAndRedirecting=E(!1);showPersonnelDialog=E(!1);personnelState=E({loading:!1,message:void 0,error:void 0});destroyRef=x(I);router=x(G);storage=x(te);userService=x(ne);activatedRoute=x(U);messageService=x(M);redirectBaseUrl=ie.redirectUri;ngOnInit(){if(this.userService.isAuthenticated()&&!this.userService.isTokenExpired()){this.isAuthenticatedAndRedirecting.set(!0),console.log("User is authenticated and redirecting...");let i=this.storage.getRedirectUrl()||"/dashboards";this.router.navigate([i]);return}this.activatedRoute.queryParamMap.pipe(k(i=>{let a=i.get("code");return console.log("OAuth callback received with code:",a),a?(this.loading.set(!0),this.userService.validateCode$(this.formData(a))):(this.loading.set(!1),A)}),D(1e3),T(this.destroyRef)).subscribe({next:i=>{console.log("Authentication successful:",i),this.saveToken(i),setTimeout(()=>{this.isAuthenticatedAndRedirecting.set(!0);let a=this.storage.getRedirectUrl()||"/dashboards";this.router.navigate([a])},100)},error:i=>{console.error("Authentication error:",i),this.loading.set(!1),this.isAuthenticatedAndRedirecting.set(!1),this.messageService.add({severity:"error",summary:"Authentication Failed",detail:typeof i=="string"?i:"Please try again"})},complete:()=>console.log("Authentication complete")})}formData=i=>le({code:i,client_id:"client",grant_type:"authorization_code",redirect_uri:this.redirectBaseUrl,code_verifier:"FyMQLDjN4mjiAY7O4fva2ZlxPZV9U_TU4GcdI5WSSufPBvH2ckvPWr3n3n-lWfwXSucLUSWimUqUc-_7Jmdk6ogzM2QDiSsMbY8UpBA1MEQbNteuXjWtW0psB1hPA_ED"});saveToken=i=>{console.log("\u{1F4BE} Sauvegarde des tokens:"),console.log("Access Token:",i.access_token?.substring(0,50)+"..."),console.log("Refresh Token:",i.refresh_token?.substring(0,50)+"..."),this.storage.set("[KEY] TOKEN",i.access_token),this.storage.set("[KEY] REFRESH_TOKEN",i.refresh_token||i.access_token);let a=this.storage.get("[KEY] TOKEN");console.log("\u2705 Token sauvegard\xE9 et v\xE9rifi\xE9:",a?"Oui":"Non")};demandesItems=[{label:"Demande de Cr\xE9dit Individuel",icon:"pi pi-plus",command:()=>this.navigateToNewDemande()},{label:"Demande de Cr\xE9dit Groupe",icon:"pi pi-list",command:()=>this.navigateToMyDemandes()}];navigateToNewDemande(){this.router.navigate(["/auth/credit/demandeInd"])}navigateToMyDemandes(){}openPersonnelDialog(){this.showPersonnelDialog.set(!0),this.personnelState.set({loading:!1,message:void 0,error:void 0})}closePersonnelDialog(){this.showPersonnelDialog.set(!1),this.personnelState.set({loading:!1,message:void 0,error:void 0})}registerPersonnel(i){if(i.invalid){this.messageService.add({severity:"warn",summary:"Attention",detail:"Veuillez remplir tous les champs obligatoires"});return}this.personnelState.set({loading:!0,message:void 0,error:void 0});let a={firstName:i.value.firstName,lastName:i.value.lastName,email:i.value.email,password:i.value.password,matricule:i.value.matricule,phone:i.value.phone};this.userService.register$(a).pipe(T(this.destroyRef)).subscribe({next:s=>{this.personnelState.set({loading:!1,message:s.message,error:void 0}),this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:s.message||"Compte cr\xE9\xE9 avec succ\xE8s. V\xE9rifiez votre email pour activer votre compte."}),setTimeout(()=>{this.closePersonnelDialog(),i.reset()},3e3)},error:s=>{this.personnelState.set({loading:!1,message:void 0,error:s}),this.messageService.add({severity:"error",summary:"Erreur",detail:s||"Une erreur est survenue lors de la cr\xE9ation du compte"})}})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=N({type:r,selectors:[["app-home"]],features:[H([M])],decls:2,vars:1,consts:[["demandesMenu",""],["personnelForm","ngForm"],["matricule","ngModel"],["firstName","ngModel"],["lastName","ngModel"],["email","ngModel"],["phone","ngModel"],["password","ngModel"],[1,"text-center"],[1,"relative"],["ariaLabel","Verifying account","strokeWidth","4","animationDuration",".5s",1,"text-primary"],[1,"text-2xl","font-semibold","mb-2"],[1,"text-surface-600","dark:text-surface-300"],[1,"bg-surface-50","dark:bg-surface-950"],[1,"h-screen"],[1,"h-screen","overflow-x-hidden","overflow-y-auto","absolute","top-0","left-0","right-0","bottom-0",2,"perspective","101px"],["id","parallaxBody",1,"lg:top-0","block","absolute","left-0","right-0","h-full","z-20"],[1,"card"],[1,"grid","grid-cols-12","gap-6","mb-8","max-w-7xl","mx-auto","px-4"],[1,"col-span-12","md:col-span-4","bg-green-500","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer"],[1,"flex","items-center","mb-6"],[1,"pi","pi-credit-card","text-3xl","mr-4"],[1,"text-xl","font-bold"],[1,"text-green-100","mb-6","text-sm","leading-relaxed"],[1,"flex","gap-4"],["label","Demandes","icon","pi pi-chevron-down","iconPos","right",1,"p-button-sm",3,"click"],[3,"model","popup"],[1,"col-span-12","md:col-span-4","bg-orange-500","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer"],[1,"pi","pi-headphones","text-3xl","mr-4"],[1,"text-orange-100","mb-6","text-sm","leading-relaxed"],[1,"bg-white","text-orange-500","px-6","py-2","rounded-full","font-medium","hover:bg-gray-100","transition-colors"],[1,"mt-4","flex","items-center","text-orange-200","font-semibold"],[1,"pi","pi-info-circle","mr-2"],[1,"col-span-12","md:col-span-4","bg-cyan-600","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer"],[1,"pi","pi-users","text-3xl","mr-4"],[1,"text-cyan-100","mb-6","text-sm","leading-relaxed"],[1,"bg-gray-800","text-white","px-6","py-2","rounded-full","font-medium","hover:bg-gray-700","transition-colors"],[1,"col-span-12","md:col-span-4","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer",2,"background-color","#7c3aed"],[1,"pi","pi-video","text-3xl","mr-4"],[1,"mb-6","text-sm","leading-relaxed",2,"color","#ddd6fe"],[1,"bg-white","px-6","py-2","rounded-full","font-medium","hover:bg-gray-100","transition-colors",2,"color","#7c3aed"],[1,"col-span-12","md:col-span-4","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer",2,"background-color","#059669",3,"click"],[1,"pi","pi-user-plus","text-3xl","mr-4"],[1,"mb-6","text-sm","leading-relaxed",2,"color","#d1fae5"],[1,"bg-white","px-6","py-2","rounded-full","font-medium","hover:bg-gray-100","transition-colors",2,"color","#059669"],[1,"mt-4","flex","items-center",2,"color","#d1fae5"],[1,"pi","pi-check-circle","mr-2"],[1,"col-span-12","md:col-span-4","bg-gray-900","rounded-2xl","p-8","text-white","shadow-lg","hover:shadow-xl","transition-all","duration-300","hover:-translate-y-1","cursor-pointer"],[1,"pi","pi-bars","text-3xl","mr-4"],[1,"text-gray-300","mb-6","text-sm","leading-relaxed"],[1,"bg-cyan-500","text-white","px-6","py-2","rounded-full","font-medium","hover:bg-cyan-400","transition-colors"],["header","Inscription Personnel","styleClass","personnel-dialog",3,"visibleChange","visible","modal","closable","draggable"],[1,"p-4"],[1,"mb-4"],[1,"flex","flex-col","gap-4",3,"ngSubmit"],[1,"pi","pi-id-card"],["pInputText","","name","matricule","ngModel","","placeholder","Matricule *","required",""],[1,"text-red-500"],[1,"pi","pi-user"],["pInputText","","name","firstName","ngModel","","placeholder","Pr\xE9nom *","required",""],["pInputText","","name","lastName","ngModel","","placeholder","Nom *","required",""],[1,"pi","pi-envelope"],["pInputText","","name","email","ngModel","","placeholder","Email *","required","","email","","type","email"],[1,"pi","pi-phone"],["pInputText","","name","phone","ngModel","","placeholder","T\xE9l\xE9phone"],[1,"pi","pi-lock"],["pInputText","","name","password","ngModel","","type","password","placeholder","Mot de passe *","required","","minlength","6"],[1,"bg-blue-50","p-3","rounded-lg","text-sm","text-blue-700"],[1,"flex","justify-end","gap-3","mt-4"],["label","Annuler","icon","pi pi-times","severity","secondary",3,"onClick","outlined"],["type","submit","label","S'inscrire","icon","pi pi-check",3,"loading","disabled"],["severity","success",3,"text"],["severity","error",3,"text"]],template:function(a,s){a&1&&f(0,Ae,7,3,"div",8)(1,Ue,142,27),a&2&&m(s.loading()||s.isAuthenticatedAndRedirecting()?0:1)},dependencies:[ge,ue,O,se,de,J,Z,ae,me,ee,$,ce,pe,he,fe,X,j,L,q,W,K,Y,Q,z,B,ve,xe,be,_e,Ee,Se,re,oe],styles:["[_ngcontent-%COMP%]::placeholder{color:#fff}  .custom-dropdown .p-dropdown{border-radius:1.5rem!important;border:none!important}  .custom-dropdown .p-dropdown-label{color:#10b981!important;font-weight:500!important}  .p-menu{border-radius:.75rem!important;box-shadow:0 10px 25px #0000001a!important}  .personnel-dialog .p-dialog-header{background:linear-gradient(135deg,#059669,#047857);color:#fff}  .personnel-dialog .p-dialog-title{color:#fff}  .personnel-dialog input::placeholder{color:#6b7280!important;opacity:1!important;font-weight:500!important}  .personnel-dialog .p-inputtext::placeholder{color:#6b7280!important;opacity:1!important;font-weight:500!important}  .personnel-dialog input{border:1px solid #d1d5db!important}  .personnel-dialog input:focus{border-color:#059669!important;box-shadow:0 0 0 2px #05966933!important}"]})};export{ye as HomeComponent};
