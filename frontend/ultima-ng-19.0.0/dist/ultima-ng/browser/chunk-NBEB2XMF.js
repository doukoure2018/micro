import{a as Te,b as De}from"./chunk-E24E7YRI.js";import{a as Ve,b as Re}from"./chunk-4JPZ5GKU.js";import{b as ve}from"./chunk-GBSAZIIF.js";import{a as _e,b as Ce}from"./chunk-F6BLPIFZ.js";import"./chunk-SQPWYWAP.js";import"./chunk-TOQUJNDH.js";import{c as pe,d as me}from"./chunk-JK4JG2UW.js";import{a as Oe,b as Fe}from"./chunk-7ZFHYQCZ.js";import{b as xe}from"./chunk-ML3LU6MO.js";import{a as Se,d as ke,e as Ee,k as ye}from"./chunk-SRGIHKGJ.js";import"./chunk-KLDL5O4H.js";import"./chunk-PXEEYFPS.js";import"./chunk-4MNJFNZT.js";import"./chunk-7A4CRAMP.js";import"./chunk-3WTE2CKQ.js";import"./chunk-LA2FUI34.js";import"./chunk-ZNTL7BEM.js";import{a as we,b as Me}from"./chunk-QZOXHZZK.js";import"./chunk-MPVO6A2U.js";import"./chunk-D6YNXGTA.js";import"./chunk-ED7TFTUL.js";import"./chunk-MZ7FZGG3.js";import{a as Pe,b as Ie}from"./chunk-C4WQ325L.js";import"./chunk-HNZBC55R.js";import"./chunk-J62YMCRW.js";import"./chunk-J6B6CWYC.js";import"./chunk-IEQZB3PI.js";import"./chunk-ATSSA22C.js";import{a as fe,b as be}from"./chunk-BGHZ5NVU.js";import"./chunk-XYTTGGFW.js";import"./chunk-ZNT52ZF3.js";import{b as ue,d as ge}from"./chunk-Z7KSDRLV.js";import"./chunk-N4Q6Z3MW.js";import{b as he}from"./chunk-3BEM77IG.js";import"./chunk-RHLJ6NE2.js";import{a as ae,b as se}from"./chunk-R2ZYXRFE.js";import"./chunk-NRZ4QNP7.js";import"./chunk-GFZUU5ZD.js";import"./chunk-BODZH67C.js";import"./chunk-KR7F45VC.js";import{e as le,g as de}from"./chunk-XKXBFP6V.js";import{b as J}from"./chunk-ULM4QL4Q.js";import{ka as D,oa as V,sa as H}from"./chunk-3YZBLOIS.js";import{b as W,c as P,e as Q,f as Y,g as K,j as X,k as Z,m as ee,p as te,q as oe,w as ie,x as ne,y as re}from"./chunk-2I6ZAGC7.js";import{b as ce}from"./chunk-FVCMZ6IK.js";import"./chunk-VDYO34A5.js";import"./chunk-Y2QT2WK5.js";import"./chunk-S35HUXPS.js";import{m as $,n as q,u as j,y as G}from"./chunk-GZWLZB4Q.js";import{Gb as n,Hb as i,I as R,Ib as c,Mb as M,Mc as z,Rb as h,Sb as p,Va as s,_ as E,cc as a,dc as b,ec as S,fa as y,ga as w,gb as A,ic as L,jc as U,kc as B,lc as N,mb as f,mc as x,va as u,vb as l,wc as O,yb as T,yc as F}from"./chunk-MKA3N2SS.js";import{a as C,b as v}from"./chunk-GAL4ENT6.js";var Le=()=>({"margin-bottom":"2rem"}),Ue=()=>({width:"50vw"}),Be=()=>({"960px":"75vw","640px":"100vw"}),Ne=()=>[1,2,3,4,5],ze=()=>[5,10,20,50],$e=()=>["numeroCommande","service","categorieLibele","status"];function qe(r,e){r&1&&(n(0,"small",35),a(1," Le service est obligatoire "),i())}function je(r,e){if(r&1&&(n(0,"div",36)(1,"div",5)(2,"label",37),a(3,"D\xE9l\xE9gation"),i(),c(4,"p-dropdown",38),i()()),r&2){let t=p();s(4),l("options",t.delegations())("showClear",!0)}}function Ge(r,e){if(r&1&&(n(0,"div",36)(1,"div",5)(2,"label",39),a(3,"Agence"),i(),c(4,"p-dropdown",40),i()()),r&2){let t=p();s(4),l("options",t.agences())("showClear",!0)}}function He(r,e){if(r&1&&(n(0,"div",36)(1,"div",5)(2,"label",41),a(3,"Point de vente"),i(),c(4,"p-dropdown",42),i()()),r&2){let t=p();s(4),l("options",t.pointsVente())("showClear",!0)}}function Je(r,e){r&1&&(n(0,"small",35),a(1," La cat\xE9gorie est obligatoire "),i())}function We(r,e){r&1&&(n(0,"small",35),a(1," La quantit\xE9 est obligatoire et doit \xEAtre sup\xE9rieure \xE0 0 "),i())}function Qe(r,e){r&1&&(n(0,"div",1),c(1,"p-skeleton",44),i())}function Ye(r,e){r&1&&(n(0,"div",0),f(1,Qe,2,0,"div",43),i()),r&2&&(s(),l("ngForOf",x(1,Ne)))}function Ke(r,e){r&1&&(n(0,"tr")(1,"th",49),a(2," N\xB0 Commande "),c(3,"p-sortIcon",50),i(),n(4,"th",51),a(5," Date "),c(6,"p-sortIcon",52),i(),n(7,"th",53),a(8," Service "),c(9,"p-sortIcon",54),i(),n(10,"th"),a(11,"Cat\xE9gorie"),i(),n(12,"th"),a(13,"Organisation"),i(),n(14,"th",55),a(15," Statut "),c(16,"p-sortIcon",56),i(),n(17,"th",57),a(18,"Actions"),i()())}function Xe(r,e){if(r&1&&(n(0,"div"),c(1,"i",68),a(2),i()),r&2){let t=p().$implicit;s(2),S("",t.delegationLibele," ")}}function Ze(r,e){if(r&1&&(n(0,"div",69),c(1,"i",70),a(2),i()),r&2){let t=p().$implicit;s(2),S("",t.agenceLibele," ")}}function et(r,e){if(r&1&&(n(0,"div",71),c(1,"i",72),a(2),i()),r&2){let t=p().$implicit;s(2),S("",t.pointventeLibele," ")}}function tt(r,e){if(r&1){let t=M();n(0,"button",73),h("click",function(){y(t);let d=p().$implicit,m=p(2);return w(m.editStock(d))}),i()}}function ot(r,e){if(r&1){let t=M();n(0,"button",74),h("click",function(){y(t);let d=p().$implicit,m=p(2);return w(m.deleteStock(d))}),i()}}function it(r,e){if(r&1){let t=M();n(0,"tr")(1,"td")(2,"span",58),a(3),i()(),n(4,"td"),a(5),O(6,"date"),i(),n(7,"td"),a(8),i(),n(9,"td")(10,"span",59),a(11),i()(),n(12,"td")(13,"div",60),f(14,Xe,3,1,"div",33)(15,Ze,3,1,"div",61)(16,et,3,1,"div",62),i()(),n(17,"td"),c(18,"p-tag",63),i(),n(19,"td")(20,"div",64)(21,"button",65),h("click",function(){let d=y(t).$implicit,m=p(2);return w(m.viewStock(d))}),i(),f(22,tt,1,0,"button",66)(23,ot,1,0,"button",67),i()()()}if(r&2){let t=e.$implicit,o=p(2);s(3),b(t.numeroCommande),s(2),S(" ",F(6,11,t.dateCreation,"dd/MM/yyyy HH:mm")," "),s(3),b(t.service),s(3),S(" ",t.categorieLibele||"Non d\xE9finie"," "),s(3),l("ngIf",t.delegationLibele),s(),l("ngIf",t.agenceLibele),s(),l("ngIf",t.pointventeLibele),s(2),l("value",o.getStatusLabel(t.status))("severity",o.getStatusSeverity(t.status)),s(4),l("ngIf",t.status==="ENCOURS"),s(),l("ngIf",t.status==="ENCOURS")}}function nt(r,e){r&1&&(n(0,"tr")(1,"td",75),c(2,"i",76),n(3,"p",77),a(4,"Aucun bon de commande trouv\xE9"),i()()())}function rt(r,e){if(r&1&&(n(0,"p-table",45),f(1,Ke,19,0,"ng-template",46)(2,it,24,14,"ng-template",47)(3,nt,5,0,"ng-template",48),i()),r&2){let t=p();l("value",t.filteredStocks())("paginator",!0)("rows",t.pageSize())("totalRecords",t.totalRecords())("lazy",!1)("rowsPerPageOptions",x(8,ze))("showCurrentPageReport",!0)("globalFilterFields",x(9,$e))}}function at(r,e){if(r&1&&(n(0,"div",4)(1,"p",78),a(2,"Date de traitement"),i(),n(3,"p",58),a(4),O(5,"date"),i()()),r&2){let t=p(2);s(4),b(F(5,1,t.selectedStock().dateTraitement,"dd/MM/yyyy HH:mm"))}}function st(r,e){if(r&1&&(n(0,"div",1)(1,"p",78),a(2,"Observations"),i(),n(3,"p",58),a(4),i()()),r&2){let t=p(2);s(4),b(t.selectedStock().observations)}}function lt(r,e){if(r&1&&(n(0,"div",1)(1,"p",78),a(2,"Motif"),i(),n(3,"p",81),a(4),i()()),r&2){let t=p(2);s(4),b(t.selectedStock().motif)}}function dt(r,e){if(r&1&&(n(0,"div")(1,"div",0)(2,"div",4)(3,"p",78),a(4,"Num\xE9ro de commande"),i(),n(5,"p",58),a(6),i()(),n(7,"div",4)(8,"p",78),a(9,"Statut"),i(),c(10,"p-tag",63),i(),n(11,"div",4)(12,"p",78),a(13,"Service demandeur"),i(),n(14,"p",58),a(15),i()(),n(16,"div",4)(17,"p",78),a(18,"Cat\xE9gorie"),i(),n(19,"p",58),a(20),i()(),n(21,"div",4)(22,"p",78),a(23,"Date de cr\xE9ation"),i(),n(24,"p",58),a(25),O(26,"date"),i()(),f(27,at,6,4,"div",79),n(28,"div",1)(29,"p",78),a(30,"Description"),i(),n(31,"p",58),a(32),i()(),f(33,st,5,1,"div",80)(34,lt,5,1,"div",80),i()()),r&2){let t=p();s(6),b(t.selectedStock().numeroCommande),s(4),l("value",t.getStatusLabel(t.selectedStock().status))("severity",t.getStatusSeverity(t.selectedStock().status)),s(5),b(t.selectedStock().service),s(5),b(t.selectedStock().categorieLibele||"Non d\xE9finie"),s(5),b(F(26,10,t.selectedStock().dateCreation,"dd/MM/yyyy HH:mm")),s(2),l("ngIf",t.selectedStock().dateTraitement),s(5),b(t.selectedStock().detailBonCommande),s(),l("ngIf",t.selectedStock().observations),s(),l("ngIf",t.selectedStock().motif)}}function ct(r,e){if(r&1){let t=M();n(0,"button",82),h("click",function(){y(t);let d=p();return w(d.displayDialog.set(!1))}),i()}}var Ae=class r{fb=E(ie);userService=E(ce);messageService=E(V);confirmationService=E(D);state=u({loading:!1,submitting:!1,message:void 0,error:void 0});stocks=u([]);listCategorieStock=u([]);delegations=u([]);agences=u([]);pointsVente=u([]);currentUser=u(null);dynamicFields=u([]);displayDialog=u(!1);selectedStock=u(null);currentPage=u(0);pageSize=u(10);totalRecords=u(0);searchValue=u("");stockForm;dynamicForm;filteredStocks=z(()=>{let e=this.searchValue().toLowerCase(),t=this.stocks();return e?t.filter(o=>o.numeroCommande?.toLowerCase().includes(e)||o.service?.toLowerCase().includes(e)||o.detailBonCommande?.toLowerCase().includes(e)||o.categorieLibele?.toLowerCase().includes(e)):t});ngOnInit(){this.initializeForm(),this.loadInitialData(),this.getCurrentUser()}services=[{label:"Exploitation",value:"DE"},{label:"SIEGE",value:"SIEGE"}];initializeForm(){this.stockForm=this.fb.group({service:["",[P.required]],detailBonCommande:[""],delegationId:[null],agenceId:[{value:null,disabled:!0}],pointventeId:[{value:null,disabled:!0}],categorieId:[null,P.required],qte:[1,[P.required,P.min(1)]],observations:[""]}),this.dynamicForm=this.fb.group({}),this.stockForm.get("service")?.valueChanges.subscribe(e=>{e==="SIEGE"?(this.stockForm.get("delegationId")?.reset(),this.stockForm.get("agenceId")?.reset(),this.stockForm.get("pointventeId")?.reset()):e==="DE"&&(this.stockForm.get("delegationId")?.reset(),this.stockForm.get("agenceId")?.reset(),this.stockForm.get("pointventeId")?.reset())}),this.stockForm.get("delegationId")?.valueChanges.subscribe(e=>{e&&(this.loadAgences(e),this.stockForm.get("agenceId")?.enable(),this.stockForm.get("agenceId")?.reset(),this.stockForm.get("pointventeId")?.reset(),this.stockForm.get("pointventeId")?.disable())}),this.stockForm.get("agenceId")?.valueChanges.subscribe(e=>{e&&(this.loadPointsVente(e),this.stockForm.get("pointventeId")?.enable(),this.stockForm.get("pointventeId")?.reset())})}getUserId(e){if(!e)return null;let t=[e.user_id,e.userId,e.id,e.userUuid,e.uuid,e.USER_ID,e.ID];for(let o of t)if(o!=null&&o!=="")return o;return console.error("Aucun ID trouv\xE9 dans l'objet utilisateur:",e),null}getCurrentUser(){this.userService.getInstanceUser$().subscribe({next:e=>{console.log("User response:",e),e.data.user&&(this.currentUser.set(e.data.user),console.log("Current user set:",this.currentUser()),this.loadUserStocks())},error:e=>{console.error("Erreur lors de la r\xE9cup\xE9ration du profil:",e),this.showError("Impossible de r\xE9cup\xE9rer les informations utilisateur")}})}loadInitialData(){this.state.update(e=>v(C({},e),{loading:!0})),this.userService.getCategoriesStock$().subscribe({next:e=>{console.log("Categories response:",e);let t=e.data.listCategorieStock||e.data;t&&Array.isArray(t)?(this.listCategorieStock.set(t),console.log("Categories loaded:",this.listCategorieStock())):t&&!Array.isArray(t)?(console.log("Categories structure:",t),this.showError("Format de cat\xE9gories non reconnu")):(console.warn("Aucune cat\xE9gorie trouv\xE9e dans la r\xE9ponse"),this.listCategorieStock.set([]))},error:e=>{console.error("Erreur cat\xE9gories:",e),this.showError("Erreur lors du chargement des cat\xE9gories"),this.listCategorieStock.set([])}}),this.userService.getAllDelegation$().subscribe({next:e=>{console.log("Delegations response:",e);let t=e.data.delegations||e.data;t&&Array.isArray(t)?(this.delegations.set(t),console.log("Delegations loaded:",this.delegations())):(console.warn("Aucune d\xE9l\xE9gation trouv\xE9e dans la r\xE9ponse"),this.delegations.set([]))},error:e=>{console.error("Erreur d\xE9l\xE9gations:",e),this.showError("Erreur lors du chargement des d\xE9l\xE9gations"),this.delegations.set([])},complete:()=>{this.state.update(e=>v(C({},e),{loading:!1}))}})}loadAgences(e){this.userService.getAllAgenceByDelegationId$(e).subscribe({next:t=>{t?.data?.agences?(this.agences.set(t.data.agences),console.log(`\u2705 ${t.data.agences.length} agences loaded for delegation ${e}`)):(console.warn("Aucune agence trouv\xE9e"),this.agences.set([]))},error:t=>{this.showError("Erreur lors du chargement des agences"),this.agences.set([])}})}loadPointsVente(e){this.userService.getAllPointventesByAgenceId$(e).subscribe({next:t=>{t?.data?.pointVentes?(this.pointsVente.set(t.data.pointVentes),console.log(`\u2705 ${t.data.pointVentes.length} points de vente loaded for agence ${e}`)):(console.warn("Aucun point de vente trouv\xE9"),this.pointsVente.set([]))},error:t=>{this.showError("Erreur lors du chargement des points de vente"),this.pointsVente.set([])}})}loadUserStocks(){let e=this.currentUser();if(console.log("Loading stocks for user:",e),!e){console.warn("Aucun utilisateur trouv\xE9, impossible de charger les stocks");return}let t=this.getUserId(e);if(!t){this.showError("Impossible de r\xE9cup\xE9rer l'ID utilisateur");return}console.log("Using userId:",t),this.state.update(o=>v(C({},o),{loading:!0})),this.userService.getStockByUser$(Number(t)).subscribe({next:o=>{console.log("Stocks response:",o),o.data.stocks?(this.stocks.set(o.data.stocks),this.totalRecords.set(o.data.stocks.length),this.showInfo(`${o.data.stocks.length} bon(s) de commande charg\xE9(s)`)):(this.stocks.set([]),this.totalRecords.set(0))},error:o=>{console.error("Erreur lors du chargement des stocks:",o),this.showError("Erreur lors du chargement des stocks"),this.stocks.set([]),this.totalRecords.set(0)},complete:()=>{this.state.update(o=>v(C({},o),{loading:!1}))}})}onSubmit(){if(this.stockForm.invalid){this.markFormGroupTouched(this.stockForm),this.showError("Veuillez remplir tous les champs obligatoires");return}if(this.dynamicForm.invalid){this.markFormGroupTouched(this.dynamicForm),this.showError("Veuillez remplir tous les champs dynamiques obligatoires");return}let e=this.currentUser();if(!e){this.showError("Utilisateur non connect\xE9");return}let t=this.getUserId(e);if(!t){this.showError("Impossible de r\xE9cup\xE9rer l'ID utilisateur");return}this.state.update(g=>v(C({},g),{submitting:!0}));let o=this.stockForm.value,d=this.dynamicForm.value,m=C({detailStandard:o.detailBonCommande},d),k={idUser:Number(t),service:o.service,detailBonCommande:JSON.stringify(m),delegationId:o.delegationId,agenceId:o.agenceId,pointventeId:o.pointventeId,categorieId:o.categorieId,qte:o.qte,observations:o.observations};console.log("Submitting stock DTO:",k),this.userService.createStock$(k).pipe(R(()=>this.state.update(g=>v(C({},g),{submitting:!1})))).subscribe({next:g=>{console.log("Create stock response:",g),g.data.stock&&(this.stocks.update(_=>[g.data.stock,..._]),this.totalRecords.update(_=>_+1),this.resetForm(),this.showSuccess("Bon de commande cr\xE9\xE9 avec succ\xE8s"))},error:g=>{console.error("Erreur cr\xE9ation stock:",g),this.showError(g||"Erreur lors de la cr\xE9ation du bon de commande")}})}resetForm(){this.stockForm.reset(),this.dynamicForm.reset(),this.dynamicFields.set([]),this.stockForm.get("agenceId")?.disable(),this.stockForm.get("pointventeId")?.disable()}viewStock(e){this.selectedStock.set(e),this.displayDialog.set(!0)}editStock(e){console.log("\xC9diter le stock:",e)}deleteStock(e){this.confirmationService.confirm({message:`\xCAtes-vous s\xFBr de vouloir supprimer le bon de commande ${e.numeroCommande}?`,header:"Confirmation de suppression",icon:"pi pi-exclamation-triangle",acceptLabel:"Oui",rejectLabel:"Non",accept:()=>{this.showSuccess("Bon de commande supprim\xE9 avec succ\xE8s")}})}approveStock(e){let t=this.currentUser();if(!t){this.showError("Utilisateur non connect\xE9");return}let o=this.getUserId(t);if(!o){this.showError("Impossible de r\xE9cup\xE9rer l'ID utilisateur");return}this.confirmationService.confirm({message:`Approuver le bon de commande ${e.numeroCommande}?`,header:"Confirmation d'approbation",icon:"pi pi-check",acceptLabel:"Approuver",rejectLabel:"Annuler",accept:()=>{this.userService.approveStock$(e.idCmd,Number(o),"Approuv\xE9").subscribe({next:d=>{this.showSuccess("Bon de commande approuv\xE9"),this.loadUserStocks()},error:d=>{this.showError("Erreur lors de l'approbation")}})}})}rejectStock(e){let t=this.currentUser();if(!t){this.showError("Utilisateur non connect\xE9");return}let o=this.getUserId(t);if(!o){this.showError("Impossible de r\xE9cup\xE9rer l'ID utilisateur");return}let d=prompt("Motif du rejet:");d&&this.userService.rejectStock$(e.idCmd,Number(o),d).subscribe({next:m=>{this.showSuccess("Bon de commande rejet\xE9"),this.loadUserStocks()},error:m=>{this.showError("Erreur lors du rejet")}})}getStatusSeverity(e){switch(e){case"ACCEPT":return"success";case"REJET":return"danger";case"ENCOURS":return"warn";default:return"info"}}getStatusLabel(e){switch(e){case"ACCEPT":return"Accept\xE9";case"REJET":return"Rejet\xE9";case"ENCOURS":return"En cours";default:return e}}onPageChange(e){this.currentPage.set(e.page),this.pageSize.set(e.rows),this.loadUserStocks()}onSearch(e){this.searchValue.set(e.target.value)}exportToExcel(){console.log("Export Excel")}markFormGroupTouched(e){Object.keys(e.controls).forEach(t=>{let o=e.get(t);o?.markAsTouched(),o instanceof K&&this.markFormGroupTouched(o)})}showSuccess(e){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:e,life:3e3})}showError(e){this.messageService.add({severity:"error",summary:"Erreur",detail:e,life:5e3})}showInfo(e){this.messageService.add({severity:"info",summary:"Information",detail:e,life:3e3})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=A({type:r,selectors:[["app-stock-cmd"]],features:[N([V,D])],decls:62,vars:26,consts:[[1,"grid"],[1,"col-12"],["header","Nouveau Bon de Commande"],[3,"ngSubmit","formGroup"],[1,"col-12","md:col-6"],[1,"field"],["for","service",1,"block","mb-2"],[1,"text-red-500"],["id","service","formControlName","service","optionLabel","label","optionValue","value","placeholder","S\xE9lectionner un service","styleClass","w-full",3,"options","showClear"],["class","p-error",4,"ngIf"],["class","col-12 md:col-4",4,"ngIf"],["for","categorie",1,"block","mb-2"],["id","categorie","formControlName","categorieId","optionLabel","libele","optionValue","id","placeholder","S\xE9lectionner une cat\xE9gorie","styleClass","w-full",3,"options","showClear"],["for","detail",1,"block","mb-2"],["pTextarea","","id","detail","formControlName","detailBonCommande","rows","3","placeholder","Description d\xE9taill\xE9e de la demande...",1,"w-full"],["for","qte",1,"block","mb-2"],["pInputText","","id","qte","type","number","formControlName","qte","placeholder","Entrer la quantit\xE9","min","1",1,"w-full"],["for","observations",1,"block","mb-2"],["pTextarea","","id","observations","formControlName","observations","rows","2","placeholder","Observations ou remarques additionnelles...",1,"w-full"],[1,"flex","justify-content-end","gap-2"],["pButton","","type","button","label","R\xE9initialiser","icon","pi pi-refresh",1,"p-button-secondary",3,"click"],["pButton","","type","submit","label","Cr\xE9er le bon de commande","icon","pi pi-save",3,"loading","disabled"],["header","Mes Bons de Commande"],[1,"flex","justify-content-between","align-items-center","mb-3"],[1,"flex","gap-2"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Rechercher...",1,"w-20rem",3,"input"],["pButton","","icon","pi pi-refresh","pTooltip","Actualiser","tooltipPosition","top",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","icon","pi pi-file-excel","pTooltip","Exporter Excel","tooltipPosition","top",1,"p-button-rounded","p-button-success","p-button-text",3,"click"],["class","grid",4,"ngIf"],["currentPageReportTemplate","Affichage de {first} \xE0 {last} sur {totalRecords} entr\xE9es","responsiveLayout","scroll","styleClass","p-datatable-striped",3,"value","paginator","rows","totalRecords","lazy","rowsPerPageOptions","showCurrentPageReport","globalFilterFields",4,"ngIf"],["header","D\xE9tails du Bon de Commande",3,"visibleChange","visible","modal","breakpoints"],[4,"ngIf"],["pTemplate","footer"],[1,"p-error"],[1,"col-12","md:col-4"],["for","delegation",1,"block","mb-2"],["id","delegation","formControlName","delegationId","optionLabel","libele","optionValue","id","placeholder","S\xE9lectionner une d\xE9l\xE9gation","styleClass","w-full",3,"options","showClear"],["for","agence",1,"block","mb-2"],["id","agence","formControlName","agenceId","optionLabel","libele","optionValue","id","placeholder","S\xE9lectionner une agence","styleClass","w-full",3,"options","showClear"],["for","pointvente",1,"block","mb-2"],["id","pointvente","formControlName","pointventeId","optionLabel","libele","optionValue","id","placeholder","S\xE9lectionner un point de vente","styleClass","w-full",3,"options","showClear"],["class","col-12",4,"ngFor","ngForOf"],["height","3rem","styleClass","mb-2"],["currentPageReportTemplate","Affichage de {first} \xE0 {last} sur {totalRecords} entr\xE9es","responsiveLayout","scroll","styleClass","p-datatable-striped",3,"value","paginator","rows","totalRecords","lazy","rowsPerPageOptions","showCurrentPageReport","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","numeroCommande"],["field","numeroCommande"],["pSortableColumn","dateCreation"],["field","dateCreation"],["pSortableColumn","service"],["field","service"],["pSortableColumn","status"],["field","status"],[2,"width","10rem"],[1,"font-bold"],[1,"badge","badge-info"],[1,"text-sm"],["class","text-500",4,"ngIf"],["class","text-400",4,"ngIf"],[3,"value","severity"],[1,"flex","gap-1"],["pButton","","icon","pi pi-eye","pTooltip","Voir d\xE9tails","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",3,"click"],["pButton","","icon","pi pi-pencil","class","p-button-rounded p-button-text p-button-warning p-button-sm","pTooltip","Modifier","tooltipPosition","top",3,"click",4,"ngIf"],["pButton","","icon","pi pi-trash","class","p-button-rounded p-button-text p-button-danger p-button-sm","pTooltip","Supprimer","tooltipPosition","top",3,"click",4,"ngIf"],[1,"pi","pi-building","mr-1"],[1,"text-500"],[1,"pi","pi-home","mr-1"],[1,"text-400"],[1,"pi","pi-map-marker","mr-1"],["pButton","","icon","pi pi-pencil","pTooltip","Modifier","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-warning","p-button-sm",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Supprimer","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-danger","p-button-sm",3,"click"],["colspan","7",1,"text-center","p-4"],[1,"pi","pi-inbox","text-4xl","text-300"],[1,"mt-3","text-600"],[1,"text-500","mb-1"],["class","col-12 md:col-6",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"font-bold","text-red-500"],["pButton","","label","Fermer","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"div",1),c(2,"p-toast")(3,"p-confirmDialog"),n(4,"p-card",2)(5,"form",3),h("ngSubmit",function(){return o.onSubmit()}),n(6,"div",0)(7,"div",4)(8,"div",5)(9,"label",6),a(10," Service "),n(11,"span",7),a(12,"*"),i()(),c(13,"p-dropdown",8),f(14,qe,2,0,"small",9),i()(),f(15,je,5,2,"div",10)(16,Ge,5,2,"div",10)(17,He,5,2,"div",10),n(18,"div",4)(19,"div",5)(20,"label",11),a(21," Cat\xE9gorie "),n(22,"span",7),a(23,"*"),i()(),c(24,"p-dropdown",12),f(25,Je,2,0,"small",9),i()(),n(26,"div",1)(27,"div",5)(28,"label",13),a(29,"Description g\xE9n\xE9rale"),i(),c(30,"textarea",14),i()(),n(31,"div",4)(32,"div",5)(33,"label",15),a(34," Quantit\xE9 "),n(35,"span",7),a(36,"*"),i()(),c(37,"input",16),f(38,We,2,0,"small",9),i()(),n(39,"div",1)(40,"div",5)(41,"label",17),a(42,"Observations"),i(),c(43,"textarea",18),i()(),n(44,"div",1)(45,"div",19)(46,"button",20),h("click",function(){return o.resetForm()}),i(),c(47,"button",21),i()()()()(),n(48,"p-card",22)(49,"div",23)(50,"div",24)(51,"span",25),c(52,"i",26),n(53,"input",27),h("input",function(m){return o.onSearch(m)}),i()()(),n(54,"div",24)(55,"button",28),h("click",function(){return o.loadUserStocks()}),i(),n(56,"button",29),h("click",function(){return o.exportToExcel()}),i()()(),f(57,Ye,2,2,"div",30)(58,rt,4,10,"p-table",31),i(),n(59,"p-dialog",32),B("visibleChange",function(m){return U(o.displayDialog,m)||(o.displayDialog=m),m}),f(60,dt,35,13,"div",33)(61,ct,1,0,"ng-template",34),i()()()),t&2){let d,m,k,g,_,I;s(4),T(x(23,Le)),s(),l("formGroup",o.stockForm),s(8),l("options",o.services)("showClear",!0),s(),l("ngIf",((d=o.stockForm.get("service"))==null?null:d.invalid)&&((d=o.stockForm.get("service"))==null?null:d.touched)),s(),l("ngIf",((m=o.stockForm.get("service"))==null?null:m.value)==="DE"),s(),l("ngIf",((k=o.stockForm.get("service"))==null?null:k.value)==="DE"),s(),l("ngIf",((g=o.stockForm.get("service"))==null?null:g.value)==="DE"),s(7),l("options",o.listCategorieStock())("showClear",!0),s(),l("ngIf",((_=o.stockForm.get("categorieId"))==null?null:_.invalid)&&((_=o.stockForm.get("categorieId"))==null?null:_.touched)),s(13),l("ngIf",((I=o.stockForm.get("qte"))==null?null:I.invalid)&&((I=o.stockForm.get("qte"))==null?null:I.touched)),s(9),l("loading",o.state().submitting)("disabled",o.stockForm.invalid),s(10),l("ngIf",o.state().loading),s(),l("ngIf",!o.state().loading),s(),T(x(24,Ue)),L("visible",o.displayDialog),l("modal",!0)("breakpoints",x(25,Be)),s(),l("ngIf",o.selectedStock())}},dependencies:[G,$,q,j,de,le,H,J,ve,ye,Se,ke,Ee,ue,ge,Me,we,Ie,Pe,se,ae,Re,Ve,be,fe,ne,X,W,Z,Q,Y,oe,re,ee,te,Ce,_e,me,pe,De,Te,xe,he,Fe,Oe],styles:["[_nghost-%COMP%]     .p-card{border-radius:12px;box-shadow:0 2px 4px #0000000d}[_nghost-%COMP%]     .p-card .p-card-header{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0;padding:1.25rem;font-weight:600;font-size:1.1rem}[_nghost-%COMP%]     .p-card .p-card-body{padding:1.5rem}[_nghost-%COMP%]     .field{margin-bottom:1.5rem}[_nghost-%COMP%]     .field label{font-weight:500;color:#495057;font-size:.95rem}[_nghost-%COMP%]     .field label .text-red-500{color:#ef4444;margin-left:2px}[_nghost-%COMP%]     .field .p-inputtext, [_nghost-%COMP%]     .field .p-inputtextarea, [_nghost-%COMP%]     .field .p-dropdown{border-radius:8px;transition:all .3s ease}[_nghost-%COMP%]     .field .p-inputtext:hover:not(:disabled), [_nghost-%COMP%]     .field .p-inputtextarea:hover:not(:disabled), [_nghost-%COMP%]     .field .p-dropdown:hover:not(:disabled){border-color:#667eea}[_nghost-%COMP%]     .field .p-inputtext:focus, [_nghost-%COMP%]     .field .p-inputtextarea:focus, [_nghost-%COMP%]     .field .p-dropdown:focus{box-shadow:0 0 0 3px #667eea1a;border-color:#667eea}[_nghost-%COMP%]     .field .p-inputtext.ng-invalid.ng-touched, [_nghost-%COMP%]     .field .p-inputtextarea.ng-invalid.ng-touched, [_nghost-%COMP%]     .field .p-dropdown.ng-invalid.ng-touched{border-color:#ef4444}[_nghost-%COMP%]     .field .p-error{color:#ef4444;font-size:.875rem;margin-top:.25rem;display:block}[_nghost-%COMP%]     .p-button{border-radius:8px;font-weight:500;transition:all .3s ease}[_nghost-%COMP%]     .p-button.p-button-rounded{border-radius:50%}[_nghost-%COMP%]     .p-button:not(.p-button-text):not(.p-button-outlined){box-shadow:0 2px 4px #0000001a}[_nghost-%COMP%]     .p-button:not(.p-button-text):not(.p-button-outlined):hover{transform:translateY(-1px);box-shadow:0 4px 8px #00000026}[_nghost-%COMP%]     .p-datatable .p-datatable-header{background:transparent;border:none;padding:0 0 1rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background:#f8f9fa;color:#495057;font-weight:600;border:none;padding:1rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th:first-child{border-radius:8px 0 0 8px}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th:last-child{border-radius:0 8px 8px 0}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr{transition:all .3s ease}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:1rem;border:none;border-bottom:1px solid #e9ecef;vertical-align:middle}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr:hover{background:#f8f9fa;transform:scale(1.01);box-shadow:0 2px 8px #0000000d}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}[_nghost-%COMP%]     .p-datatable .p-datatable-emptymessage>td{padding:3rem;text-align:center;color:#6c757d}[_nghost-%COMP%]     .p-tag{border-radius:12px;padding:.25rem .75rem;font-weight:600;font-size:.875rem}[_nghost-%COMP%]     .p-tag.p-tag-success{background:#10b981;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-warning{background:#f59e0b;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-danger{background:#ef4444;color:#fff}[_nghost-%COMP%]     .p-tag.p-tag-info{background:#3b82f6;color:#fff}[_nghost-%COMP%]     .badge{display:inline-block;padding:.25rem .5rem;border-radius:6px;font-size:.875rem;font-weight:500}[_nghost-%COMP%]     .badge.badge-info{background:#e0e7ff;color:#4338ca}[_nghost-%COMP%]     .p-divider{margin:2rem 0}[_nghost-%COMP%]     .p-divider:before{border-color:#e5e7eb}[_nghost-%COMP%]     .p-divider .p-divider-content{background:#fff;color:#6b7280;font-size:.95rem}[_nghost-%COMP%]     .p-dialog{border-radius:12px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}[_nghost-%COMP%]     .p-dialog .p-dialog-header{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:12px 12px 0 0;padding:1.5rem}[_nghost-%COMP%]     .p-dialog .p-dialog-header .p-dialog-title{font-weight:600;font-size:1.25rem}[_nghost-%COMP%]     .p-dialog .p-dialog-header .p-dialog-header-icon{color:#fff}[_nghost-%COMP%]     .p-dialog .p-dialog-header .p-dialog-header-icon:hover{background:#ffffff1a}[_nghost-%COMP%]     .p-dialog .p-dialog-content{padding:2rem}[_nghost-%COMP%]     .p-dialog .p-dialog-footer{padding:1rem 1.5rem;background:#f8f9fa;border-radius:0 0 12px 12px}[_nghost-%COMP%]     .p-toast .p-toast-message{border-radius:8px;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-success{background:#10b981;border:none;color:#fff}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-success .p-toast-icon-close{color:#fff}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-error{background:#ef4444;border:none;color:#fff}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-error .p-toast-icon-close{color:#fff}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-info{background:#3b82f6;border:none;color:#fff}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-info .p-toast-icon-close{color:#fff}[_nghost-%COMP%]     .p-skeleton{border-radius:8px}[_nghost-%COMP%]     .p-confirm-dialog .p-dialog-header{background:#fff;color:#495057}[_nghost-%COMP%]     .p-confirm-dialog .p-confirm-dialog-icon{color:#f59e0b}[_nghost-%COMP%]     .p-dropdown-panel{border-radius:8px;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-items .p-dropdown-item{transition:all .2s ease}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-items .p-dropdown-item:hover{background:#f3f4f6}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background:#667eea;color:#fff}@media screen and (max-width: 768px){[_nghost-%COMP%]     .p-card .p-card-header{padding:1rem;font-size:1rem}[_nghost-%COMP%]     .p-card .p-card-body{padding:1rem}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{padding:.75rem .5rem;font-size:.8rem}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{padding:.75rem .5rem;font-size:.9rem}[_nghost-%COMP%]     .p-button:not(.p-button-rounded){padding:.5rem 1rem;font-size:.9rem}}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.gap-1[_ngcontent-%COMP%]{gap:.25rem}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-3[_ngcontent-%COMP%]{gap:1rem}.organization-info[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.organization-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{line-height:1.4}.status-indicator[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:.5rem}.status-indicator.status-encours[_ngcontent-%COMP%]{background:#f59e0b;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-indicator.status-accept[_ngcontent-%COMP%]{background:#10b981}.status-indicator.status-rejet[_ngcontent-%COMP%]{background:#ef4444}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@media print{[_nghost-%COMP%]     .p-button, [_nghost-%COMP%]     .p-paginator, [_nghost-%COMP%]     .p-input-icon-left, [_nghost-%COMP%]     .p-dialog-header-icon{display:none!important}[_nghost-%COMP%]     .p-card{box-shadow:none;border:1px solid #dee2e6}[_nghost-%COMP%]     .p-datatable{font-size:12px}[_nghost-%COMP%]     .p-datatable .p-datatable-thead>tr>th{background:#fff;color:#000;border:1px solid #dee2e6}[_nghost-%COMP%]     .p-datatable .p-datatable-tbody>tr>td{border:1px solid #dee2e6}}"]})};export{Ae as StockCmdComponent};
