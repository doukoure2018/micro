import{a as b}from"./chunk-VDYO34A5.js";import{a as E,b as h,e as f}from"./chunk-Y2QT2WK5.js";import{A as s,Q as r,U as c,X as g,Z as u,_ as I,l as d,o as R}from"./chunk-MKA3N2SS.js";import{a as $,b as m}from"./chunk-GAL4ENT6.js";var C=new g("CLIENT_STORAGE",{factory:()=>localStorage}),v=class a{constructor(e){this.storage=e}get=e=>{try{let t=this.storage.getItem(e);if(t===null)return null;try{return JSON.parse(t)}catch{return t}}catch(t){return console.error("Erreur lors de la lecture du storage:",t),null}};set=(e,t)=>{try{let n=typeof t=="string"?t:JSON.stringify(t);this.storage.setItem(e,n)}catch(n){console.error("Erreur lors de l'\xE9criture dans le storage:",n)}};remove=e=>this.storage.removeItem(e);getRedirectUrl=()=>this.get("[KEY] REDIRECT_URL")||"";setRedirectUrl=e=>this.set("[KEY] REDIRECT_URL",e);removeRedirectUrl=()=>this.remove("[KEY] REDIRECT_URL");static \u0275fac=function(t){return new(t||a)(u(C))};static \u0275prov=c({token:a,factory:a.\u0275fac})};var k=new g("JWT_OPTIONS"),y=(()=>{class a{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:{n+="==";break}case 3:{n+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(n)}b64decode(t){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";if(t=String(t).replace(/=+$/,""),t.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let o=0,l,p,S=0;p=t.charAt(S++);~p&&(l=o%4?l*64+p:p,o++%4)?i+=String.fromCharCode(255&l>>(-2*o&6)):0)p=n.indexOf(p);return i}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){return t instanceof Promise?t.then(n=>this._decodeToken(n)):this._decodeToken(t)}_decodeToken(t){if(!t||t==="")return null;let n=t.split(".");if(n.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let i=this.urlBase64Decode(n[1]);if(!i)throw new Error("Cannot decode the token.");return JSON.parse(i)}getTokenExpirationDate(t=this.tokenGetter()){return t instanceof Promise?t.then(n=>this._getTokenExpirationDate(n)):this._getTokenExpirationDate(t)}_getTokenExpirationDate(t){let n;if(n=this.decodeToken(t),!n||!n.hasOwnProperty("exp"))return null;let i=new Date(0);return i.setUTCSeconds(n.exp),i}isTokenExpired(t=this.tokenGetter(),n){return t instanceof Promise?t.then(i=>this._isTokenExpired(i,n)):this._isTokenExpired(t,n)}_isTokenExpired(t,n){if(!t||t==="")return!0;let i=this.getTokenExpirationDate(t);return n=n||0,i===null?!1:!(i.valueOf()>new Date().valueOf()+n*1e3)}getAuthScheme(t,n){return typeof t=="function"?t(n):t}}return a.\u0275fac=function(t){return new(t||a)(u(k))},a.\u0275prov=c({token:a,factory:a.\u0275fac}),a})();var D=class a{server=b.apiBaseUrl;authorizationServer=b.authServer;jwt=new y;storage=I(v);http=I(f);constructor(){}login(e){return this.http.post(`${b.authServer}/api/login`,e,{headers:new E({"Content-Type":"application/json"}),withCredentials:!0})}register$=e=>this.http.post(`${this.server}/user/register`,e).pipe(r(console.log),s(this.handleError));verifyAccountToken$=e=>this.http.get(`${this.server}/user/verify/account?token=${e}`).pipe(r(console.log),s(this.handleError));resetPassword$=e=>this.http.post(`${this.server}/user/resetpassword`,e).pipe(r(console.log),s(this.handleError));verifyPasswordToken$=e=>this.http.get(`${this.server}/user/verify/password?token=${e}`).pipe(r(console.log),s(this.handleError));createNewPassword$=e=>this.http.post(`${this.server}/user/resetpassword/reset`,e).pipe(r(console.log),s(this.handleError));validateCode$=e=>this.http.post(`${this.authorizationServer}/oauth2/token`,e).pipe(r(console.log),s(this.handleError));getInstanceUser$=()=>this.http.get(`${this.server}/user/instanceUser`).pipe(r(console.log),s(this.handleError));profile$=()=>this.http.get(`${this.server}/user/profile`).pipe(r(console.log),s(this.handleError));getAllCreditos$=e=>this.http.get(`${this.server}/ecredit/seachCreditos/${e}`).pipe(r(console.log),s(this.handleError));getAllPlanPagosByCreditos$=e=>this.http.get(`${this.server}/ecredit/getPlanPagos/${e}`).pipe(r(console.log),s(this.handleError));addPromoteur$=e=>this.http.post(`${this.server}/ecredit/addPromoteur`,e).pipe(r(console.log),s(this.handleError));addEntreprise$=e=>this.http.post(`${this.server}/ecredit/addEntreprise`,e).pipe(r(console.log),s(this.handleError));addBillanPersonnel$=e=>this.http.post(`${this.server}/ecredit/addBillanPersonnel`,e).pipe(r(console.log),s(this.handleError));addBilanEntreprise$=e=>this.http.post(`${this.server}/ecredit/addBillanEntreprise`,e).pipe(r(console.log),s(this.handleError));addResultatBrutActuel$=e=>this.http.post(`${this.server}/ecredit/addResultatBrutActuel`,e).pipe(r(console.log),s(this.handleError));addResultatBrutPrevisionnel$=e=>this.http.post(`${this.server}/ecredit/addResultatBrutPrevisionnel`,e).pipe(r(console.log),s(this.handleError));updateChargesActuelles$=e=>this.http.put(`${this.server}/ecredit/updateChargesActuelles`,e).pipe(r(console.log),s(this.handleError));updateChargesPrevisionnelles$=e=>this.http.put(`${this.server}/ecredit/updateChargesPrevisionnelles`,e).pipe(r(console.log),s(this.handleError));addDemandeCredit$=e=>this.http.post(`${this.server}/ecredit/addDemandeCredit`,e).pipe(r(console.log),s(this.handleError));submitCompleteDemande$=e=>this.http.post(`${this.server}/ecredit/submitCompleteDemande`,e).pipe(r(console.log),s(this.handleError));listUser$=()=>this.http.get(`${this.server}/user/list`).pipe(r(console.log),s(this.handleError));listRoles$=()=>this.http.get(`${this.server}/user/roles`).pipe(r(console.log),s(this.handleError));createAccount$=e=>this.http.post(`${this.server}/user/createAccount`,e).pipe(r(console.log),s(this.handleError));searchClientes$=e=>this.http.get(`${this.server}/ecredit/search?query=${e}`).pipe(r(console.log),s(this.handleError));getTypeCreditos$=()=>this.http.get(`${this.server}/ebanking/typeCredit`).pipe(r(console.log),s(this.handleError));getAllAgencesByDelegationId$=e=>this.http.get(`${this.server}/ebanking/agences/${e}`).pipe(r(console.log),s(this.handleError));getAllPointVenteByAgenceId$=e=>this.http.get(`${this.server}/ecredit/listPointVenteByAgence/${e}`).pipe(r(console.log),s(this.handleError));getAllDemandeAttente$=()=>this.http.get(`${this.server}/ecredit/attente`).pipe(r(console.log),s(this.handleError));updateDemandeIndividuel$=(e,t,n)=>this.http.patch(`${this.server}/ecredit/update/${e}/${t}/${n}`,{}).pipe(r(console.log),s(this.handleError));getDetailDemandeIndividuel$=e=>this.http.get(`${this.server}/ecredit/detail/${e}`).pipe(r(console.log),s(this.handleError));getListUsuariosByCodAgencia$=(e,t,n)=>this.http.get(`${this.server}/ecredit/getListUsuariosByCodAgencia/${e}/${t}/${n}`).pipe(r(console.log),s(this.handleError));getInformationAgence$=e=>this.http.get(`${this.server}/ebanking/agence/${e}`).pipe(r(console.log),s(this.handleError));getAllDemandeCreditByDate$=()=>this.http.get(`${this.server}/ecredit/selection`).pipe(r(console.log),s(this.handleError));addDocuments$=(e,t)=>this.http.post(`${this.server}/ecredit/image/${e}`,t).pipe(r(console.log),s(this.handleError));getAllDocuments$=e=>this.http.get(`${this.server}/ecredit/images/${e}`).pipe(r(console.log),s(this.handleError));deleteDocument$=(e,t)=>this.http.delete(`${this.server}/ecredit/${e}/${t}/delecteDocument`).pipe(r(console.log),s(this.handleError));existNumeroMembre$=e=>this.http.get(`${this.server}/ecredit/existNumeroMembre/${e}`).pipe(r(console.log),s(this.handleError));addFicherSignaletique$=(e,t)=>this.http.post(`${this.server}/ecredit/addIndividuel/${t}`,e).pipe(r(console.log),s(this.handleError));getLastDemandeInd$=e=>this.http.get(`${this.server}/ecredit/lastDemandeInd/${e}`).pipe(r(console.log),s(this.handleError));startCredit$=e=>this.http.post(`${this.server}/ecredit/startCredit/${e}`,{}).pipe(r(console.log),s(this.handleError));getInstanceCredit$=e=>this.http.get(`${this.server}/ecredit/credit/${e}`).pipe(r(console.log),s(this.handleError));processCreditInd$=(e,t,n)=>this.http.post(`${this.server}/ecredit/process-credit/${e}}/${n}`,t).pipe(r(console.log),s(this.handleError));getListCreditEnAttente$=()=>this.http.get(`${this.server}/ecredit/listCredit`).pipe(r(console.log),s(this.handleError));viewInstanceCredit$=(e,t,n)=>this.http.get(`${this.server}/ecredit/viewCredit/${e}/${t}/${n}`).pipe(r(console.log),s(this.handleError));addNoteProfile$=(e,t)=>this.http.post(`${this.server}/ecredit/addNoteProfile/${e}`,t).pipe(r(console.log),s(this.handleError));addNoteAnalyse$=(e,t)=>this.http.post(`${this.server}/ecredit/addNoteAnalyse/${e}`,t).pipe(r(console.log),s(this.handleError));addNoteGarantie$=(e,t)=>this.http.post(`${this.server}/ecredit/addNoteGarantie/${e}`,t).pipe(r(console.log),s(this.handleError));calculateNotesAndUpdateCredit(e,t){return this.http.post(`${this.server}/ecredit/calculate/${e}`,t).pipe(s(this.handleError))}detailCreditInd$=(e,t)=>this.http.get(`${this.server}/ecredit/viewDetailCredit/${e}/${t}`).pipe(r(console.log),s(this.handleError));startMiseEnPlaceCredit$=(e,t,n)=>this.http.get(`${this.server}/ecredit/startInsertingCredit/${e}/${t}/${n}`).pipe(r(console.log),s(this.handleError));miseEnPlaceCredit$=(e,t)=>this.http.post(`${this.server}/ecredit/processInsertingCredit/${e}`,t).pipe(r(console.log),s(this.handleError));updateInfoCredit$=e=>this.http.patch(`${this.server}/ecredit/updateStateCredit/${e}`,{}).pipe(r(console.log),s(this.handleError));addDelegation$=e=>this.http.post(`${this.server}/user/addDelegation`,e).pipe(r(console.log),s(this.handleError));getDelegationById$=e=>this.http.get(`${this.server}/user/delegation/${e}`).pipe(r(console.log),s(this.handleError));getAllDelegation$=()=>this.http.get(`${this.server}/user/getAllDelegations`).pipe(r(console.log),s(this.handleError));addAgence$=e=>this.http.post(`${this.server}/user/addAgence`,e).pipe(r(console.log),s(this.handleError));getAllAgenceByDelegationId$=e=>this.http.get(`${this.server}/user/getAllAgences/${e}`).pipe(r(console.log),s(this.handleError));getAgenceById$=e=>this.http.get(`${this.server}/user/agence/${e}`).pipe(r(console.log),s(this.handleError));addPointeVente$=e=>this.http.post(`${this.server}/user/addPointVente`,e).pipe(r(console.log),s(this.handleError));getAllPointventesByAgenceId$=e=>this.http.get(`${this.server}/user/getAllPointVentes/${e}`).pipe(r(console.log),s(this.handleError));getPointVenteById$=e=>this.http.get(`${this.server}/user/pointvente/${e}`).pipe(r(console.log),s(this.handleError));getUserSaf$=e=>this.http.get(`${this.server}/user/getUserSaf/${e}`).pipe(r(console.log),s(this.handleError));listAnalyseCreditsEncours$=(e,t)=>{let n=`${this.server}/ecredit/getAllCreditOngoing/${e}`;return t&&!isNaN(t)&&t>0&&(n+=`?userId=${t}`),this.http.get(n).pipe(r(i=>console.log("R\xE9ponse analyse cr\xE9dits:",i)),s(this.handleError))};obtenirResumeCredit$=e=>this.http.get(`${this.server}/ecredit/resumeCredit/${e}`).pipe(r(console.log),s(this.handleError));getSyntheseAnalyseFinanciere$=e=>this.http.get(`${this.server}/ecredit/bilan_finance/synthese/demande/${e}`).pipe(r(console.log),s(this.handleError));startNewDemandeInd$=()=>this.http.get(`${this.server}/ecredit/newDemandeInd`).pipe(r(console.log),s(this.handleError));getInfoAdministrative$=(e,t,n)=>this.http.get(`${this.server}/ecredit/info/${e}/${t}/${n}`).pipe(r(console.log),s(this.handleError));getCreditDataDetailed$=e=>this.http.get(`${this.server}/ecredit/get-credit-detailed/${e}`).pipe(r(console.log),s(this.handleError));updateCreditDataPartial$=(e,t,n)=>this.http.patch(`${this.server}/ecredit/update-credit-partial/${e}/${t}`,n).pipe(r(console.log),s(this.handleError));addMotifAnalyse$=(e,t)=>this.http.post(`${this.server}/ecredit/addMotif/${t}`,e).pipe(r(console.log),s(this.handleError));obtenirAnalyseCompleteCredit$=e=>this.http.get(`${this.server}/ecredit/analyseComplete/${e}`).pipe(r(console.log),s(this.handleError));updateAnalyseComplet$=e=>this.http.put(`${this.server}/ecredit/analyseComplet/update`,e).pipe(r(console.log),s(this.handleError));createStock$=e=>this.http.post(`${this.server}/ecredit/stock`,e).pipe(r(console.log),s(this.handleError));updateStock$=(e,t)=>this.http.put(`${this.server}/ecredit/stock/${e}`,t).pipe(r(console.log),s(this.handleError));updateStockStatus$=(e,t)=>this.http.patch(`${this.server}/ecredit/stock/${e}/status`,t).pipe(r(console.log),s(this.handleError));getAllStockEncours$=()=>this.http.get(`${this.server}/ecredit/stock/encours`).pipe(r(console.log),s(this.handleError));getAllStock$=(e=0,t=10)=>this.http.get(`${this.server}/ecredit/stock?page=${e}&size=${t}`).pipe(r(console.log),s(this.handleError));getStockById$=e=>this.http.get(`${this.server}/ecredit/stock/${e}`).pipe(r(console.log),s(this.handleError));getStockByUser$=e=>this.http.get(`${this.server}/ecredit/stock/user/${e}`).pipe(r(console.log),s(this.handleError));getStockStatistics$=()=>this.http.get(`${this.server}/ecredit/stock/statistics`).pipe(r(console.log),s(this.handleError));approveStock$=(e,t,n)=>this.http.post(`${this.server}/ecredit/stock/${e}/approve?traitePar=${t}${n?"&observations="+n:""}`,{}).pipe(r(console.log),s(this.handleError));rejectStock$=(e,t,n,i)=>this.http.post(`${this.server}/ecredit/stock/${e}/reject?traitePar=${t}&motif=${n}${i?"&observations="+i:""}`,{}).pipe(r(console.log),s(this.handleError));getStockEncoursByDelegation$=e=>this.http.get(`${this.server}/ecredit/stock/encours/${e}`).pipe(r(console.log),s(this.handleError));getCategoriesStock$=()=>this.http.get(`${this.server}/ecredit/listCategorieStock`).pipe(r(console.log),s(this.handleError));validateCommand(e,t){let n={stateValidation:"VALIDER",observations:t||null};return this.http.put(`${this.server}/ecredit/update/stock/${e}`,n)}rejectCommand(e,t,n){let i={stateValidation:"REJETER",motif:t,observations:n||null};return this.http.put(`${this.server}/ecredit/update/stock/${e}`,i)}validateCommandDirect(e,t){let n=t?{observations:t}:{};return this.http.put(`${this.server}/ecredit/validate/${e}`,n)}rejectCommandDirect(e,t,n){let i={motif:t,observations:n||null};return this.http.put(`${this.server}/ecredit/reject/${e}`,i)}getDossierCredit$=e=>this.http.get(`${this.server}/ecredit/dossiers/${e}`).pipe(r(console.log),s(this.handleError));getClient$=e=>this.http.get(`${this.server}/ecredit/clients/${e}`).pipe(r(console.log),s(this.handleError));getClients$=()=>this.http.get(`${this.server}/ecredit/clients`).pipe(r(console.log),s(this.handleError));createClient$=e=>this.http.post(`${this.server}/ecredit/clients`,e).pipe(r(console.log),s(this.handleError));initializePrevisions$=(e,t=12)=>this.http.post(`${this.server}/ecredit/dossiers/${e}/previsions/init?nbMois=${t}`,{}).pipe(r(console.log),s(this.handleError));getPrevisionById$=e=>this.http.get(`${this.server}/ecredit/previsions/${e}`).pipe(r(console.log),s(this.handleError));getPrevisionsTresorerie$=e=>this.http.get(`${this.server}/ecredit/dossiers/${e}/previsions`).pipe(r(console.log),s(this.handleError));updatePrevisionsTresorerie$=(e,t)=>this.http.put(`${this.server}/ecredit/previsions/${e}`,t).pipe(r(console.log),s(this.handleError));importPrevisionsTresorerie$=(e,t)=>this.http.post(`${this.server}/ecredit/previsions/${e}/import`,t).pipe(r(console.log),s(this.handleError));exportPrevisionsTresorerie$=e=>this.http.get(`${this.server}/ecredit/previsions/${e}/export`,{responseType:"blob"}).pipe(s(this.handleError));analyserCapaciteRemboursement$=e=>this.http.get(`${this.server}/ecredit/previsions/${e}/analyse`).pipe(r(console.log),s(this.handleError));getCategoriesEncaissement$=()=>this.http.get(`${this.server}/ecredit/categories/encaissement`).pipe(r(console.log),s(this.handleError));getCategoriesDecaissement$=()=>this.http.get(`${this.server}/ecredit/categories/decaissement`).pipe(r(console.log),s(this.handleError));savePrevisionsTresorerie$=(e,t)=>!e||e===0?d(()=>new Error("ID du dossier invalide")):this.http.post(`${this.server}/ecredit/dossiers/${e}/previsions`,t).pipe(r(console.log),s(this.handleError));createDossierCredit$=e=>this.http.post(`${this.server}/ecredit/dossiers`,e).pipe(r(console.log),s(this.handleError));getDossiersByClient$=e=>this.http.get(`${this.server}/ecredit/clients/${e}/dossiers`).pipe(r(console.log),s(this.handleError));getLignesEncaissement$=e=>this.http.get(`${this.server}/ecredit/previsions/${e}/encaissements`).pipe(r(console.log),s(this.handleError));getLignesDecaissement$=e=>this.http.get(`${this.server}/ecredit/previsions/${e}/decaissements`).pipe(r(console.log),s(this.handleError));saveEncaissements$=(e,t)=>this.http.post(`${this.server}/ecredit/previsions/${e}/encaissements`,t).pipe(r(console.log),s(this.handleError));saveDecaissements$=(e,t)=>this.http.post(`${this.server}/ecredit/previsions/${e}/decaissements`,t).pipe(r(console.log),s(this.handleError));addDemandeIndWithGaranties$=e=>this.http.post(`${this.server}/ecredit/addDemandeInd`,e).pipe(r(t=>{console.log("Demande avec garanties cr\xE9\xE9e:",t),t.data&&t.data.demandeId&&console.log("ID de la demande cr\xE9\xE9e:",t.data.demandeId)}),s(this.handleError));getDemandeWithGaranties$=e=>this.http.get(`${this.server}/ecredit/${e}`).pipe(r(t=>{if(console.log("Demande avec garanties r\xE9cup\xE9r\xE9e:",t),t.data&&t.data.demandeIndividuel){let n=t.data.demandeIndividuel.garanties;console.log(`Nombre de garanties: ${n?n.length:0}`)}}),s(this.handleError));getDemandesEnAttenteWithGaranties$=(e,t)=>{let n=`${this.server}/ecredit/demandes/attente`,i=[];return e&&i.push(`agenceId=${e}`),t&&i.push(`pointventeId=${t}`),i.length>0&&(n+=`?${i.join("&")}`),this.http.get(n).pipe(r(o=>console.log("Demandes en attente avec garanties:",o)),s(this.handleError))};updateStatutDemandeWithGaranties$=(e,t,n)=>this.http.put(`${this.server}/ecredit/demandes/${e}/statut?statut=${t}&codUsuarios=${n}`,{}).pipe(r(i=>console.log("Statut de la demande mis \xE0 jour:",i)),s(this.handleError));validerDemandeWithGaranties$=e=>this.http.post(`${this.server}/ecredit/demandes/${e}/valider`,{}).pipe(r(t=>console.log("Demande valid\xE9e:",t)),s(this.handleError));rejeterDemandeWithGaranties$=(e,t)=>this.http.post(`${this.server}/ecredit/demandes/${e}/rejeter`,{motif:t}).pipe(r(n=>console.log("Demande rejet\xE9e:",n)),s(this.handleError));getStatistiquesGaranties$=()=>this.http.get(`${this.server}/ecredit/demandes/statistiques/garanties`).pipe(r(e=>console.log("Statistiques des garanties:",e)),s(this.handleError));searchDemandesWithGaranties$=e=>{let t=new URLSearchParams;return Object.keys(e).forEach(n=>{let i=e[n];i!=null&&i!==""&&t.append(n,i.toString())}),this.http.get(`${this.server}/ecredit/demandes/search?${t.toString()}`).pipe(r(n=>console.log("R\xE9sultats de recherche:",n)),s(this.handleError))};exportDemandesWithGaranties$=e=>{let t=new URLSearchParams;return e&&Object.keys(e).forEach(n=>{let i=e[n];i!=null&&t.append(n,i.toString())}),this.http.get(`${this.server}/ecredit/demandes/export?${t.toString()}`,{responseType:"blob"}).pipe(r(()=>console.log("Export des demandes g\xE9n\xE9r\xE9")),s(this.handleError))};getHistoriqueDemandeWithGaranties$=e=>this.http.get(`${this.server}/ecredit/demandes/${e}/historique`).pipe(r(t=>console.log("Historique de la demande:",t)),s(this.handleError));updateGarantiesDemande$=(e,t)=>this.http.put(`${this.server}/ecredit/demandes/${e}/garanties`,{garanties:t}).pipe(r(n=>console.log("Garanties mises \xE0 jour:",n)),s(this.handleError));calculerCapaciteEmprunt$=e=>this.http.post(`${this.server}/ecredit/demandes/calculer-capacite`,{garanties:e}).pipe(r(t=>console.log("Capacit\xE9 d'emprunt calcul\xE9e:",t)),s(this.handleError));addDemandeInd$=e=>(console.warn("addDemandeInd$ est d\xE9pr\xE9ci\xE9. Utilisez addDemandeIndWithGaranties$ \xE0 la place."),this.addDemandeIndWithGaranties$(e));getAllDemandesWithGaranties$=(e,t)=>{let n=`${this.server}/ecredit/all-with-garanties`,i=[];return e&&i.push(`agenceId=${e}`),t&&i.push(`pointVenteId=${t}`),i.length>0&&(n+=`?${i.join("&")}`),this.http.get(n).pipe(r(o=>{console.log("Toutes les demandes avec garanties r\xE9cup\xE9r\xE9es:",o),o.data&&o.data.demandeAttentes&&console.log(`Nombre total de demandes: ${o.data.count}`)}),s(this.handleError))};createAvis$(e){return this.http.post(`${this.server}/ecredit/avis`,e).pipe(s(this.handleError))}getAvisByDemande$(e){return this.http.get(`${this.server}/ecredit/avis/demande/${e}`).pipe(s(this.handleError))}updateAvis$(e,t){return this.http.put(`${this.server}/ecredit/avis/${e}`,t).pipe(s(this.handleError))}deleteAvis$(e){return this.http.delete(`${this.server}/ecredit/avis/${e}`).pipe(s(this.handleError))}checkReconciliation$(e,t){let n={dateDebut:e,dateFin:t};return this.http.get(`${this.server}/ecredit/rapprochement/check`,{params:n}).pipe(s(this.handleError))}rejectDemandeIndividuel$=e=>this.http.patch(`${this.server}/ecredit/update/${e}`,{},{withCredentials:!0}).pipe(r(console.log),s(this.handleError));getFicheSignaletique$=e=>this.http.get(`${this.server}/ecredit/fiche-signaletique/${e}`).pipe(r(console.log),s(this.handleError));addPersonnePhysique$=e=>this.http.post(`${this.server}/ecredit/addPersonnePhysique`,e).pipe(r(console.log),s(this.handleError));getListPPAttente$=()=>this.http.get(`${this.server}/ecredit/listPPAttente`).pipe(r(console.log),s(this.handleError));getPersonnePhysique$=e=>this.http.get(`${this.server}/ecredit/personnePhysique/${e}`).pipe(r(console.log),s(this.handleError));rejetCorrection$=e=>this.http.post(`${this.server}/ecredit/rejetCorrection`,e).pipe(r(console.log),s(this.handleError));addMotifCorrection$=e=>this.http.post(`${this.server}/ecredit/addMotifCorrection`,e).pipe(r(console.log),s(this.handleError));updateFicheSignaletique$=e=>this.http.put(`${this.server}/ecredit/update/fiche-signaletique`,e).pipe(r(console.log),s(this.handleError));updatePersonnePhysique$(e){return this.http.put(`${this.server}/ecredit/updatePersonnePhysique`,e).pipe(r(console.log),s(this.handleError))}getFicheSignaletiqueWithSolde$=e=>this.http.get(`${this.server}/ecredit/fiche-signaletique-with-solde/${e}`).pipe(r(t=>{console.log("Fiche signal\xE9tique avec soldes r\xE9cup\xE9r\xE9e:",t),t.data?.metadata&&console.log("M\xE9tadonn\xE9es:",t.data.metadata)}),s(this.handleError));getListAgentCredit$=e=>this.http.get(`${this.server}/user/list/agent-credit/${e}`).pipe(r(t=>console.log("Liste agents cr\xE9dit:",t)),s(this.handleError));activateRotation$=e=>this.http.post(`${this.server}/user/rotation/activate`,e).pipe(r(t=>console.log("Rotation activ\xE9e:",t)),s(this.handleError));deactivateRotation$=e=>this.http.post(`${this.server}/user/rotation/deactivate/${e}`,{}).pipe(r(t=>console.log("Rotation d\xE9sactiv\xE9e:",t)),s(this.handleError));checkAgentDisponibility$=(e,t)=>this.http.get(`${this.server}/user/disponibility/${e}/${t}`).pipe(r(n=>console.log("Disponibilit\xE9 agent:",n)),s(this.handleError));handleError=e=>{console.log(e);let t="An error occurred. Please try again.";return e.error instanceof ErrorEvent?(t=`A client error occurred - ${e.error.message}`,d(()=>t)):e.error.message?(t=`${e.error.message}`,d(()=>t)):e.error.error?(t="Please login in again",d(()=>t)):d(()=>t)};getListPPRejet$=()=>this.http.get(`${this.server}/ecredit/listRejet`).pipe(r(console.log),s(this.handleError));suggererQuantite$(e,t){return this.http.put(`${this.server}/ecredit/stock/${e}/suggestion-quantite`,t).pipe(r(n=>console.log("Suggestion de quantit\xE9:",n)),s(this.handleError))}getCorrectionStatsByDelegation$=()=>this.http.get(`${this.server}/ecredit/corrections/stats/delegations`).pipe(r(console.log),s(this.handleError));getCorrectionStatsByDelegationWithPeriod$=(e,t)=>this.http.get(`${this.server}/ecredit/corrections/stats/delegations/period?dateDebut=${e}&dateFin=${t}`).pipe(r(console.log),s(this.handleError));getCorrectionStatsByAgence$=e=>this.http.get(`${this.server}/ecredit/corrections/stats/delegations/${e}/by-agency`).pipe(r(console.log),s(this.handleError));getCorrectionStatsByPointVente$=e=>this.http.get(`${this.server}/ecredit/corrections/stats/by-agency/${e}/by-point`).pipe(r(console.log),s(this.handleError));getCorrectionsByPointVente$=(e,t)=>{let n=`${this.server}/ecredit/corrections/pointvente/${e}/personnes${t?`?statut=${t}`:""}`;return this.http.get(n).pipe(r(console.log),s(this.handleError))};getCorrectionEvolutionByDay$=()=>this.http.get(`${this.server}/ecredit/corrections/evolution/by-day`).pipe(r(console.log),s(this.handleError));getCorrectionEvolutionByWeek$=()=>this.http.get(`${this.server}/ecredit/corrections/evolution/by-week`).pipe(r(console.log),s(this.handleError));garderQuantite$(e,t){let n=t?{observations:t}:{};return this.http.put(`${this.server}/ecredit/stock/${e}/garder-quantite`,n).pipe(r(i=>console.log("Quantit\xE9 conserv\xE9e:",i)),s(this.handleError))}getStockValidesPourDE$(e){return this.http.get(`${this.server}/ecredit/stock/valides-pour-de/${e}`).pipe(r(t=>console.log("Bons valid\xE9s pour DE:",t)),s(this.handleError))}getAllStockValidesPourDE$(){return this.http.get(`${this.server}/ecredit/stock/tous-valides-pour-de`).pipe(r(e=>console.log("Tous les bons valid\xE9s pour DE:",e)),s(this.handleError))}validationFinaleDE$(e,t){let n=t?{observations:t}:{};return this.http.put(`${this.server}/ecredit/stock/${e}/validation-finale-de`,n).pipe(r(i=>console.log("Validation finale DE:",i)),s(this.handleError))}getStockAcceptesPourLogistique$(){return this.http.get(`${this.server}/ecredit/stock/acceptes-logistique`).pipe(r(e=>console.log("Bons accept\xE9s pour logistique:",e)),s(this.handleError))}getStockAcceptesParDelegation$(e){return this.http.get(`${this.server}/ecredit/stock/acceptes-logistique/${e}`).pipe(r(t=>console.log("Bons accept\xE9s par d\xE9l\xE9gation:",t)),s(this.handleError))}validationLogistique$(e,t){let n=t?{observations:t}:{};return this.http.put(`${this.server}/ecredit/stock/${e}/validation-logistique`,n).pipe(r(i=>console.log("Validation logistique:",i)),s(this.handleError))}getSyntheseDelegations$=()=>this.http.get(`${this.server}/ecredit/synthese-delegations`).pipe(r(e=>console.log("Synth\xE8se d\xE9l\xE9gations:",e)),s(this.handleError));getBonsCommandeParDelegation$=e=>this.http.get(`${this.server}/ecredit/bons-commande-delegation?delegation=${encodeURIComponent(e)}`).pipe(r(t=>console.log("Bons commande d\xE9l\xE9gation:",t)),s(this.handleError));getAllDelegationsBackoffice$=()=>this.http.get(`${this.server}/ecredit/backoffice/delegations`).pipe(r(console.log),s(this.handleError));getAllEtatsDocuments$=(e=0,t=20)=>this.http.get(`${this.server}/ecredit/backoffice/etats?page=${e}&size=${t}`).pipe(r(console.log),s(this.handleError));getEtatsByDelegation$=(e,t=0,n=20,i)=>{let o=`${this.server}/ecredit/backoffice/delegations/${e}/etats?page=${t}&size=${n}`;return i&&(o+=`&statut=${i}`),this.http.get(o).pipe(r(console.log),s(this.handleError))};getEtatDocumentDetail$=e=>this.http.get(`${this.server}/ecredit/backoffice/etats/${e}/detail`).pipe(r(console.log),s(this.handleError));validerEtatDocument$=e=>this.http.put(`${this.server}/ecredit/backoffice/etats/${e}/valider`,{}).pipe(r(console.log),s(this.handleError));accepterEtatDocument$=e=>this.http.put(`${this.server}/ecredit/backoffice/etats/${e}/accepter`,{}).pipe(r(console.log),s(this.handleError));rejeterEtatDocument$=(e,t)=>this.http.put(`${this.server}/ecredit/backoffice/etats/${e}/rejeter`,{motif:t}).pipe(r(console.log),s(this.handleError));getStatsEtatsDocuments$=()=>this.http.get(`${this.server}/ecredit/backoffice/stats`).pipe(r(console.log),s(this.handleError));getListCreditParDelegation$=()=>this.http.get(`${this.server}/ecredit/listCreditParDelegation`).pipe(r(e=>{console.log("Liste cr\xE9dits par d\xE9l\xE9gation:",e),e.data?.listCreditParDelegation&&console.log(`Nombre de d\xE9l\xE9gations: ${e.data.listCreditParDelegation.length}`)}),s(this.handleError));logOut(){localStorage.removeItem("[KEY] TOKEN"),localStorage.removeItem("[KEY] REFRESH_TOKEN")}isTokenExpired=()=>{let e=this.storage.get("[KEY] TOKEN");if(!e||e===""||e==="null"||e==="undefined")return!0;try{let t=this.jwt.isTokenExpired(e);return t instanceof Promise?(console.warn("isTokenExpired returned a Promise, treating as expired."),!0):t}catch(t){return console.error("Erreur lors de la v\xE9rification d'expiration du token:",t),!0}};isAuthenticated=()=>{let e=this.storage.get("[KEY] TOKEN");if(!e||e===""||e==="null"||e==="undefined")return!1;try{return!this.jwt.isTokenExpired(e)}catch(t){return console.error("Erreur lors de la v\xE9rification d'authentification:",t),!1}};updateUserAuthorization$=(e,t)=>this.http.put(`${this.server}/user/authorization/${e}?isAuthorized=${t}`,{}).pipe(r(console.log),s(this.handleError));getUserAuthorizationStatus$=e=>this.http.get(`${this.server}/user/authorization/${e}/status`).pipe(r(console.log),s(this.handleError));getUsersByRole$=e=>this.http.get(`${this.server}/user/by-role/${e}`).pipe(r(console.log),s(this.handleError));importInfoPersonnel(e){let t=new FormData;return t.append("file",e),this.http.post(`${this.server}/ecredit/salaire/import/info-personnel`,t).pipe(s(this.handleError))}getAllInfoPersonnel(e){let t=new Date().getTime(),n=new h().set("_t",t.toString());return e&&(n=n.set("statut",e)),this.http.get(`${this.server}/ecredit/salaire/info-personnel`,{params:n})}getActiveInfoPersonnel(){return this.http.get(`${this.server}/ecredit/salaire/info-personnel/active`)}updateInfoPersonnelStatut(e,t){let n=new h().set("statut",t);return this.http.put(`${this.server}/ecredit/salaire/info-personnel/${e}/statut`,null,{params:n})}activateInfoPersonnel(e){return this.http.put(`${this.server}/ecredit/salaire/info-personnel/${e}/activate`,{})}deactivateInfoPersonnel(e){return this.http.put(`${this.server}/ecredit/salaire/info-personnel/${e}/deactivate`,{})}getInfoPersonnelByMatricule(e){return this.http.get(`${this.server}/ecredit/salaire/info-personnel/matricule/${e}`)}getInfoPersonnelById(e){return this.http.get(`${this.server}/ecredit/salaire/info-personnel/${e}`).pipe(s(this.handleError))}countInfoPersonnel(){return this.http.get(`${this.server}/ecredit/salaire/info-personnel/count`).pipe(s(this.handleError))}updateNumeroCompte(e,t){return this.http.put(`${this.server}/ecredit/info-personnel/${e}/numero-compte`,null,{params:{numeroCompte:t}})}checkNumeroCompte(e){return this.http.get(`${this.server}/ecredit/salaire/info-personnel/${e}/check-numero-compte`).pipe(s(this.handleError))}importAvanceSalaire(e){let t=new FormData;return t.append("file",e),this.http.post(`${this.server}/ecredit/salaire/import/avance-salaire`,t)}getAllAvanceSalaire(){let e=new Date().getTime();return this.http.get(`${this.server}/ecredit/salaire/avance-salaire?_t=${e}`)}getMyAvanceSalaire(){let e=new Date().getTime();return this.http.get(`${this.server}/ecredit/salaire/avance-salaire/me?_t=${e}`)}getAvanceSalaireByUser(e){return this.http.get(`${this.server}/ecredit/salaire/avance-salaire/user/${e}`).pipe(s(this.handleError))}getAvanceSalaireById(e){return this.http.get(`${this.server}/ecredit/salaire/avance-salaire/${e}`).pipe(s(this.handleError))}getAvanceSalaireByMatricule(e){return this.getAllAvanceSalaire().pipe(R(t=>{if(t.data?.avances){let i=t.data.avances.find(o=>o.matricule===e);if(i)return m($({},t),{data:m($({},t.data),{avance:i})})}throw{status:404,message:"Aucune avance trouv\xE9e pour ce matricule"}}))}getAvanceSalaireByStatut(e){return this.http.get(`${this.server}/ecredit/salaire/avance-salaire/statut/${e}`).pipe(s(this.handleError))}updateAvanceSalaireStatut(e,t){return this.http.put(`${this.server}/ecredit/salaire/avance-salaire/${e}/statut?statut=${t}`,{}).pipe(s(this.handleError))}deleteAvanceSalaireByUser(e){return this.http.delete(`${this.server}/ecredit/salaire/avance-salaire/user/${e}`).pipe(s(this.handleError))}truncateAvanceSalaire(){return this.http.delete(`${this.server}/ecredit/salaire/avance-salaire/truncate`).pipe(s(this.handleError))}createDemandeSalary(e,t,n){let i=new h().set("matricule",e).set("amount",t.toString());return n&&(i=i.set("numeroCompte",n)),this.http.post(`${this.server}/ecredit/salaire/demande-salary`,null,{params:i})}getAllDemandeSalary(){return this.http.get(`${this.server}/ecredit/salaire/demande-salary`).pipe(s(this.handleError))}getMyDemandeSalary(){let e=new Date().getTime();return this.http.get(`${this.server}/ecredit/salaire/demande-salary/me?_t=${e}`)}getDemandeSalaryById(e){return this.http.get(`${this.server}/ecredit/salaire/demande-salary/${e}`).pipe(s(this.handleError))}getDemandeSalaryByStatut(e){let t=new Date().getTime();return this.http.get(`${this.server}/ecredit/salaire/demande-salary/statut/${e}?_t=${t}`)}annulerDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/${e}/annuler`,{}).pipe(s(this.handleError))}rejeterDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/${e}/rejeter`,{}).pipe(s(this.handleError))}validerDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/${e}/valider`,{}).pipe(s(this.handleError))}confirmerDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/${e}/confirmer`,{}).pipe(s(this.handleError))}createMyDemandeSalary(e,t){let n=new h().set("amount",e.toString());return t&&(n=n.set("numeroCompte",t)),this.http.post(`${this.server}/ecredit/salaire/demande-salary/me`,null,{params:n})}validerMultipleDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/valider-multiple`,e)}getDemandesGroupedByDate(e){let t=new Date().getTime(),n=new h().set("statut",e).set("_t",t.toString());return this.http.get(`${this.server}/ecredit/salaire/demande-salary/grouped-by-date`,{params:n})}confirmerMultipleDemandeSalary(e){return this.http.put(`${this.server}/ecredit/salaire/demande-salary/confirmer-multiple`,e)}exportDemandesExcel(e){return this.http.post(`${this.server}/ecredit/salaire/demande-salary/export-excel`,e||[],{responseType:"blob"})}exportAllConfirmedDemandesExcel(){return this.http.get(`${this.server}/ecredit/salaire/demande-salary/export-excel/confirmer`,{responseType:"blob"})}getAuthorizeSalaire(){let e=new Date().getTime();return this.http.get(`${this.server}/ecredit/salaire/authorize?_t=${e}`)}updateAuthorizeSalaire(e,t){let n=new h().set("isAuthorized",e.toString());return t&&(n=n.set("message",t)),this.http.put(`${this.server}/ecredit/salaire/authorize`,null,{params:n})}enableAuthorizeSalaire(){return this.http.put(`${this.server}/ecredit/salaire/authorize/enable`,{})}disableAuthorizeSalaire(){return this.http.put(`${this.server}/ecredit/salaire/authorize/disable`,{})}getAllArretesForSuivi$(){return this.http.get(`${this.server}/ecredit/arrete-caisse/suivi`)}getLatestArretesByPointvente$(){return this.http.get(`${this.server}/ecredit/arrete-caisse/suivi/latest`)}parseDate(e){if(!e)return null;if(Array.isArray(e)){let[t,n,i,o=0,l=0,p=0]=e;return new Date(t,n-1,i,o,l,p)}return new Date(e)}formatDate(e){let t=this.parseDate(e);if(!t)return"-";let n=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${n}/${i}/${o}`}formatDateTime(e){let t=this.parseDate(e);if(!t)return"-";let n=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear(),l=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0");return`${n}/${i}/${o} ${l}:${p}`}formatMontant(e){return new Intl.NumberFormat("fr-FR").format(e)+" GNF"}static \u0275fac=function(t){return new(t||a)};static \u0275prov=c({token:a,factory:a.\u0275fac})};export{v as a,D as b};
